##
TAG_CHARSET=@€ιθη
##
HELPDESK_HISTORIQUE
=SQL IFNOTEXIST=HELPDESK_HISTORIQUE=INDICATEURPERSSONEL=
ALTER TABLE HELPDESK_HISTORIQUE ADD INDICATEURPERSSONEL varchar2(20)
##
HELPDESK_HISTORIQUE
=SQL=
BEGIN
EXECUTE IMMEDIATE 'CREATE TABLE HELPDESK_HISTORIQUE_inter
  (
    CODFICHE           NUMBER NOT NULL ENABLE,
    DATEEVT            VARCHAR2(20)  NOT NULL ENABLE,
    LIBFICHE           VARCHAR2(400),
    DATEFICHE          VARCHAR2(20),
    AUTEURFICHE        VARCHAR2(100),
    TYPFICHE           VARCHAR2(1),
    GRAVFICHE          VARCHAR2(1),
    DATBUTFICHE        VARCHAR2(8),
    TYPDOM             VARCHAR2(3),
    CODMOD             NUMBER,
    DESCFICHE          VARCHAR2(4000),
    CODSTA             NUMBER,
    DATEPLANIFINIT     VARCHAR2(10),
    DATEPLANIFACT      VARCHAR2(8),
    COMRD              VARCHAR2(4000),
    FILEJOIN           VARCHAR2(255),
    INDICATEURPLANIF   VARCHAR2(20),
    RESPNIV1           VARCHAR2(150),
    CODEUSER           VARCHAR2(100),
    MATRIC             VARCHAR2(32),
    DATEMODIF          VARCHAR2(20),
    MATRICBENEFICIAIRE VARCHAR2(32),
    LASTUSER           VARCHAR2(200),
    CODFICHELIEE       NUMBER,
    FICHEORIGINE       VARCHAR2(1),
    PRIORITE           VARCHAR2(1),
    INDICATEURPERSSONEL varchar2(20),
    NUMFICHE_ESERVICE  VARCHAR2(13),
    NUMPAC             VARCHAR2(10),
    ISUX               VARCHAR2(2),
    MATRIC_ESCALADE    VARCHAR2(32),
    COMRRH             VARCHAR2(4000),
	NOTIFICATIONINDICATOR VARCHAR(5)
  )';
 
 EXECUTE IMMEDIATE 'INSERT
INTO HELPDESK_HISTORIQUE_inter
  (
    CODFICHE,
    DATEEVT,
    LIBFICHE ,
    DATEFICHE,
    AUTEURFICHE,
    TYPFICHE ,
    GRAVFICHE ,
    DATBUTFICHE,
    TYPDOM ,
    CODMOD,
    DESCFICHE,
    CODSTA,
    DATEPLANIFINIT,
    DATEPLANIFACT ,
    COMRD ,
    FILEJOIN,
    INDICATEURPLANIF,
    RESPNIV1,
    CODEUSER ,
    MATRIC ,
    DATEMODIF,
    MATRICBENEFICIAIRE,
    LASTUSER ,
    CODFICHELIEE,
    FICHEORIGINE ,
    PRIORITE ,
    INDICATEURPERSSONEL,
    NUMFICHE_ESERVICE ,
      NUMPAC ,
      ISUX ,
      MATRIC_ESCALADE ,
      COMRRH,
      NOTIFICATIONINDICATOR
  )
  (SELECT hh.CODFICHE,
  hh.DATEEVT,
      hh.LIBFICHE ,
      hh.DATEFICHE,
      hh.AUTEURFICHE,
      hh.TYPFICHE ,
      hh.GRAVFICHE ,
      hh.DATBUTFICHE,
      hh.TYPDOM ,
      hh.CODMOD,
      hh.DESCFICHE,
      hh.CODSTA,
      hh.DATEPLANIFINIT,
      hh.DATEPLANIFACT ,
      hh.COMRD ,
      hh.FILEJOIN,
      hh.INDICATEURPLANIF,
      hh.RESPNIV1,
      hh.CODEUSER ,
      hh.MATRIC ,
      hh.DATEMODIF,
      hh.MATRICBENEFICIAIRE,
      hh.LASTUSER ,
      hh.CODFICHELIEE,
      hh.FICHEORIGINE ,
      hh.PRIORITE ,
      hh.INDICATEURPERSSONEL,
        hf.NUMFICHE_ESERVICE ,
        hf.NUMPAC ,
        hf.ISUX ,
        hf.MATRIC_ESCALADE ,
        hf.COMRRH,
       hf.NOTIFICATIONINDICATOR
	
    FROM HELPDESK_HISTORIQUE hh LEFT OUTER JOIN HELPDESK_FICHE hf
    on hh.CODFICHE=hf.CODFICHE)';
    
    EXECUTE IMMEDIATE 'rename HELPDESK_HISTORIQUE to HELPDESK_HISTORIQUE_tmp';
    EXECUTE IMMEDIATE 'rename HELPDESK_HISTORIQUE_inter to HELPDESK_HISTORIQUE';
    
    EXECUTE IMMEDIATE 'DROP TABLE HELPDESK_HISTORIQUE_tmp';
    EXECUTE IMMEDIATE 'COMMIT' ;
   
END;
##
HELPDESK_HISTORIQUE
=SQL IFNOTEXIST=HELPDESK_HISTORIQUE=COMCOLLAB=
ALTER TABLE HELPDESK_HISTORIQUE ADD COMCOLLAB varchar2(4000)
