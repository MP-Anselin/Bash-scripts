##
TAG_CHARSET=@€ιθη
##
GET_CONTRAT_HISTO_HORS_TRANSAC
=SQL=
CREATE OR REPLACE FUNCTION GET_CONTRAT_HISTO_HORS_TRANSAC(p_numpac VARCHAR2, p_pacmat VARCHAR2, p_numcnt NUMBER, p_dateEff DATE, p_useBetween BOOLEAN DEFAULT FALSE) RETURN DIC_ADM_CONTRAT_HISTO%ROWTYPE IS 
PRAGMA AUTONOMOUS_TRANSACTION; 
retour DIC_ADM_CONTRAT_HISTO%ROWTYPE; 
BEGIN 
  IF p_useBetween THEN
    SELECT * INTO retour FROM DIC_ADM_CONTRAT_HISTO WHERE NUMPAC=p_numpac AND PACMAT=p_pacmat AND NUMCNT=p_numcnt AND p_dateEff BETWEEN DATE_EFF AND DATE_FIN;
  ELSE
    SELECT * INTO retour FROM DIC_ADM_CONTRAT_HISTO WHERE NUMPAC=p_numpac AND PACMAT=p_pacmat AND NUMCNT=p_numcnt AND DATE_EFF=p_dateEff;
  END IF;
  RETURN retour;
EXCEPTION
  WHEN OTHERS THEN RETURN NULL;
END GET_CONTRAT_HISTO_HORS_TRANSAC;
