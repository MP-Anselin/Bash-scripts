##
TAG_CHARSET=@€ιθη
##
GET_DACH_MULTI_HORS_TRANSAC
=SQL=
DECLARE
  v_count NUMBER;
BEGIN
  SELECT COUNT(*) INTO v_count FROM USER_OBJECTS WHERE OBJECT_NAME='GET_DACH_MULTI_HORS_TRANSAC' AND OBJECT_TYPE='FUNCTION' AND STATUS='VALID';
  IF v_count = 0 THEN
    EXECUTE_IMMEDIATE_STRING('CREATE OR REPLACE FUNCTION GET_DACH_MULTI_HORS_TRANSAC(p_listeClesIdxContrat T_CLES_IDX_CONTRAT_HISTO) RETURN T_TAB_DACH IS 
PRAGMA AUTONOMOUS_TRANSACTION; 
retour T_TAB_DACH; 
BEGIN 
  SELECT T_LIG_DACH(NUMPAC, PACMAT, NUMCNT, DATE_EFF) BULK COLLECT INTO retour FROM DIC_ADM_CONTRAT_HISTO WHERE (NUMPAC,PACMAT,NUMCNT,DATE_EFF) IN (SELECT NUMPAC, PACMAT, NUMCNT, DATE_IDX FROM TABLE( p_listeClesIdxContrat )) ORDER BY MATRIC, DATE_EFF;
  RETURN retour;
EXCEPTION
  WHEN OTHERS THEN RETURN T_TAB_DACH();
END GET_DACH_MULTI_HORS_TRANSAC;', 0);
  END IF;
END;
