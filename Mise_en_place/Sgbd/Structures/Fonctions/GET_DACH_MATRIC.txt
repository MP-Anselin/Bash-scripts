##
TAG_CHARSET=@€ιθη
##
GET_DACH_MATRIC
=SQL=
DECLARE
  v_count NUMBER;
BEGIN
  SELECT COUNT(*) INTO v_count FROM USER_OBJECTS WHERE OBJECT_NAME='GET_DACH_MATRIC' AND OBJECT_TYPE='FUNCTION' AND STATUS='VALID';
  IF v_count = 0 THEN
    EXECUTE_IMMEDIATE_STRING ('CREATE OR REPLACE FUNCTION GET_DACH_MATRIC(p_matric VARCHAR2) RETURN T_TAB_DACH IS 
retour T_TAB_DACH; 
BEGIN 
  SELECT T_LIG_DACH(NUMPAC, PACMAT, NUMCNT, DATE_EFF) BULK COLLECT INTO retour FROM DIC_ADM_CONTRAT_HISTO WHERE MATRIC=p_matric ORDER BY DATE_EFF;
  RETURN retour;
EXCEPTION
  WHEN OTHERS THEN RETURN T_TAB_DACH();
END GET_DACH_MATRIC;',0);
  END IF;
END;
