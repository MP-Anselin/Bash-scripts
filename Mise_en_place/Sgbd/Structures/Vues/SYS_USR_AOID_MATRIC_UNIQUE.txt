##
TAG_CHARSET=@€ιθη
##
SYS_USR_AOID_MATRIC_UNIQUE
=SQL=
CREATE OR REPLACE FORCE VIEW SYS_USR_AOID_MATRIC_UNIQUE (AOID, MATRIC) AS 
SELECT DISTINCT FIRST_VALUE(AOID) OVER (PARTITION BY MATRIC ORDER BY CASE WHEN AOID LIKE '%-%' THEN 1 ELSE 2 END, AOID) AS AOID, MATRIC FROM (
  SELECT AOID, MATRIC FROM SYS_USR_AOID_MATRIC WHERE MATRIC IS NOT NULL 
  UNION ALL 
  SELECT LOGIN AS AOID, REQUETEMATRIC AS MATRIC FROM SYS_USR_CONFIG WHERE REQUETEMATRIC IS NOT NULL AND REQUETEMATRIC NOT IN (SELECT MATRIC FROM SYS_USR_AOID_MATRIC WHERE MATRIC IS NOT NULL)
)
