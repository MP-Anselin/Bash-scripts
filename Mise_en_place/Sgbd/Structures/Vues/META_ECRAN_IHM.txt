##
META_ECRAN_IHM
=SQL=
CREATE OR REPLACE FORCE VIEW META_ECRAN_IHM (COMPANY_ID, NOM_PAGE, LIBELLE_PAGE, COMPLEMENT_LIBELLE, CODE_DESTINATION, ROLE_ECRAN, NOM_DICTIONNAIRE, MODULE_ECRAN, BOUTONS_ECRAN, ID_GROUPE_DONNEES, TYPE_ECRAN, NOM_SERVICELET, ID_PROJET, NUM_VERSION_RD, EST_SUPPRIME, PERSONNALISE) AS 
  SELECT COMPANY_ID,
    NOM_PAGE,
    LIBELLE_PAGE,
    NULL AS COMPLEMENT_LIBELLE,
    CODE_DESTINATION,
    ROLE_ECRAN,
    NOM_DICTIONNAIRE,
    MODULE_ECRAN,
    BOUTONS_ECRAN,
    ID_GROUPE_DONNEES,
    TYPE_ECRAN,
    NOM_SERVICELET,
    ID_PROJET,
    NUM_VERSION_RD,
    EST_SUPPRIME,
    PERSONNALISE
  FROM META_ECRAN
  UNION ALL
  SELECT COMPANY_ID,
    'GEN_PAGE_RECAP_'||OP_NUM||'_'||ID_GEN_PAGE AS NOM_PAGE,
    NVL(LIBELLE_ECRAN_RECAP,'Récapitulatif') AS LIBELLE_PAGE,
    '('||OP_NUM||') '||(SELECT ME.OP_LIBELLE FROM WKF_OPERATIONS ME WHERE ME.OP_NUM = META_WKF_OPERATION_ECRANS.OP_NUM AND ME.COMP_WEB='_PARAM_DYN_') AS COMPLEMENT_LIBELLE,
    'WorkflowParamDyn' AS CODE_DESTINATION,
    '' AS ROLE_ECRAN,
    '' AS NOM_DICTIONNAIRE,
    ''||OP_NUM AS MODULE_ECRAN,
    NULL AS BOUTONS_ECRAN,
    RECAP_ID_GROUPE_1 AS ID_GROUPE_DONNEES,
    'W' AS TYPE_ECRAN,
    NULL AS NOM_SERVICELET,
    (SELECT ID_PROJET FROM META_WKF_OPERATION_ECRANS_INFO WHERE META_WKF_OPERATION_ECRANS_INFO.COMPANY_ID=META_WKF_OPERATION_ECRANS.COMPANY_ID AND META_WKF_OPERATION_ECRANS_INFO.OP_NUM=META_WKF_OPERATION_ECRANS.OP_NUM) AS ID_PROJET,
    (SELECT NUM_VERSION_RD FROM META_WKF_OPERATION_ECRANS_INFO WHERE META_WKF_OPERATION_ECRANS_INFO.COMPANY_ID=META_WKF_OPERATION_ECRANS.COMPANY_ID AND META_WKF_OPERATION_ECRANS_INFO.OP_NUM=META_WKF_OPERATION_ECRANS.OP_NUM) AS NUM_VERSION_RD,
    NULL AS EST_SUPPRIME,
    NULL AS PERSONNALISE
  FROM META_WKF_OPERATION_ECRANS
  WHERE TYPE_ECRAN='RECAP' AND RECAP_ID_GROUPE_1 IS NOT NULL
  UNION ALL
  SELECT COMPANY_ID,
    'GEN_PAGE_RECAP_'||OP_NUM||'_'||ID_GEN_PAGE AS NOM_PAGE,
    NVL(LIBELLE_ECRAN_RECAP,'Récapitulatif') AS LIBELLE_PAGE,
    '('||OP_NUM||') '||(SELECT ME.OP_LIBELLE FROM WKF_OPERATIONS ME WHERE ME.OP_NUM = META_WKF_OPERATION_ECRANS.OP_NUM AND ME.COMP_WEB='_PARAM_DYN_') AS COMPLEMENT_LIBELLE,
    'WorkflowParamDyn' AS CODE_DESTINATION,
    '' AS ROLE_ECRAN,
    '' AS NOM_DICTIONNAIRE,
    ''||OP_NUM AS MODULE_ECRAN,
    NULL AS BOUTONS_ECRAN,
    RECAP_ID_GROUPE_2 AS ID_GROUPE_DONNEES,
    'W' AS TYPE_ECRAN,
    NULL AS NOM_SERVICELET,
    (SELECT ID_PROJET FROM META_WKF_OPERATION_ECRANS_INFO WHERE META_WKF_OPERATION_ECRANS_INFO.COMPANY_ID=META_WKF_OPERATION_ECRANS.COMPANY_ID AND META_WKF_OPERATION_ECRANS_INFO.OP_NUM=META_WKF_OPERATION_ECRANS.OP_NUM) AS ID_PROJET,
    (SELECT NUM_VERSION_RD FROM META_WKF_OPERATION_ECRANS_INFO WHERE META_WKF_OPERATION_ECRANS_INFO.COMPANY_ID=META_WKF_OPERATION_ECRANS.COMPANY_ID AND META_WKF_OPERATION_ECRANS_INFO.OP_NUM=META_WKF_OPERATION_ECRANS.OP_NUM) AS NUM_VERSION_RD,
    NULL AS EST_SUPPRIME,
    NULL AS PERSONNALISE
  FROM META_WKF_OPERATION_ECRANS
  WHERE TYPE_ECRAN='RECAP' AND RECAP_ID_GROUPE_2 IS NOT NULL
