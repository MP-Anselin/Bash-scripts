##
META_GROUPEDONNEES_CROISES
=SQL=
CREATE OR REPLACE VIEW META_GROUPEDONNEES_CROISES AS
 SELECT 
	 A.COMPANY_ID,
	 A.ID_GROUPE,
	 A.LIBELLE_GROUPE,
	 Z.NOM_OBJET,
	 Z.UTILISATION,
	 Z.DESCRIPTION,
	 A.EST_SUPPRIME
 
 FROM
 (
SELECT
 
 'GROUPE' AS UTILISATION,
 META_GROUPE_DONNEES.ID_GROUPE AS NOM_OBJET,
 META_GROUPE_DONNEES.SUFFIXE_OU_LIBELLE AS ID_GROUPE,
 META_GROUPE_DONNEES.COMPANY_ID,
 META_GROUPE_DONNEES_INFO.LIBELLE_GROUPE AS DESCRIPTION
 
 FROM META_GROUPE_DONNEES  JOIN META_GROUPE_DONNEES_INFO ON META_GROUPE_DONNEES_INFO.ID_GROUPE = META_GROUPE_DONNEES.ID_GROUPE AND META_GROUPE_DONNEES_INFO.COMPANY_ID= META_GROUPE_DONNEES.COMPANY_ID   WHERE META_GROUPE_DONNEES.NOM_DONNEE LIKE '#GROUPE%'
 
 
 UNION ALL
 SELECT
 
 'ECRAN' AS UTILISATION,
 NOM_PAGE AS NOM_OBJET,
 ID_GROUPE_DONNEES AS ID_GROUPE,
 COMPANY_ID,
 LIBELLE_PAGE AS DESCRIPTION
 
 FROM META_ECRAN
 
 UNION ALL
 SELECT distinct
 
 'WORKFLOW ECRITURE' AS UTILISATION,
 ''||OP_NUM||'' AS NOM_OBJET,
 ID_GROUPE_ECRITURE AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE META_WKF_OPERATION_ECRANS_INFO.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM META_WKF_OPERATION_ECRANS_INFO
 where ID_GROUPE_ECRITURE is not null
 UNION ALL
 SELECT distinct
 
 'WORKFLOW INITIALISATION ' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECHERCHE_ID_GROUPE_LECTURE AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE META_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM META_WKF_OPERATION_ECRANS
 where TYPE_ECRAN='RECH' AND RECHERCHE_ID_GROUPE_LECTURE is not null
 UNION ALL
 
 SELECT distinct
 
 'WORKFLOW RAPPEL DE SAISIE' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECHERCHE_ID_GROUPE_LECTURE AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE META_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM META_WKF_OPERATION_ECRANS
 where TYPE_ECRAN <> 'RECH' AND RECHERCHE_ID_GROUPE_LECTURE is not null
 
 UNION ALL
 SELECT distinct
 
 'WORKFLOW RECAP 1' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECAP_ID_GROUPE_1 AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE META_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM META_WKF_OPERATION_ECRANS
 where RECAP_ID_GROUPE_1 is not null
 UNION ALL
 SELECT distinct
 
 'WORKFLOW RECAP 2' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECAP_ID_GROUPE_2 AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE META_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 FROM META_WKF_OPERATION_ECRANS
 where RECAP_ID_GROUPE_2 is not null
 UNION ALL
 SELECT
 
 'NON UTILISE' AS UTILISATION,
 '' AS NOM_OBJET,
 ID_GROUPE AS ID_GROUPE,
 COMPANY_ID,
 '' AS DESCRIPTION
 
 FROM META_GROUPE_DONNEES_INFO
 
 WHERE ID_GROUPE NOT IN (
 
 SELECT DISTINCT(ID_GROUPE_ECRITURE) FROM META_WKF_OPERATION_ECRANS_INFO  WHERE META_GROUPE_DONNEES_INFO.COMPANY_ID = META_WKF_OPERATION_ECRANS_INFO.COMPANY_ID
 UNION ALL
 SELECT DISTINCT(SUFFIXE_OU_LIBELLE) FROM META_GROUPE_DONNEES WHERE NOM_DONNEE LIKE '#GROUPE%' AND META_GROUPE_DONNEES_INFO.COMPANY_ID = META_GROUPE_DONNEES.COMPANY_ID
 UNION ALL
 SELECT DISTINCT(ID_GROUPE_DONNEES) FROM META_ECRAN WHERE  META_GROUPE_DONNEES_INFO.COMPANY_ID = META_ECRAN.COMPANY_ID and ID_GROUPE_DONNEES is not null
 UNION ALL
 SELECT DISTINCT( RECHERCHE_ID_GROUPE_LECTURE) FROM META_WKF_OPERATION_ECRANS WHERE META_WKF_OPERATION_ECRANS.COMPANY_ID = META_GROUPE_DONNEES_INFO.COMPANY_ID  and RECHERCHE_ID_GROUPE_LECTURE is not null
 UNION ALL
 SELECT DISTINCT( RECAP_ID_GROUPE_1) FROM META_WKF_OPERATION_ECRANS WHERE META_WKF_OPERATION_ECRANS.COMPANY_ID = META_GROUPE_DONNEES_INFO.COMPANY_ID     and RECAP_ID_GROUPE_1 is not null
 UNION ALL
 SELECT DISTINCT( RECAP_ID_GROUPE_2) FROM META_WKF_OPERATION_ECRANS WHERE META_WKF_OPERATION_ECRANS.COMPANY_ID = META_GROUPE_DONNEES_INFO.COMPANY_ID   and RECAP_ID_GROUPE_2 is not null
 )
 
 
 )
 Z,
 META_GROUPE_DONNEES_INFO A
 WHERE
 Z.ID_GROUPE(+) = A.ID_GROUPE  AND A.COMPANY_ID= Z.COMPANY_ID  ORDER BY A.ID_GROUPE
