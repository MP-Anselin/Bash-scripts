##
REF_GROUPES_DONNEES
=SQL=
CREATE OR REPLACE FORCE VIEW "REF_GROUPES_DONNEES" ("COMPANY_ID", "ID_GROUPE", "LIBELLE_GROUPE", "NOM_OBJET", "UTILISATION", "DESCRIPTION", "EST_SUPPRIME", "IS_VISIBLE", "DEGRE_LIBERTE") AS 
  SELECT
 A.COMPANY_ID,
 A.ID_GROUPE,
 A.LIBELLE_GROUPE,
 Z.NOM_OBJET,
 Z.UTILISATION,
 Z.DESCRIPTION,
 A.EST_SUPPRIME,
 A.IS_VISIBLE,
 A.DEGRE_LIBERTE
 
 FROM
 (
 SELECT
 
 'GROUPE' AS UTILISATION,
 REF_GROUPE_DONNEES.ID_GROUPE AS NOM_OBJET,
 REF_GROUPE_DONNEES.SUFFIXE_OU_LIBELLE AS ID_GROUPE,
 REF_GROUPE_DONNEES.COMPANY_ID,
 REF_GROUPE_DONNEES_INFO.LIBELLE_GROUPE AS DESCRIPTION
 
 FROM REF_GROUPE_DONNEES  JOIN REF_GROUPE_DONNEES_INFO ON REF_GROUPE_DONNEES_INFO.ID_GROUPE = REF_GROUPE_DONNEES.ID_GROUPE AND REF_GROUPE_DONNEES_INFO.COMPANY_ID= REF_GROUPE_DONNEES.COMPANY_ID   WHERE REF_GROUPE_DONNEES.NOM_DONNEE LIKE '#GROUPE%'
 
 
 UNION ALL
 SELECT
 
 'ECRAN' AS UTILISATION,
 NOM_PAGE AS NOM_OBJET,
 ID_GROUPE_DONNEES AS ID_GROUPE,
 COMPANY_ID,
 LIBELLE_PAGE AS DESCRIPTION
 
 FROM REF_ECRAN
 
 UNION ALL
 SELECT distinct
 
 'WORKFLOW ECRITURE' AS UTILISATION,
 ''||OP_NUM||'' AS NOM_OBJET,
 ID_GROUPE_ECRITURE AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE REF_WKF_OPERATION_ECRANS_INFO.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM REF_WKF_OPERATION_ECRANS_INFO
 where ID_GROUPE_ECRITURE is not null
 UNION ALL
 SELECT distinct
 
 'WORKFLOW INITIALISATION ' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECHERCHE_ID_GROUPE_LECTURE AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE REF_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM REF_WKF_OPERATION_ECRANS
 where TYPE_ECRAN='RECH' AND RECHERCHE_ID_GROUPE_LECTURE is not null
 UNION ALL
 
 SELECT distinct
 
 'WORKFLOW RAPPEL DE SAISIE' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECHERCHE_ID_GROUPE_LECTURE AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE REF_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM REF_WKF_OPERATION_ECRANS
 where TYPE_ECRAN <> 'RECH' AND RECHERCHE_ID_GROUPE_LECTURE is not null
 
 UNION ALL
 SELECT distinct
 
 'WORKFLOW RECAP 1' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECAP_ID_GROUPE_1 AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE REF_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 
 FROM REF_WKF_OPERATION_ECRANS
 where RECAP_ID_GROUPE_1 is not null
 UNION ALL
 SELECT distinct
 
 'WORKFLOW RECAP 2' AS UTILISATION,
 ''||OP_NUM||' '||ECRAN_NOM_PAGE||'' AS NOM_OBJET,
 RECAP_ID_GROUPE_2 AS ID_GROUPE,
 COMPANY_ID ,
 ( SELECT  WKF_OPERATIONS.OP_LIBELLE FROM WKF_OPERATIONS WHERE REF_WKF_OPERATION_ECRANS.OP_NUM = WKF_OPERATIONS.OP_NUM ) AS DESCRIPTION
 FROM REF_WKF_OPERATION_ECRANS
 where RECAP_ID_GROUPE_2 is not null
 UNION ALL
 SELECT
 
 'NON UTILISE' AS UTILISATION,
 '' AS NOM_OBJET,
 ID_GROUPE AS ID_GROUPE,
 COMPANY_ID,
 '' AS DESCRIPTION
 
 FROM REF_GROUPE_DONNEES_INFO
 
 WHERE ID_GROUPE NOT IN (
 
 SELECT DISTINCT(ID_GROUPE_ECRITURE) FROM REF_WKF_OPERATION_ECRANS_INFO  WHERE REF_GROUPE_DONNEES_INFO.COMPANY_ID = REF_WKF_OPERATION_ECRANS_INFO.COMPANY_ID
 UNION ALL
 SELECT DISTINCT(SUFFIXE_OU_LIBELLE) FROM REF_GROUPE_DONNEES WHERE NOM_DONNEE LIKE '#GROUPE%' AND REF_GROUPE_DONNEES_INFO.COMPANY_ID = REF_GROUPE_DONNEES.COMPANY_ID
 UNION ALL
 SELECT DISTINCT(ID_GROUPE_DONNEES) FROM REF_ECRAN WHERE  REF_GROUPE_DONNEES_INFO.COMPANY_ID = REF_ECRAN.COMPANY_ID and ID_GROUPE_DONNEES is not null
 UNION ALL
 SELECT DISTINCT( RECHERCHE_ID_GROUPE_LECTURE) FROM REF_WKF_OPERATION_ECRANS WHERE REF_WKF_OPERATION_ECRANS.COMPANY_ID = REF_GROUPE_DONNEES_INFO.COMPANY_ID  and RECHERCHE_ID_GROUPE_LECTURE is not null
 UNION ALL
 SELECT DISTINCT( RECAP_ID_GROUPE_1) FROM REF_WKF_OPERATION_ECRANS WHERE REF_WKF_OPERATION_ECRANS.COMPANY_ID = REF_GROUPE_DONNEES_INFO.COMPANY_ID     and RECAP_ID_GROUPE_1 is not null
 UNION ALL
 SELECT DISTINCT( RECAP_ID_GROUPE_2) FROM REF_WKF_OPERATION_ECRANS WHERE REF_WKF_OPERATION_ECRANS.COMPANY_ID = REF_GROUPE_DONNEES_INFO.COMPANY_ID   and RECAP_ID_GROUPE_2 is not null
 )
 
 
 )
 Z,
 REF_GROUPE_DONNEES_INFO A
 WHERE
 Z.ID_GROUPE(+) = A.ID_GROUPE  AND A.COMPANY_ID= Z.COMPANY_ID  ORDER BY A.ID_GROUPE
