##
REF_OBJ_LIVRABLES
=SQL=
CREATE OR REPLACE FORCE VIEW "REF_LIVRABLES" ("NUM_LIVRABLE", "COMPANY_ID", "DATE_LIVRABLE", "NOM_PRENOM",  "RAPPORT", "ETAPE", "DESCRIPTION","VERSION_MODELE") AS 
  (
SELECT LIV.NUM_LIVRABLE,
  COMPANY_ID,
  DATE_LIVRABLE,
  (SELECT PRENOM    ||' '    || NOM  FROM SYS_COLLABORATEURS  WHERE matric= USER_LIVRABLE  ) as NOM_PRENOM,
  CASE  WHEN RAPPORT IS NULL   THEN 'no' ELSE 'ok'  END AS RAPPORT,
  CASE
    WHEN STATUS ='E1'    THEN 'Etape 1/11'
    WHEN STATUS ='E2'    THEN 'Etape 2/11'
    WHEN STATUS ='E3'    THEN 'Etape 3/11'
    WHEN STATUS ='E4'    THEN 'Etape 4/11'
    WHEN STATUS ='E5'    THEN 'Etape 5/11'
    WHEN STATUS ='E6'    THEN 'Etape 6/11'
    WHEN STATUS ='E7'    THEN 'Etape 7/11'
    WHEN STATUS ='E8'    THEN 'Etape 8/11'
    WHEN STATUS ='E9'   THEN 'Etape 9/11'
    WHEN STATUS ='E10'   THEN 'Etape 10/11'
    WHEN STATUS ='F'    THEN 'Terminé'
    ELSE '...'
  END as ETAPE,
  DESCRIPTION,
  VERSION_MODELE
FROM REF_OBJ_LIVRABLES LIV)
