diff --git a/files-example/FSED.txt b/files-example/FSED.txt
index fe3ee50..25303f0 100644
--- a/files-example/FSED.txt
+++ b/files-example/FSED.txt
@@ -1,5 +1,5 @@
1: ##
gawk: ./scripts/gitDiffMergeTxt/bash/gitdiff-with-line:620: (FILENAME=- FNR=7) warning: Invalid multibyte data detected. There may be a mismatch between your data and your locale
 :-TAG_CHARSET=@€éèç
2:+TAG_CHARSET=@????
3: ##
4: FSED
5: =SQL=
@@ -463,19 +463,19 @@ BEGIN
463:   elsif p_numcol   =29 THEN
464:     VALEUR_TO_SEND:=tab.C30;
465:   END IF;
   :-  --préparer envoi si NULL ou autre que valeur "ne pas envoyer"
466:+  --pr?parer envoi si NULL ou autre que valeur "ne pas envoyer"
467:   IF VALEUR_TO_SEND IS NULL OR VALEUR_TO_SEND <>'_NOTSEND_' THEN
468:     IF p_code_op     ='S' THEN
   :-      --les suppressions sont des envois à blanc
469:+      --les suppressions sont des envois ? blanc
470:       VALEUR_TO_SEND:=NULL;
471:     END IF;
   :-    --éliminer les doublons même matricule déjà écrit et même valeur
472:+    --?liminer les doublons m?me matricule d?j? ?crit et m?me valeur
473:     IF MatEcrit=tab.pacmat||'#'||tab.paiezad AND oldvaleur=NVL(VALEUR_TO_SEND,'@NULL@') THEN
474:       RETURN;
475:     END IF;
   :-    --on a détecté au moins une différence
476:+    --on a d?tect? au moins une diff?rence
477:     MatARenvoyer:=tab.pacmat||'#'||tab.paiezad;
   :-    --éliminer le passé et pour les historiques les doublons déjà écrits
478:+    --?liminer le pass? et pour les historiques les doublons d?j? ?crits
479:     IF NVL(tab.DTFIN,to_date('31.12.2099','dd.mm.yyyy'))            >= mMoins1
480:       AND ( coldteffet <> 'a.DATE_EFF' 
481:       OR MatARenvoyer<>MatEcrit OR oldvaleur<>NVL(VALEUR_TO_SEND,'@NULL@') )
@@ -489,29 +489,29 @@ BEGIN
489:       tabRetour(p_numretour).CODEOP                                 :=p_code_op;
490:       tabRetour(p_numretour).TYPE_DONNEE                            :=tablib.TYPE_DONNEE;
491:     IF coldteffet = 'a.DATE_EFF' THEN
   :-    --au moins 1 histo écrit, forcer l'écriture des prochaines dates d'effet.
492:+    --au moins 1 histo ?crit, forcer l'?criture des prochaines dates d'effet.
493:     MatEcrit:=MatARenvoyer;
   :-    --mémoriser la valeur de cette colonne historique
494:+    --m?moriser la valeur de cette colonne historique
495:     oldvaleur:=NVL(VALEUR_TO_SEND,'@NULL@');
496:     END IF;
497:       IF LENGTH(TRIM(TRANSLATE(tablib.OCC, ' +-.0123456789', ' '))) IS NULL THEN
   :-        --occurrence numérique indiquée dans MAPDO
498:+        --occurrence num?rique indiqu?e dans MAPDO
499:         tabRetour(p_numretour).OCC :=tablib.OCC;
500:       ELSE
501:         IF tablib.OCC     ='**' OR tablib.OCC='*F' OR tablib.OCC='*I' THEN
502:           IF p_TABLETYPE <>'OCCURS' THEN
   :-            --occurrences spéciales, ce ne sont pas des occurrences Zadig donc on vide
503:+            --occurrences sp?ciales, ce ne sont pas des occurrences Zadig donc on vide
504:             tabRetour(p_numretour).OCC :=NULL;
505:           ELSE
   :-            --pour le type OCCURS valoriser OCC avec le rang par exemple 3ème enfant OCC=3
506:+            --pour le type OCCURS valoriser OCC avec le rang par exemple 3?me enfant OCC=3
507:             tabRetour(p_numretour).OCC:=tab.RANK;
508:           END IF;
509:         ELSE
   :-          --occurrence bizarre dans MAPDO (ni numérique, ni ** ni *F ni *I)
510:+          --occurrence bizarre dans MAPDO (ni num?rique, ni ** ni *F ni *I)
511:           tabRetour(p_numretour).OCC :=tablib.OCC;
512:         END IF;
513:       END IF;
   :-      --incrémenter le n° de ligne pour anticiper la ligne suivante
514:+      --incr?menter le n? de ligne pour anticiper la ligne suivante
515:       p_numretour:=p_numretour+1;
516:     END IF;
517:   END IF;
@@ -637,7 +637,7 @@ ELSE
637:       SELECT 'z' AS typetable
638:       FROM user_cons_columns
639:       WHERE (table_name =p_table
   :-        --PAIEZAD imposé
640:+        --PAIEZAD impos?
641:       OR p_table           like 'DIC_ADM_CONTRAT_HISTO%')
642:       AND constraint_name IN
643:         (SELECT user_constraints.constraint_name
@@ -726,12 +726,12 @@ BEGIN
726:     DicoOpposition
727:   FROM
728:     (
   :-    --ce SELECT fournit la liste element/donneegxp des éléments personnalisés
729:+    --ce SELECT fournit la liste element/donneegxp des ?l?ments personnalis?s
730:     SELECT DISTINCT a.element,
731:       a.DONNEEGXP
732:     FROM tge_ref_mapdo a,
733:       (
   :-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
734:+      --liste r?solue "t" des tables MAPTA en Aller pour ?viter les tables en Retour
735:       SELECT *
736:       FROM tge_ref_mapta
737:       WHERE numpac     =p_numpac
@@ -751,12 +751,12 @@ BEGIN
751:     AND b.table_name =a.TABLEGXP
752:     AND a.element   IN ('B712','B714','B832','B834')
753:     UNION ALL
   :-    --ce SELECT fournit la liste element/donneegxp des éléments Pac "*"
754:+    --ce SELECT fournit la liste element/donneegxp des ?l?ments Pac "*"
755:     SELECT DISTINCT a.element,
756:       a.DONNEEGXP
757:     FROM tge_ref_mapdo a,
758:       (
   :-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
759:+      --liste r?solue "t" des tables MAPTA en Aller pour ?viter les tables en Retour
760:       SELECT *
761:       FROM tge_ref_mapta
762:       WHERE numpac     =p_numpac
@@ -779,7 +779,7 @@ BEGIN
779:       (SELECT element
780:       FROM tge_ref_mapdo a,
781:         (
   :-        --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
782:+        --liste r?solue "t" des tables MAPTA en Aller pour ?viter les tables en Retour
783:         SELECT *
784:         FROM tge_ref_mapta
785:         WHERE numpac     =p_numpac
@@ -799,13 +799,13 @@ BEGIN
799:       AND b.table_name =a.TABLEGXP
800:       )
801:     UNION ALL
   :-    --ce SELECT fournit la liste 'DICO'||element/tableparam des dictionnaires des éléments personnalisés
802:+    --ce SELECT fournit la liste 'DICO'||element/tableparam des dictionnaires des ?l?ments personnalis?s
803:     SELECT DISTINCT 'DICO'
804:       ||a.element,
805:       a.TABLEGXP AS DONNEEGXP
806:     FROM tge_ref_mapdo a,
807:       (
   :-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
808:+      --liste r?solue "t" des tables MAPTA en Aller pour ?viter les tables en Retour
809:       SELECT *
810:       FROM tge_ref_mapta
811:       WHERE numpac     =p_numpac
@@ -825,13 +825,13 @@ BEGIN
825:     AND b.table_name =a.TABLEGXP
826:     AND a.element   IN ('B712','B714','B832','B834')
827:     UNION ALL
   :-    --ce SELECT fournit la liste 'DICO'||element/tableparam des dictionnaires des éléments Pac "*"
828:+    --ce SELECT fournit la liste 'DICO'||element/tableparam des dictionnaires des ?l?ments Pac "*"
829:     SELECT DISTINCT 'DICO'
830:       ||a.element,
831:       a.TABLEGXP AS DONNEEGXP
832:     FROM tge_ref_mapdo a,
833:       (
   :-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
834:+      --liste r?solue "t" des tables MAPTA en Aller pour ?viter les tables en Retour
835:       SELECT *
836:       FROM tge_ref_mapta
837:       WHERE numpac     =p_numpac
@@ -854,7 +854,7 @@ BEGIN
854:       (SELECT element
855:       FROM tge_ref_mapdo a,
856:         (
   :-        --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
857:+        --liste r?solue "t" des tables MAPTA en Aller pour ?viter les tables en Retour
858:         SELECT *
859:         FROM tge_ref_mapta
860:         WHERE numpac     =p_numpac
@@ -873,8 +873,8 @@ BEGIN
873:       AND t.tableparam =a.TABLEGXP
874:       AND b.table_name =a.TABLEGXP
875:       )
   :-    ) --fin de la liste des éléments et des dictionnaires empilés dans la même colonne
   :-    --la fonction PIVOT transforme la liste element/donneegxp en distribution horizontale. Les lignes DICOB714 et DICOB834 sont abandonnées, on suppose que c'est le même dico.
876:+    ) --fin de la liste des ?l?ments et des dictionnaires empil?s dans la m?me colonne
877:+    --la fonction PIVOT transforme la liste element/donneegxp en distribution horizontale. Les lignes DICOB714 et DICOB834 sont abandonn?es, on suppose que c'est le m?me dico.
878:     pivot (MAX(DONNEEGXP) AS DONNEE FOR element IN ('B712' AS MontantPret, 'B714' AS SoldePret, 'B832' AS MontantOpposition, 'B834' AS SoldeOpposition, 'DICOB712' AS DicoPret, 'DICOB832' AS DicoOpposition));
879: EXCEPTION
880: WHEN OTHERS THEN
@@ -917,8 +917,8 @@ BEGIN
917:     v_dtdebMois :=null;
918:     v_finMois :=null;
919:   END;
   :-  --La création dans GAP_TRT est donc conditionnée : on regarde s’il existe déjà dans GAP_TRT
   :-  --une ligne pour N° d’échange, date de paie et Numpac (infos de la carte 00).
920:+  --La cr?ation dans GAP_TRT est donc conditionn?e : on regarde s?il existe d?j? dans GAP_TRT
921:+  --une ligne pour N? d??change, date de paie et Numpac (infos de la carte 00).
922:   v_req := 'MERGE into GAP_TRT USING (SELECT 1 FROM dual) ON ( ID_TRT= :p_id )';--AND NUMPAC = :p_numpac AND NUMERO_ECHANGE =''0000'' AND PERIODE_PAIE = :p_periode
923:   v_req := v_req ||' WHEN NOT MATCHED THEN INSERT (ID_TRT,NUMPAC,PERIODE_PAIE,NUMERO_ECHANGE,MODELE,NATURE,DATE_DEBUT_PAIE,DATE_FIN_PAIE,WORKFLOW_ID,DATE_PREVUE_TRT,DATE_PLANIF_TRT,DATE_DEBUT_TRT,INFO) ';
924:   v_req := v_req ||' values (:p_id,:p_numpac,:p_periode,''0000'',''ALP'',:v_dtdebMois,:v_dtdebMois,:v_finMois,''TGEPAY'||p_numpac||'PACGXP'||NVL(p_periode,v_periode)||'0000'',sysdate,sysdate,sysdate,:p_type_retour)' ;
@@ -983,7 +983,7 @@ AS
983:       WHERE numpac     =p_numpac
984:       AND (tablegxp    =p_alias
985:       AND element NOT IN ('A301','A302','A962')
   :-        --Pour ces 3 éléments on impose un alias spécial, ils seront traités indépendamment.
986:+        --Pour ces 3 ?l?ments on impose un alias sp?cial, ils seront trait?s ind?pendamment.
987:       OR p_alias   ='VUE-A301-A302-A962'
988:       AND element IN ('A301','A302','A962'))
989:     UNION ALL
@@ -992,7 +992,7 @@ AS
992:     WHERE numpac     ='*'
993:     AND (tablegxp    =p_alias
994:     AND element NOT IN ('A301','A302','A962')
   :-      --Pour ces 3 éléments on impose un alias spécial, ils seront traités indépendamment.
995:+      --Pour ces 3 ?l?ments on impose un alias sp?cial, ils seront trait?s ind?pendamment.
996:     OR p_alias       ='VUE-A301-A302-A962'
997:     AND element     IN ('A301','A302','A962'))
998:     AND element NOT IN
@@ -1062,11 +1062,11 @@ AS
1062:     isDICOJointure Number;
1063:     w_mpe          varchar2(1);
1064:   BEGIN
    :-    --vérifier le type principal de la table m=MATRIC p=PACMAT z=PAIEZAD
1065:+    --v?rifier le type principal de la table m=MATRIC p=PACMAT z=PAIEZAD
1066:     v_typeTable:=getTypeTable(p_nomTable);
1067:     --lire le type de MPE (N=rien,M=MPE,C=CSCP)
1068:     select mpe into w_mpe from tge_ref_pac where numpac=p_numpac ;
    :-    --préparation des champs relatifs à la clé et à la date d'effet
1069:+    --pr?paration des champs relatifs ? la cl? et ? la date d'effet
1070:     SELECT a.column_name,
1071:       b.data_type bulk collect
1072:     INTO tabCles
@@ -1081,17 +1081,17 @@ AS
1081:       WHERE c.table_name =a.table_name
1082:       AND CONSTRAINT_TYPE='P'
1083:       );
    :-    --colonne dteffet du résultat qui se déverse dans DIF_FSED et participe aux jointures D_A_C et D_A_C_H
1084:+    --colonne dteffet du r?sultat qui se d?verse dans DIF_FSED et participe aux jointures D_A_C et D_A_C_H
1085:  if w_mpe='C' THEN
1086:  coldteffet:='d.DSDSC';
1087:  ELSE
1088:  coldteffet:='d.DSDCN';
1089: END IF;
    :-    --coldatecle (colonne date dans la clé) sert à fabriquer le filtre qui élimine le futur
1090:+    --coldatecle (colonne date dans la cl?) sert ? fabriquer le filtre qui ?limine le futur
1091:     coldatecle:='';
    :-    --colonne dtfin du résultat qui participe aux jointures D_A_C et D_A_C_H
1092:+    --colonne dtfin du r?sultat qui participe aux jointures D_A_C et D_A_C_H
1093:     coldtfin :='to_date(''20991231'',''yyyymmdd'') as dtfin ';
    :-    --début du champ "cle" selon le type du dico
1094:+    --d?but du champ "cle" selon le type du dico
1095:     IF v_typeTable   ='m' THEN
1096:       cles          :='b.pacmat||''#''||d.paiezad';
1097:     ELSIF v_typeTable='p' THEN
@@ -1105,7 +1105,7 @@ END IF;
1105:       IF tabCles(i).column_name NOT IN ('NUMPAC','MATRIC','PACMAT','PAIEZAD','NUMCNT') THEN
1106:         cles                   :=cles||'||''#''||';
1107:         IF tabCles(i).data_type ='DATE' THEN
    :-          --une date dans la clé servira à filtrer le futur
1108:+          --une date dans la cl? servira ? filtrer le futur
1109:           coldatecle               :=tabCles(i).column_name;
1110:           cles                     :=cles||'to_char(a.'||coldatecle||',''yyyymmdd'')';
1111:           IF tabCles(i).column_name = 'DATE_EFF' THEN
@@ -1132,20 +1132,20 @@ END IF;
1132:       coldteffet :='a.DSDSC';
1133:       cles       :=cles||'||''#''||to_char(a.DSDSC,''yyyymmdd'')';
1134:     END IF;
    :-    --préparation du filtre sur la date d'effet et la date de fin si elles existent
1135:+    --pr?paration du filtre sur la date d'effet et la date de fin si elles existent
1136:     SELECT COUNT(*)
1137:     INTO   hasDtfinSit
1138:     FROM   user_tab_columns
1139:     WHERE  table_name =p_nomTable
1140:     AND     column_name  ='DATE_SORTIE_SIT_BO';
    :-     --préparation du filtre sur la date d'effet et la date de fin si elles existent
1141:+     --pr?paration du filtre sur la date d'effet et la date de fin si elles existent
1142:     SELECT COUNT(*)
1143:     INTO   hasDtfin
1144:     FROM   user_tab_columns
1145:     WHERE  table_name =p_nomTable
1146:     AND    column_name  ='DATE_FIN';
1147:     clwhereDate     :='';
    :-    --si on a une date dans la clé on élimine le futur avec (date de naissance d'enfant, d'adhésion mutuelle, d'effet HISTO...)
1148:+    --si on a une date dans la cl? on ?limine le futur avec (date de naissance d'enfant, d'adh?sion mutuelle, d'effet HISTO...)
1149:     IF coldatecle IS NOT NULL THEN
1150:       clwhereDate :=' and nvl(a.'||coldatecle||',to_date(''19000101'',''yyyymmdd''))<=last_day(to_date('''||p_periode||''',''yyyymm''))';
1151:       IF p_TABLETYPE='H2' AND p_nomTable ='DIC_PERIODES_RECUEIL_HIS' THEN
@@ -1155,13 +1155,13 @@ END IF;
1155:          clwhereDate :=clwhereDate||' and nvl(a.'||coldatecle||',to_date(''19000101'',''yyyymmdd''))<=d.date_sortie_sit_bo';
1156:       END IF;      
1157:       IF p_alias   ='VUE-A301-A302-A962' THEN
    :-        --cas particulier pour lire D_A_C_H jusqu'au 1er jour de M+1 donc on ajoute 1 jour à la limite
1158:+        --cas particulier pour lire D_A_C_H jusqu'au 1er jour de M+1 donc on ajoute 1 jour ? la limite
1159:         clwhereDate :=clwhereDate||'+1';
1160:       END IF;
1161:     END IF;
1162:     --si on a une date de fin dans la table on elle alimente la colonne dtfin pour exclure les vieux historiques inutiles (finis avant 1er jour de M-1)
1163:     IF hasDtfinSit >0 THEN
    :-      --date fin spéciale calculée par la GAP une seule fois à 2099 par MATRIC
1164:+      --date fin sp?ciale calcul?e par la GAP une seule fois ? 2099 par MATRIC
1165:       coldtfin     :='a.DATE_SORTIE_SIT_BO as dtfin';
1166:     ELSIF p_nomtable in ('DIC_ADM_CONTRAT','DIC_ADM_CONTRAT_SITU') THEN
1167:       --pour D_A_C et D_A_C_S on va chercher DATE_SORTIE_SIT_BO sur D_A_C_H
@@ -1170,7 +1170,7 @@ END IF;
1170:       --date fin d'HISTO classique
1171:       coldtfin :='a.DATE_FIN as dtfin';
1172:     END IF;
    :-    --préparation du filtre sur prêt et opposition car solde=0 filtre, mais montant=0 force l'envoi.
1173:+    --pr?paration du filtre sur pr?t et opposition car solde=0 filtre, mais montant=0 force l'envoi.
1174:     IF p_alias     =DicoPret THEN
1175:       clwherePrOp := ' and (NVL(a.'||soldePret ||',0) !=0 or NVL(a.'||MontantPret ||',0) =0) ';
1176:     ELSIF p_alias  =DicoOpposition THEN
@@ -1178,7 +1178,7 @@ END IF;
1178:     ELSE
1179:       clwherePrOp:='';
1180:     END IF;
    :-    --création des requêtes sur DICO et table PHOTO
1181:+    --cr?ation des requ?tes sur DICO et table PHOTO
1182:     OPEN cur_mapdo;
1183:     LOOP
1184:       FETCH cur_mapdo INTO lig_mapdo;
@@ -1264,7 +1264,7 @@ END IF;
1264:         clselect :=clselect||donnee||' as C'||numcol;
1265:         FSED_AVANCEMENT(p_id_trt,'numcol='||TO_CHAR(numcol)||' mapdo='||lig_mapdo.NUMPAC||'/'||lig_mapdo.ELEMENT||'/'||lig_mapdo.OCCURENCE||'/'||lig_mapdo.DONNEEGXP||'/'||lig_mapdo.TABLEGXP||'/'||lig_mapdo.DONNFILTRE||'/'||lig_mapdo.OPERFILTRE||'/'||lig_mapdo.VALFILTRE||'/'||lig_mapdo.TRTPARTICULIER||'/'||lig_mapdo.ENVOI_SYSTEMATIQUE||'/'||lig_mapdo.FORCABLE_ECRAN_GENERE||' data_type='||lig_mapdo.data_type||' zadig='||lig_mapdo.typeZadig||'/'||TO_CHAR(lig_mapdo.longueur)||'/'||lig_mapdo.masque);
1266:       END IF;
    :-      --toutes les 30 colonnes on lance les requêtes et on effectue les comparaisons
1267:+      --toutes les 30 colonnes on lance les requ?tes et on effectue les comparaisons
1268:       IF (numcol =30 OR cur_mapdo%NOTFOUND) THEN
1269:         --clause from commune avec ses jointures
1270:         if w_mpe='C' THEN 
@@ -1292,10 +1292,10 @@ END IF;
1292:         clfrom       :=clfrom||'AND C.PACMAT = T.PACMAT AND C.NUMCNT = T.NUMCNT AND DACH.PACMAT = T.PACMAT AND DACH.NUMCNT = T.NUMCNT AND DACH.DATE_EFF = T.DATE_EFF AND DACS.PACMAT = T.PACMAT AND DACS.NUMCNT = T.NUMCNT AND DACS.PAIEZAD = DACH.PAIEZAD ';
1293:         END IF;
1294:         if w_mpe='C' and p_nomTable ='DIC_ADM_CONTRAT' THEN
    :-         --jointure forcée entre DAC et DACS pour les situations contractuelles
1295:+         --jointure forc?e entre DAC et DACS pour les situations contractuelles
1296:           clfrom       :=clfrom||'AND C.DSDCN <=LAST_DAY(TO_DATE('''||p_periode||''',''yyyymm'')) AND NVL(dach.DRPAI2, ''B'') <> ''B'' AND C.NATCOL IN (''SAL'',''STA'') GROUP BY DACS.NUMPAC, DACS.MATRIC, DACS.PACMAT, DACS.PAIEZAD )) d WHERE d.dsdsc between a.dsdcn AND nvl(a.dsfcn,to_date(''20991231'',''yyyymmdd'')) AND ';
1297:         ELSE
    :-			--SEUNA2-17301 Cas des dictionnaires historisés.
1298:+			--SEUNA2-17301 Cas des dictionnaires historis?s.
1299: 			IF coldteffet='a.DATE_EFF' THEN
1300: 			   clfrom       :=clfrom||'AND C.DSDCN <=LAST_DAY(TO_DATE('''||p_periode||''',''yyyymm'')) AND NVL(dach.DRPAI2, ''B'') <> ''B'' AND C.NATCOL IN (''SAL'',''STA'') GROUP BY DACS.NUMPAC, DACS.MATRIC, DACS.PACMAT, DACS.PAIEZAD )) d WHERE  a.DATE_EFF < d.date_sortie_sit_bo and 1=1 and nvl(a.DATE_FIN,to_date(''20991231'',''yyyymmdd'')) >= d.dsdcn  and ';    
1301: 			ELSE
@@ -1303,7 +1303,7 @@ END IF;
1303: 			END IF;          
1304:         END IF;
1305:         IF v_typeTable='m' THEN
    :-          --dictionnaire à base de MATRIC (conjoint, enfants, perso...)
1306:+          --dictionnaire ? base de MATRIC (conjoint, enfants, perso...)
1307:           clwhere       :='a.matric=d.matric '||clwhereDate;
1308:           requete       :=REPLACE(REPLACE(REPLACE(clselect,'b.','d.'),'@###',''),'###@','')||' from '||p_nomTable||' a, '||clfrom||clwhere||' order by cle';          
1309:           if w_mpe='C' THEN 
@@ -1313,7 +1313,7 @@ END IF;
1313:           end if;
1314: 
1315:         ELSIF v_typeTable='p' THEN
    :-          --dictionnaire à base de PACMAT (D_A_C, Oppositions à partir de la 5.03...)
1316:+          --dictionnaire ? base de PACMAT (D_A_C, Oppositions ? partir de la 5.03...)
1317:           clwhere      :='a.numpac='''||p_numpac||''' and a.pacmat=d.pacmat '||clwhereDate||clwherePrOp;
1318:           requete      :=REPLACE(REPLACE(clselect,'@###',''),'###@','')||' from '||p_nomTable||' a, '||clfrom||clwhere||' order by cle';
1319:           if w_mpe='C' THEN 
@@ -1322,7 +1322,7 @@ END IF;
1322:           requetePhoto :=REGEXP_REPLACE(clselect,'(@###)[^###@]+(###@)','''_TO_SEND_''')||' from PHOTO_'||p_nomTable||' a, '||REPLACE(clfrom,' DIC_ADM_CONTRAT C',' PHOTO_DIC_ADM_CONTRAT C')||'d.numpac='''||p_numpac||''' and '||clwhere||' order by cle';
1323:           end if;
1324:         ELSE
    :-          --dictionnaire à base de PAIEZAD (D_A_C_H, imputations permanentes par exemple)
1325:+          --dictionnaire ? base de PAIEZAD (D_A_C_H, imputations permanentes par exemple)
1326:           clwhere      :='a.numpac='''||p_numpac||''' and a.pacmat=d.pacmat and a.paiezad=d.paiezad '||clwhereDate||clwherePrOp;
1327:           requete      :=REPLACE(REPLACE(clselect,'@###',''),'###@','')||' from '||p_nomTable||' a, '||clfrom||clwhere||' order by cle';
1328:           if w_mpe='C' THEN 
@@ -1382,7 +1382,7 @@ END IF;
1382:           FSED_AVANCEMENT(p_id_trt,'Debut traitement des differences lignes DICO='||TO_CHAR(NVL(tab1.last,0))||' lignes PHOTO='||TO_CHAR(NVL(tab2.last,0)));
1383:           numretour:=1;
1384:           tabRetour.delete;
    :-          --Boucle principale sur la colonne de 0 à 29 indicée par numcol
1385:+          --Boucle principale sur la colonne de 0 ? 29 indic?e par numcol
1386:           FOR numcol IN tablib.first..tablib.last
1387:           LOOP
1388:             --Pour chaque nouvelle colonne on initialise le dernier matricule, les matricules en cours, et les indices.
@@ -1397,91 +1397,91 @@ END IF;
1397:             preclematj   :='#';
1398:             tab1cle      :=' ';
1399:             tab2cle      :=' ';
    :-            --Appareillage "tab1" (DIC_xxx) et "tab2" (PHOTO_DIC_xxx) triés selon leurs clés
1400:+            --Appareillage "tab1" (DIC_xxx) et "tab2" (PHOTO_DIC_xxx) tri?s selon leurs cl?s
1401:             WHILE i <= tab1.last OR j <= tab2.last
1402:             LOOP
1403:               IF i        <= tab1.last THEN
    :-                --constitution de la clé "matricule courant" partie GAP
1404:+                --constitution de la cl? "matricule courant" partie GAP
1405: 
1406:                 curclemati:=tab1(i).pacmat||'#'||tab1(i).paiezad;
1407:                 IF p_TABLETYPE IN ('OCCURS','PREMIERE','DERNIERE') THEN
    :-                  --clé de comparaison = couple pacmat-paiezad + rang de l'OCCURS (vaut 1 sur PREMIERE et DERNIERE)
1408:+                  --cl? de comparaison = couple pacmat-paiezad + rang de l'OCCURS (vaut 1 sur PREMIERE et DERNIERE)
1409:                   tab1cle :=curclemati||TO_CHAR(NVL(tab1(i).rank,0),'000');
1410:                 ELSE
    :-                  --clé de comparaison = celle de DIF_FSED donc celle de la ligne Oracle
1411:+                  --cl? de comparaison = celle de DIF_FSED donc celle de la ligne Oracle
1412:                   tab1cle :=tab1(i).cle;
1413:                 END IF;
1414:               ELSE
1415:                 curclemati :=' ';
    :-                --clé de comparaison = high_value pour faciliter les comparaisons
1416:+                --cl? de comparaison = high_value pour faciliter les comparaisons
1417:                 tab1cle :=chr(255);
1418:               END IF;
1419:               IF j        <= tab2.last THEN
    :-                --constitution de la clé "matricule" courant partie PHOTO
1420:+                --constitution de la cl? "matricule" courant partie PHOTO
1421: 
1422:                 curclematj:=tab2(j).pacmat||'#'||tab2(j).paiezad;
1423:                 IF p_TABLETYPE IN ('OCCURS','PREMIERE','DERNIERE') THEN
    :-                  --clé de comparaison = couple pacmat-paiezad + rang de l'OCCURS (vaut 1 sur PREMIERE et DERNIERE)
1424:+                  --cl? de comparaison = couple pacmat-paiezad + rang de l'OCCURS (vaut 1 sur PREMIERE et DERNIERE)
1425:                   tab2cle :=curclematj||TO_CHAR(NVL(tab2(j).rank,0),'000');
1426:                 ELSE
    :-                  --clé de comparaison = celle de DIF_FSED donc celle de la ligne Oracle
1427:+                  --cl? de comparaison = celle de DIF_FSED donc celle de la ligne Oracle
1428:                   tab2cle :=tab2(j).cle;
1429:                 END IF;
1430:               ELSE
1431:                 curclematj :=' ';
    :-                --clé de comparaison = high_value pour faciliter les comparaisons
1432:+                --cl? de comparaison = high_value pour faciliter les comparaisons
1433:                 tab2cle :=chr(255);
1434:               END IF;
    :-              --Tables avec historiques comme D_A_C_H : la clé contient des dates d'effet donc il faut adapter l'appareillage
1435:+              --Tables avec historiques comme D_A_C_H : la cl? contient des dates d'effet donc il faut adapter l'appareillage
1436:               IF coldteffet='a.DATE_EFF' THEN
1437:                 IF i <= tab1.last AND curclemati=MatARenvoyer THEN
    :-                  --matricule déjà détecté en différence histo, on envoie tous les historiques. Les doublons sont éliminés automatiquement.
1438:+                  --matricule d?j? d?tect? en diff?rence histo, on envoie tous les historiques. Les doublons sont ?limin?s automatiquement.
1439:                   remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
1440:                   --avancer dans tab1
1441:                   i :=i+1;
1442:                   preclemati:=curclemati;
1443:                 Elsif j <= tab2.last AND curclematj=MatARenvoyer THEN
    :-                  --avancer dans tab2 pour épuiser les histos photo déjà détectés en différence
1444:+                  --avancer dans tab2 pour ?puiser les histos photo d?j? d?tect?s en diff?rence
1445:                   j :=j+1;
1446:                   preclematj:=curclematj;
1447:                 Elsif tab1cle < tab2cle and preclemati<>curclemati THEN
    :-                  --ligne gap ajoutée car clé gap plus petite que clé photo et c'était le 1er histo du matricule : création
1448:+                  --ligne gap ajout?e car cl? gap plus petite que cl? photo et c'?tait le 1er histo du matricule : cr?ation
1449:                   remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'C', p_TABLETYPE);
1450:                   --avancer dans tab1
1451:                   i :=i+1;
1452:                   preclemati:=curclemati;
1453:                 Elsif tab1cle < tab2cle AND preclemati=curclemati THEN
    :-                  --ligne gap ajoutée car clé gap plus petite que clé photo et il existe un histo gap précédent sur le même matricule : il faut comparer les valeurs du précédent.
1454:+                  --ligne gap ajout?e car cl? gap plus petite que cl? photo et il existe un histo gap pr?c?dent sur le m?me matricule : il faut comparer les valeurs du pr?c?dent.
1455:                   IF difference_col( tab1(i) , tab1(i-1) , numcol )=1 THEN
    :-                    --modification constatée entre histo gap précédent (j) et histo gap courant (i)
1456:+                    --modification constat?e entre histo gap pr?c?dent (j) et histo gap courant (i)
1457:                     remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'C', p_TABLETYPE);
1458:                   END IF;
1459:                   --avancer dans tab1
1460:                   i :=i+1;
1461:                   preclemati:=curclemati;
1462:                 Elsif tab1cle > tab2cle AND preclemati<>curclematj THEN
    :-                  --ligne gap supprimée et c'était le 1er histo du matricule : il faut forcer les valeurs à blanc sur cette date perdue.
1463:+                  --ligne gap supprim?e et c'?tait le 1er histo du matricule : il faut forcer les valeurs ? blanc sur cette date perdue.
1464:                   remplissage_ligne(tabRetour, tab2(j), tablib(numcol), p_id_trt, numretour, numcol, 'S', p_TABLETYPE);
1465:                   --avancer dans tab2
1466:                   j :=j+1;
1467:                   preclematj:=curclematj;
1468:                 Elsif tab1cle > tab2cle AND preclemati=curclematj THEN
    :-                  --ligne gap supprimée et il existe un histo gap précédent sur le même matricule : il faut comparer les valeurs du précédent avec la photo.
1469:+                  --ligne gap supprim?e et il existe un histo gap pr?c?dent sur le m?me matricule : il faut comparer les valeurs du pr?c?dent avec la photo.
1470:                   i :=i-1;
1471:                   IF difference_col( tab1(i) , tab2(j) , numcol )=1 THEN
    :-                    --modification constatée entre histo gap précédent et histo photo courant (date d'effet=photo)
1472:+                    --modification constat?e entre histo gap pr?c?dent et histo photo courant (date d'effet=photo)
1473:                     tab1(i).DTEFFET :=tab2(j).DTEFFET ;
1474:                     remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
1475:                   END IF;
    :-                  --avancer dans tab1 et tab2 car on a "comparé" ces 2 lignes
1476:+                  --avancer dans tab1 et tab2 car on a "compar?" ces 2 lignes
1477:                   i :=i+1;
1478:                   preclemati:=curclemati;
1479:                   j :=j+1;
1480:                   preclematj:=curclematj;
1481:                 ELSE
    :-                  --comparaison car à ce stade il y a forcément égalité tab1cle=tab2cle (pacmat + paiezad + date d'effet)
1482:+                  --comparaison car ? ce stade il y a forc?ment ?galit? tab1cle=tab2cle (pacmat + paiezad + date d'effet)
1483:                   IF difference_col( tab1(i) , tab2(j) , numcol )=1 THEN
    :-                    --modification constatée
1484:+                    --modification constat?e
1485:                     remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
1486:                   END IF;
1487:                   --avancer dans tab1 et tab2
@@ -1493,21 +1493,21 @@ END IF;
1493:               ELSE
1494:                 --Tables sans historiques comme DIC_ENFANTS ou DIC_ADM_PERSO
1495:                 IF tab1cle < tab2cle THEN
    :-                  --ligne ajoutée car j épuisé ou clé i plus petite que clé j (ce qui marche aussi pour des historiques créés après photo)
1496:+                  --ligne ajout?e car j ?puis? ou cl? i plus petite que cl? j (ce qui marche aussi pour des historiques cr??s apr?s photo)
1497:                   remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'C', p_TABLETYPE);
1498:                   --avancer dans tab1
1499:                   i    :=i+1;
1500:                   preclemati:=curclemati;
1501:                 Elsif tab1cle > tab2cle THEN
    :-                  --ligne supprimée car i épuisé ou clé i plus grande que clé j
1502:+                  --ligne supprim?e car i ?puis? ou cl? i plus grande que cl? j
1503:                   remplissage_ligne(tabRetour, tab2(j), tablib(numcol), p_id_trt, numretour, numcol, 'S', p_TABLETYPE);
1504:                   --avancer dans tab2
1505:                   j :=j+1;
1506:                   preclematj:=curclematj;
1507:                 ELSE
    :-                  --comparaison car à ce stade il y a forcément égalité de clé tab1(i).cle=tab2(j).cle -ou- OCCURS du couple pacmat-paiezad
1508:+                  --comparaison car ? ce stade il y a forc?ment ?galit? de cl? tab1(i).cle=tab2(j).cle -ou- OCCURS du couple pacmat-paiezad
1509:                   IF difference_col( tab1(i) , tab2(j) , numcol )=1 THEN
    :-                    --modification constatée
1510:+                    --modification constat?e
1511:                     remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
1512:                   END IF;
1513:                   --avancer dans tab1 et tab2
@@ -1642,7 +1642,7 @@ IS
1642:     DELETE
1643:     FROM TGE_FSED_ERREUR
1644:     WHERE id=p_id_trt;
    :-    --Purge de la table d'avancement activée si TGE_FSED_IS_DEBUG.IS_DEBUG='O'
1645:+    --Purge de la table d'avancement activ?e si TGE_FSED_IS_DEBUG.IS_DEBUG='O'
1646:     DELETE
1647:     FROM TGE_FSED_AVANCEMENT_PROC
1648:     WHERE id=p_id_trt;
@@ -1683,8 +1683,8 @@ IS
1683:     END LOOP;
1684:     CLOSE cur_tables;
1685:     SELECT COUNT(*) INTO v_flag FROM GAP_TRT_LISTE_MAT where ID_TRT = p_id_trt;
    :-    --Partie Rétro 
    :-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED ---Début Rétro id_trt= '||p_id_trt);
1686:+    --Partie R?tro 
1687:+    FSED_AVANCEMENT(p_id_trt,'preparation_FSED ---D?but R?tro id_trt= '||p_id_trt);
1688:     IF w_DEB_RETRO is not null AND to_date(w_PERIODEENCOURS,'YYYYMM')>=to_date(w_DEB_RETRO,'YYYYMM') THEN
1689:      BEGIN
1690:      FSED_AVANCEMENT(p_id_trt,'preparation_FSED --- remplissage DIF_FSED_MODIF_RETRO id_trt= '||p_id_trt);
@@ -1697,14 +1697,14 @@ IS
1697:     END ;
1698:     
1699:     --Insertion dans DIF_FSED_MODIF_RETRO
    :-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion DIF_FSED_MODIF_RETRO--: ID_'||p_id_trt);
1700:+    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- D?but insertion DIF_FSED_MODIF_RETRO--: ID_'||p_id_trt);
1701:     pReq := 'INSERT INTO DIF_FSED_MODIF_RETRO SELECT * FROM dif_fsed f WHERE numpac ='''||p_numpac||''' AND f.id_trt ='||p_id_trt;
1702:  	pReq := pReq ||' AND DTEFFET  <to_date('''||w_PERIODEENCOURS||'''||''01'',''YYYYMMDD'') ';
1703:  	pReq := pReq ||' AND  f.elem in (select ELEMENT from tge_ref_dicoz where  numpac='''||p_numpac||''' AND nvl(CALCUL_RETRO,0)=1 )';
1704:  	pReq := pReq ||' UNION  SELECT * FROM dif_fsed f WHERE numpac ='''||p_numpac||''' AND f.id_trt ='||p_id_trt;
1705:  	pReq := pReq ||' AND DTEFFET  <to_date('''||w_PERIODEENCOURS||'''||''01'',''YYYYMMDD'') '; 
1706:  	pReq := pReq ||' AND  exists (select 1 from dif_fsed t where t.numpac ='''||p_numpac||''' and t.id_trt ='''||p_id_trt||''' AND t.codeop=''C'' and t.ELEM =''A001'' and f.numpac = t.numpac AND f.id_trt = t.id_trt and f.paiezad=t.paiezad and f.pacmat=t.pacmat ) ';
    :- 	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début remplissage DIF_FSED_MODIF_RETRO--: ID_'||p_id_trt||', pReq '||pReq);
1707:+ 	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- D?but remplissage DIF_FSED_MODIF_RETRO--: ID_'||p_id_trt||', pReq '||pReq);
1708:     EXECUTE_IMMEDIATE_STRING( pReq,0);
1709:     FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- FIN insertion DIF_FSED_MODIF_RETRO-- CALCUL DE STATISTIQUES: ID_'||p_id_trt);
1710: 	DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'DIF_FSED_MODIF_RETRO',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4, partname => 'ID_'||p_id_trt||'');    
@@ -1712,16 +1712,16 @@ IS
1712:     pReq := ' insert into GAP_TRT_MOIS_RETRO (id_trt,numpac,pacmat,PERIODE_RETRO)';
1713:     pReq := pReq ||' WITH grm AS (SELECT pacmat,periode_retro FROM gap_retro_matric    g WHERE numpac = '''||p_numpac||''' AND EXISTS (SELECT 1 FROM gap_trt_liste_mat gtlm WHERE gtlm.id_trt = '||p_id_trt||' AND gtlm.numpac = g.numpac AND gtlm.pacmat = g.pacmat))';
1714:     pReq := pReq ||'     ,gsr AS (SELECT pacmat,periode_retro FROM gap_selection_retro g WHERE numpac = '''||p_numpac||''' AND EXISTS (SELECT 1 FROM gap_trt_liste_mat gtlm WHERE gtlm.id_trt = '||p_id_trt||' AND gtlm.numpac = g.numpac AND gtlm.pacmat = g.pacmat))';
    :-    --                 min_periode_retro : plus vieille rétro par matricule
1715:+    --                 min_periode_retro : plus vieille r?tro par matricule
1716:     pReq := pReq ||' ,min_periode_retro (pacmat,min_periode) AS (';
1717:     pReq := pReq ||' SELECT pacmat,MIN(periode_retro) FROM';
1718:     pReq := pReq ||' (          SELECT pacmat,periode_retro FROM grm';
1719:     pReq := pReq ||'  UNION ALL SELECT pacmat,periode_retro FROM gsr ) GROUP BY pacmat) ';
    :-    --                 histo_retro : historique des mois où on a fait de la rétro *et* sur quels mois
1720:+    --                 histo_retro : historique des mois o? on a fait de la r?tro *et* sur quels mois
1721:     pReq := pReq ||' ,histo_retro AS (SELECT DISTINCT pacmat,periode,to_char(dteffet,''yyyymm'') as periode_retro FROM dif_fsed_histo h WHERE numpac = '''||p_numpac||''' AND EXISTS (SELECT 1 FROM gap_trt_liste_mat gtlm WHERE gtlm.id_trt = '||p_id_trt||' AND gtlm.numpac = h.numpac AND gtlm.pacmat = h.pacmat) ';
1722:     pReq := pReq ||'       AND periode>='''||w_MIN_RETRO||''' AND to_char(dteffet,''yyyymm'')<periode';
1723:     pReq := pReq ||'       AND  h.elem in (select ELEMENT from tge_ref_dicoz where  numpac='''||p_numpac||''' AND nvl(CALCUL_RETRO,0)=1) )';
    :-    --                 liste_mois_retro_pacmat : liste exhaustive des mois rétro par matricule (mois rétro paie en cours + mois rétro dans l'historique)
1724:+    --                 liste_mois_retro_pacmat : liste exhaustive des mois r?tro par matricule (mois r?tro paie en cours + mois r?tro dans l'historique)
1725:     pReq := pReq ||' ,liste_mois_retro_pacmat (pacmat,periode_retro) AS ( ';
1726:     pReq := pReq ||'       SELECT pacmat,periode_retro      FROM grm';
1727:     pReq := pReq ||' UNION ALL SELECT pacmat,periode_retro      FROM gsr';
@@ -1729,7 +1729,7 @@ IS
1729:     pReq := pReq ||' UNION ALL SELECT DISTINCT pacmat,periode       FROM histo_retro hr WHERE EXISTS (select 1 from min_periode_retro mpr WHERE hr.pacmat=mpr.pacmat and hr.periode      >=mpr.min_periode))';
1730:     --                SELECT principal
1731:     pReq := pReq ||' SELECT DISTINCT '||p_id_trt||','''||p_numpac||''',pacmat,periode_retro FROM liste_mois_retro_pacmat';
    :-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion GAP_TRT_MOIS_RETRO: ID_'||p_id_trt||', pReq '||pReq);   
1732:+    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- D?but insertion GAP_TRT_MOIS_RETRO: ID_'||p_id_trt||', pReq '||pReq);   
1733:     EXECUTE_IMMEDIATE_STRING( pReq,0);
1734:     DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => SYS_CONTEXT('USERENV', 'SESSION_SCHEMA'), TABNAME => 'GAP_TRT_MOIS_RETRO', METHOD_OPT => 'FOR ALL COLUMNS SIZE 254', ESTIMATE_PERCENT => 100, CASCADE => TRUE, DEGREE => 4);
1735:     FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Fin insertion GAP_TRT_MOIS_RETRO: ID_'||p_id_trt);
@@ -1740,28 +1740,28 @@ IS
1740:      FSED_AVANCEMENT(p_id_trt,'preparation_FSED--remplissage DIF_FSED_PARTIERETRO--partition cree: ID_'||p_id_trt);
1741:     EXCEPTION
1742:     WHEN OTHERS THEN
    :-     FSED_AVANCEMENT(p_id_trt,'preparation_FSED--remplissage DIF_FSED_PARTIERETRO--partition ID_'||p_id_trt||' existe déja');
1743:+     FSED_AVANCEMENT(p_id_trt,'preparation_FSED--remplissage DIF_FSED_PARTIERETRO--partition ID_'||p_id_trt||' existe d?ja');
1744:     END ;
1745:     --Insertion dans DIF_FSED_PARTIERETRO
    :-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion LISTE_MOIS_RETRO: ID_'||p_id_trt);   
1746:+    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- D?but insertion LISTE_MOIS_RETRO: ID_'||p_id_trt);   
1747:     pReq := ' INSERT INTO LISTE_MOIS_RETRO (id_trt,numpac,pacmat,periode_retro) select id_trt,numpac,pacmat,periode_retro from (';
    :-	--WITH1 liste des vrais mois rétro
1748:+	--WITH1 liste des vrais mois r?tro
1749: 	pReq := pReq ||' WITH liste_mois_retro_pacmat (id_trt,numpac,pacmat,periode_retro) AS ( ';
1750: 	pReq := pReq ||'       SELECT '''||p_id_trt||''',numpac,pacmat,periode_retro FROM gap_trt_mois_retro WHERE numpac = '''||p_numpac||''' AND id_trt = '''||p_id_trt||''') ';
1751: 	pReq := pReq ||' select id_trt,numpac,pacmat,periode_retro from liste_mois_retro_pacmat)';
1752: 	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- requete LISTE_MOIS_RETRO: ID_'||p_id_trt||', pReq '||pReq);
1753: 	EXECUTE_IMMEDIATE_STRING( pReq,0);
    :-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion TRANCHES_MOIS_RETRO: ID_'||p_id_trt);   
1754:+    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- D?but insertion TRANCHES_MOIS_RETRO: ID_'||p_id_trt);   
1755:     pReq := ' INSERT INTO TRANCHES_MOIS_RETRO (id_trt,numpac,pacmat,periode_retro,prec_periode_retro) select id_trt,numpac,pacmat,periode_retro,prec_periode_retro from (';
    :-	--WITH1 liste des vrais mois rétro
1756:+	--WITH1 liste des vrais mois r?tro
1757: 	pReq := pReq ||' WITH tranches_mois_retro_pacmat (id_trt,numpac,pacmat,periode_retro,prec_periode_retro) AS ( ';
1758: 	pReq := pReq ||' SELECT '''||p_id_trt||''',lmr.numpac,lmr.pacmat,lmr.periode_retro,NVL((SELECT to_char(add_months(to_date(MAX(lmr2.periode_retro),''yyyymm''),1),''yyyymm'') FROM liste_mois_retro lmr2 WHERE lmr2.numpac = lmr.numpac and lmr2.pacmat=lmr.pacmat AND lmr2.periode_retro<lmr.periode_retro),'''||w_MIN_RETRO||''') FROM liste_mois_retro lmr where lmr.id_trt = '''||p_id_trt||''')';
1759: 	pReq := pReq ||' select id_trt,numpac,pacmat,periode_retro,prec_periode_retro from tranches_mois_retro_pacmat)';
1760: 	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- requete TRANCHES_MOIS_RETRO: ID_'||p_id_trt||', pReq '||pReq);
1761: 	EXECUTE_IMMEDIATE_STRING( pReq,0);
    :-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt);   
1762:+    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- D?but insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt);   
1763:     pReq := ' INSERT INTO DIF_FSED_PARTIERETRO ';
    :-	--WITH1 liste des vrais mois rétro
1764:+	--WITH1 liste des vrais mois r?tro
1765: 	pReq := pReq ||' WITH liste_envoi_systematique(elem) AS( ';
1766: 	pReq := pReq ||' SELECT ELEMENT FROM TGE_REF_MAPDO WHERE ''*''= decode (numpac,'''||p_numpac||''',''*'',numpac) AND NVL(ENVOI_SYSTEMATIQUE,''N'')=''O'' )';
1767: 	--SELECT1 DIF_FSED_MODIF_RETRO
@@ -1772,7 +1772,7 @@ IS
1772: 	pReq := pReq ||' greatest(TO_CHAR(m.dteffet,''yyyymm''),'''||w_MIN_RETRO||''') BETWEEN tmr.prec_periode_retro AND tmr.periode_retro ';
1773: 	pReq := pReq ||' OR  substr(m.elem,0,1)>''W'' OR Exists (select * from liste_envoi_systematique les  where m.elem=les.elem ) ';
1774: 	pReq := pReq ||' ) ' ;
    :-	--SELECT2 DIF_FSED_HISTO sauf les lignes déjà présentes dans DIF_FSED_MODIF_RETRO
1775:+	--SELECT2 DIF_FSED_HISTO sauf les lignes d?j? pr?sentes dans DIF_FSED_MODIF_RETRO
1776: 	pReq := pReq ||' UNION ALL SELECT '''||p_id_trt||''', h.periode, h.numpac, h.cle, h.pacmat, h.paiezad, h.elem, h.occ, h.valeur, h.codeop, h.type_donnee, h.dteffet ';
1777: 	pReq := pReq ||' FROM dif_fsed_histo h, liste_mois_retro lmr ';
1778: 	pReq := pReq ||' WHERE h.numpac = '''||p_numpac||''' AND lmr.id_trt = '''||p_id_trt||''' AND h.numpac = lmr.numpac and h.pacmat=lmr.pacmat AND periode>='''||w_MIN_RETRO||''' AND h.periode=lmr.periode_retro  ';
@@ -1781,10 +1781,10 @@ IS
1781: 	pReq := pReq ||' WHERE m.id_trt = '''||p_id_trt||''' AND m.id_trt = tmr.id_trt AND m.numpac = tmr.numpac and m.pacmat = tmr.pacmat AND greatest(TO_CHAR(m.dteffet,''yyyymm''),'''||w_MIN_RETRO||''') BETWEEN tmr.prec_periode_retro AND tmr.periode_retro ';
1782: 	pReq := pReq ||'   AND greatest(TO_CHAR(m.dteffet,''yyyymm''),'''||w_MIN_RETRO||''') <= h.periode';
1783: 	pReq := pReq ||'   AND m.numpac = h.numpac and m.pacmat = h.pacmat AND m.paiezad = h.paiezad AND m.elem = h.elem AND m.occ = h.occ )';
    :-	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt||', pReq '||pReq);
1784:+	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- D?but insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt||', pReq '||pReq);
1785: 	EXECUTE_IMMEDIATE_STRING( pReq,0);
1786: 	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Fin insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt);
    :-	FSED_AVANCEMENT(p_id_trt,'preparation_FSED ---Fin Rétro id_trt= '||p_id_trt);
1787:+	FSED_AVANCEMENT(p_id_trt,'preparation_FSED ---Fin R?tro id_trt= '||p_id_trt);
1788: 	END IF;
1789:     IF v_flag > 1000 THEN
1790:         DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'DIF_FSED',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
@@ -2052,7 +2052,7 @@ BEGIN
2052:     WHEN OTHERS THEN 
2053:      w_libcaisse := null;
2054:   END ;
    :-  wLibRUB := REPLACE(pLibRUB,'£','#');
2055:+  wLibRUB := REPLACE(pLibRUB,'?','#');
2056:   select ( (LENGTH(wLibRUB) - LENGTH(REPLACE(wLibRUB,'#',NULL)) ) / NVL(LENGTH('#'),1) ) INTO w_nombre_occ from dual;
2057:   
2058:   IF w_nombre_occ =1 THEN
@@ -2160,7 +2160,7 @@ BEGIN
2160:     tab_15_lib.extend;
2161:     tab_15_lib(tab_15_lib.last):=elt_tab_15_lib;
2162:   ELSE
    :-    IF elt_tab_15.LIBRUB not like '%#%'  and elt_tab_15.LIBRUB not like '%£%' THEN  
2163:+    IF elt_tab_15.LIBRUB not like '%#%'  and elt_tab_15.LIBRUB not like '%?%' THEN  
2164:         elt_tab_15_lib.NUMPAC     := pNumPac;
2165:         elt_tab_15_lib.CODERUB    := nvl(elt_tab_15.CODERUB,'*');
2166:         elt_tab_15_lib.LIB_RESOLU := elt_tab_15.LIBRUB;      
@@ -2289,7 +2289,7 @@ BEGIN
2289: END getNumLigne;
2290: /***********************************************************************
2291: FUNCT : GET_H2_COLONNE
    :-DESC : recuperer la colonne clé de type DATE pour les tables de type H2
2292:+DESC : recuperer la colonne cl? de type DATE pour les tables de type H2
2293: *************************************************************************/
2294: FUNCTION GET_H2_COLONNE(
2295:     p_table_name IN VARCHAR2)
@@ -2322,7 +2322,7 @@ BEGIN
2322: END GET_H2_COLONNE;
2323: /***********************************************************************
2324: FUNCT : GET_M3_COLONNE
    :-DESC : recuperer la colonne clé
2325:+DESC : recuperer la colonne cl?
2326: *************************************************************************/
2327: FUNCTION GET_M3_COLONNE(
2328:     p_table_name IN VARCHAR2)
@@ -2356,7 +2356,7 @@ BEGIN
2356: END GET_M3_COLONNE;
2357: /***********************************************************************
2358: FUNCT : GET_MONTH_00 
    :-DESC : retourne le  mois de paie indiqué dans le FSED carte 00
2359:+DESC : retourne le  mois de paie indiqu? dans le FSED carte 00
2360: *************************************************************************/
2361: FUNCTION GET_PERIODE_00(
2362:     p_id       IN NUMBER ,
@@ -2538,7 +2538,7 @@ BEGIN
2538:         insert_gap_trt(p_id,w_numpac,w_moi_retour,w_type_retour);
2539:         insert_gap_trt_suivi(p_id,'DEBUT',NULL,'BATCH',w_type_retour);
2540:         purge_carte80(p_id,w_moi_retour,tab_numLigne00(i),tab_numLigne99(i));
    :-        -- la periodepaie est forcé au premier jour du moi
2541:+        -- la periodepaie est forc? au premier jour du moi
2542:         req := 'INSERT INTO DIC_TGE_RESPAIE_RUBRIQUE (NUMPAC,PAIEZAD,PACMAT,CLASSE,CAISSE_RUB,CLEIMP,CODERES,CODERUB,IMPUTATION,MONTANT,NOMBRE,ORDRE,PERIODEPAIE,SENS,TAUX,TYPE,DATE_DEB_ARRET,PERIODE_RATTACH_DEB,PERIODE_RATTACH_FIN,PERIODE_AFFECTATION,MATRIC) ';
2543:         req := req ||' SELECT DISTINCT i.numpac,i.paiezad,i.pacmat ,i.classe,i.attribut ,';--DIT  50818
2544:         req := req ||' (dense_rank() over(partition by i.NUMPAC, i.PAIEZAD, i.CODERUB, i.CODERES order by i.NUMLIGNE)-1 )as CLEIMP';
@@ -2586,7 +2586,7 @@ WHEN OTHERS THEN
2586:   err_code := SQLCODE;
2587:   err_msg  := err_msg||' '||SQLERRM;
2588:   --DBMS_OUTPUT.PUT_LINE(req);
    :-  --FIXME utiliser la procédure trace_dbms_output()
2589:+  --FIXME utiliser la proc?dure trace_dbms_output()
2590:   FSED_ERREUR( p_id , 'insertCart80' , p_id || ',' || p_newId, err_code||'-'||err_msg||'- Requete : '||req);
2591:   raise_application_error(-20000, 'FSED insertCart80  '|| sqlerrm);
2592: END sous_insertCart80;
@@ -2697,7 +2697,7 @@ BEGIN
2697:   stmtClause :=stmtClause||' ON  histo.pacmat =compteur.pacmat and histo.paiezad =compteur.paiezad ) ';
2698:   FSED_AVANCEMENT(p_id,'tmp_histo_fsed_30 stmtClause= '||substr(stmtClause,0,3800) );
2699:   --dbms_output.put_line('test '||stmtClause);
    :-  --FIXME utiliser la procédure trace_dbms_output()
2700:+  --FIXME utiliser la proc?dure trace_dbms_output()
2701:    EXECUTE_IMMEDIATE_STRING  (stmtClause,0);
2702: END tmp_histo_fsed_30;
2703: /*******************************************************************
@@ -2884,7 +2884,7 @@ TYPE t_colonne IS  TABLE OF user_tab_columns.column_name%type;
2884:   donneesUpdatePropag CLOB;
2885:   donneesSelectPropag CLOB;
2886: BEGIN
    :-  FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début p_id='||p_id||';p_newId='||p_newId||';p_table='||p_table);
2887:+  FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but p_id='||p_id||';p_newId='||p_newId||';p_table='||p_table);
2888:   v_start := DBMS_UTILITY.GET_TIME;
2889:   getNumLigne(p_id);
2890:   --gestion du trigger des DACH : insertion dans la table temporaire BYPASS_TRG_DACH_ON_SESSION
@@ -2903,7 +2903,7 @@ BEGIN
2903:       IF w_type_retour IN ('RN','RC','RT') THEN
2904:         w_moi_retour := GET_PERIODE_00(p_id,tab_numLigne00(i));
2905:         IF p_table    ='DIC_ADM_CONTRAT_HISTO' THEN
    :-          FSED_AVANCEMENT(p_id,'tmp_histo_fsed_30 Début p_id='||p_id ||';w_numpac='||w_numpac||';w_moi_retour='||w_moi_retour );
2906:+          FSED_AVANCEMENT(p_id,'tmp_histo_fsed_30 D?but p_id='||p_id ||';w_numpac='||w_numpac||';w_moi_retour='||w_moi_retour );
2907:           DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'GAP_TRT_LISTE_MAT',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
2908:               DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'TGE_IMPORT_FSED',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
2909:               DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'TGE_IMPORT_FSED_30',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
@@ -2981,7 +2981,7 @@ BEGIN
2981:              EXECUTE_IMMEDIATE_STRING  ('ALTER TRIGGER ' || trig.object_name ||' disable ',0);
2982:           END LOOP;
2983:           w_date_eff := GET_H2_COLONNE(w_table);
    :-          --RSI : En cas de RN, si 1 ligne existe dans la même année sociale, il faut la détruire. La date de paie AAAAMM01 sera insérée
2984:+          --RSI : En cas de RN, si 1 ligne existe dans la m?me ann?e sociale, il faut la d?truire. La date de paie AAAAMM01 sera ins?r?e
2985:           IF w_type_retour = 'RN' THEN
2986:           --DEBUT M3ANNEE
2987:             IF objtable.TABLETYPE ='M3ANNEE' THEN
@@ -3087,7 +3087,7 @@ BEGIN
3087:               END IF;
3088:             END IF;
3089:           --FIN M1
    :-            --RSI : En cas de RN, si 1 ligne existe dans la même année statistique, il faut la détruire. La date de paie AAAAMM01 sera insérée.
3090:+            --RSI : En cas de RN, si 1 ligne existe dans la m?me ann?e statistique, il faut la d?truire. La date de paie AAAAMM01 sera ins?r?e.
3091:             IF objtable.TABLETYPE ='M9' THEN
3092:               FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RN TABLETYPE M9');
3093:               IF SUBSTR(w_moi_retour,5,2)>=objtable.MOISZERO THEN
@@ -3145,7 +3145,7 @@ BEGIN
3145:           END IF;
3146:           -- TABLE Unique
3147:           IF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='UNIQUE' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  UNIQUE ');
3148:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  UNIQUE ');
3149:             req             := 'MERGE INTO '||w_table ||' T USING ';
3150:             req             := req ||' (select tge.* from (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp  ,valeur  FROM TGE_IMPORT_FSED_30 TGE  where ID_TRT= ' ;
3151:             req             := req ||':id AND tablegxp='''||w_table ||''' ';
@@ -3216,7 +3216,7 @@ BEGIN
3216:             
3217:             --TABLE H2
3218:           ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE = 'H2' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  H2 ');
3219:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  H2 ');
3220:             req                    := 'MERGE INTO '||w_table ||' T USING ';
3221:             req                    := req ||' (select  TGE.*,';
3222:             req                    := req ||'TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
@@ -3246,7 +3246,7 @@ BEGIN
3246:             IF objtable.ALLERRETOUR ='2' THEN
3247:               req                  := req ||',type_writer=''N''';
3248:             END IF;
    :-            -- Si il y a une colonne dtFin, on met à jour la date
3249:+            -- Si il y a une colonne dtFin, on met ? jour la date
3250:             SELECT COUNT(*)
3251:             INTO hasDtfin
3252:             FROM user_tab_columns
@@ -3267,7 +3267,7 @@ BEGIN
3267:             END IF;
3268:             --TABLE AVPERS
3269:           ELSIF objtable.TABLETYPE = 'AVPERS' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  AVPERS ');
3270:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  AVPERS ');
3271:             --calcul de la date fin
3272:             IF w_table ='DIC_ADM_CONTRAT' THEN
3273:               coldtfin:='DSFCN';
@@ -3321,7 +3321,7 @@ BEGIN
3321:                     END IF;
3322:                   END IF;
3323:                 END LOOP;
    :-                -- construction de la requête de propagation
3324:+                -- construction de la requ?te de propagation
3325:                 --si la colonne des AVPERS est une date
3326:                 IF NVL(k.typeelt,'XyZ') ='DATE' THEN
3327:                   donneesUpdatePropag  := donneesUpdatePropag || 'a.' || K.DONNEEGXP || '= decode (instr(tge.' || K.DONNEEGXP || ',''-''),0,TO_DATE(tge.' || K.DONNEEGXP || ',''YYYYMMDD''),TO_DATE(tge.' || K.DONNEEGXP || ',''yy-mm-dd'')) ,';
@@ -3345,7 +3345,7 @@ BEGIN
3345:                 req := req ||' and TGE.numpac=a.numpac and TGE.PAIEZAD =a.'||w_colonne_30||'  AND TGE.tablegxp    = ''DIC_ADM_CONTRAT_HISTO'')       ';
3346:               END IF;
3347:               req := req ||' AND A.DATE_EFF =Cont.mydate AND A.NUMPAC =Cont.NUMPAC AND A.PACMAT =Cont.PACMAT';
    :-              --Ajout du contrôle sur la date de fin de contrat pour ne pas générer de nouvelles dates d'effets si celle ci est supérieur à la date de fin .
3348:+              --Ajout du contr?le sur la date de fin de contrat pour ne pas g?n?rer de nouvelles dates d'effets si celle ci est sup?rieur ? la date de fin .
3349:               req := req ||' AND TO_DATE('''||w_moi_retour||'01'',''YYYYMMDD'') < ( select NVL(DSFCN,to_date(''20991231'',''YYYYMMDD'')) from DIC_ADM_CONTRAT where NUMPAC=a.numpac and  PACMAT=a.PACMAT and  NUMCNT=a.NUMCNT )';
3350:               req := req ||' and not exists (select 1 from  '||w_table || ' d where d.numpac=a.numpac and d.'||w_colonne_30||' =a.'||w_colonne_30||' and d.'||w_date_eff||'=TO_DATE('||w_moi_retour||'01,''YYYYMMDD'') ) ';
3351:               req := req ||' and exists (select 1 from  TGE_FSED_30_TEMPORARY where id_trt ='||p_id||' AND numpac = a.numpac and '||w_colonne_30||' =a.'||w_colonne_30||' and TOUPDATE=''O'' ) ';
@@ -3354,13 +3354,13 @@ BEGIN
3354:               tab_numLigne00(i),
3355:               tab_numLigne99(i);
3356:               IF donneesUpdatePropag IS NOT NULL THEN
    :-                donneesUpdatePropag  := SUBSTR(donneesUpdatePropag, 0, LENGTH(donneesUpdatePropag) - 1); -- enlever la virgule de trop à la fin
3357:+                donneesUpdatePropag  := SUBSTR(donneesUpdatePropag, 0, LENGTH(donneesUpdatePropag) - 1); -- enlever la virgule de trop ? la fin
3358:               END IF;
3359:               IF donneesSelectPropag IS NOT NULL THEN
    :-                donneesSelectPropag  := SUBSTR(donneesSelectPropag, 0, LENGTH(donneesSelectPropag) - 1); -- enlever la virgule de trop à la fin
3360:+                donneesSelectPropag  := SUBSTR(donneesSelectPropag, 0, LENGTH(donneesSelectPropag) - 1); -- enlever la virgule de trop ? la fin
3361:               END IF;
3362:               IF clssreqPivotMerge IS NOT NULL THEN
    :-                clssreqPivotMerge  := SUBSTR(clssreqPivotMerge, 0, LENGTH(clssreqPivotMerge) - 1); -- enlever la virgule de trop à la fin
3363:+                clssreqPivotMerge  := SUBSTR(clssreqPivotMerge, 0, LENGTH(clssreqPivotMerge) - 1); -- enlever la virgule de trop ? la fin
3364:               END IF;
3365:             END IF;
3366:             IF w_table        ='DIC_ADM_CONTRAT_HISTO' THEN
@@ -3413,7 +3413,7 @@ BEGIN
3413:               EXECUTE IMMEDIATE req USING p_id,
3414:               tab_numLigne00(i),
3415:               tab_numLigne99(i);
    :-              --Mise à jour de la donnée dans secupacmat
3416:+              --Mise ? jour de la donn?e dans secupacmat
3417:               FOR C IN cur_secupacmat(w_numpac)
3418:               LOOP
3419:                 req                :='';
@@ -3487,7 +3487,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3487:             reqTrace :=null;
3488:             -- Table M7
3489:           ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M7' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M7 ');
3490:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  M7 ');
3491:            req                    := 'MERGE INTO ' || w_table ||' t USING ' ||
3492:               '(SELECT * FROM ' || 
3493:               '(SELECT ID_TRT, ' || 
@@ -3524,7 +3524,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3524:             req := req ||' )';
3525:             ---TABLE M1
3526:           ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M1' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M1 ');
3527:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  M1 ');
3528:             IF w_type_retour ='RC' THEN
3529:               reqRc         := 'select min ('||w_date_eff||') from '||w_table ||' WHERE numpac =:numpac and paiezad in (select distinct paiezad from TGE_IMPORT_FSED_30 where id_trt = :id )';
3530:               EXECUTE immediate reqRC INTO w_date_RC USING w_numpac,
@@ -3564,7 +3564,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3564:             END IF ;
3565:             ---TABLE M9
3566:           ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M9' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M9 ');
3567:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  M9 ');
3568:             IF w_type_retour ='RC' THEN
3569:               reqRc         := 'select min ('||w_date_eff||') from '||w_table ||' WHERE numpac =:numpac and paiezad in (select distinct paiezad from TGE_IMPORT_FSED_30 where id_trt = :id )';
3570:               EXECUTE immediate reqRC INTO w_date_RC USING w_numpac,
@@ -3604,7 +3604,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3604:             END IF;
3605:             ---Table M3ANNEE
3606:           ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M3ANNEE' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M3ANNEE ');
3607:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  M3ANNEE ');
3608:             IF w_type_retour ='RC' THEN
3609:               reqRc         := 'select min ('||w_date_eff||') from '||w_table ||' WHERE numpac =:numpac and paiezad in (select distinct paiezad from TGE_IMPORT_FSED_30 where id_trt = :id )';
3610:               EXECUTE immediate reqRC INTO w_date_RC USING w_numpac,
@@ -3645,7 +3645,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3645:             END IF;
3646:             ---Table M3MOIS
3647:           ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M3MOIS' THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M3MOIS ');
3648:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  M3MOIS ');
3649:             req                    := 'MERGE INTO '||w_table ||' T USING ';
3650:             req                    := req ||'(select tge.*,';
3651:             req                    := req ||'TO_DATE(replace ('||w_moi_retour||',SUBSTR('||w_moi_retour||',5,2),substr(indicatif,1,2))'||'||''01'''||',''YYYYMMDD'')';
@@ -3679,7 +3679,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3679:             req := req ||')';
3680:             ---Tables MULTIPLE et OCCURS
3681:           ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE IN ('MULTIPLE','OCCURS') THEN
    :-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  '||objtable.TABLETYPE);
3682:+            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 D?but  '||objtable.TABLETYPE);
3683:             req              := 'MERGE INTO '||w_table ||' T USING ';
3684:             req              := req ||'(select TGE.*';
3685:             IF w_code_caisse IS NOT NULL THEN
@@ -3783,7 +3783,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3783:       WHERE ID_TRT=p_id
3784:       AND numligne BETWEEN tab_numLigne00(i) AND tab_numLigne99(i)
3785:       AND tablegxp=w_table ;
    :-      -- lancement de la procédure ALIM_IDX_CH_RETOUR_PAIE
3786:+      -- lancement de la proc?dure ALIM_IDX_CH_RETOUR_PAIE
3787:       ALIM_IDX_CH_RETOUR_PAIE();
3788:       --suppression des matricules de la table SECUPACMAT_TMP_CONTRAT
3789:        EXECUTE_IMMEDIATE_STRING ( 'truncate table SECUPACMAT_TMP_CONTRAT',0);
@@ -3801,7 +3801,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3801:   LOOP
3802:      EXECUTE_IMMEDIATE_STRING  ('ALTER TRIGGER ' || trig.object_name ||' enable ',0);
3803:   END LOOP;
    :-  --Mise à jour des indicateurs de production pour la période traité dans le retour de paie te pour chaque salarié traité.
3804:+  --Mise ? jour des indicateurs de production pour la p?riode trait? dans le retour de paie te pour chaque salari? trait?.
3805:   req             := 'update GAP_TRT_LISTE_MAT_HISTO ';
3806:   IF w_type_retour ='RN' THEN
3807:     w_date_indic  := to_date(sysdate);
@@ -3836,7 +3836,7 @@ WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND
3836:   w_moi_retour,
3837:   w_numpac,
3838:   p_id;
    :-  --RSI : En cas de RC, il faut regarder si elle est plus vieille que le mois du retour complémentaire.
3839:+  --RSI : En cas de RC, il faut regarder si elle est plus vieille que le mois du retour compl?mentaire.
3840:   IF w_type_retour ='RC' THEN
3841:   --DEBUT M3ANNEE
3842:     IF objtable.TABLETYPE ='M3ANNEE' THEN
@@ -4133,7 +4133,7 @@ WHEN OTHERS THEN
4133: END getPeriodeRecueil;
4134: /*************************************************************************************************************************************
4135: PROC :  maj_CAD30   (p_id IN NUMBER)
    :-DESC :  Procedure de mise à jour des compteurs aprés retour de paie
4136:+DESC :  Procedure de mise ? jour des compteurs apr?s retour de paie
4137: TEST :  cad_compteur          : code_compteur in ('CPO','CRTT') and matricule in ('0001494','0001492','0001498','0001576','0001510')
4138: TGE_REF_MAPDO         : TRTPARTICULIER like 'CAD=%' and ELEMENT IN ('I001','I002','I005','J003','T301','T303')
4139: DIC_ADM_CONTRAT       : matric in ('0001494','0001492','0001498','0001576','0001510') and NUMPAC ='TLSE01'
@@ -4208,8 +4208,8 @@ IS
4208:   tab_cad TAB_SMALLVARCHAR;
4209:   tab_matric TAB_SMALLVARCHAR; 
4210: BEGIN
    :-  FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 début');
    :-  ---Sélection des éléments liés à des compteurs
4211:+  FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 d?but');
4212:+  ---S?lection des ?l?ments li?s ? des compteurs
4213:   --T1 LIKE DECIDECIDIUM 
4214:   BEGIN 
4215:   SELECT upper(NVL(VALVAR,'FALSE'))
@@ -4256,7 +4256,7 @@ BEGIN
4256:           w_periode     := w_dateFin ;
4257:         END IF;
4258: 
    :-        -- on mémorise que ce matricule/compteur a déjà été effacé, il ne faut pas le reeffacer sous peine de perre les compteurs déjà positionnés
4259:+        -- on m?morise que ce matricule/compteur a d?j? ?t? effac?, il ne faut pas le reeffacer sous peine de perre les compteurs d?j? positionn?s
4260:         w_req := 'insert into CAD_RETP_MATRIC_CPT_DELETED values (nvl((SELECT DISTINCT MATRIC FROM DIC_ADM_CONTRAT WHERE PAIEZAD = :paiezad AND NUMPAC = :numpac),''INCONNU''),:w_cad)';
4261:         EXECUTE immediate w_req USING C.paiezad,
4262:         w_numpac,
@@ -4370,7 +4370,7 @@ BEGIN
4370:     BEGIN
4371:       FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 avant CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR w_seq='||w_seq||' w_dateCalcul='||w_dateCalcul);
4372:       CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR(w_seq,TO_CHAR(w_dateCalcul,'YYYYMMDD'),NULL,'true','true');
    :-      FSED_AVANCEMENT(p_id,'FSED.maj_CAD30  après  CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR');
4373:+      FSED_AVANCEMENT(p_id,'FSED.maj_CAD30  apr?s  CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR');
4374:     EXCEPTION
4375:     WHEN OTHERS THEN
4376:       err_code := SQLCODE;
@@ -4379,7 +4379,7 @@ BEGIN
4379:     END;
4380:   END IF;
4381:   COMMIT;
    :-  --la suppression du passé pour les matricules concernés par le retour
4382:+  --la suppression du pass? pour les matricules concern?s par le retour
4383:   IF tab_matric.count>=1 AND tab_cad.count>=1 THEN
4384:     w_req:='truncate table TGE_MAJ_30_MATRIC_TEMPORARY';
4385:     FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Vidage 1 de TGE_MAJ_30_MATRIC_TEMPORARY : '||w_req);
@@ -4395,7 +4395,7 @@ BEGIN
4395:     select count(*) into w_num from TGE_MAJ_30_MATRIC_TEMPORARY;
4396:     select count(*) into w_num2 from TGE_MAJ_30_cpt_TEMPORARY;
4397:     FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 insertion temporary nb_matric='||w_num||' nb_cpt= '||w_num2);
    :-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 suppression du passé');
4398:+    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 suppression du pass?');
4399:     w_req :=
4400:     'UPDATE CAD_COMPTEUR set pot1_FJ = null , pot1_FH = null ,pot2_FJ = null , pot2_FH = null ,pot3_FJ = null , pot3_FH = null ,pot4_FJ = null , pot4_FH = null, 
4401: pot5_FJ = null , pot5_FH = null ,pot6_FJ = null , pot6_FH = null ,pot7_FJ = null , pot7_FH = null ,pot8_FJ = null , pot8_FH = null, 
@@ -4419,7 +4419,7 @@ POTV4_VALEURJ = null ,POTV4_VALEURH = null ,POTV5_VALEURJ = null ,POTV5_VALEURH
4419:     FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Vidage 2 de TGE_MAJ_30_CPT_TEMPORARY : '||w_req);
4420:      EXECUTE_IMMEDIATE_STRING  (w_req,0);
4421:   END IF;
    :-  --Mettre à jour CAD_MATRIC_DATE_VALID :update la date de début de validité avec la date de début de recueil de la période suivante:
4422:+  --Mettre ? jour CAD_MATRIC_DATE_VALID :update la date de d?but de validit? avec la date de d?but de recueil de la p?riode suivante:
4423:   IF tab_DATEVALID.count>=1 THEN
4424:    IF W_IS_T1_LIKE_DECIDIUM ='FALSE' THEN 
4425:   FSED_AVANCEMENT(p_id,'FSED.maj_CAD30  loop tab_DATEVALID');
@@ -4462,7 +4462,7 @@ POTV4_VALEURJ = null ,POTV4_VALEURH = null ,POTV5_VALEURJ = null ,POTV5_VALEURH
4462:   FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 premier truncate CAD_RETP_MATRIC_CPT_DELETED');
4463:   w_req:='truncate table CAD_RETP_MATRIC_CPT_DELETED';
4464:    EXECUTE_IMMEDIATE_STRING  (w_req,0);
    :-  FSED_AVANCEMENT(p_id,'maj_CAD30 fin procédure');
4465:+  FSED_AVANCEMENT(p_id,'maj_CAD30 fin proc?dure');
4466: EXCEPTION
4467: WHEN OTHERS THEN
4468:   err_code := SQLCODE;
@@ -4651,7 +4651,7 @@ BEGIN
4651:   AND num_lig BETWEEN numcarte_00 AND numcarte_99;
4652:   IF a_count>0 THEN
4653:     FSED_AVANCEMENT(p_id,'Vidage de TGE_REF_VRREP Pac ('||pNumPac||')');
    :-     --DSH : Les VR mises à jour et non encore envoyé à zadig(code_gestionnaire ='G' and temoin_vr_base = O: Valeurs modifiées non envoyées ou K : Echec du dernier envoi des valeurs ou E : en cours d'envoi ) ne doivent pas être supprimés
4654:+     --DSH : Les VR mises ? jour et non encore envoy? ? zadig(code_gestionnaire ='G' and temoin_vr_base = O: Valeurs modifi?es non envoy?es ou K : Echec du dernier envoi des valeurs ou E : en cours d'envoi ) ne doivent pas ?tre supprim?s
4655:  	DELETE FROM TGE_REF_VRREP WHERE NUMERO_DE_PAC=pNumPac and (code_gestionnaire <>'G' or ( code_gestionnaire ='G' and temoin_vr_base <>'O' and temoin_vr_base <>'K' and temoin_vr_base <>'E') );
4656:     
4657:   END IF;
@@ -4748,8 +4748,8 @@ BEGIN
4748:   v_start := DBMS_UTILITY.GET_TIME;
4749:   v_id    :=p_id;
4750:   getNumLigne(v_id);
    :-  -- Lecture ligne à ligne de la table
    :-   FSED_AVANCEMENT(v_id,'Début Traitement cartes référentiel paie');
4751:+  -- Lecture ligne ? ligne de la table
4752:+   FSED_AVANCEMENT(v_id,'D?but Traitement cartes r?f?rentiel paie');
4753:   OPEN cur_lig(v_id);
4754:   LOOP
4755:     FETCH cur_lig BULK COLLECT INTO lig limit 10000;
@@ -4759,7 +4759,7 @@ BEGIN
4759:       v_cmpt_rest := lig.COUNT;
4760:       FOR i IN lig.FIRST..lig.LAST
4761:       LOOP
    :-        --Extraction du numéro de la carte
4762:+        --Extraction du num?ro de la carte
4763:         num_carte  := SUBSTR(lig(i).donnees,7,2);
4764:         IF num_carte='00' THEN
4765:           v_numpac := SUBSTR(lig(i).donnees,1,6);
@@ -4779,15 +4779,15 @@ BEGIN
4779:             END IF;
4780:             insert_gap_trt_suivi(v_id,'DEBUT',NULL,'BATCH',v_type_retour);
4781:           END IF;
    :-          FSED_AVANCEMENT(v_id,'Traitement référentiel Carte 00 type : '||v_type_retour);
4782:+          FSED_AVANCEMENT(v_id,'Traitement r?f?rentiel Carte 00 type : '||v_type_retour);
4783:         elsif num_carte='99' THEN
4784:           carte_00    :=false;  
    :-          FSED_AVANCEMENT(v_id,'Traitement référentiel Carte 99 ');
4785:+          FSED_AVANCEMENT(v_id,'Traitement r?f?rentiel Carte 99 ');
4786:           v_id := GAP_TRT_SEQ_ID.nextval;
4787:         END IF;
4788:         -- traitement de chaque type de carte
4789:         IF num_carte='00' THEN
    :-          FSED_AVANCEMENT(v_id,'Traitement référentiel purge tables (numpac='||v_numpac||'/code table ='||v_code_table||'/num ligne='||lig(i).num_lig);
4790:+          FSED_AVANCEMENT(v_id,'Traitement r?f?rentiel purge tables (numpac='||v_numpac||'/code table ='||v_code_table||'/num ligne='||lig(i).num_lig);
4791:           purge_table(v_id,v_numpac,v_code_table,lig(i).num_lig);
4792:         END IF ;
4793:         IF num_carte    ='11' THEN
@@ -4860,19 +4860,19 @@ THEN
4860: END IF;
4861: END LOOP;
4862: IF isVRVAL THEN
    :-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire VRVAL Pac ('||v_numpac||')' );
4863:+    FSED_AVANCEMENT(v_id,'D?tection de la pr?sence du dictionnaire VRVAL Pac ('||v_numpac||')' );
4864:     insert_gap_trt_suivi(v_id,'VRVAL',NULL,'BATCH',v_type_retour);
4865:   END IF;
4866:   IF isVRDES THEN
    :-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire VRDES Pac ('||v_numpac||')' );
4867:+    FSED_AVANCEMENT(v_id,'D?tection de la pr?sence du dictionnaire VRDES Pac ('||v_numpac||')' );
4868:     insert_gap_trt_suivi(v_id,'VRDES',NULL,'BATCH',v_type_retour);
4869:   END IF;
4870:   IF isRUBRIQUE THEN
    :-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire RUBRIQUE Pac ('||v_numpac||')' );
4871:+    FSED_AVANCEMENT(v_id,'D?tection de la pr?sence du dictionnaire RUBRIQUE Pac ('||v_numpac||')' );
4872:     insert_gap_trt_suivi(v_id,'RUBRIQUE',NULL,'BATCH',v_type_retour);
4873:   END IF;
4874:   IF isDICOZ THEN
    :-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire DICOZ Pac ('||v_numpac||')' );
4875:+    FSED_AVANCEMENT(v_id,'D?tection de la pr?sence du dictionnaire DICOZ Pac ('||v_numpac||')' );
4876:     insert_gap_trt_suivi(v_id,'DICOZ',NULL,'BATCH',v_type_retour);
4877:   END IF;
4878: IF tab_11R IS NOT NULL THEN
@@ -4930,7 +4930,7 @@ IF isVRVAL THEN
4930:   END LOOP;
4931:   CLOSE cur_lig;
4932:   v_stop := DBMS_UTILITY.GET_TIME;
    :-  FSED_AVANCEMENT(v_id,'Fin Traitement cartes référentiel paie');
4933:+  FSED_AVANCEMENT(v_id,'Fin Traitement cartes r?f?rentiel paie');
4934: EXCEPTION
4935: WHEN OTHERS THEN
4936:   err_code := SQLCODE;
@@ -5087,7 +5087,7 @@ WHEN OTHERS THEN
5087: END getPeriodeRecueilEvol;
5088:   /*****************************************************************************
5089:  PROC : getClauseSelect
    :- DESC : la clause SELECT correspondant à une donnée mappée
5090:+ DESC : la clause SELECT correspondant ? une donn?e mapp?e
5091:  *******************************************************************************/
5092:  FUNCTION getClauseSelect(
5093:     p_numpac             IN VARCHAR2,
@@ -5117,7 +5117,7 @@ BEGIN
5117:       donneeChar                    :=REPLACE(donneeChar,'$MATRIC',p_nom_table_ou_alias||'.'||'MATRIC');
5118:       donneeChar                    :=REPLACE(donneeChar,'$TABLE',p_nom_table_ou_alias);
5119:       IF p_avec_balises_photo AND p_envoi_systematique='O' THEN
    :-        --les balises @### et ###@ permettront de remplacer la donnée par une valeur bidon dans la PHOTO et ainsi forcer l'envoi
5120:+        --les balises @### et ###@ permettront de remplacer la donn?e par une valeur bidon dans la PHOTO et ainsi forcer l'envoi
5121:         donneeChar :='@###'||donneeChar||'###@';
5122:       END IF;
5123:     END IF;
diff --git a/files-example/FSED_newt.txt b/files-example/FSED_newt.txt
deleted file mode 100644
index 8b30d3f..0000000
--- a/files-example/FSED_newt.txt
+++ /dev/null
@@ -1,101 +0,0 @@
~:-##
~:-TAG_CHARSETHELLO=@€éèç
~:-##
~:-FSED88
~:-=SQL=
~:-CREATE OR REPLACE PACKAGE FSED
~:-AS
~:- FUNCTION getTypeTable(
~:- p_table IN VARCHAR2)
~:- RETURN VARCHAR2;
~:- FUNCTION getClauseSelect(
~:- p_numpac IN VARCHAR2,
~:- p_nom_table_ou_alias IN VARCHAR2,
~:- p_donneegxp IN VARCHAR2,
~:- p_donnfiltre IN VARCHAR2,
~:- p_operfiltre IN VARCHAR2,
~:- p_valfiltre IN VARCHAR2,
~:- p_trtparticulier IN VARCHAR2,
~:- p_envoi_systematique IN VARCHAR2,
~:- p_data_type IN VARCHAR2,
~:- p_type_zadig IN VARCHAR2,
~:- p_masque IN VARCHAR2,
~:- p_occ IN VARCHAR2,
~:- p_avec_balises_photo IN BOOLEAN)
~:- RETURN VARCHAR2;
~:- FUNCTION getLibResolu(
~:- pNumPac       IN TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:- pCodeCaisse   IN TGE_REF_CAISSE.CODECAISSE%TYPE,
~:- pLibRUB       IN TGE_REF_RUBRIQUE.LIBRUB%TYPE)
~:- RETURN VARCHAR2;
~:- PROCEDURE FSED_ERREUR(
~:- p_id      IN NUMBER,
~:- p_nomproc IN VARCHAR2,
~:- p_idDate  IN VARCHAR2,
~:- p_erreur  IN CLOB );
~:- PROCEDURE preparation_FSED_unit(
~:- p_nomTable    IN VARCHAR2,
~:- p_alias       IN VARCHAR2,
~:- p_TABLETYPE   IN VARCHAR2,
~:- p_id_trt      IN NUMBER,
~:- p_numpac      IN VARCHAR2,
~:- p_periode     IN VARCHAR2,
~:- p_ALLERRETOUR IN VARCHAR2,
~:- p_nb_mois_paie_init IN NUMBER);
~:- PROCEDURE preparation_FSED(
~:- p_id_trt  IN NUMBER,
~:- p_numpac  IN VARCHAR2,
~:- p_periode IN VARCHAR2);
~:- PROCEDURE retour_Fsed(
~:- p_id IN NUMBER );
~:- PROCEDURE insertCart80(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER);
~:- PROCEDURE insertCart30(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER,
~:- p_table IN VARCHAR2);
~:- PROCEDURE sous_insertCart80(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER) ;
~:- PROCEDURE sous_insertCart30(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER,
~:- p_table IN VARCHAR2) ;
~:- PROCEDURE maj_CAD30(
~:- p_id IN NUMBER) ;
~:- PROCEDURE getPeriodeRecueil(
~:- p_numpac  IN TGE_REF_PAC.numpac%type,
~:- p_paiezad IN TGE_IMPORT_FSED_30.paiezad%type,
~:- p_dateDeb IN OUT DATE,
~:- p_dateFin IN OUT DATE);
~:- PROCEDURE tmp_histo_fsed_30(
~:- p_id  IN NUMBER ,
~:- p_numpac  IN TGE_REF_MAPDO.NUMPAC%TYPE,
~:- p_moi IN VARCHAR2);
~:- procedure FSED_AVANCEMENT_PLSQL(
~:- p_id             IN NUMBER,
~:- p_typeAction     IN VARCHAR2,
~:- p_detailAction   IN CLOB );
~:- PROCEDURE FSED_AVANCEMENT(
~:-    id  IN NUMBER,
~:-    txt IN VARCHAR2);
~:- PROCEDURE insert_gap_trt(
~:- p_id          IN NUMBER ,
~:- p_numpac      IN TGE_REF_PAC.numpac%type,
~:- p_periode     IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:- p_type_retour IN VARCHAR2);
~:- PROCEDURE insert_gap_trt_suivi(
~:- p_id               IN NUMBER ,
~:- p_statut           IN TGE_REF_PAC.numpac%type,
~:- p_code_retour_zpp  IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:- p_login            IN VARCHAR2,
~:- p_type_retour     IN VARCHAR2);
~:- PROCEDURE getPeriodeRecueilEvol(
~:- p_id      IN NUMBER,
~:- p_numpac  IN TGE_REF_PAC.numpac%type,
~:- p_periodeEnCours IN TGE_REF_PAC.periodeencours%type,
~:- p_paiezad IN TGE_IMPORT_FSED_30.paiezad%type,
~:- p_dateDeb IN OUT DATE,
~:- p_dateFin IN OUT DATE);
~:- END FSED;
~:\ No newline at end of file
diff --git a/files-example/SYS_DEF_ERREURS.txt b/files-example/SYS_DEF_ERREURS.txt
index a1b6831..9578aac 100644
--- a/files-example/SYS_DEF_ERREURS.txt
+++ b/files-example/SYS_DEF_ERREURS.txt
@@ -1,5 +1,5 @@
1: ##
 :-TAG_CHARSET=@€éèç
2:+TAG_CHARSET=@????
3: ##
4: SYS_DEF_ERREURS
5: ==
@@ -7,157 +7,157 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'UXATT01' AND CODLANG = 'fr_fr' AND N
7: ##
8: SYS_DEF_ERREURS
9: ==
  :-INSERT INTO SYS_DEF_ERREURS(CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR) VALUES ('UXATT01', 'UX', 'fr_fr', 0, 'Vous n''êtes pas autorisé à télécharger cette attestation', 1)
10:+INSERT INTO SYS_DEF_ERREURS(CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR) VALUES ('UXATT01', 'UX', 'fr_fr', 0, 'Vous n''?tes pas autoris? ? t?l?charger cette attestation', 1)
11: ##
12: SYS_DEF_ERREURS
13: ==
14: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'WKAUTO25' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='WKF'
  :-'WKAUTO25', 'WKF', 'fr_fr', 0, 'Le processus est verrouillé.', 1
15:+'WKAUTO25', 'WKF', 'fr_fr', 0, 'Le processus est verrouill?.', 1
16: ##
17: SYS_DEF_ERREURS
18: ==
19: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN01' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN01', 'ESG', 'fr_fr', 0, 'La donnée obligatoire prénom du contractant est manquante.', 1
20:+'ESGLAN01', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire pr?nom du contractant est manquante.', 1
21: ##
22: SYS_DEF_ERREURS
23: ==
24: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN02' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN02', 'ESG', 'fr_fr', 0, 'La donnée obligatoire nom du contractant est manquante.', 1
25:+'ESGLAN02', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire nom du contractant est manquante.', 1
26: ##
27: SYS_DEF_ERREURS
28: ==
29: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN03' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN03', 'ESG', 'fr_fr', 0, 'La donnée obligatoire email du contractant est manquante.', 1
30:+'ESGLAN03', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire email du contractant est manquante.', 1
31: ##
32: SYS_DEF_ERREURS
33: ==
34: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN04' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN04', 'ESG', 'fr_fr', 0, 'La donnée obligatoire sexe du contractant est manquante.', 1
35:+'ESGLAN04', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire sexe du contractant est manquante.', 1
36: ##
37: SYS_DEF_ERREURS
38: ==
39: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN05' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN05', 'ESG', 'fr_fr', 0, 'La donnée obligatoire télèphone du contractant est manquante.', 1
40:+'ESGLAN05', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire t?l?phone du contractant est manquante.', 1
41: ##
42: SYS_DEF_ERREURS
43: ==
44: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN06' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN06', 'ESG', 'fr_fr', 0, 'La donnée obligatoire prénom du mandataire # est manquante.', 1
45:+'ESGLAN06', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire pr?nom du mandataire # est manquante.', 1
46: ##
47: SYS_DEF_ERREURS
48: ==
49: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN07' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN07', 'ESG', 'fr_fr', 0, 'La donnée obligatoire nom du mandataire # est manquante.', 1
50:+'ESGLAN07', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire nom du mandataire # est manquante.', 1
51: ##
52: SYS_DEF_ERREURS
53: ==
54: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN08' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN08', 'ESG', 'fr_fr', 0, 'La donnée obligatoire email du mandataire # est manquante.', 1
55:+'ESGLAN08', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire email du mandataire # est manquante.', 1
56: ##
57: SYS_DEF_ERREURS
58: ==
59: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN09' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN09', 'ESG', 'fr_fr', 0, 'La donnée obligatoire sexe du madataire # est manquante.', 1
60:+'ESGLAN09', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire sexe du madataire # est manquante.', 1
61: ##
62: SYS_DEF_ERREURS
63: ==
64: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ESGLAN10' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
  :-'ESGLAN10', 'ESG', 'fr_fr', 0, 'La donnée obligatoire télèphone du mandataire # est manquante.', 1
65:+'ESGLAN10', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire t?l?phone du mandataire # est manquante.', 1
66: ##
67: SYS_DEF_ERREURS
68: ==
69: delete from SYS_DEF_ERREURS where CODMOD = 'ESG' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'ESGCHX02'
  :-'ESGCHX02','ESG','fr_fr',0,'Vous ne pouvez pas sélectionner plus de #1 signataire(s).',1
70:+'ESGCHX02','ESG','fr_fr',0,'Vous ne pouvez pas s?lectionner plus de #1 signataire(s).',1
71: ##
72: SYS_DEF_ERREURS
73: ==
74: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'HD000015' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='HDK'
  :-'HD000015', 'HDK', 'fr_fr', 0, 'Le bénéficiaire saisi n''existe pas.', 3
75:+'HD000015', 'HDK', 'fr_fr', 0, 'Le b?n?ficiaire saisi n''existe pas.', 3
76: ##
77: SYS_DEF_ERREURS
78: ==
79: DELETE FROM SYS_DEF_ERREURS WHERE CODERR in('TGERET01','TGERET02')
  :-'TGERET01','TGE','fr_fr','1','La période de rétroactivité maximum est dépassée','3'
  :-'TGERET02','TGE','fr_fr','1','La rétroactivité est impossible avant la période de début de conservation des historiques','3'
80:+'TGERET01','TGE','fr_fr','1','La p?riode de r?troactivit? maximum est d?pass?e','3'
81:+'TGERET02','TGE','fr_fr','1','La r?troactivit? est impossible avant la p?riode de d?but de conservation des historiques','3'
82: ##
83: SYS_DEF_ERREURS
84: ==
85: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '1' and CODERR in ('TGERET03')
  :-'TGERET03','TGE','fr_fr','1','La demande  de retour du référentiel est bloquée pour ce PAC, car il bénéficie du retour de référentiel par PMO/PPC lors des diffusions de projets.','3'
86:+'TGERET03','TGE','fr_fr','1','La demande  de retour du r?f?rentiel est bloqu?e pour ce PAC, car il b?n?ficie du retour de r?f?rentiel par PMO/PPC lors des diffusions de projets.','3'
87: ##
88: SYS_DEF_ERREURS
89: ==
90: DELETE FROM SYS_DEF_ERREURS WHERE CODERR in('TGERET08','TGERET09','TGERET10')
  :-'TGERET08','TGE','fr_fr','1','La rétroactivité n''est pas activer sur ce PAC.','1'
  :-'TGERET09','TGE','fr_fr','1','Le mois de rétroactivité est obligatoire.','1'
91:+'TGERET08','TGE','fr_fr','1','La r?troactivit? n''est pas activer sur ce PAC.','1'
92:+'TGERET09','TGE','fr_fr','1','Le mois de r?troactivit? est obligatoire.','1'
93: 'TGERET10','TGE','fr_fr','1','PAC non valide.','1'
94: ##
95: SYS_DEF_ERREURS
96: ==
97: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00335')
  :-'TGE00335','TGE','fr_fr',0,'Êtes-vous sûr de vouloir annuler votre demande ?',1
98:+'TGE00335','TGE','fr_fr',0,'?tes-vous s?r de vouloir annuler votre demande ?',1
99: ##
100: SYS_DEF_ERREURS
101: ==
102: delete from SYS_DEF_ERREURS where CODMOD = 'HDK' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('HD000001','HD000003','HD000004','HD000005','HD000006','HD000008','HD000009','HD000010','HD000011','HD000012','HD000013','HD000014')
   :-'HD000001','HDK','fr_fr','0','Le numéro de demande est invalide : #',3
   :-'HD000003','HDK','fr_fr','0','Merci de donner un titre à votre demande !',3
103:+'HD000001','HDK','fr_fr','0','Le num?ro de demande est invalide : #',3
104:+'HD000003','HDK','fr_fr','0','Merci de donner un titre ? votre demande !',3
105: 'HD000004','HDK','fr_fr','0','Merci de saisir un descriptif pour votre demande !',3
   :-'HD000005','HDK','fr_fr','0','Merci de préciser le type de votre demande (Anomalie ou Evolution) !',3
   :-'HD000006','HDK','fr_fr','0','Merci de préciser la gravité de votre demande !',3
   :-'HD000008','HDK','fr_fr','0','Le code demande associé doit être vide.',3
   :-'HD000009','HDK','fr_fr','0','Le code demande saisi n''existe pas ou n''est pas en statut réalisé ok (on ne peut pas faire une rework sur une demande livrée)',3
   :-'HD000010','HDK','fr_fr','0','Le code demande saisi n''existe pas ou n''est pas dans un statut livré (on ne peut pas référencer une anomalie sur une demande non livrée)',3
106:+'HD000005','HDK','fr_fr','0','Merci de pr?ciser le type de votre demande (Anomalie ou Evolution) !',3
107:+'HD000006','HDK','fr_fr','0','Merci de pr?ciser la gravit? de votre demande !',3
108:+'HD000008','HDK','fr_fr','0','Le code demande associ? doit ?tre vide.',3
109:+'HD000009','HDK','fr_fr','0','Le code demande saisi n''existe pas ou n''est pas en statut r?alis? ok (on ne peut pas faire une rework sur une demande livr?e)',3
110:+'HD000010','HDK','fr_fr','0','Le code demande saisi n''existe pas ou n''est pas dans un statut livr? (on ne peut pas r?f?rencer une anomalie sur une demande non livr?e)',3
111: 'HD000011','HDK','fr_fr','0','Le code demande saisi n''existe pas !',3
   :-'HD000012','HDK','fr_fr','0','Le champ Code demande associé est obligatoire pour le type rework',3
   :-'HD000013','HDK','fr_fr','0','La demande spécifiée n''existe pas.',3
   :-'HD000014','HDK','fr_fr','0','Demande liée inexistante.',3
112:+'HD000012','HDK','fr_fr','0','Le champ Code demande associ? est obligatoire pour le type rework',3
113:+'HD000013','HDK','fr_fr','0','La demande sp?cifi?e n''existe pas.',3
114:+'HD000014','HDK','fr_fr','0','Demande li?e inexistante.',3
115: ##
116: SYS_DEF_ERREURS
117: ==
118: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ZDV00036', 'ZDV00037', 'ZDV00066', 'ZDV00067', 'ZDV00068', 'ZDV00069', 'ZDV00070', 'TGE00336', 'TGE00337')
   :-'ZDV00036','TGE','fr_fr',0,'Le domaine du pourcentage ne peut excéder 1 caractères : #1.',1
   :-'ZDV00037','TGE','fr_fr',0,'La donnée de paie n''existe pas.',1
   :-'ZDV00066','TGE','fr_fr',0,'Période passée interdite sur une rubrique non rétroactive.',1
   :-'ZDV00067','TGE','fr_fr',0,'Les données de rappel sont interdites en rétroactivité.',1
   :-'ZDV00068','TGE','fr_fr',0,'Impossible de supprimer une ligne déjà supprimée.',1
   :-'ZDV00069','TGE','fr_fr',0,'La rubrique n''autorise pas la rétroactivité.',1
   :-'ZDV00070','TGE','fr_fr',0,'Pour une rubrique rétroactive, la période de paie doit correspondre au mois de la date d''effet.',1
   :-'TGE00336','TGE','fr_fr',0,'Rétroactivité impossible avant le début des historiques de paie #1.',1
   :-'TGE00337','TGE','fr_fr',0,'La rétroactivité n''est possible qu''à partir de #1.',1
119:+'ZDV00036','TGE','fr_fr',0,'Le domaine du pourcentage ne peut exc?der 1 caract?res : #1.',1
120:+'ZDV00037','TGE','fr_fr',0,'La donn?e de paie n''existe pas.',1
121:+'ZDV00066','TGE','fr_fr',0,'P?riode pass?e interdite sur une rubrique non r?troactive.',1
122:+'ZDV00067','TGE','fr_fr',0,'Les donn?es de rappel sont interdites en r?troactivit?.',1
123:+'ZDV00068','TGE','fr_fr',0,'Impossible de supprimer une ligne d?j? supprim?e.',1
124:+'ZDV00069','TGE','fr_fr',0,'La rubrique n''autorise pas la r?troactivit?.',1
125:+'ZDV00070','TGE','fr_fr',0,'Pour une rubrique r?troactive, la p?riode de paie doit correspondre au mois de la date d''effet.',1
126:+'TGE00336','TGE','fr_fr',0,'R?troactivit? impossible avant le d?but des historiques de paie #1.',1
127:+'TGE00337','TGE','fr_fr',0,'La r?troactivit? n''est possible qu''? partir de #1.',1
128: ##
129: SYS_DEF_ERREURS
130: ==
131: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ZEZ00037', 'ZEZ00038', 'ZEZ00039', 'ZEZ00040', 'ZEZ00041')
   :-'ZEZ00037','TGE','fr_fr',0,'Période passée interdite sur un élément non rétroactif.',1
   :-'ZEZ00038','TGE','fr_fr',0,'Impossible de supprimer une ligne déjà supprimée.',1
   :-'ZEZ00039','TGE','fr_fr',0,'L''élément n''autorise pas la rétroactivité.',1
   :-'ZEZ00040','TGE','fr_fr',0,'Un élément supprimé #1 existe déjà pour la période #2 et l''indicatif #3. Il faut abandonner cette création et le réactiver.',1
   :-'ZEZ00041','TGE','fr_fr',0,'Pour un élément rétroactif, la période de paie doit correspondre au mois de la date d''effet.',1
132:+'ZEZ00037','TGE','fr_fr',0,'P?riode pass?e interdite sur un ?l?ment non r?troactif.',1
133:+'ZEZ00038','TGE','fr_fr',0,'Impossible de supprimer une ligne d?j? supprim?e.',1
134:+'ZEZ00039','TGE','fr_fr',0,'L''?l?ment n''autorise pas la r?troactivit?.',1
135:+'ZEZ00040','TGE','fr_fr',0,'Un ?l?ment supprim? #1 existe d?j? pour la p?riode #2 et l''indicatif #3. Il faut abandonner cette cr?ation et le r?activer.',1
136:+'ZEZ00041','TGE','fr_fr',0,'Pour un ?l?ment r?troactif, la p?riode de paie doit correspondre au mois de la date d''effet.',1
137: ##
138: SYS_DEF_ERREURS
139: ==
140: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('GENPAS01','GENPAS02') AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='GEN'
   :-'GENPAS01', 'GEN', 'fr_fr', 0, 'La date de réception ne peut être postérieure à la date du jour.', 1
   :-'GENPAS02', 'GEN', 'fr_fr', 0, 'La date de réception n''est plus valide. Merci de récupérer un nouveau taux.', 1
141:+'GENPAS01', 'GEN', 'fr_fr', 0, 'La date de r?ception ne peut ?tre post?rieure ? la date du jour.', 1
142:+'GENPAS02', 'GEN', 'fr_fr', 0, 'La date de r?ception n''est plus valide. Merci de r?cup?rer un nouveau taux.', 1
143: ##
144: SYS_DEF_ERREURS
145: ==
146: DELETE FROM SYS_DEF_ERREURS WHERE CODERR in('TGERET04','TGERET05','TGERET06','TGERET07')
147: 'TGERET04','TGE','fr_fr','1','Attention le fichier diffusion.properties est absent du message PMO/PPC.','3'
   :-'TGERET05','TGE','fr_fr','1','Problème pour trouver le fichier pmo_to_alp.xml dans le message MQ de PMO/PPC.','3'
   :-'TGERET06','TGE','fr_fr','1','Problème de lecture du fichier diffusion.properties.','3'
   :-'TGERET07','TGE','fr_fr','1','Problème de lecture du fichier pmo_to_alp.xml.','3'
148:+'TGERET05','TGE','fr_fr','1','Probl?me pour trouver le fichier pmo_to_alp.xml dans le message MQ de PMO/PPC.','3'
149:+'TGERET06','TGE','fr_fr','1','Probl?me de lecture du fichier diffusion.properties.','3'
150:+'TGERET07','TGE','fr_fr','1','Probl?me de lecture du fichier pmo_to_alp.xml.','3'
151: ##
152: SYS_DEF_ERREURS
153: ==
154: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'WKABS049' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='WKF'
   :-'WKABS049', 'WKF', 'fr_fr', 0, 'Le placement ''#'' n''est pas autorisé.', 3
155:+'WKABS049', 'WKF', 'fr_fr', 0, 'Le placement ''#'' n''est pas autoris?.', 3
156: ##
157: SYS_DEF_ERREURS
158: ==
159: DELETE FROM SYS_DEF_ERREURS WHERE CODERR ='TGERET10'
   :-'TGERET10','TGE','fr_fr','1','Attention la VR <#1> contient #2 ligne(s) dans le futur et la station ne les gère pas. Le jour venu, il sera nécessaire de forcer une diffusion pour prendre en compte les lignes devenues opérationnelles.','3' 
160:+'TGERET10','TGE','fr_fr','1','Attention la VR <#1> contient #2 ligne(s) dans le futur et la station ne les g?re pas. Le jour venu, il sera n?cessaire de forcer une diffusion pour prendre en compte les lignes devenues op?rationnelles.','3' 
161: ##
162: SYS_DEF_ERREURS
163: ==
@@ -167,75 +167,75 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'WKABS050' AND CODLANG = 'fr_fr' AND
167: SYS_DEF_ERREURS
168: ==
169: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('DELGST44', 'DELGST45', 'DELGST46') AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='DEL'
   :-'DELGST44', 'DEL', 'fr_fr', 0, 'Il est impossible de modifier le délégué d''une délégation active.', 1
   :-'DELGST45', 'DEL', 'fr_fr', 0, 'La délégation est active, les fonctions métiers déjà sélectionnées ne peuvent être enlevées.', 1
   :-'DELGST46', 'DEL', 'fr_fr', 0, 'La délégation est active, il n''est pas possible de la supprimer, ni de désélectionner les fonctions métier qui la composent.', 1
170:+'DELGST44', 'DEL', 'fr_fr', 0, 'Il est impossible de modifier le d?l?gu? d''une d?l?gation active.', 1
171:+'DELGST45', 'DEL', 'fr_fr', 0, 'La d?l?gation est active, les fonctions m?tiers d?j? s?lectionn?es ne peuvent ?tre enlev?es.', 1
172:+'DELGST46', 'DEL', 'fr_fr', 0, 'La d?l?gation est active, il n''est pas possible de la supprimer, ni de d?s?lectionner les fonctions m?tier qui la composent.', 1
173: ##
174: SYS_DEF_ERREURS
175: ==
176: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'IMPEX082' AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'IMPEX082','TGE','fr_fr','0','Veuillez zipper votre fichier si celui-ci a une taille supérieure à 5 Mo.','1'
177:+'IMPEX082','TGE','fr_fr','0','Veuillez zipper votre fichier si celui-ci a une taille sup?rieure ? 5 Mo.','1'
178: ##
179: SYS_DEF_ERREURS
180: ==
181: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00338' AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'TGE00338', 'TGE', 'fr_fr', 0, 'La date d’effet # ne correspond à aucune période de recueil pour le matricule #/#', 1
182:+'TGE00338', 'TGE', 'fr_fr', 0, 'La date d?effet # ne correspond ? aucune p?riode de recueil pour le matricule #/#', 1
183: ##
184: SYS_DEF_ERREURS
185: ==
186: DELETE FROM SYS_DEF_ERREURS WHERE CODERR in('TGE00341','TGE00342')
   :-'TGE00341','TGE','fr_fr','0','L''absence est entièrement antérieure à la période de recueil limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie','3'
   :-'TGE00342','TGE','fr_fr','0','L''absence est partiellement antérieure à la période de recueil limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie','3'
187:+'TGE00341','TGE','fr_fr','0','L''absence est enti?rement ant?rieure ? la p?riode de recueil limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie','3'
188:+'TGE00342','TGE','fr_fr','0','L''absence est partiellement ant?rieure ? la p?riode de recueil limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie','3'
189: ##
190: SYS_DEF_ERREURS
191: ==
192: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00340' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='TGE'
   :-'TGE00340', 'TGE', 'fr_fr', 0, 'La période de recueil est introuvable pour le numpac/paiezad : #1/#2 et le mois de paie #3 .', 1
193:+'TGE00340', 'TGE', 'fr_fr', 0, 'La p?riode de recueil est introuvable pour le numpac/paiezad : #1/#2 et le mois de paie #3 .', 1
194: ##
195: SYS_DEF_ERREURS
196: ==
197: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00202' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='TGE'
   :-'TGE00202','TGE', 'fr_fr', 0, 'Voulez-vous vraiment supprimer les absences sélectionnées ?', 1
198:+'TGE00202','TGE', 'fr_fr', 0, 'Voulez-vous vraiment supprimer les absences s?lectionn?es ?', 1
199: ##
200: SYS_DEF_ERREURS
201: ==
202: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00343' AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'TGE00343','TGE','fr_fr','0','La taille de l''indicatif ne doit pas dépasser 2 caractères alphanumériques.','3'
203:+'TGE00343','TGE','fr_fr','0','La taille de l''indicatif ne doit pas d?passer 2 caract?res alphanum?riques.','3'
204: ##
205: SYS_DEF_ERREURS
206: ==
207: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGERET08' AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'TGERET08','TGE','fr_fr','1','La rétroactivité n''est pas activée sur ce PAC.','1'
208:+'TGERET08','TGE','fr_fr','1','La r?troactivit? n''est pas activ?e sur ce PAC.','1'
209: ##
210: SYS_DEF_ERREURS
211: ==
212: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00344' AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'TGE00344','TGE','fr_fr','0','- 2 absences demi-journée le #.','1'
213:+'TGE00344','TGE','fr_fr','0','- 2 absences demi-journ?e le #.','1'
214: ##
215: SYS_DEF_ERREURS
216: ==
217: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00345' AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'TGE00345','TGE','fr_fr','0','- # le # de type demi-journée.','1'
218:+'TGE00345','TGE','fr_fr','0','- # le # de type demi-journ?e.','1'
219: ##
220: SYS_DEF_ERREURS
221: ==
222: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ( 'IMPEX083') AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'IMPEX083','TGE','fr_fr','0','Vous pouvez rafraîchir l''écran Import données Zadig pour suivre l''état d''avancement du traitement en cliquant sur le bouton "Afficher".','1'
223:+'IMPEX083','TGE','fr_fr','0','Vous pouvez rafra?chir l''?cran Import donn?es Zadig pour suivre l''?tat d''avancement du traitement en cliquant sur le bouton "Afficher".','1'
224: ##
225: SYS_DEF_ERREURS
226: ==
227: delete from SYS_DEF_ERREURS where CODERR in ('BDG00090') and CODLANG = 'fr_fr' and CODMOD ='GTA'
   :-'BDG00090','GTA','fr_fr','0','Vous ne pouvez pas sélectionner plus de 1000 collaborateurs.','1'
228:+'BDG00090','GTA','fr_fr','0','Vous ne pouvez pas s?lectionner plus de 1000 collaborateurs.','1'
229: ##
230: SYS_DEF_ERREURS
231: ==
232: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GAP00224'
   :-'GAP00224','GAP','fr_fr','0','Le type de contrat du salarié n''est pas CDD.','1'
233:+'GAP00224','GAP','fr_fr','0','Le type de contrat du salari? n''est pas CDD.','1'
234: ##
235: SYS_DEF_ERREURS
236: ==
237: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00347' AND CODLANG = 'fr_fr' AND CODMOD ='TGE'
   :-'TGE00347','TGE','fr_fr','0','Ce collaborateur n''est pas encore présent pour la période #6. (Matricule : #1, Numéro de pac : #2, Matricule de paie : #3, Période d''emploi : #4, Date d''effet : #5).','1'
238:+'TGE00347','TGE','fr_fr','0','Ce collaborateur n''est pas encore pr?sent pour la p?riode #6. (Matricule : #1, Num?ro de pac : #2, Matricule de paie : #3, P?riode d''emploi : #4, Date d''effet : #5).','1'
239: ##
240: SYS_DEF_ERREURS
241: ==
@@ -248,16 +248,16 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00348' AND CODLANG = 'fr_fr' AND
248: ##
249: SYS_DEF_ERREURS
250: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'TGE00348','TGE','fr_fr','0','La période de l''élément est antérieure à la profondeur maximale (MM.YYYY) # = GREATEST(DEB_HISTO_RETRO, PERIODEENCOURS - NB_MOIS_RETRO)','1' )
251:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'TGE00348','TGE','fr_fr','0','La p?riode de l''?l?ment est ant?rieure ? la profondeur maximale (MM.YYYY) # = GREATEST(DEB_HISTO_RETRO, PERIODEENCOURS - NB_MOIS_RETRO)','1' )
252: ##
253: SYS_DEF_ERREURS
254: ==
255: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('DOCSV063','DOCSV064','DOCSV065','DOCSV066', 'DOCSV067') AND CODLANG = 'fr_fr' AND CODMOD ='ADM'
256: 'DOCSV063','ADM','fr_fr','0','Vous n''avez pas les droits sur la maquette : #1','1'
257: 'DOCSV064','ADM','fr_fr','0','Vous n''avez pas les droits sur le paragraphe : #1','1'
   :-'DOCSV065','ADM','fr_fr','0','Vous n''avez pas les droits sur le thème : #1','1'
   :-'DOCSV066','ADM','fr_fr','0','Vous n''avez pas les droits sur le type d''édition : #1','1'
   :-'DOCSV067','ADM','fr_fr','0','Vous n''avez pas les droits sur la nature d''édition : #1','1'
258:+'DOCSV065','ADM','fr_fr','0','Vous n''avez pas les droits sur le th?me : #1','1'
259:+'DOCSV066','ADM','fr_fr','0','Vous n''avez pas les droits sur le type d''?dition : #1','1'
260:+'DOCSV067','ADM','fr_fr','0','Vous n''avez pas les droits sur la nature d''?dition : #1','1'
261: ##
262: SYS_DEF_ERREURS
263: ==
@@ -272,18 +272,18 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('TGE00349','TGE00350') AND CODLANG
272: SYS_DEF_ERREURS
273: ==
274: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'STDTAB79' AND CODLANG = 'fr_fr' AND CODMOD ='TAB'
   :-'STDTAB79','TAB','fr_fr','0','Vous n''êtes pas autorisé à consulter cette table','1'
275:+'STDTAB79','TAB','fr_fr','0','Vous n''?tes pas autoris? ? consulter cette table','1'
276: ##
277: SYS_DEF_ERREURS
278: ==
279: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('HROARB37','HROARB38') AND CODLANG = 'fr_fr' AND CODMOD = 'HRO' AND NIV_DEFINITION = '0'
   :-'HROARB37','HRO','fr_fr','0','Action interdite : au moins un salarié est affecté à l''entité #1 ou à l''une de ses entités filles, et #2 impacte la société juridique de rattachement de ce(s) salarié(s)','3'
   :-'HROARB38','HRO','fr_fr','0','Action interdite : au moins un salarié est affecté à l''une des entités fille (directe ou indirecte) de #1, et ce transfert impacte la société juridique de rattachement de ce(s) salarié(s)','3'
280:+'HROARB37','HRO','fr_fr','0','Action interdite : au moins un salari? est affect? ? l''entit? #1 ou ? l''une de ses entit?s filles, et #2 impacte la soci?t? juridique de rattachement de ce(s) salari?(s)','3'
281:+'HROARB38','HRO','fr_fr','0','Action interdite : au moins un salari? est affect? ? l''une des entit?s fille (directe ou indirecte) de #1, et ce transfert impacte la soci?t? juridique de rattachement de ce(s) salari?(s)','3'
282: ##
283: SYS_DEF_ERREURS
284: ==
285: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGEST062' AND CODLANG = 'fr_fr' AND CODMOD ='GTA'
   :-'TGEST062', 'GTA', 'fr_fr', '0', 'Attention, vous êtes sur le point de désabonner ce login à Gestil, tous ses accès pour tous les PAC (environnements) seront coupés. Pour supprimer l’accès à un PAC Gestil particulier, veuillez retirer le profil d’accès à ce PAC uniquement. Êtes-vous sûr de vouloir désabonner ce login à Gestil ?', '3'
286:+'TGEST062', 'GTA', 'fr_fr', '0', 'Attention, vous ?tes sur le point de d?sabonner ce login ? Gestil, tous ses acc?s pour tous les PAC (environnements) seront coup?s. Pour supprimer l?acc?s ? un PAC Gestil particulier, veuillez retirer le profil d?acc?s ? ce PAC uniquement. ?tes-vous s?r de vouloir d?sabonner ce login ? Gestil ?', '3'
287: ##
288: SYS_DEF_ERREURS
289: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -291,75 +291,75 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00351' AND CODLANG = 'fr_fr' AND
291: ##
292: SYS_DEF_ERREURS
293: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'TGE00351','TGE','fr_fr','0','La rétroactivité n''est pas activée, l''import est interdit sur une période de paie antérieure à la période de paie en cours','1' )
294:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'TGE00351','TGE','fr_fr','0','La r?troactivit? n''est pas activ?e, l''import est interdit sur une p?riode de paie ant?rieure ? la p?riode de paie en cours','1' )
295: ##
296: SYS_DEF_ERREURS
297: ==
298: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ADMPD163')
   :-'ADMPD163','STD','fr_fr',0,'Le code d''édition n''existe pas.',1
299:+'ADMPD163','STD','fr_fr',0,'Le code d''?dition n''existe pas.',1
300: ##
301: SYS_DEF_ERREURS
302: ==
303: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('ADMPD160','ADMPD161', 'ADMPD162') AND CODLANG = 'fr_fr' AND CODMOD ='STD' and niv_definition=0
   :-'ADMPD160','STD','fr_fr','0','La date de suspension ne doit pas être antérieure à la limite de la rétroactivité.','1'
   :-'ADMPD161','STD','fr_fr','0','La situation historique modifiée est partiellement antérieure à la limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie.','1'
   :-'ADMPD162','STD','fr_fr','0','La situation historique modifiée est entièrement antérieure à la limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie.','1'
304:+'ADMPD160','STD','fr_fr','0','La date de suspension ne doit pas ?tre ant?rieure ? la limite de la r?troactivit?.','1'
305:+'ADMPD161','STD','fr_fr','0','La situation historique modifi?e est partiellement ant?rieure ? la limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie.','1'
306:+'ADMPD162','STD','fr_fr','0','La situation historique modifi?e est enti?rement ant?rieure ? la limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie.','1'
307: ##
308: SYS_DEF_ERREURS
309: ==
310: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD155' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD155','STD','fr_fr','0','Annulation impossible car la date de départ est antérieure à la limite de la rétroactivité.','1'
311:+'ADMPD155','STD','fr_fr','0','Annulation impossible car la date de d?part est ant?rieure ? la limite de la r?troactivit?.','1'
312: ##
313: SYS_DEF_ERREURS
314: ==
315: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD156' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD156','STD','fr_fr','0','Modification impossible car la date de départ est antérieure à la limite de la rétroactivité.','1'
316:+'ADMPD156','STD','fr_fr','0','Modification impossible car la date de d?part est ant?rieure ? la limite de la r?troactivit?.','1'
317: ##
318: SYS_DEF_ERREURS
319: ==
320: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD157' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD157','STD','fr_fr','0','Modification impossible car la date de départ est antérieure à la date de début de contrat.','1'
321:+'ADMPD157','STD','fr_fr','0','Modification impossible car la date de d?part est ant?rieure ? la date de d?but de contrat.','1'
322: ##
323: SYS_DEF_ERREURS
324: ==
325: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD158' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD158','STD','fr_fr','0','Modification impossible car la date de départ est postérieure à la date de début de la situation suivante.','1'
326:+'ADMPD158','STD','fr_fr','0','Modification impossible car la date de d?part est post?rieure ? la date de d?but de la situation suivante.','1'
327: ##
328: SYS_DEF_ERREURS
329: ==
330: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD159' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD159','STD','fr_fr','0','Modification impossible car la date de départ est antérieure à la date d’effet de la dernière modif de contrat. ','1'
331:+'ADMPD159','STD','fr_fr','0','Modification impossible car la date de d?part est ant?rieure ? la date d?effet de la derni?re modif de contrat. ','1'
332: ##
333: SYS_DEF_ERREURS
334: ==
335: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'STDTAB79' AND CODLANG = 'fr_fr' AND CODMOD ='TAB'
   :-'STDTAB79','TAB','fr_fr','0','Vous n''êtes pas autorisé à consulter cette table','1'
336:+'STDTAB79','TAB','fr_fr','0','Vous n''?tes pas autoris? ? consulter cette table','1'
337: ##
338: SYS_DEF_ERREURS
339: ==
340: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('HROARB37','HROARB38') AND CODLANG = 'fr_fr' AND CODMOD = 'HRO' AND NIV_DEFINITION = '0'
   :-'HROARB37','HRO','fr_fr','0','Action interdite : au moins un salarié est affecté à l''entité #1 ou à l''une de ses entités filles, et #2 impacte la société juridique de rattachement de ce(s) salarié(s)','3'
   :-'HROARB38','HRO','fr_fr','0','Action interdite : au moins un salarié est affecté à l''une des entités fille (directe ou indirecte) de #1, et ce transfert impacte la société juridique de rattachement de ce(s) salarié(s)','3'
341:+'HROARB37','HRO','fr_fr','0','Action interdite : au moins un salari? est affect? ? l''entit? #1 ou ? l''une de ses entit?s filles, et #2 impacte la soci?t? juridique de rattachement de ce(s) salari?(s)','3'
342:+'HROARB38','HRO','fr_fr','0','Action interdite : au moins un salari? est affect? ? l''une des entit?s fille (directe ou indirecte) de #1, et ce transfert impacte la soci?t? juridique de rattachement de ce(s) salari?(s)','3'
343: ##
344: SYS_DEF_ERREURS
345: ==
346: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD164' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD164','STD','fr_fr','0','Modification impossible car la date d''embauche est antérieure à la limite de la rétroactivité.','1'
347:+'ADMPD164','STD','fr_fr','0','Modification impossible car la date d''embauche est ant?rieure ? la limite de la r?troactivit?.','1'
348: ##
349: SYS_DEF_ERREURS
350: ==
351: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD165' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD165','STD','fr_fr','0','Modification impossible car la date d''embauche est égale à la date d''embauche initiale.','1'
352:+'ADMPD165','STD','fr_fr','0','Modification impossible car la date d''embauche est ?gale ? la date d''embauche initiale.','1'
353: ##
354: SYS_DEF_ERREURS
355: ==
356: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD166' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD166','STD','fr_fr','0','Modification impossible car la date d''embauche est postérieure à la date de début de la situation suivante.','1'
357:+'ADMPD166','STD','fr_fr','0','Modification impossible car la date d''embauche est post?rieure ? la date de d?but de la situation suivante.','1'
358: ##
359: SYS_DEF_ERREURS
360: ==
361: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD167' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD167','STD','fr_fr','0','Modification impossible car la date d''embauche est antérieure à la date de fin de la situation précédente.','1'
362:+'ADMPD167','STD','fr_fr','0','Modification impossible car la date d''embauche est ant?rieure ? la date de fin de la situation pr?c?dente.','1'
363: ##
364: SYS_DEF_ERREURS
365: ==
@@ -369,7 +369,7 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD168' AND CODLANG = 'fr_fr' AND
369: SYS_DEF_ERREURS
370: ==
371: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD169' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD169','STD','fr_fr','0','Modification impossible car la date d''embauche est postérieure à la date d''embauche initiale et n''est pas sur le même mois.','1'
372:+'ADMPD169','STD','fr_fr','0','Modification impossible car la date d''embauche est post?rieure ? la date d''embauche initiale et n''est pas sur le m?me mois.','1'
373: ##
374: SYS_DEF_ERREURS
375: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -377,7 +377,7 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'BDG00091' AND CODLANG = 'fr_fr' AND
377: ##
378: SYS_DEF_ERREURS
379: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'BDG00091', 'GTA', 'fr_fr', 0, 'Vous devez sélectionner un évènement Gestil', 1 )
380:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'BDG00091', 'GTA', 'fr_fr', 0, 'Vous devez s?lectionner un ?v?nement Gestil', 1 )
381: ##
382: SYS_DEF_ERREURS
383: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -385,57 +385,57 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'BDG00092' AND CODLANG = 'fr_fr' AND
385: ##
386: SYS_DEF_ERREURS
387: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'BDG00092', 'GTA', 'fr_fr', 0, 'Vous devez sélectionner une donnée GXP', 1 )
388:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'BDG00092', 'GTA', 'fr_fr', 0, 'Vous devez s?lectionner une donn?e GXP', 1 )
389: ##
390: SYS_DEF_ERREURS
391: ==
392: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('GENWKF61','GENWKF62','GENWKF63','GENWKF64','GENWKF65','GENWKF66','GENWKF67','GENWKF68','GENWKF69','GENWKF70') AND CODLANG = 'fr_fr' AND CODMOD ='GEN'
   :-'GENWKF61','GEN','fr_fr','0','La date du départ annulée ne peut pas être antérieure à la date limite de la rétroactivité. Vous ne pouvez pas poursuivre le workflow.','1'
   :-'GENWKF62','GEN','fr_fr','0','Ce contrat contient plusieurs historiques. Ils seront tous supprimés à la validation du workflow.','2'
   :-'GENWKF63','GEN','fr_fr','0','La date de début de contrat doit être inférieure au "#1" (Date de début du contrat suivant)','1'
   :-'GENWKF64','GEN','fr_fr','0','La date de début de contrat doit être supérieure au "#1" (Date limite rétro)','1'
   :-'GENWKF65','GEN','fr_fr','0','La date de départ ne doit pas être inférieure au ‘#1'' (Date limite rétro)','1'
   :-'GENWKF66','GEN','fr_fr','0','La date de départ n''est pas modifiée.','1'
   :-'GENWKF67','GEN','fr_fr','0','La date de départ ne peut pas être inférieure ou égale à ‘#1'' (date de début de contrat)','1'
   :-'GENWKF68','GEN','fr_fr','0','La date de départ ne peut pas être supérieure à ‘#1'' (date de début du contrat suivant)','1'
   :-'GENWKF69','GEN','fr_fr','0','La date de début de contrat doit être inférieure à "#1" (date de fin du contrat)','1'
   :-'GENWKF70','GEN','fr_fr','0','Le salarié est toujours présent. Vous ne pouvez pas poursuivre ce workflow.','1'
393:+'GENWKF61','GEN','fr_fr','0','La date du d?part annul?e ne peut pas ?tre ant?rieure ? la date limite de la r?troactivit?. Vous ne pouvez pas poursuivre le workflow.','1'
394:+'GENWKF62','GEN','fr_fr','0','Ce contrat contient plusieurs historiques. Ils seront tous supprim?s ? la validation du workflow.','2'
395:+'GENWKF63','GEN','fr_fr','0','La date de d?but de contrat doit ?tre inf?rieure au "#1" (Date de d?but du contrat suivant)','1'
396:+'GENWKF64','GEN','fr_fr','0','La date de d?but de contrat doit ?tre sup?rieure au "#1" (Date limite r?tro)','1'
397:+'GENWKF65','GEN','fr_fr','0','La date de d?part ne doit pas ?tre inf?rieure au ?#1'' (Date limite r?tro)','1'
398:+'GENWKF66','GEN','fr_fr','0','La date de d?part n''est pas modifi?e.','1'
399:+'GENWKF67','GEN','fr_fr','0','La date de d?part ne peut pas ?tre inf?rieure ou ?gale ? ?#1'' (date de d?but de contrat)','1'
400:+'GENWKF68','GEN','fr_fr','0','La date de d?part ne peut pas ?tre sup?rieure ? ?#1'' (date de d?but du contrat suivant)','1'
401:+'GENWKF69','GEN','fr_fr','0','La date de d?but de contrat doit ?tre inf?rieure ? "#1" (date de fin du contrat)','1'
402:+'GENWKF70','GEN','fr_fr','0','Le salari? est toujours pr?sent. Vous ne pouvez pas poursuivre ce workflow.','1'
403: ##
404: SYS_DEF_ERREURS
405: ==
406: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD155' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD155','STD','fr_fr','0','Annulation impossible car la date de départ est antérieure à la limite de la rétroactivité, et le départ est présent dans les fichiers de paie.','1'
407:+'ADMPD155','STD','fr_fr','0','Annulation impossible car la date de d?part est ant?rieure ? la limite de la r?troactivit?, et le d?part est pr?sent dans les fichiers de paie.','1'
408: ##
409: SYS_DEF_ERREURS
410: ==
411: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD156' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD156','STD','fr_fr','0','Modification impossible car la date de départ est antérieure à la limite de la rétroactivité, et le départ est présent dans les fichiers de paie.','1'
412:+'ADMPD156','STD','fr_fr','0','Modification impossible car la date de d?part est ant?rieure ? la limite de la r?troactivit?, et le d?part est pr?sent dans les fichiers de paie.','1'
413: ##
414: SYS_DEF_ERREURS
415: ==
416: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADMPD164' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
   :-'ADMPD164','STD','fr_fr','0','Modification impossible car la date d''embauche est antérieure à la limite de la rétroactivité, et l''embauche est présente dans les fichiers de paie.','1'
417:+'ADMPD164','STD','fr_fr','0','Modification impossible car la date d''embauche est ant?rieure ? la limite de la r?troactivit?, et l''embauche est pr?sente dans les fichiers de paie.','1'
418: ##
419: SYS_DEF_ERREURS
420: ==
421: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GENWKF64' AND CODLANG = 'fr_fr' AND CODMOD ='GEN'
   :-'GENWKF64','GEN','fr_fr','0','L''embauche est présente dans les ficiers de paie et la date de début de contrat doit être supérieure au "#1" (Date limite rétro).','1'
422:+'GENWKF64','GEN','fr_fr','0','L''embauche est pr?sente dans les ficiers de paie et la date de d?but de contrat doit ?tre sup?rieure au "#1" (Date limite r?tro).','1'
423: ##
424: SYS_DEF_ERREURS
425: ==
426: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF71')
   :-'GENWKF71','GEN','fr_fr',0,'Ce motif de départ n''est pas autorisé pour un CDI autre que Apprenti (codes types 64, 65 et 81)',1
427:+'GENWKF71','GEN','fr_fr',0,'Ce motif de d?part n''est pas autoris? pour un CDI autre que Apprenti (codes types 64, 65 et 81)',1
428: ##
429: SYS_DEF_ERREURS
430: ==
431: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF71', 'GENWKF72', 'GENWKF73', 'GENWKF74', 'GENWKF75', 'GENWKF76', 'GENWKF67')
   :-'GENWKF71','GEN','fr_fr',0,'La date d''embauche saisie est antérieure à la limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie.',1
   :-'GENWKF72','GEN','fr_fr',0,'La date de départ saisie est antérieure à la limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie.',1
   :-'GENWKF73','GEN','fr_fr',0,'Ce motif de départ n''est pas autorisé pour un CDI autre que Apprenti (codes types 64, 65 et 81).',1
   :-'GENWKF74','GEN','fr_fr',0,'Le lot permanent est obligatoire dans ce contexte (stagiaire non rémunéré et statut DOETH renseigné).',1
   :-'GENWKF75','GEN','fr_fr',0,'La nouvelle date de fin de contrat est antérieure à la date d''effet du dernier historique du contrat. Vous devez d''abord supprimer les historiques postérieurs au "#1".',1
   :-'GENWKF76','GEN','fr_fr',0,'Le code recours saisi n''est pas autorisé pour cette nature et/ou type de contrat (il est réservé aux contrats d''apprentissage).',1
   :-'GENWKF67','GEN','fr_fr',0,'La date de départ ne peut pas être inférieure à "#1" (date de début de contrat).',1
432:+'GENWKF71','GEN','fr_fr',0,'La date d''embauche saisie est ant?rieure ? la limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie.',1
433:+'GENWKF72','GEN','fr_fr',0,'La date de d?part saisie est ant?rieure ? la limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie.',1
434:+'GENWKF73','GEN','fr_fr',0,'Ce motif de d?part n''est pas autoris? pour un CDI autre que Apprenti (codes types 64, 65 et 81).',1
435:+'GENWKF74','GEN','fr_fr',0,'Le lot permanent est obligatoire dans ce contexte (stagiaire non r?mun?r? et statut DOETH renseign?).',1
436:+'GENWKF75','GEN','fr_fr',0,'La nouvelle date de fin de contrat est ant?rieure ? la date d''effet du dernier historique du contrat. Vous devez d''abord supprimer les historiques post?rieurs au "#1".',1
437:+'GENWKF76','GEN','fr_fr',0,'Le code recours saisi n''est pas autoris? pour cette nature et/ou type de contrat (il est r?serv? aux contrats d''apprentissage).',1
438:+'GENWKF67','GEN','fr_fr',0,'La date de d?part ne peut pas ?tre inf?rieure ? "#1" (date de d?but de contrat).',1
439: ##
440: SYS_DEF_ERREURS
441: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -443,7 +443,7 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GES001' AND CODLANG = 'fr_fr' AND NI
443: ##
444: SYS_DEF_ERREURS
445: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES001', 'ADM', 'fr_fr', 0, 'Veuillez sélectionner le type de traitement', 1 )
446:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES001', 'ADM', 'fr_fr', 0, 'Veuillez s?lectionner le type de traitement', 1 )
447: ##
448: SYS_DEF_ERREURS
449: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -451,7 +451,7 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GES002' AND CODLANG = 'fr_fr' AND NI
451: ##
452: SYS_DEF_ERREURS
453: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES002', 'ADM', 'fr_fr', 0, 'Veuillez sélectionner la donnée', 1 )
454:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES002', 'ADM', 'fr_fr', 0, 'Veuillez s?lectionner la donn?e', 1 )
455: ##
456: SYS_DEF_ERREURS
457: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -459,7 +459,7 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GES003' AND CODLANG = 'fr_fr' AND NI
459: ##
460: SYS_DEF_ERREURS
461: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES003', 'ADM', 'fr_fr', 0, 'Veuillez sélectionner au moins un matricule ou une population', 1 )
462:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES003', 'ADM', 'fr_fr', 0, 'Veuillez s?lectionner au moins un matricule ou une population', 1 )
463: ##
464: SYS_DEF_ERREURS
465: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -467,7 +467,7 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GES004' AND CODLANG = 'fr_fr' AND NI
467: ##
468: SYS_DEF_ERREURS
469: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES004', 'ADM', 'fr_fr', 0, 'Le traitement Gestil (#1) est lancé', 1 )
470:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES004', 'ADM', 'fr_fr', 0, 'Le traitement Gestil (#1) est lanc?', 1 )
471: ##
472: SYS_DEF_ERREURS
473: =SQL IFEXIST=SYS_DEF_ERREURS=
@@ -475,128 +475,128 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GES005' AND CODLANG = 'fr_fr' AND NI
475: ##
476: SYS_DEF_ERREURS
477: =SQL IFEXIST=SYS_DEF_ERREURS=
   :-INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES005', 'ADM', 'fr_fr', 0, 'Veuillez saisir les clés composées', 1 )
478:+INSERT INTO SYS_DEF_ERREURS ( CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYPERR ) VALUES ( 'GES005', 'ADM', 'fr_fr', 0, 'Veuillez saisir les cl?s compos?es', 1 )
479: ##
480: SYS_DEF_ERREURS
481: ==
482: delete from SYS_DEF_ERREURS where CODERR='GENWKF64' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODMOD ='GEN' 
   :-'GENWKF64','GEN','fr_fr',0,'L''embauche est présente dans les fichiers de paie et la date de début de contrat doit être supérieure au "#1" (Date limite rétro).',1
483:+'GENWKF64','GEN','fr_fr',0,'L''embauche est pr?sente dans les fichiers de paie et la date de d?but de contrat doit ?tre sup?rieure au "#1" (Date limite r?tro).',1
484: ##
485: SYS_DEF_ERREURS
486: ==
487: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'STD00108'
   :-'STD00108','STD','fr_fr',0,'Les fichiers contenant des macros ne sont pas autorisés pour un dépôt de fichier.',1
488:+'STD00108','STD','fr_fr',0,'Les fichiers contenant des macros ne sont pas autoris?s pour un d?p?t de fichier.',1
489: ##
490: SYS_DEF_ERREURS
491: ==
492: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF77','GENWKF78','GENWKF79','GENWKF80','GENWKF81','GENWKF82','GENWKF83','GENWKF84','GENWKF85','GENWKF86','GENWKF87','GENWKF88','GENWKF89')
   :-'GENWKF77','GEN','fr_fr','0','Il n''y a pas de période suivante à celle que vous voulez insérer. Modifiez votre saisie ou utilisez le WKF nouvelle période d''emploi.','1'
   :-'GENWKF78','GEN','fr_fr','0','La date de début de la période insérée ne peut pas être supérieure ou égale à la date de début de la période suivante.','1'
   :-'GENWKF79','GEN','fr_fr','0','La date de fin de la période insérée ne peut pas être inférieure ou égale à la date de fin de la période précédente.','1'
   :-'GENWKF80','GEN','fr_fr','0','Insertion de période non autorisée dans le passé.','1'
   :-'GENWKF81','GEN','fr_fr','0','La date de début de la période ne doit pas être antérieure à la limite de la rétroactivité. ','1'
   :-'GENWKF82','GEN','fr_fr','0','La date de fin de la période précédente a été ajustée à J-1 de la date de début de la période insérée.','3'
   :-'GENWKF83','GEN','fr_fr','0','Le type de réembauche prévisionnel de la période précédente a été modifié.','3'
   :-'GENWKF84','GEN','fr_fr','0','La date de début de la période suivante a été ajustée à J+1 de la date de fin de la période insérée.','3'
   :-'GENWKF85','GEN','fr_fr','0','Le type de réembauche réél de la période suivante a été modifié.','3'
   :-'GENWKF86','GEN','fr_fr','0','La période d''emploi demandée (du ''#1'' au ''#2'') est en chevauchement total avec au moins une période d''emploi : du ''#3'' au ''#4''','1'
   :-'GENWKF87','GEN','fr_fr','0','La période d''emploi insérée est en chevauchement avec la période précédente.','2'
   :-'GENWKF88','GEN','fr_fr','0','La période d''emploi insérée est en chevauchement avec la période suivante.','2'
   :-'GENWKF89','GEN','fr_fr','0','La période d''emploi insérée est en chevauchement avec la période précédente et la période suivante.','2'
493:+'GENWKF77','GEN','fr_fr','0','Il n''y a pas de p?riode suivante ? celle que vous voulez ins?rer. Modifiez votre saisie ou utilisez le WKF nouvelle p?riode d''emploi.','1'
494:+'GENWKF78','GEN','fr_fr','0','La date de d?but de la p?riode ins?r?e ne peut pas ?tre sup?rieure ou ?gale ? la date de d?but de la p?riode suivante.','1'
495:+'GENWKF79','GEN','fr_fr','0','La date de fin de la p?riode ins?r?e ne peut pas ?tre inf?rieure ou ?gale ? la date de fin de la p?riode pr?c?dente.','1'
496:+'GENWKF80','GEN','fr_fr','0','Insertion de p?riode non autoris?e dans le pass?.','1'
497:+'GENWKF81','GEN','fr_fr','0','La date de d?but de la p?riode ne doit pas ?tre ant?rieure ? la limite de la r?troactivit?. ','1'
498:+'GENWKF82','GEN','fr_fr','0','La date de fin de la p?riode pr?c?dente a ?t? ajust?e ? J-1 de la date de d?but de la p?riode ins?r?e.','3'
499:+'GENWKF83','GEN','fr_fr','0','Le type de r?embauche pr?visionnel de la p?riode pr?c?dente a ?t? modifi?.','3'
500:+'GENWKF84','GEN','fr_fr','0','La date de d?but de la p?riode suivante a ?t? ajust?e ? J+1 de la date de fin de la p?riode ins?r?e.','3'
501:+'GENWKF85','GEN','fr_fr','0','Le type de r?embauche r??l de la p?riode suivante a ?t? modifi?.','3'
502:+'GENWKF86','GEN','fr_fr','0','La p?riode d''emploi demand?e (du ''#1'' au ''#2'') est en chevauchement total avec au moins une p?riode d''emploi : du ''#3'' au ''#4''','1'
503:+'GENWKF87','GEN','fr_fr','0','La p?riode d''emploi ins?r?e est en chevauchement avec la p?riode pr?c?dente.','2'
504:+'GENWKF88','GEN','fr_fr','0','La p?riode d''emploi ins?r?e est en chevauchement avec la p?riode suivante.','2'
505:+'GENWKF89','GEN','fr_fr','0','La p?riode d''emploi ins?r?e est en chevauchement avec la p?riode pr?c?dente et la p?riode suivante.','2'
506: ##
507: SYS_DEF_ERREURS
508: ==
509: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF71', 'GENWKF72')
   :-'GENWKF71','GEN','fr_fr',0,'La date d''embauche saisie est antérieure à la limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie.',2
   :-'GENWKF72','GEN','fr_fr',0,'La date de départ saisie est antérieure à la limite de la rétroactivité. Il est peut-être nécessaire de saisir des données de rappel pour une prise en compte en paie.',2
510:+'GENWKF71','GEN','fr_fr',0,'La date d''embauche saisie est ant?rieure ? la limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie.',2
511:+'GENWKF72','GEN','fr_fr',0,'La date de d?part saisie est ant?rieure ? la limite de la r?troactivit?. Il est peut-?tre n?cessaire de saisir des donn?es de rappel pour une prise en compte en paie.',2
512: ##
513: SYS_DEF_ERREURS
514: ==
515: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'STD00109'
   :-'STD00109','STD','fr_fr',0,'Vous n''avez pas les droits d''accéder à ces données',1
516:+'STD00109','STD','fr_fr',0,'Vous n''avez pas les droits d''acc?der ? ces donn?es',1
517: ##
518: SYS_DEF_ERREURS
519: ==
520: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('MOB00042','MOB00043','MOB00044','MOB00045','MOB00046')
   :-'MOB00042','STD','fr_fr',0,'#1.#2 l''orgoid #3 présent dans le header est différent de celui du client dans la VarSys NS_CLIENT_ID.',1
   :-'MOB00043','STD','fr_fr',0,'#1.#2 l''associateoid #3 présent dans le header n''existe pas pour le client.',1
521:+'MOB00042','STD','fr_fr',0,'#1.#2 l''orgoid #3 pr?sent dans le header est diff?rent de celui du client dans la VarSys NS_CLIENT_ID.',1
522:+'MOB00043','STD','fr_fr',0,'#1.#2 l''associateoid #3 pr?sent dans le header n''existe pas pour le client.',1
523: 'MOB00044','STD','fr_fr',0,'#1.#2  l''associateoid #3  n''existe pas pour le client .',1
   :-'MOB00045','STD','fr_fr',0,'#1.#2  la liste demandée est vide.',1
524:+'MOB00045','STD','fr_fr',0,'#1.#2  la liste demand?e est vide.',1
525: 'MOB00046','STD','fr_fr',0,'#1 est un email non valide.',1
526: ##
527: SYS_DEF_ERREURS
528: ==
529: delete from SYS_DEF_ERREURS where CODMOD = 'HRO' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'HROCTL95'
   :-'HROCTL95','HRO','fr_fr',0,'Propagation de la suppression impossible : cette entité a des entités qui lui sont rattachées ou des collaborateurs affectés ou un changement d''entité mère.',1
530:+'HROCTL95','HRO','fr_fr',0,'Propagation de la suppression impossible : cette entit? a des entit?s qui lui sont rattach?es ou des collaborateurs affect?s ou un changement d''entit? m?re.',1
531: ##
532: SYS_DEF_ERREURS
533: ==
534: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENHOR47'
   :-'GENHOR47','GEN','fr_fr','0','Le taux employeur multiple doit être inférieur à 100',1
535:+'GENHOR47','GEN','fr_fr','0','Le taux employeur multiple doit ?tre inf?rieur ? 100',1
536: ##
537: SYS_DEF_ERREURS
538: ==
539: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'STD00110' AND CODMOD = 'STD' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = '0'
   :-'STD00110','STD','fr_fr','0','Une incohérence dans les données du collaborateur sélectionné est survenue, veuillez interroger l''écran.','1'
540:+'STD00110','STD','fr_fr','0','Une incoh?rence dans les donn?es du collaborateur s?lectionn? est survenue, veuillez interroger l''?cran.','1'
541: ##
542: SYS_DEF_ERREURS
543: ==
544: DELETE FROM SYS_DEF_ERREURS WHERE CODMOD = 'DEL' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('DELGST46','DELGST47','DELGST48','DELGST49','DELGST50')
   :-'DELGST46','DEL','fr_fr',0,'Le délégateur est de type T3. Le délégué doit être  abonné au service  Gestil pour déléguer la fonction métier gestion de temps UX.',1
   :-'DELGST47','DEL','fr_fr',0,'Un erreur se produit lors  de l''ajout d''une délagtion dans gestil : #1 ',1
   :-'DELGST48','DEL','fr_fr',0,'Un erreur se produit lors  de modification d''une délagtion dans gestil : #1 ',1
   :-'DELGST49','DEL','fr_fr',0,'Un erreur se produit lors  de suppression  d''une délagtion dans gestil : #1 ',1
   :-'DELGST50','DEL','fr_fr',0,'Un erreur se produit lors  de recherche  d''une délagtion dans gestil : #1 ',1
545:+'DELGST46','DEL','fr_fr',0,'Le d?l?gateur est de type T3. Le d?l?gu? doit ?tre  abonn? au service  Gestil pour d?l?guer la fonction m?tier gestion de temps UX.',1
546:+'DELGST47','DEL','fr_fr',0,'Un erreur se produit lors  de l''ajout d''une d?lagtion dans gestil : #1 ',1
547:+'DELGST48','DEL','fr_fr',0,'Un erreur se produit lors  de modification d''une d?lagtion dans gestil : #1 ',1
548:+'DELGST49','DEL','fr_fr',0,'Un erreur se produit lors  de suppression  d''une d?lagtion dans gestil : #1 ',1
549:+'DELGST50','DEL','fr_fr',0,'Un erreur se produit lors  de recherche  d''une d?lagtion dans gestil : #1 ',1
550: ##
551: SYS_DEF_ERREURS
552: ==
553: delete from SYS_DEF_ERREURS where CODMOD = 'HRO' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('HROARB39', 'HROARB40')
   :-'HROARB39','HRO','fr_fr',0,'Action interdite : vous n''avez pas les autorisations pour exécuter cette fonctionnalité.',1
   :-'HROARB40','HRO','fr_fr',0,'Vous ne disposez pas des habilitation nécessaires sur au moins une des filles de l''entité #1 dans la structure #2.',1
554:+'HROARB39','HRO','fr_fr',0,'Action interdite : vous n''avez pas les autorisations pour ex?cuter cette fonctionnalit?.',1
555:+'HROARB40','HRO','fr_fr',0,'Vous ne disposez pas des habilitation n?cessaires sur au moins une des filles de l''entit? #1 dans la structure #2.',1
556: ##
557: SYS_DEF_ERREURS
558: ==
559: delete from SYS_DEF_ERREURS where CODMOD = 'HRO' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('HROCTL54')
   :-'HROCTL54','HRO','fr_fr',0,'Vous ne disposez pas des habilitations nécessaires pour l''entité #1 dans la structure #2.',1
560:+'HROCTL54','HRO','fr_fr',0,'Vous ne disposez pas des habilitations n?cessaires pour l''entit? #1 dans la structure #2.',1
561: ##
562: SYS_DEF_ERREURS
563: ==
564: DELETE FROM SYS_DEF_ERREURS WHERE CODMOD = 'DEL' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('DELGST46','DELGST47','DELGST48','DELGST49','DELGST50')
   :-'DELGST46','DEL','fr_fr',0,'Le délégateur est de type T3. Le délégué doit être  abonné au service  Gestil pour déléguer la fonction métier gestion de temps UX.',1
   :-'DELGST47','DEL','fr_fr',0,'Une erreur s''est produite lors de l''ajout d''une délégation dans gestil : #1 ',1
   :-'DELGST48','DEL','fr_fr',0,'Une erreur s''est produite lors de la modification d''une délégation dans gestil : #1 ',1
   :-'DELGST49','DEL','fr_fr',0,'Une erreur s''est produite lors de la suppression d''une délégation dans gestil : #1 ',1
   :-'DELGST50','DEL','fr_fr',0,'Une erreur s''est produite lors de la recherche d''une délégation dans gestil : #1 ',1
565:+'DELGST46','DEL','fr_fr',0,'Le d?l?gateur est de type T3. Le d?l?gu? doit ?tre  abonn? au service  Gestil pour d?l?guer la fonction m?tier gestion de temps UX.',1
566:+'DELGST47','DEL','fr_fr',0,'Une erreur s''est produite lors de l''ajout d''une d?l?gation dans gestil : #1 ',1
567:+'DELGST48','DEL','fr_fr',0,'Une erreur s''est produite lors de la modification d''une d?l?gation dans gestil : #1 ',1
568:+'DELGST49','DEL','fr_fr',0,'Une erreur s''est produite lors de la suppression d''une d?l?gation dans gestil : #1 ',1
569:+'DELGST50','DEL','fr_fr',0,'Une erreur s''est produite lors de la recherche d''une d?l?gation dans gestil : #1 ',1
570: ##
571: SYS_DEF_ERREURS
572: ==
573: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF90','GENWKF91','GENWKF92')
   :-'GENWKF90','GEN','fr_fr',0,'Avec la période insérée, les types de réembauche ne sont plus valides. Veuillez vous assurer de la cohérence des informations (types de réembauche, report et liquidation des familles de données…)',2
   :-'GENWKF91','GEN','fr_fr',0,'Avec la période insérée, le type de réembauche n''est plus valide. Veuillez vous assurer de la cohérence des informations (type de réembauche, report des familles de données…)',2
   :-'GENWKF92','GEN','fr_fr',0,'Avec la période insérée, le type de réembauche prévisionnelle n''est plus valide. Veuillez vous assurer de la cohérence des informations (type de réembauche, liquidation des familles de données…)',2
574:+'GENWKF90','GEN','fr_fr',0,'Avec la p?riode ins?r?e, les types de r?embauche ne sont plus valides. Veuillez vous assurer de la coh?rence des informations (types de r?embauche, report et liquidation des familles de donn?es?)',2
575:+'GENWKF91','GEN','fr_fr',0,'Avec la p?riode ins?r?e, le type de r?embauche n''est plus valide. Veuillez vous assurer de la coh?rence des informations (type de r?embauche, report des familles de donn?es?)',2
576:+'GENWKF92','GEN','fr_fr',0,'Avec la p?riode ins?r?e, le type de r?embauche pr?visionnelle n''est plus valide. Veuillez vous assurer de la coh?rence des informations (type de r?embauche, liquidation des familles de donn?es?)',2
577: ##
578: SYS_DEF_ERREURS
579: ==
580: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF96','GENWKF97')
   :-'GENWKF96','GEN','fr_fr',0,'Cette entrée rétroactive nécessite de saisir sur le mois de paie en cours le nombre de jours de plafond SS (élément P311) à ajouter au titre des mois antérieurs au mois de paie en cours.',2
   :-'GENWKF97','GEN','fr_fr',0,'Cette sortie rétroactive nécessite de saisir sur le mois de paie en cours le nombre de jours de plafond SS (élément P311) à déduire (sens "moins") au titre des mois antérieurs au mois de paie en cours.',2
581:+'GENWKF96','GEN','fr_fr',0,'Cette entr?e r?troactive n?cessite de saisir sur le mois de paie en cours le nombre de jours de plafond SS (?l?ment P311) ? ajouter au titre des mois ant?rieurs au mois de paie en cours.',2
582:+'GENWKF97','GEN','fr_fr',0,'Cette sortie r?troactive n?cessite de saisir sur le mois de paie en cours le nombre de jours de plafond SS (?l?ment P311) ? d?duire (sens "moins") au titre des mois ant?rieurs au mois de paie en cours.',2
583: ##
584: SYS_DEF_ERREURS
585: ==
586: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENMAN05'
   :-'GENMAN05','GEN','fr_fr',0,'Le code mandat saisi est interdit depuis le 01/01/2020 suite à la mise en place du C.S.E. (Comité Social et Economique)',1
587:+'GENMAN05','GEN','fr_fr',0,'Le code mandat saisi est interdit depuis le 01/01/2020 suite ? la mise en place du C.S.E. (Comit? Social et Economique)',1
588: ##
589: SYS_DEF_ERREURS
590: ==
591: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF93','GENWKF94','GENWKF95')
   :-'GENWKF93','GEN','fr_fr',0,'Le salarié sélectionné n''a pas de période d''emploi correspondant à la demande car l''embauche est présente dans les fichiers de paie.',1
   :-'GENWKF94','GEN','fr_fr',0,'Le salarié sélectionné n''a pas de période d''emploi correspondant à la demande car soit l''embauche est présente dans les fichiers de paie, soit elle n''est pas incluse dans la profondeur de rétro.',1
   :-'GENWKF95','GEN','fr_fr',0,'Le salarié sélectionné n''a pas de période d''emploi correspondant à la demande car soit le départ est présent dans les fichiers de paie, soit il n''est pas inclus dans la profondeur de rétro, soit le type de réembauche est consécutif',2
592:+'GENWKF93','GEN','fr_fr',0,'Le salari? s?lectionn? n''a pas de p?riode d''emploi correspondant ? la demande car l''embauche est pr?sente dans les fichiers de paie.',1
593:+'GENWKF94','GEN','fr_fr',0,'Le salari? s?lectionn? n''a pas de p?riode d''emploi correspondant ? la demande car soit l''embauche est pr?sente dans les fichiers de paie, soit elle n''est pas incluse dans la profondeur de r?tro.',1
594:+'GENWKF95','GEN','fr_fr',0,'Le salari? s?lectionn? n''a pas de p?riode d''emploi correspondant ? la demande car soit le d?part est pr?sent dans les fichiers de paie, soit il n''est pas inclus dans la profondeur de r?tro, soit le type de r?embauche est cons?cutif',2
595: ##
596: SYS_DEF_ERREURS
597: ==
598: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENWKF99'
   :-'GENWKF99','GEN','fr_fr',0,'Ce salarié n''a aucune période fermée. Vous ne pouvez pas poursuivre ce workflow.',1
599:+'GENWKF99','GEN','fr_fr',0,'Ce salari? n''a aucune p?riode ferm?e. Vous ne pouvez pas poursuivre ce workflow.',1
600: ##
601: SYS_DEF_ERREURS
602: ==
@@ -606,28 +606,28 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GTA00134' AND CODLANG = 'fr_fr' AND
606: SYS_DEF_ERREURS
607: ==
608: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'STD00111' AND CODMOD = 'STD' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = '0'
   :-'STD00111','STD','fr_fr','0','Inscription impossible car aucun train de paie n''est planifié.','1'
609:+'STD00111','STD','fr_fr','0','Inscription impossible car aucun train de paie n''est planifi?.','1'
610: ##
611: SYS_DEF_ERREURS
612: ==
613: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ADMPD170','ADMPD171','ADMPD172','ADMPD173','ADMPD174')
   :-'ADMPD170','STD','fr_fr',0,'Vérifiez que les boutons du tableau multiple sont renseignés.',1
   :-'ADMPD171','STD','fr_fr',0,'Le libellé bouton est obligatoire.',1
   :-'ADMPD172','STD','fr_fr',0,'Le code opération est obligatoire.',1
   :-'ADMPD173','STD','fr_fr',0,'Le code opération ne doit contenir que des chiffres, des lettres (majuscules ou minuscules) et des underscores.',1
   :-'ADMPD174','STD','fr_fr',0,'Le même libellé bouton ou code opération est utilisé plus qu''une fois.',1
614:+'ADMPD170','STD','fr_fr',0,'V?rifiez que les boutons du tableau multiple sont renseign?s.',1
615:+'ADMPD171','STD','fr_fr',0,'Le libell? bouton est obligatoire.',1
616:+'ADMPD172','STD','fr_fr',0,'Le code op?ration est obligatoire.',1
617:+'ADMPD173','STD','fr_fr',0,'Le code op?ration ne doit contenir que des chiffres, des lettres (majuscules ou minuscules) et des underscores.',1
618:+'ADMPD174','STD','fr_fr',0,'Le m?me libell? bouton ou code op?ration est utilis? plus qu''une fois.',1
619: ##
620: SYS_DEF_ERREURS
621: ==
622: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF64','GENWKF94','GENWKF95')
   :-'GENWKF64','GEN','fr_fr',0,'L''embauche étant présente dans les fichiers paie, la date de début de contrat doit être supérieure ou égale au "#1" (Date limite rétro).',1
   :-'GENWKF94','GEN','fr_fr',0,'Le salarié sélectionné n''a pas de période d''emploi correspondant à la demande car l''embauche n''est pas incluse dans la profondeur de rétro.',1
   :-'GENWKF95','GEN','fr_fr',0,'Le salarié sélectionné n''a pas de période d''emploi correspondant à la demande car soit le départ est présent dans les fichiers de paie et il n''est pas inclus dans la profondeur de rétro, soit le type de réembauche est consécutif.',1
623:+'GENWKF64','GEN','fr_fr',0,'L''embauche ?tant pr?sente dans les fichiers paie, la date de d?but de contrat doit ?tre sup?rieure ou ?gale au "#1" (Date limite r?tro).',1
624:+'GENWKF94','GEN','fr_fr',0,'Le salari? s?lectionn? n''a pas de p?riode d''emploi correspondant ? la demande car l''embauche n''est pas incluse dans la profondeur de r?tro.',1
625:+'GENWKF95','GEN','fr_fr',0,'Le salari? s?lectionn? n''a pas de p?riode d''emploi correspondant ? la demande car soit le d?part est pr?sent dans les fichiers de paie et il n''est pas inclus dans la profondeur de r?tro, soit le type de r?embauche est cons?cutif.',1
626: ##
627: SYS_DEF_ERREURS
628: ==
629: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'MOB00049' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0
   :-'MOB00049','STD','fr_fr',0,'Cette URI n''est pas autorisée pour votre application.',1
630:+'MOB00049','STD','fr_fr',0,'Cette URI n''est pas autoris?e pour votre application.',1
631: ##
632: SYS_DEF_ERREURS
633: ==
@@ -636,23 +636,23 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'WKABS049' AND CODLANG = 'fr_fr' AND
636: SYS_DEF_ERREURS
637: ==
638: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'ADM00014' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0
   :-'ADM00014','STD','fr_fr',0,'Problème lors du déchiffrement.',1
639:+'ADM00014','STD','fr_fr',0,'Probl?me lors du d?chiffrement.',1
640: ##
641: SYS_DEF_ERREURS
642: ==
643: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGE00352' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0
   :-'TGE00352','TGE','fr_fr',0,'Une paie est en cours d''exécution.',1
644:+'TGE00352','TGE','fr_fr',0,'Une paie est en cours d''ex?cution.',1
645: ##
646: SYS_DEF_ERREURS
647: ==
648: DELETE FROM SYS_DEF_ERREURS WHERE  CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODERR in ('MOB00052', 'MOB00053')
649: 'MOB00052','STD','fr_fr',0,'Le code origine est obligatoire.',1
   :-'MOB00053','STD','fr_fr',0,'Erreur de paramétrage: le code origine n''est pas renseigné pour votre application .',1
650:+'MOB00053','STD','fr_fr',0,'Erreur de param?trage: le code origine n''est pas renseign? pour votre application .',1
651: ##
652: SYS_DEF_ERREURS
653: ==
654: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00353')
   :-'TGE00353','TGE','fr_fr',0,'Êtes-vous sûr de vouloir escalader votre demande ?',1
655:+'TGE00353','TGE','fr_fr',0,'?tes-vous s?r de vouloir escalader votre demande ?',1
656: ##
657: SYS_DEF_ERREURS
658: ==
@@ -665,25 +665,25 @@ INSERT INTO SYS_DEF_ERREURS(CODERR, CODMOD, CODLANG, NIV_DEFINITION, LIBERR, TYP
665: SYS_DEF_ERREURS
666: ==
667: delete from SYS_DEF_ERREURS where  CODLANG = 'fr_fr'  and CODERR in ('GENCNT77','GENWKF95')
   :-'GENCNT77','GEN','fr_fr',0,'Il existe une date de fin de contrat pour ce salarié. La date de fin prévue du CDD ne peut pas être postérieure à cette fin de contrat.',1
   :-'GENWKF95','GEN','fr_fr',0,'Le salarié sélectionné n''a pas de période d''emploi correspondant à la demande car le départ est présent dans les fichiers de paie et il n''est pas inclus dans la profondeur de rétro.',1
668:+'GENCNT77','GEN','fr_fr',0,'Il existe une date de fin de contrat pour ce salari?. La date de fin pr?vue du CDD ne peut pas ?tre post?rieure ? cette fin de contrat.',1
669:+'GENWKF95','GEN','fr_fr',0,'Le salari? s?lectionn? n''a pas de p?riode d''emploi correspondant ? la demande car le d?part est pr?sent dans les fichiers de paie et il n''est pas inclus dans la profondeur de r?tro.',1
670: ##
671: SYS_DEF_ERREURS
672: ==
673: delete from SYS_DEF_ERREURS where  CODLANG = 'fr_fr'  and CODERR in ('STD00049','STD00014','STD00072') 
   :-'STD00049','STD','fr_fr',0,'Vous n''avez pas les autorisations nécessaires pour utiliser la période d''emploi #1 du PAC #2.',1
   :-'STD00014','STD','fr_fr',0,'Vous n''avez pas les autorisations nécessaires pour utiliser l''identifiant RH #',1
   :-'STD00072','STD','fr_fr',0,'Vous n''avez pas les autorisations nécessaires pour utiliser le matricule #1 du PAC #2.',1
674:+'STD00049','STD','fr_fr',0,'Vous n''avez pas les autorisations n?cessaires pour utiliser la p?riode d''emploi #1 du PAC #2.',1
675:+'STD00014','STD','fr_fr',0,'Vous n''avez pas les autorisations n?cessaires pour utiliser l''identifiant RH #',1
676:+'STD00072','STD','fr_fr',0,'Vous n''avez pas les autorisations n?cessaires pour utiliser le matricule #1 du PAC #2.',1
677: ##
678: SYS_DEF_ERREURS
679: ==
680: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ADMAC001')
   :-'ADMAC001','ADM','fr_fr',0,'La modification de la sécurité a été validée avec succès.',3
681:+'ADMAC001','ADM','fr_fr',0,'La modification de la s?curit? a ?t? valid?e avec succ?s.',3
682: ##
683: SYS_DEF_ERREURS
684: ==
685: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWK103')
   :-'GENWK103','GEN','fr_fr','0','Vous venez de mettre à jour une mutuelle avec une date antérieure au mois de paie en cours. Des rappels de paie sont peut-être à saisir pour régulariser les cotisations.','2'
686:+'GENWK103','GEN','fr_fr','0','Vous venez de mettre ? jour une mutuelle avec une date ant?rieure au mois de paie en cours. Des rappels de paie sont peut-?tre ? saisir pour r?gulariser les cotisations.','2'
687: ##
688: SYS_DEF_ERREURS
689: ==
@@ -692,30 +692,30 @@ delete from SYS_DEF_ERREURS where coderr = 'FORDIP06'
692: SYS_DEF_ERREURS
693: ==
694: delete from SYS_DEF_ERREURS where coderr in ('GENDIP06','GENDIP07')
   :-'GENDIP06','GEN','fr_fr','0','La donnée ''Niveau de formation de plus élevé obtenu'' est obligatoire pour ce salarié.','1'
   :-'GENDIP07','GEN','fr_fr','0','La donnée ''Niveau de diplôme préparé'' est obligatoire pour ce salarié.','1'
695:+'GENDIP06','GEN','fr_fr','0','La donn?e ''Niveau de formation de plus ?lev? obtenu'' est obligatoire pour ce salari?.','1'
696:+'GENDIP07','GEN','fr_fr','0','La donn?e ''Niveau de dipl?me pr?par?'' est obligatoire pour ce salari?.','1'
697: ##
698: SYS_DEF_ERREURS
699: ==
700: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ESGGPS01', 'ESGGPS02', 'ESGGPS03', 'ESGGPS04', 'ESGGPS05', 'ESGGPS06', 'ESGGPS07', 'ESGGPS08', 'ESGGPS09', 'ESGGPS10', 'ESGGPS11', 'ESGGPS12', 'ESGGPS13', 'ESGGPS14', 'ESGGPS15', 'ESGGPS16', 'ESGGPS17', 'ESGGPS18')
   :-'ESGGPS01','ESG','fr_fr','0','Veuillez sélectionner un groupe de signataires.','3'
701:+'ESGGPS01','ESG','fr_fr','0','Veuillez s?lectionner un groupe de signataires.','3'
702: 'ESGGPS02','ESG','fr_fr','0','Voulez-vous supprimer ce(s) signataire(s) ?','3'
   :-'ESGGPS03','ESG','fr_fr','0','Veuillez sélectionner au moins un signataire.','3'
   :-'ESGGPS04','ESG','fr_fr','0','Problème lors de l''ajout des signataires au groupe de signataires.','1'
703:+'ESGGPS03','ESG','fr_fr','0','Veuillez s?lectionner au moins un signataire.','3'
704:+'ESGGPS04','ESG','fr_fr','0','Probl?me lors de l''ajout des signataires au groupe de signataires.','1'
705: 'ESGGPS05','ESG','fr_fr','0','Le code groupe signataires est obligatoire.','1'
   :-'ESGGPS06','ESG','fr_fr','0','Le signataire #1 existe déjà dans le groupe de signataires #2.','3'
   :-'ESGGPS07','ESG','fr_fr','0','Problème lors de la suppression du/des signataire(s) appartenant au groupe de signataires.','1'
   :-'ESGGPS08','ESG','fr_fr','0','Problème lors de l''ajout du groupe de signataires.','1'
   :-'ESGGPS09','ESG','fr_fr','0','Le groupe signataires #1 existe déjà.','1'
706:+'ESGGPS06','ESG','fr_fr','0','Le signataire #1 existe d?j? dans le groupe de signataires #2.','3'
707:+'ESGGPS07','ESG','fr_fr','0','Probl?me lors de la suppression du/des signataire(s) appartenant au groupe de signataires.','1'
708:+'ESGGPS08','ESG','fr_fr','0','Probl?me lors de l''ajout du groupe de signataires.','1'
709:+'ESGGPS09','ESG','fr_fr','0','Le groupe signataires #1 existe d?j?.','1'
710: 'ESGGPS10','ESG','fr_fr','0','Le groupe signataires #1 n''existe pas.','1'
   :-'ESGGPS11','ESG','fr_fr','0','Voulez-vous supprimer ce groupe de signataires. Ceci va supprimer ce groupe de signataires sur toutes les entités qui lui sont associées.','3'
   :-'ESGGPS12','ESG','fr_fr','0','Problème lors de la suppression du groupe de signataires.','3'
   :-'ESGGPS13','ESG','fr_fr','0','Attention, la taille de l''écran empêche l''affichage des tableaux.','3'
   :-'ESGGPS14','ESG','fr_fr','0','Les signataires suivants (#1) existent déjà dans le groupe de signataires : #2.','3'
   :-'ESGGPS15','ESG','fr_fr','0','Ce groupe de signataires n''est associé à aucune entité d''un arbre HRO.','3'
   :-'ESGGPS16','ESG','fr_fr','0','Etes-vous sûr de vouloir désigner ce signataire comme signataire par défaut ? Un seul signataire peut être désigné à la fois.','3'
   :-'ESGGPS17','ESG','fr_fr','0','Problème lors de la désignation du signataire par défaut.','3'
   :-'ESGGPS18','ESG','fr_fr','0','Ce groupe de signataires n''a pas encore de signataire par défaut désigné.','3'
711:+'ESGGPS11','ESG','fr_fr','0','Voulez-vous supprimer ce groupe de signataires. Ceci va supprimer ce groupe de signataires sur toutes les entit?s qui lui sont associ?es.','3'
712:+'ESGGPS12','ESG','fr_fr','0','Probl?me lors de la suppression du groupe de signataires.','3'
713:+'ESGGPS13','ESG','fr_fr','0','Attention, la taille de l''?cran emp?che l''affichage des tableaux.','3'
714:+'ESGGPS14','ESG','fr_fr','0','Les signataires suivants (#1) existent d?j? dans le groupe de signataires : #2.','3'
715:+'ESGGPS15','ESG','fr_fr','0','Ce groupe de signataires n''est associ? ? aucune entit? d''un arbre HRO.','3'
716:+'ESGGPS16','ESG','fr_fr','0','Etes-vous s?r de vouloir d?signer ce signataire comme signataire par d?faut ? Un seul signataire peut ?tre d?sign? ? la fois.','3'
717:+'ESGGPS17','ESG','fr_fr','0','Probl?me lors de la d?signation du signataire par d?faut.','3'
718:+'ESGGPS18','ESG','fr_fr','0','Ce groupe de signataires n''a pas encore de signataire par d?faut d?sign?.','3'
719: ##
720: SYS_DEF_ERREURS
721: ==
@@ -725,42 +725,42 @@ delete from SYS_DEF_ERREURS where CODMOD = 'HRO' and CODLANG = 'fr_fr' and NIV_D
725: SYS_DEF_ERREURS
726: ==
727: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ESGGPS19', 'ESGGPS20', 'ESGGPS21')
   :-'ESGGPS19','ESG','fr_fr','0','Les signataires suivants ne sont plus présents (#1), ils ne peuvent pas être ajoutés au groupe de signataires #2.','1'
   :-'ESGGPS20','ESG','fr_fr','0','Le signataire suivant n''est plus présent (#1), il ne peut pas être ajouté au groupe de signataires #2.','1'
   :-'ESGGPS21','ESG','fr_fr','0','Tous les signataires du groupe de signataires #1 ne sont plus présents.','1'
728:+'ESGGPS19','ESG','fr_fr','0','Les signataires suivants ne sont plus pr?sents (#1), ils ne peuvent pas ?tre ajout?s au groupe de signataires #2.','1'
729:+'ESGGPS20','ESG','fr_fr','0','Le signataire suivant n''est plus pr?sent (#1), il ne peut pas ?tre ajout? au groupe de signataires #2.','1'
730:+'ESGGPS21','ESG','fr_fr','0','Tous les signataires du groupe de signataires #1 ne sont plus pr?sents.','1'
731: ##
732: SYS_DEF_ERREURS
733: ==
734: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ESGCHX04', 'ESGCHX05')
   :-'ESGCHX04','ESG','fr_fr','0','Problème lors de la récupération de l''entité du salarié.','1'
   :-'ESGCHX05','ESG','fr_fr','0','Pas de groupe de signataires associé à l''entité juridique du salarié ou bien le groupe est vide.','1'
735:+'ESGCHX04','ESG','fr_fr','0','Probl?me lors de la r?cup?ration de l''entit? du salari?.','1'
736:+'ESGCHX05','ESG','fr_fr','0','Pas de groupe de signataires associ? ? l''entit? juridique du salari? ou bien le groupe est vide.','1'
737: ##
738: SYS_DEF_ERREURS
739: ==
740: delete from SYS_DEF_ERREURS where coderr in ('ABS00069','ABS00070')
   :-'ABS00069','GTA','fr_fr','0','Vous ne pouvez pas modifier le statut de cette pièce justificative','1'
741:+'ABS00069','GTA','fr_fr','0','Vous ne pouvez pas modifier le statut de cette pi?ce justificative','1'
742: 'ABS00070','GTA','fr_fr','0','Le statut est invalide','1'
743: ##
744: SYS_DEF_ERREURS
745: ==
746: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('IMPGR044')
   :-'IMPGR044','TGE','fr_fr',0,'La ligne du fichier excel est incomplète.',3
747:+'IMPGR044','TGE','fr_fr',0,'La ligne du fichier excel est incompl?te.',3
748: ##
749: SYS_DEF_ERREURS
750: ==
751: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENPRE10'
   :-'GENPRE10','GEN','fr_fr','0','Pour information, mail et téléphone professionnels ou personnels sont obligatoires en cas de signature électronique. Veuillez compléter votre saisie, le cas échéant.','2'
752:+'GENPRE10','GEN','fr_fr','0','Pour information, mail et t?l?phone professionnels ou personnels sont obligatoires en cas de signature ?lectronique. Veuillez compl?ter votre saisie, le cas ?ch?ant.','2'
753: ##
754: SYS_DEF_ERREURS
755: ==
756: DELETE FROM SYS_DEF_ERREURS WHERE CODERR ='GENWK105' AND CODMOD ='GEN' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0
   :-'GENWK105','GEN','fr_fr','0','La date d''attribution du véhicule ne peut pas être antérieure à celle du contrat. Veuillez corriger votre saisie.','1'
757:+'GENWK105','GEN','fr_fr','0','La date d''attribution du v?hicule ne peut pas ?tre ant?rieure ? celle du contrat. Veuillez corriger votre saisie.','1'
758: ##
759: SYS_DEF_ERREURS
760: ==
761: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('IMPEX084', 'IMPEX034')
   :-'IMPEX084','TGE','fr_fr','0','Une erreur s''est produite pendant la suppression de la ligne d''annulation importée.','1'
   :-'IMPEX034','TGE','fr_fr','0','Le type de l''import n''est pas correct : #1 (DV -> #2, Elément -> #3, DR -> #4, DR cotis. -> #5, Incident -> #6, Absence -> #7, GAP -> #8, GAP RETRO -> #9, Annulation -> #10).','1'
762:+'IMPEX084','TGE','fr_fr','0','Une erreur s''est produite pendant la suppression de la ligne d''annulation import?e.','1'
763:+'IMPEX034','TGE','fr_fr','0','Le type de l''import n''est pas correct : #1 (DV -> #2, El?ment -> #3, DR -> #4, DR cotis. -> #5, Incident -> #6, Absence -> #7, GAP -> #8, GAP RETRO -> #9, Annulation -> #10).','1'
764: ##
765: SYS_DEF_ERREURS
766: ==
@@ -770,27 +770,27 @@ delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_D
770: SYS_DEF_ERREURS
771: ==
772: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and  CODERR in ('GENWK100', 'GENWK101','GENWK102','GENCNT78')
   :-'GENWK100','GEN','fr_fr','0','Pour information, il y a une suspension de contrat toujours en cours pour ce salarié. Assurez-vous que votre action est justifiée.','2'
   :-'GENWK101','GEN','fr_fr','0','Pour information, la période insérée est en chevauchement partiel ou total avec une période de suspension pour ce salarié.  Assurez-vous que votre action est justifiée.','2'
773:+'GENWK100','GEN','fr_fr','0','Pour information, il y a une suspension de contrat toujours en cours pour ce salari?. Assurez-vous que votre action est justifi?e.','2'
774:+'GENWK101','GEN','fr_fr','0','Pour information, la p?riode ins?r?e est en chevauchement partiel ou total avec une p?riode de suspension pour ce salari?.  Assurez-vous que votre action est justifi?e.','2'
775: 'GENWK102','GEN','fr_fr','0','Il y a une suspension de contrat en cours sur votre dossier, votre demande ne peut aboutir.','1'
   :-'GENCNT78','GEN','fr_fr','0','Attention, la date de fin prévue du CDD est antérieure à la date de fin prévue de la suspension de contrat. Assurez-vous de la cohérence et faites les modifications nécessaires.','2'
776:+'GENCNT78','GEN','fr_fr','0','Attention, la date de fin pr?vue du CDD est ant?rieure ? la date de fin pr?vue de la suspension de contrat. Assurez-vous de la coh?rence et faites les modifications n?cessaires.','2'
777: ##
778: SYS_DEF_ERREURS
779: ==
780: DELETE FROM SYS_DEF_ERREURS WHERE CODERR ='GENWKF13' AND CODMOD ='GEN' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0
   :-'GENWKF13','GEN','fr_fr','0','La date d''effet est antérieure à la date de paie en cours. Il est peut-être nécessaire de saisir des données de rappels.','2'
781:+'GENWKF13','GEN','fr_fr','0','La date d''effet est ant?rieure ? la date de paie en cours. Il est peut-?tre n?cessaire de saisir des donn?es de rappels.','2'
782: ##
783: SYS_DEF_ERREURS
784: ==
785: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('STDTAB80','STDTAB81') AND CODMOD ='TAB' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0
786: 'STDTAB80','TAB','fr_fr','0','L''alias # n''est plus consultable depuis les API Marketplace','2'
   :-'STDTAB81','TAB','fr_fr','0','Cet id Marketplace est déjà associé à l''alias ','2'
787:+'STDTAB81','TAB','fr_fr','0','Cet id Marketplace est d?j? associ? ? l''alias ','2'
788: ##
789: SYS_DEF_ERREURS
790: ==
791: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('EDI00098', 'EDI00099')
   :-'EDI00098','EDI','fr_fr','0','La génération se terminera dans quelques instants. Vous serez averti lorsque le fichier sera prêt. Il sera accessible depuis l''écran Fichiers disponibles.','1'
   :-'EDI00099','EDI','fr_fr','0','La génération est en cours, merci de patienter. Vous pouvez fermer ce slide-in, vous serez averti lorsque le fichier sera disponible','1'
792:+'EDI00098','EDI','fr_fr','0','La g?n?ration se terminera dans quelques instants. Vous serez averti lorsque le fichier sera pr?t. Il sera accessible depuis l''?cran Fichiers disponibles.','1'
793:+'EDI00099','EDI','fr_fr','0','La g?n?ration est en cours, merci de patienter. Vous pouvez fermer ce slide-in, vous serez averti lorsque le fichier sera disponible','1'
794: ##
795: SYS_DEF_ERREURS
796: ==
@@ -800,13 +800,13 @@ delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_D
800: SYS_DEF_ERREURS
801: ==
802: DELETE FROM SYS_DEF_ERREURS WHERE CODMOD IN ('WKF','GEN') and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and coderr = 'GENWKF49'
   :-'GENWKF49','WKF','fr_fr','0','Le salarié partant est manager hiérarchique, merci de prévoir le nom de son remplaçant sur sa structure hiérarchique #','1'
803:+'GENWKF49','WKF','fr_fr','0','Le salari? partant est manager hi?rarchique, merci de pr?voir le nom de son rempla?ant sur sa structure hi?rarchique #','1'
804: ##
805: SYS_DEF_ERREURS
806: ==
807: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('EDI00098', 'EDI00099')
   :-'EDI00098','EDI','fr_fr','0','La génération se terminera dans quelques instants. Vous serez averti.e lorsque le fichier sera prêt. Il sera accessible depuis l''écrans Fichiers disponible.','2'
   :-'EDI00099','EDI','fr_fr','0','La génération est en cours, merci de patienter. Vous pouvez fermer ce slide-in, vous serez averti.e lorsque le fichier sera disponible','2'
808:+'EDI00098','EDI','fr_fr','0','La g?n?ration se terminera dans quelques instants. Vous serez averti.e lorsque le fichier sera pr?t. Il sera accessible depuis l''?crans Fichiers disponible.','2'
809:+'EDI00099','EDI','fr_fr','0','La g?n?ration est en cours, merci de patienter. Vous pouvez fermer ce slide-in, vous serez averti.e lorsque le fichier sera disponible','2'
810: ##
811: SYS_DEF_ERREURS
812: ==
@@ -826,177 +826,177 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODMOD = 'HRO' and CODLANG = 'fr_fr'  and CODE
826: SYS_DEF_ERREURS
827: ==
828: DELETE FROM SYS_DEF_ERREURS WHERE CODMOD = 'ADM' and CODLANG = 'fr_fr'  and CODERR='ADMUSR06' and NIV_DEFINITION = 0
   :-'ADMUSR06','ADM','fr_fr',0,'L''adresse email ''#'' n''est pas conforme. Il faut la changer dans son écran d''origine.',1
829:+'ADMUSR06','ADM','fr_fr',0,'L''adresse email ''#'' n''est pas conforme. Il faut la changer dans son ?cran d''origine.',1
830: ##
831: SYS_DEF_ERREURS
832: ==
833: DELETE FROM SYS_DEF_ERREURS WHERE CODMOD = 'ADM' and CODLANG = 'fr_fr'  and CODERR='ADMUSR05' and NIV_DEFINITION = 0
   :-'ADMUSR05','ADM','fr_fr',0,'L''adresse email ''#'' n''est pas conforme. Il faut la changer dans son écran d''origine.',1
834:+'ADMUSR05','ADM','fr_fr',0,'L''adresse email ''#'' n''est pas conforme. Il faut la changer dans son ?cran d''origine.',1
835: ##
836: SYS_DEF_ERREURS
837: ==
838: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR = 'GENPRE11' 
   :-'GENPRE11','GEN','fr_fr','0','Il y a déjà 3 contacts d''urgence saisis pour ce collaborateur.','1'
839:+'GENPRE11','GEN','fr_fr','0','Il y a d?j? 3 contacts d''urgence saisis pour ce collaborateur.','1'
840: ##
841: SYS_DEF_ERREURS
842: ==
843: delete from SYS_DEF_ERREURS where CODMOD = 'HRO' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR in ('HROCTL96', 'HROCTL97') 
   :-'HROCTL96','HRO','fr_fr','0','L''entité #1 de la structure #2 est rattachée au moins à un dossier à partir de la date du #3.','1'
   :-'HROCTL97','HRO','fr_fr','0','Au moins une entité fille de l''entité mère #1 de la structure #2 est rattachée à un dossier à partir de la date du #3.','1'
844:+'HROCTL96','HRO','fr_fr','0','L''entit? #1 de la structure #2 est rattach?e au moins ? un dossier ? partir de la date du #3.','1'
845:+'HROCTL97','HRO','fr_fr','0','Au moins une entit? fille de l''entit? m?re #1 de la structure #2 est rattach?e ? un dossier ? partir de la date du #3.','1'
846: ##
847: SYS_DEF_ERREURS
848: ==
849: DELETE FROM SYS_DEF_ERREURS WHERE CODMOD = 'TAB' AND CODLANG = 'fr_fr' AND CODERR = 'STDTAB82' AND NIV_DEFINITION = 0
   :-'STDTAB82','TAB','fr_fr',0,'Veuillez d''abord définir au moins une clé pour cette table.',1
850:+'STDTAB82','TAB','fr_fr',0,'Veuillez d''abord d?finir au moins une cl? pour cette table.',1
851: ##
852: SYS_DEF_ERREURS
853: ==
854: DELETE FROM SYS_DEF_ERREURS WHERE CODMOD = 'TAB' AND CODLANG = 'fr_fr' AND CODERR = 'STDTAB83' AND NIV_DEFINITION = 0
   :-'STDTAB83','TAB','fr_fr',0,'La zone #1 doit être au format date (format : #2).',1
855:+'STDTAB83','TAB','fr_fr',0,'La zone #1 doit ?tre au format date (format : #2).',1
856: ##
857: SYS_DEF_ERREURS
858: ==
859: delete from SYS_DEF_ERREURS where CODMOD = 'EDI' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR in ('EDI00098', 'EDI00099') 
   :-'EDI00098','EDI','fr_fr','0','La génération se terminera dans quelques instants. Vous verrez le fichier apparaître dans "Mes fichiers récents". Il sera accessible depuis l''écran Fichiers disponibles.','2'
   :-'EDI00099','EDI','fr_fr','0','La génération est en cours, merci de patienter. Vous pouvez fermer ce slide-in, vous verrez le fichier apparaître dans "Mes fichiers récents".','2'
860:+'EDI00098','EDI','fr_fr','0','La g?n?ration se terminera dans quelques instants. Vous verrez le fichier appara?tre dans "Mes fichiers r?cents". Il sera accessible depuis l''?cran Fichiers disponibles.','2'
861:+'EDI00099','EDI','fr_fr','0','La g?n?ration est en cours, merci de patienter. Vous pouvez fermer ce slide-in, vous verrez le fichier appara?tre dans "Mes fichiers r?cents".','2'
862: ##
863: SYS_DEF_ERREURS
864: ==
865: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR in ('ADMWE004') 
   :-'ADMWE004','STD','fr_fr','0','Ce matricule a déjà été attribué au login suivant : #1, qui n''est pas déclaré dans l''application. Merci de l''importer pour pouvoir le mettre à jour.','4'
866:+'ADMWE004','STD','fr_fr','0','Ce matricule a d?j? ?t? attribu? au login suivant : #1, qui n''est pas d?clar? dans l''application. Merci de l''importer pour pouvoir le mettre ? jour.','4'
867: ##
868: SYS_DEF_ERREURS
869: ==
870: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR = 'GENHOZ02' 
   :-'GENHOZ02','GEN','fr_fr','0','Le nombre de jours hebdo de TAD ne peut pas être supérieur à 6 jours. Veuillez corriger votre saisie;','1'
871:+'GENHOZ02','GEN','fr_fr','0','Le nombre de jours hebdo de TAD ne peut pas ?tre sup?rieur ? 6 jours. Veuillez corriger votre saisie;','1'
872: ##
873: SYS_DEF_ERREURS
874: ==
875: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00354')
   :-'TGE00354','TGE','fr_fr',0,'Êtes-vous sûr de vouloir changer le statut de votre demande à ',1
876:+'TGE00354','TGE','fr_fr',0,'?tes-vous s?r de vouloir changer le statut de votre demande ? ',1
877: ##
878: SYS_DEF_ERREURS
879: ==
880: delete from SYS_DEF_ERREURS where CODMOD = 'ADM' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR in ('DOCSV068','DOCSV069','DOCSV070') 
   :-'DOCSV068','ADM','fr_fr','0','La conversion  est en cours de traitement, veuillez rafraîchir l''écran','1'
   :-'DOCSV069','ADM','fr_fr','0','Le pdf chargé n''est pas valide','1'
   :-'DOCSV070','ADM','fr_fr','0','La conversion par docserver a échouée','1'
881:+'DOCSV068','ADM','fr_fr','0','La conversion  est en cours de traitement, veuillez rafra?chir l''?cran','1'
882:+'DOCSV069','ADM','fr_fr','0','Le pdf charg? n''est pas valide','1'
883:+'DOCSV070','ADM','fr_fr','0','La conversion par docserver a ?chou?e','1'
884: ##
885: SYS_DEF_ERREURS
886: ==
887: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00355','TGE00356','TGE00357')
   :-'TGE00355','TGE','fr_fr',0,'Impossible de modifier le PAC associé à cette entité, car un ou plusieurs collaborateurs y sont affectés',1
   :-'TGE00356','TGE','fr_fr',0,'Impossible de supprimer le(s) PAC(s) suivant(s) de la liste des PACs de l''entité, car un ou plusieurs collaborateurs y sont affectés : # ',1
   :-'TGE00357','TGE','fr_fr',0,'Cette entité a été supprimée des VR pour le(s) PAC(s) suivant(s) : # ',1
888:+'TGE00355','TGE','fr_fr',0,'Impossible de modifier le PAC associ? ? cette entit?, car un ou plusieurs collaborateurs y sont affect?s',1
889:+'TGE00356','TGE','fr_fr',0,'Impossible de supprimer le(s) PAC(s) suivant(s) de la liste des PACs de l''entit?, car un ou plusieurs collaborateurs y sont affect?s : # ',1
890:+'TGE00357','TGE','fr_fr',0,'Cette entit? a ?t? supprim?e des VR pour le(s) PAC(s) suivant(s) : # ',1
891: ##
892: SYS_DEF_ERREURS
893: ==
894: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ADMPD175','ADMPD176','ADMPD177','ADMPD178')
895: 'ADMPD175','STD','fr_fr',0,'La valeur # n''existe pas pour le champ #',1
896: 'ADMPD176','STD','fr_fr',0,'Au moins l''une des valeurs de la liste # n''existe pas pour le champ #',1
   :-'ADMPD177','STD','fr_fr',0,'Le nombre maximum de valeurs que vous pouvez sélectionner pour la donnée # est : #',1
897:+'ADMPD177','STD','fr_fr',0,'Le nombre maximum de valeurs que vous pouvez s?lectionner pour la donn?e # est : #',1
898: 'ADMPD178','STD','fr_fr',0,'Les valeurs # n''existent pas pour le champ #',1
899: ##
900: SYS_DEF_ERREURS
901: ==
902: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'TGE00358'
   :-'TGE00358','TGE','fr_fr',0,'La date de début de l''incident n''est pas cohérente avec la période d''emploi.',1
903:+'TGE00358','TGE','fr_fr',0,'La date de d?but de l''incident n''est pas coh?rente avec la p?riode d''emploi.',1
904: ##
905: SYS_DEF_ERREURS
906: ==
907: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'ADMPD040'
   :-'ADMPD040','STD','fr_fr',0,'Ce dictionnaire existe déjà.',1
908:+'ADMPD040','STD','fr_fr',0,'Ce dictionnaire existe d?j?.',1
909: ##
910: SYS_DEF_ERREURS
911: ==
912: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ADMGP001', 'ADMGP002', 'ADMGP003','ADMGP004','ADMGP005','ADMGP006','ADMGP007')
   :-'ADMGP001','ADM','fr_fr',0,'Veuillez sélectionner un projet.',1
   :-'ADMGP002','ADM','fr_fr',0,'Problème lors de l''ajout des intervenants au projet.',1
913:+'ADMGP001','ADM','fr_fr',0,'Veuillez s?lectionner un projet.',1
914:+'ADMGP002','ADM','fr_fr',0,'Probl?me lors de l''ajout des intervenants au projet.',1
915: 'ADMGP003','ADM','fr_fr',0,'Voulez-vous supprimer ce(s) intervenant(s) ?',3
   :-'ADMGP004','ADM','fr_fr',0,'Veuillez sélectionner au moins un intervenant.',3
   :-'ADMGP005','ADM','fr_fr',0,'L''intervenant #1 ne peut pas être supprimé.',	3
   :-'ADMGP006','ADM','fr_fr',0,'Les intervenants (#1) ne peuvent pas  être supprimés.', 3
916:+'ADMGP004','ADM','fr_fr',0,'Veuillez s?lectionner au moins un intervenant.',3
917:+'ADMGP005','ADM','fr_fr',0,'L''intervenant #1 ne peut pas ?tre supprim?.',	3
918:+'ADMGP006','ADM','fr_fr',0,'Les intervenants (#1) ne peuvent pas  ?tre supprim?s.', 3
919: 'ADMGP007','ADM','fr_fr',0,'Vous ne pouvez pas travailler sur un projet sur lequel vous n''intervenez pas',3
920: ##
921: SYS_DEF_ERREURS
922: ==
923: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'ADMPD179'
   :-'ADMPD179','ADM','fr_fr',0,'L''identifiant du groupe a été modifié, vous devez interroger avant de supprimer',1
924:+'ADMPD179','ADM','fr_fr',0,'L''identifiant du groupe a ?t? modifi?, vous devez interroger avant de supprimer',1
925: ##
926: SYS_DEF_ERREURS
927: ==
928: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD180', 'ADMPD181', 'ADMPD182', 'ADMPD183', 'ADMPD184', 'ADMPD185' )
   :-'ADMPD180','ADM','fr_fr',0,'Voulez vous supprimer la donnée #1 ?',1
   :-'ADMPD181','ADM','fr_fr',0,'La suppression de la donnée #1 a été effectuée avec succès.', 3
   :-'ADMPD182','ADM','fr_fr',0,'La donnée #1 a été #2', 3
   :-'ADMPD183','ADM','fr_fr',0,'La suppression de la donnée #1 est interdite car elle est mise au produit.', 3
929:+'ADMPD180','ADM','fr_fr',0,'Voulez vous supprimer la donn?e #1 ?',1
930:+'ADMPD181','ADM','fr_fr',0,'La suppression de la donn?e #1 a ?t? effectu?e avec succ?s.', 3
931:+'ADMPD182','ADM','fr_fr',0,'La donn?e #1 a ?t? #2', 3
932:+'ADMPD183','ADM','fr_fr',0,'La suppression de la donn?e #1 est interdite car elle est mise au produit.', 3
933: 'ADMPD184','ADM','fr_fr',0,'La suppression du dictionnaire #1 est interdite.', 2
934: 'ADMPD185','ADM','fr_fr',0,'Voulez vous supprimer le dictionnaire ? ', 3
935: ##
936: SYS_DEF_ERREURS
937: ==
938: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD186','ADMPD187')
   :-'ADMPD186','ADM','fr_fr',0,'L''identifiant du groupe a été modifié, vous devez interroger avant de modifier',1
   :-'ADMPD187','ADM','fr_fr',0,'Vous ne pouvez pas modifier ce groupe de données',1
939:+'ADMPD186','ADM','fr_fr',0,'L''identifiant du groupe a ?t? modifi?, vous devez interroger avant de modifier',1
940:+'ADMPD187','ADM','fr_fr',0,'Vous ne pouvez pas modifier ce groupe de donn?es',1
941: ##
942: SYS_DEF_ERREURS
943: ==
944: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENMUT10'
   :-'GENMUT10','GEN','fr_fr',0,'Une période dans contrat courant postérieure à la date de mise à jour existe et empêche la validation. Merci de supprimer l''occurence dans contrat courant',1
945:+'GENMUT10','GEN','fr_fr',0,'Une p?riode dans contrat courant post?rieure ? la date de mise ? jour existe et emp?che la validation. Merci de supprimer l''occurence dans contrat courant',1
946: ##
947: SYS_DEF_ERREURS
948: ==
949: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENCHS13','GENCHS14','GENCHS15')
   :-'GENCHS13','GEN','fr_fr','0','Si le code statut BOETH est 02 (bénéficiaire AT/MP) alors le taux d''IPP doit être supérieur ou égal à 10%. Si le taux IPP est inférieur, le code statut DOETH 02 ne peut pas être déclaré en DSN.','2'
   :-'GENCHS14','GEN','fr_fr','0','Si le code statut BOETH est 02 (bénéficiaire AT/MP) alors la rente doit être cochée à Oui. S''il n''y a pas de rente, le code statut DOETH 02 ne peut pas être déclaré en DSN.','2'
   :-'GENCHS15','GEN','fr_fr','0','Les types de reconnaissance doivent être différents ou différent du statut OETH. Veuillez corriger votre saisie.','1'
950:+'GENCHS13','GEN','fr_fr','0','Si le code statut BOETH est 02 (b?n?ficiaire AT/MP) alors le taux d''IPP doit ?tre sup?rieur ou ?gal ? 10%. Si le taux IPP est inf?rieur, le code statut DOETH 02 ne peut pas ?tre d?clar? en DSN.','2'
951:+'GENCHS14','GEN','fr_fr','0','Si le code statut BOETH est 02 (b?n?ficiaire AT/MP) alors la rente doit ?tre coch?e ? Oui. S''il n''y a pas de rente, le code statut DOETH 02 ne peut pas ?tre d?clar? en DSN.','2'
952:+'GENCHS15','GEN','fr_fr','0','Les types de reconnaissance doivent ?tre diff?rents ou diff?rent du statut OETH. Veuillez corriger votre saisie.','1'
953: ##
954: SYS_DEF_ERREURS
955: ==
956: DELETE FROM sys_def_erreurs WHERE CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'ZPP00026'
   :-'ZPP00026','TGE','fr_fr','0','Confirmez-vous l''arrêt de ce traitement ?','3'
957:+'ZPP00026','TGE','fr_fr','0','Confirmez-vous l''arr?t de ce traitement ?','3'
958: ##
959: SYS_DEF_ERREURS
960: ==
961: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'ZPP00027'
   :-'ZPP00027','TGE','fr_fr',0,'Demande d''interruption du traitement effectuée',2
962:+'ZPP00027','TGE','fr_fr',0,'Demande d''interruption du traitement effectu?e',2
963: ##
964: SYS_DEF_ERREURS
965: ==
966: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'ZPP00028'
   :-'ZPP00028','TGE','fr_fr',0,'Ce traitement n''est plus en cours d''exécution',2
967:+'ZPP00028','TGE','fr_fr',0,'Ce traitement n''est plus en cours d''ex?cution',2
968: ##
969: SYS_DEF_ERREURS
970: ==
971: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENAPP08'
   :-'GENAPP08','GEN','fr_fr',0,'Pour un mode de rémunération au taux horaire, le code catégorie professionnelle doit être 40-employés horaire ou 41-ouvriers horaire. Veuillez corriger votre saisie.',1
972:+'GENAPP08','GEN','fr_fr',0,'Pour un mode de r?mun?ration au taux horaire, le code cat?gorie professionnelle doit ?tre 40-employ?s horaire ou 41-ouvriers horaire. Veuillez corriger votre saisie.',1
973: ##
974: SYS_DEF_ERREURS
975: ==
976: delete from SYS_DEF_ERREURS where CODMOD = 'ADM' and CODLANG = 'fr_fr' and NIV_DEFINITION = 0 and CODERR in ('DOCSV071','DOCSV072','DOCSV073','DOCSV074','DOCSV075')
977: 'DOCSV071','ADM','fr_fr',0,'Le paragraphe #1 (#2) n''est pas dans le DSF.',1
   :-'DOCSV072','ADM','fr_fr',0,'La maquette #1 n''a pas de paragraphes associés.',1
   :-'DOCSV073','ADM','fr_fr',0,'Le paragraphe #1 a été rejeté par Docserv3.',1
   :-'DOCSV074','ADM','fr_fr',0,'La maquette n''a pas été traitée.',1
   :-'DOCSV075','ADM','fr_fr',0,'Certains paragraphes de la maquette #1 n''ont pas pu être publiés.',1
978:+'DOCSV072','ADM','fr_fr',0,'La maquette #1 n''a pas de paragraphes associ?s.',1
979:+'DOCSV073','ADM','fr_fr',0,'Le paragraphe #1 a ?t? rejet? par Docserv3.',1
980:+'DOCSV074','ADM','fr_fr',0,'La maquette n''a pas ?t? trait?e.',1
981:+'DOCSV075','ADM','fr_fr',0,'Certains paragraphes de la maquette #1 n''ont pas pu ?tre publi?s.',1
982: ##
983: SYS_DEF_ERREURS
984: ==
985: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = 0 and CODERR in ('GENWK106','GENWK107','GENWK108','GENWK109','GENFCN43','GENFCN44','GENFCN45','GENFCN46','GENFCN47','GENFCN48')
   :-'GENFCN43','GEN','fr_fr','0','La date du dernier jour travaillé doit être supérieure ou égale à la date de début de contrat.','1'
   :-'GENFCN44','GEN','fr_fr','0','La date du dernier jour travaillé doit être inférieure ou égale à la date de fin de contrat.','1'
   :-'GENFCN45','GEN','fr_fr','0','La date du dernier jour travaillé doit être inférieure à la date de début de la suspension du contrat.','1'
   :-'GENFCN46','GEN','fr_fr','0','La date d''engagement de la procédure de licenciement doit être au moins égale au début de préavis','1'
   :-'GENFCN47','GEN','fr_fr','0','La période de préavis est renseignée et elle est comprise dans la période contractuelle : il faut préciser s''il s''agit d''un préavis effectué payé ou d''un préavis non effectué payé. Veuillez compléter votre saisie.','1'
   :-'GENWK106','GEN','fr_fr','0','La date de notification du départ ne peut pas être antérieure à celle du contrat. Veuillez corriger votre saisie.','1'
   :-'GENWK107','GEN','fr_fr','0','La date de notification du départ ne peut pas être postérieure à celle de la fin du contrat. Veuillez corriger votre saisie.','1'
   :-'GENWK108','GEN','fr_fr','0','La date d''engagement de la procédure de licenciement  ne peut être antérieure à celle du contrat. Veuillez corriger votre saisie.','1'
   :-'GENWK109','GEN','fr_fr','0','La date d''engagement de la procédure de licenciement ne peut être postérieure à celle de la fin du contrat. Veuillez corriger votre saisie.','1'
986:+'GENFCN43','GEN','fr_fr','0','La date du dernier jour travaill? doit ?tre sup?rieure ou ?gale ? la date de d?but de contrat.','1'
987:+'GENFCN44','GEN','fr_fr','0','La date du dernier jour travaill? doit ?tre inf?rieure ou ?gale ? la date de fin de contrat.','1'
988:+'GENFCN45','GEN','fr_fr','0','La date du dernier jour travaill? doit ?tre inf?rieure ? la date de d?but de la suspension du contrat.','1'
989:+'GENFCN46','GEN','fr_fr','0','La date d''engagement de la proc?dure de licenciement doit ?tre au moins ?gale au d?but de pr?avis','1'
990:+'GENFCN47','GEN','fr_fr','0','La p?riode de pr?avis est renseign?e et elle est comprise dans la p?riode contractuelle : il faut pr?ciser s''il s''agit d''un pr?avis effectu? pay? ou d''un pr?avis non effectu? pay?. Veuillez compl?ter votre saisie.','1'
991:+'GENWK106','GEN','fr_fr','0','La date de notification du d?part ne peut pas ?tre ant?rieure ? celle du contrat. Veuillez corriger votre saisie.','1'
992:+'GENWK107','GEN','fr_fr','0','La date de notification du d?part ne peut pas ?tre post?rieure ? celle de la fin du contrat. Veuillez corriger votre saisie.','1'
993:+'GENWK108','GEN','fr_fr','0','La date d''engagement de la proc?dure de licenciement  ne peut ?tre ant?rieure ? celle du contrat. Veuillez corriger votre saisie.','1'
994:+'GENWK109','GEN','fr_fr','0','La date d''engagement de la proc?dure de licenciement ne peut ?tre post?rieure ? celle de la fin du contrat. Veuillez corriger votre saisie.','1'
995: ##
996: SYS_DEF_ERREURS
997: ==
998: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'DOCSV076'
    :-'DOCSV076','ADM','fr_fr',0,'Le document n''est plus compatible docserv v2 si elle est publié sans style.',2
999:+'DOCSV076','ADM','fr_fr',0,'Le document n''est plus compatible docserv v2 si elle est publi? sans style.',2
1000: ##
1001: SYS_DEF_ERREURS
1002: ==
@@ -1015,56 +1015,56 @@ delete from SYS_DEF_ERREURS where CODMOD = 'DEL' and CODLANG = 'fr_fr' and NIV_D
1015: SYS_DEF_ERREURS
1016: ==
1017: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD188', 'ADMPD189', 'ADMPD190', 'ADMPD191', 'ADMPD192', 'ADMPD193','ADMPD194','ADMPD195' )
    :-'ADMPD188','ADM','fr_fr',0,'La validation de l''ergonomie de l''écran #1 a été effectuée avec succès.',3
    :-'ADMPD189','ADM','fr_fr',0,'L''annulation de l''ergonomie de l''écran #1 a été effectuée avec succès.',3
1018:+'ADMPD188','ADM','fr_fr',0,'La validation de l''ergonomie de l''?cran #1 a ?t? effectu?e avec succ?s.',3
1019:+'ADMPD189','ADM','fr_fr',0,'L''annulation de l''ergonomie de l''?cran #1 a ?t? effectu?e avec succ?s.',3
1020: 'ADMPD190','ADM','fr_fr',0,'Le dictionnaire est obligatoire.',2
    :-'ADMPD191','ADM','fr_fr',0,'Aucun groupe de présentation pour l''écran #1 .',1
    :-'ADMPD192','ADM','fr_fr',0,'Veuillez sélectionner une règle de gestion.',3
    :-'ADMPD193','ADM','fr_fr',0,'Veuillez sélectionner un appel table.',3
    :-'ADMPD194','ADM','fr_fr',0,'Vous devez saisir le paramétrage du composant Recherche Structure.',1
    :-'ADMPD195','ADM','fr_fr',0,'Aucun écran n''est sélectionné.',3
1021:+'ADMPD191','ADM','fr_fr',0,'Aucun groupe de pr?sentation pour l''?cran #1 .',1
1022:+'ADMPD192','ADM','fr_fr',0,'Veuillez s?lectionner une r?gle de gestion.',3
1023:+'ADMPD193','ADM','fr_fr',0,'Veuillez s?lectionner un appel table.',3
1024:+'ADMPD194','ADM','fr_fr',0,'Vous devez saisir le param?trage du composant Recherche Structure.',1
1025:+'ADMPD195','ADM','fr_fr',0,'Aucun ?cran n''est s?lectionn?.',3
1026: ##
1027: SYS_DEF_ERREURS
1028: ==
1029: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD196','ADMPD197','ADMPD198','ADMPD199','ADMPD200','ADMPD201','ADMPD202','ADMPD203','ADMPD204','ADMPD205')
    :-'ADMPD196','ADM','fr_fr',0,'Le nom de l''écran est requis pour cette action.',3
    :-'ADMPD197','ADM','fr_fr',0,'Vous devez sélectionner un projet dans un premier temps.',3
    :-'ADMPD198','ADM','fr_fr',0,'Veuillez saisir les données des pièces jointes UX.',3
    :-'ADMPD199','ADM','fr_fr',0,'Le module sélectionné n''existe pas.',3
    :-'ADMPD200','ADM','fr_fr',0,'La validation a été effectuée avec succès.',3
    :-'ADMPD201','ADM','fr_fr',0,'Êtes vous sûr de bien vouloir supprimer ?',3
    :-'ADMPD202','ADM','fr_fr',0,'Création de l''écran réussie.',3
    :-'ADMPD203','ADM','fr_fr',0,'Duplication de l''écran réussie.',3
    :-'ADMPD204','ADM','fr_fr',0,'Veuillez saisir les données des pièces jointes UX.',3
    :-'ADMPD205','ADM','fr_fr',0,'La donnée sélectionnée n''est pas mappée avec UX.',3
1030:+'ADMPD196','ADM','fr_fr',0,'Le nom de l''?cran est requis pour cette action.',3
1031:+'ADMPD197','ADM','fr_fr',0,'Vous devez s?lectionner un projet dans un premier temps.',3
1032:+'ADMPD198','ADM','fr_fr',0,'Veuillez saisir les donn?es des pi?ces jointes UX.',3
1033:+'ADMPD199','ADM','fr_fr',0,'Le module s?lectionn? n''existe pas.',3
1034:+'ADMPD200','ADM','fr_fr',0,'La validation a ?t? effectu?e avec succ?s.',3
1035:+'ADMPD201','ADM','fr_fr',0,'?tes vous s?r de bien vouloir supprimer ?',3
1036:+'ADMPD202','ADM','fr_fr',0,'Cr?ation de l''?cran r?ussie.',3
1037:+'ADMPD203','ADM','fr_fr',0,'Duplication de l''?cran r?ussie.',3
1038:+'ADMPD204','ADM','fr_fr',0,'Veuillez saisir les donn?es des pi?ces jointes UX.',3
1039:+'ADMPD205','ADM','fr_fr',0,'La donn?e s?lectionn?e n''est pas mapp?e avec UX.',3
1040: ##
1041: SYS_DEF_ERREURS
1042: ==
1043: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD206', 'ADMPD207')
    :-'ADMPD206','ADM','fr_fr',0,'Veuillez choisir un fichier à importer.',3
    :-'ADMPD207','ADM','fr_fr',0,'L''import du fichier a été réalisé avec succès.',3
1044:+'ADMPD206','ADM','fr_fr',0,'Veuillez choisir un fichier ? importer.',3
1045:+'ADMPD207','ADM','fr_fr',0,'L''import du fichier a ?t? r?alis? avec succ?s.',3
1046: ##
1047: sys_def_erreurs
1048: ==
1049: DELETE FROM sys_def_erreurs WHERE coderr IN ('GAP00225', 'GAP00226') AND codlang = 'fr_fr' AND niv_definition = 0
1050: 'GAP00225','GAP','fr_fr','0','Veuillez entrer un fichier avec une extension valide (png, jpg, jpeg, pdf, gif)','1'
    :-'GAP00226','GAP','fr_fr','0','La résolution du document n''a pas permis l''extraction de toutes les données. Si nécessaire, veuillez compléter le formulaire.','2'
1051:+'GAP00226','GAP','fr_fr','0','La r?solution du document n''a pas permis l''extraction de toutes les donn?es. Si n?cessaire, veuillez compl?ter le formulaire.','2'
1052: ##
1053: sys_def_erreurs
1054: ==
1055: DELETE FROM sys_def_erreurs WHERE CODERR = 'GAP00227' AND codlang = 'fr_fr' and niv_definition = 0
    :-'GAP00227','GAP','fr_fr','0','Erreur de paramétrage, veuillez contacter votre administrateur.','1'
1056:+'GAP00227','GAP','fr_fr','0','Erreur de param?trage, veuillez contacter votre administrateur.','1'
1057: ##
1058: sys_def_erreurs
1059: ==
1060: DELETE FROM sys_def_erreurs WHERE coderr = 'GAP00228' AND codlang = 'fr_fr' and niv_definition = 0
    :-'GAP00228','GAP','fr_fr','0','Les données ont été extraites du document avec succès.','3'
1061:+'GAP00228','GAP','fr_fr','0','Les donn?es ont ?t? extraites du document avec succ?s.','3'
1062: ##
1063: SYS_DEF_ERREURS
1064: ==
1065: delete from SYS_DEF_ERREURS where CODMOD = 'API' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('API00001', 'API00002')
    :-'API00001', 'API', 'fr_fr', 0, 'La personnalisation du mapping de #1 pour le numéro de pac #2 n''existe pas.', 1
    :-'API00002', 'API', 'fr_fr', 0, 'Le mapping #1 pour le numéro de pac #2 n''existe pas.', 1
1066:+'API00001', 'API', 'fr_fr', 0, 'La personnalisation du mapping de #1 pour le num?ro de pac #2 n''existe pas.', 1
1067:+'API00002', 'API', 'fr_fr', 0, 'Le mapping #1 pour le num?ro de pac #2 n''existe pas.', 1
1068: ##
1069: SYS_DEF_ERREURS
1070: ==
@@ -1080,22 +1080,22 @@ delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_D
1080: SYS_DEF_ERREURS
1081: ==
1082: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENAPP11','GENAPP12','GENWK111')
    :-'GENAPP11','GEN','fr_fr',0,'Le code catégorie professionnelle 40 -employé horaire ou 41-ouvrier horaire est interdit pour un autre mode de rémunération que taux horaire. Veuillez corriger votre saisie.',1
    :-'GENAPP12','GEN','fr_fr',0,'Veuillez noter que pour un mode de rémunération au taux horaire, le code catégorie professionnelle doit être 40-employés horaire ou 41-ouvriers horaire.',2
    :-'GENWK111','GEN','fr_fr',0,'Les données de mobilité internationale ne sont accessibles que pour les types de contrat EXPATRIES ou DETACHES. Veuillez au préalable modifier le type de contrat en sélectionnant l''évènement ''Avenant CDI'' ou ''Avenant CDD'' puis l''acte de gestion ''Modification du type de contrat''.',1
1083:+'GENAPP11','GEN','fr_fr',0,'Le code cat?gorie professionnelle 40 -employ? horaire ou 41-ouvrier horaire est interdit pour un autre mode de r?mun?ration que taux horaire. Veuillez corriger votre saisie.',1
1084:+'GENAPP12','GEN','fr_fr',0,'Veuillez noter que pour un mode de r?mun?ration au taux horaire, le code cat?gorie professionnelle doit ?tre 40-employ?s horaire ou 41-ouvriers horaire.',2
1085:+'GENWK111','GEN','fr_fr',0,'Les donn?es de mobilit? internationale ne sont accessibles que pour les types de contrat EXPATRIES ou DETACHES. Veuillez au pr?alable modifier le type de contrat en s?lectionnant l''?v?nement ''Avenant CDI'' ou ''Avenant CDD'' puis l''acte de gestion ''Modification du type de contrat''.',1
1086: ##
1087: SYS_DEF_ERREURS
1088: ==
1089: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('ESGLAN05','ESGLAN10','ESGSGN22') AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
    :-'ESGLAN05', 'ESG', 'fr_fr', 0, 'La donnée obligatoire téléphone du contractant est manquante.', 1
    :-'ESGLAN10', 'ESG', 'fr_fr', 0, 'La donnée obligatoire téléphone du mandataire # est manquante.', 1
    :-'ESGSGN22', 'ESG', 'fr_fr', 0, 'Les paramètres ont bien été enregistrés.', 4
1090:+'ESGLAN05', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire t?l?phone du contractant est manquante.', 1
1091:+'ESGLAN10', 'ESG', 'fr_fr', 0, 'La donn?e obligatoire t?l?phone du mandataire # est manquante.', 1
1092:+'ESGSGN22', 'ESG', 'fr_fr', 0, 'Les param?tres ont bien ?t? enregistr?s.', 4
1093: ##
1094: SYS_DEF_ERREURS
1095: ==
1096: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('ESGSGN23','ESGSGN24') AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ESG'
    :-'ESGSGN23', 'ESG', 'fr_fr', 0, 'Vous n''êtes pas autorisé à # cette procédure', 1
    :-'ESGSGN24', 'ESG', 'fr_fr', 0, 'Vous n''êtes pas autorisé à # ce signataire', 1
1097:+'ESGSGN23', 'ESG', 'fr_fr', 0, 'Vous n''?tes pas autoris? ? # cette proc?dure', 1
1098:+'ESGSGN24', 'ESG', 'fr_fr', 0, 'Vous n''?tes pas autoris? ? # ce signataire', 1
1099: ##
1100: SYS_DEF_ERREURS
1101: ==
@@ -1105,46 +1105,46 @@ delete from SYS_DEF_ERREURS where CODMOD = 'API' and CODLANG = 'fr_fr' and NIV_D
1105: SYS_DEF_ERREURS
1106: ==
1107: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENAPP07')
    :-'GENAPP07', 'GEN', 'fr_fr', 0, 'Quand le salarie est diminué, le type d''évolution "collectif" n''est pas cohérent. Si le type d''évolution est "individuel", alors le motif doit être soit un changement d''horaire, soit un déclassement. Veuillez corriger votre saisie.', 1
1108:+'GENAPP07', 'GEN', 'fr_fr', 0, 'Quand le salarie est diminu?, le type d''?volution "collectif" n''est pas coh?rent. Si le type d''?volution est "individuel", alors le motif doit ?tre soit un changement d''horaire, soit un d?classement. Veuillez corriger votre saisie.', 1
1109: ##
1110: SYS_DEF_ERREURS
1111: ==
1112: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENAPP03', 'GENWK116')
    :-'GENAPP03', 'GEN', 'fr_fr', 0, 'Quand la date d''effet est égale à la date de début de contrat, vous ne devez modifier que le salaire car ce n''est pas une augmentation. Veuillez corriger votre saisie : pas de motif d''augmentation et pas de type d''évolution de rémunération. ', 1
    :-'GENWK116', 'GEN', 'fr_fr', 0, 'La date d''effet de la modification est égale à la date de début du contrat. Dans ce cas, il ne peut pas y avoir d''augmentation de rémunération mais juste une modification du salaire. Cette action n''est pas possible via le WKF. Elle doit être réalisée sur contrat courant.', 1
1113:+'GENAPP03', 'GEN', 'fr_fr', 0, 'Quand la date d''effet est ?gale ? la date de d?but de contrat, vous ne devez modifier que le salaire car ce n''est pas une augmentation. Veuillez corriger votre saisie : pas de motif d''augmentation et pas de type d''?volution de r?mun?ration. ', 1
1114:+'GENWK116', 'GEN', 'fr_fr', 0, 'La date d''effet de la modification est ?gale ? la date de d?but du contrat. Dans ce cas, il ne peut pas y avoir d''augmentation de r?mun?ration mais juste une modification du salaire. Cette action n''est pas possible via le WKF. Elle doit ?tre r?alis?e sur contrat courant.', 1
1115: ##
1116: SYS_DEF_ERREURS
1117: ==
1118: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('IMPGR039') AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='TGE'
    :-'IMPGR039', 'TGE', 'fr_fr', 0, 'La propagation n''a pas été effectuée : <br>', 1
1119:+'IMPGR039', 'TGE', 'fr_fr', 0, 'La propagation n''a pas ?t? effectu?e : <br>', 1
1120: ##
1121: SYS_DEF_ERREURS
1122: ==
1123: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENHOR49','GENHOR50','GENHOR51')
    :-'GENHOR49','GEN','fr_fr','0','Pour un salarié à temps partiel avec maintien de cotisations à temps plein, veuillez renseigner le motif du maintien.','1'
    :-'GENHOR50','GEN','fr_fr','0','Pour un salarié à temps partiel,  veuillez vous assurer que les options de  maintien des cotisations à temps plein doivent être cochées ou non. Si oui, vous devrez également renseigner le motif de ce maintien.','2'
    :-'GENHOR51','GEN','fr_fr','0','Si les options de maintien de cotisations sont cochées, le salarié doit être à temps partiel et le motif du maintien est obligatoire, veuillez corriger vos saisies.','1'
1124:+'GENHOR49','GEN','fr_fr','0','Pour un salari? ? temps partiel avec maintien de cotisations ? temps plein, veuillez renseigner le motif du maintien.','1'
1125:+'GENHOR50','GEN','fr_fr','0','Pour un salari? ? temps partiel,  veuillez vous assurer que les options de  maintien des cotisations ? temps plein doivent ?tre coch?es ou non. Si oui, vous devrez ?galement renseigner le motif de ce maintien.','2'
1126:+'GENHOR51','GEN','fr_fr','0','Si les options de maintien de cotisations sont coch?es, le salari? doit ?tre ? temps partiel et le motif du maintien est obligatoire, veuillez corriger vos saisies.','1'
1127: ##
1128: SYS_DEF_ERREURS
1129: ==
1130: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('IMPEX085', 'IMPEX034')
    :-'IMPEX085','TGE','fr_fr','0','Une erreur s''est produite pendant la suppression de la ligne d''imputation importée.','1'
    :-'IMPEX034','TGE','fr_fr','0','Le type de l''import n''est pas correct : #1 (DV -> #2, Elément -> #3, DR -> #4, DR cotis. -> #5, Incident -> #6, Absence -> #7, GAP -> #8, GAP RETRO -> #9, Annulation -> #10, Imputation -> #11).','1'
1131:+'IMPEX085','TGE','fr_fr','0','Une erreur s''est produite pendant la suppression de la ligne d''imputation import?e.','1'
1132:+'IMPEX034','TGE','fr_fr','0','Le type de l''import n''est pas correct : #1 (DV -> #2, El?ment -> #3, DR -> #4, DR cotis. -> #5, Incident -> #6, Absence -> #7, GAP -> #8, GAP RETRO -> #9, Annulation -> #10, Imputation -> #11).','1'
1133: ##
1134: SYS_DEF_ERREURS
1135: ==
1136: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('IMPEX086', 'IMPEX087')
    :-'IMPEX086','TGE','fr_fr','0','L''imputation a été modifiée depuis l''import, impossible de la supprimer.','1'
    :-'IMPEX087','TGE','fr_fr','0','L''imputation n''a pas été créée, elle ne peut donc pas être supprimée.','1'
1137:+'IMPEX086','TGE','fr_fr','0','L''imputation a ?t? modifi?e depuis l''import, impossible de la supprimer.','1'
1138:+'IMPEX087','TGE','fr_fr','0','L''imputation n''a pas ?t? cr??e, elle ne peut donc pas ?tre supprim?e.','1'
1139: ##
1140: SYS_DEF_ERREURS
1141: ==
1142: delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE003HS', 'TGE003DS', 'TGE003NU','ZIM000NU','ZIM00015')
1143: 'TGE003HS','TGE','fr_fr','0','L''heure de saisie n''est pas correcte #1 .','1'
1144: 'TGE003DS','TGE','fr_fr','0','La date de saisie n''est pas correcte #1 .','1'
    :-'TGE003NU','TGE','fr_fr','0','Le nombre d''unités n''est pas valide #1 .','1'
    :-'ZIM000NU','TGE','fr_fr','0','Le nombre d''unités n''est pas un nombre valide : #1 .','1'
    :-'ZIM00015','TGE','fr_fr','0','Le nombre d''unités n''est pas un nombre valide : #1 (11 entiers et 4 décimaux).','1'
1145:+'TGE003NU','TGE','fr_fr','0','Le nombre d''unit?s n''est pas valide #1 .','1'
1146:+'ZIM000NU','TGE','fr_fr','0','Le nombre d''unit?s n''est pas un nombre valide : #1 .','1'
1147:+'ZIM00015','TGE','fr_fr','0','Le nombre d''unit?s n''est pas un nombre valide : #1 (11 entiers et 4 d?cimaux).','1'
1148: ##
1149: SYS_DEF_ERREURS
1150: ==
@@ -1154,89 +1154,89 @@ delete from SYS_DEF_ERREURS where CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and
1154: SYS_DEF_ERREURS
1155: ==
1156: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'DOCSE101' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0 AND CODMOD ='ADM'
    :-'DOCSE101','ADM','fr_fr','0','Une maquette ne peut pas contenir plusieurs paragraphes ''Style'' si ceux-ci ne sont pas tous conditionnés.','1'
1157:+'DOCSE101','ADM','fr_fr','0','Une maquette ne peut pas contenir plusieurs paragraphes ''Style'' si ceux-ci ne sont pas tous conditionn?s.','1'
1158: ##
1159: SYS_DEF_ERREURS
1160: ==
1161: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GENWK116' AND CODLANG = 'fr_fr' AND CODMOD ='GEN'
    :-'GENWK116','GEN','fr_fr','0','Seule la dernière occurrence de la période d''emploi peut être supprimée.','1'
1162:+'GENWK116','GEN','fr_fr','0','Seule la derni?re occurrence de la p?riode d''emploi peut ?tre supprim?e.','1'
1163: ##
1164: SYS_DEF_ERREURS
1165: ==
1166: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD218','ADMPD219','ADMPD220','ADMPD221','ADMPD222')
    :-'ADMPD218','ADM','fr_fr',0,'Veuillez sélectionner une donnée',1
    :-'ADMPD219','ADM','fr_fr',0,'Vous devez d''abord interroger une donnée',1
    :-'ADMPD220','ADM','fr_fr',0,'Veuillez sélectionner un dictionnaire',1
    :-'ADMPD221','ADM','fr_fr',0,'La validation des caractéristiques générales a été effectuée avec succès',1
    :-'ADMPD222','ADM','fr_fr',0,'Le nom de la donnée a été modifié : veuillez d''abord interroger',1
1167:+'ADMPD218','ADM','fr_fr',0,'Veuillez s?lectionner une donn?e',1
1168:+'ADMPD219','ADM','fr_fr',0,'Vous devez d''abord interroger une donn?e',1
1169:+'ADMPD220','ADM','fr_fr',0,'Veuillez s?lectionner un dictionnaire',1
1170:+'ADMPD221','ADM','fr_fr',0,'La validation des caract?ristiques g?n?rales a ?t? effectu?e avec succ?s',1
1171:+'ADMPD222','ADM','fr_fr',0,'Le nom de la donn?e a ?t? modifi? : veuillez d''abord interroger',1
1172: ##
1173: SYS_DEF_ERREURS
1174: ==
1175: delete from SYS_DEF_ERREURS where CODERR = 'ADMPD123' AND CODLANG = 'fr_fr' AND CODMOD ='STD'
    :-'ADMPD123','STD','fr_fr','0','La suppression d''une période d''emploi qui n''est pas la dernière est interdite.','1'
1176:+'ADMPD123','STD','fr_fr','0','La suppression d''une p?riode d''emploi qui n''est pas la derni?re est interdite.','1'
1177: ##
1178: SYS_DEF_ERREURS
1179: ==
1180: delete from SYS_DEF_ERREURS where CODMOD = 'API' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('API00003', 'API00004', 'API00005', 'API00006', 'API00007', 'API00008')
    :-'API00003', 'API', 'fr_fr', 0, 'Veuillez indiquer l''identifiant de l''application consommatrice à interroger.', 1
1181:+'API00003', 'API', 'fr_fr', 0, 'Veuillez indiquer l''identifiant de l''application consommatrice ? interroger.', 1
1182: 'API00004', 'API', 'fr_fr', 0, 'Cette application consommatrice n''existe pas.', 1
    :-'API00005', 'API', 'fr_fr', 0, 'L''export du fichier a été réalisé avec succès.', 3
1183:+'API00005', 'API', 'fr_fr', 0, 'L''export du fichier a ?t? r?alis? avec succ?s.', 3
1184: 'API00006', 'API', 'fr_fr', 0, 'Veuillez renseigner le code origine.', 1
    :-'API00007', 'API', 'fr_fr', 0, 'La sécurité a été enregistrée avec succès', 3
    :-'API00008', 'API', 'fr_fr', 0, 'La sécurité n''a pas été enregistrée.', 1
1185:+'API00007', 'API', 'fr_fr', 0, 'La s?curit? a ?t? enregistr?e avec succ?s', 3
1186:+'API00008', 'API', 'fr_fr', 0, 'La s?curit? n''a pas ?t? enregistr?e.', 1
1187: ##
1188: SYS_DEF_ERREURS
1189: ==
1190: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENCHS16'
    :-'GENCHS16','GEN','fr_fr','0','Veuillez noter qu''en cas de contrôle, vous devez pouvoir justifier de cette incapacité d''au moins 10%.','2'
1191:+'GENCHS16','GEN','fr_fr','0','Veuillez noter qu''en cas de contr?le, vous devez pouvoir justifier de cette incapacit? d''au moins 10%.','2'
1192: ##
1193: SYS_DEF_ERREURS
1194: ==
1195: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'RECY0001' AND CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODMOD ='TGE'
    :-'RECY0001','TGE','fr_fr','0','Le dernier rafraichissement a eu lieu il y a moins de 2 minutes. Veuillez réessayer plus tard.','1'
1196:+'RECY0001','TGE','fr_fr','0','Le dernier rafraichissement a eu lieu il y a moins de 2 minutes. Veuillez r?essayer plus tard.','1'
1197: ##
1198: SYS_DEF_ERREURS
1199: ==
1200: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWK116','GENWK117','GENWK118')
    :-'GENWK116', 'GEN', 'fr_fr', 0, 'La date d''effet de la modification est égale à la date de début du contrat. Dans ce cas, il ne peut pas y avoir d''augmentation de rémunération mais juste une modification du salaire. Cette action n''est pas possible via le WKF. Elle doit être réalisée sur contrat courant.', 1
    :-'GENWK117', 'GEN', 'fr_fr', 0, 'Seule la dernière occurrence de la période d''emploi peut être supprimée.','1'
    :-'GENWK118', 'GEN', 'fr_fr', 0, 'Vous ne pouvez pas supprimer la première occurrence #', 1
1201:+'GENWK116', 'GEN', 'fr_fr', 0, 'La date d''effet de la modification est ?gale ? la date de d?but du contrat. Dans ce cas, il ne peut pas y avoir d''augmentation de r?mun?ration mais juste une modification du salaire. Cette action n''est pas possible via le WKF. Elle doit ?tre r?alis?e sur contrat courant.', 1
1202:+'GENWK117', 'GEN', 'fr_fr', 0, 'Seule la derni?re occurrence de la p?riode d''emploi peut ?tre supprim?e.','1'
1203:+'GENWK118', 'GEN', 'fr_fr', 0, 'Vous ne pouvez pas supprimer la premi?re occurrence #', 1
1204: ##
1205: SYS_DEF_ERREURS
1206: ==
1207: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('GENAPP13','GENWK115')
    :-'GENAPP13','GEN','fr_fr','0','Les codes rubriques doivent être différents. Veuillez corriger votre saisie.','1'
    :-'GENWK115','GEN','fr_fr','0','La date d''effet saisie n''est pas cohérente avec la date de fin prévue de la suspension précédente. En effet, en cas de prolongation avec changement de motif, la date de début de suspension doit être à J+1 de la date de fin prévue précédente.','1'
1208:+'GENAPP13','GEN','fr_fr','0','Les codes rubriques doivent ?tre diff?rents. Veuillez corriger votre saisie.','1'
1209:+'GENWK115','GEN','fr_fr','0','La date d''effet saisie n''est pas coh?rente avec la date de fin pr?vue de la suspension pr?c?dente. En effet, en cas de prolongation avec changement de motif, la date de d?but de suspension doit ?tre ? J+1 de la date de fin pr?vue pr?c?dente.','1'
1210: ##
1211: SYS_DEF_ERREURS
1212: ==
1213: DELETE FROM SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWKF77','GENWKF86','GENWKF87','GENWKF88','GENWKF89','GENWKF93','GENWKF94','GENWKF95')
    :-'GENWKF77','GEN','fr_fr','0','Il n''y a pas de contrat suivant à celui que vous voulez insérer. Modifiez votre saisie ou utilisez le WKF ouverture et/ou fermeture de contrat.','1'
    :-'GENWKF86','GEN','fr_fr','0','Le contrat demandé (du ''#1'' au ''#2'') est en chevauchement total avec au moins un autre contrat : du ''#3'' au ''#4''','1'
    :-'GENWKF87','GEN','fr_fr','0','Le contrat inséré est en chevauchement avec le contrat précédent.','2'
    :-'GENWKF88','GEN','fr_fr','0','Le contrat inséré est en chevauchement avec le contrat suivant.','2'
    :-'GENWKF89','GEN','fr_fr','0','Le contrat inséré est en chevauchement avec le contrat précédent et le contrat suivant.','2'
    :-'GENWKF93','GEN','fr_fr','0','Le salarié sélectionné n''a pas de contrat correspondant à la demande car l''embauche est présente dans les fichiers de paie.','1'
    :-'GENWKF94','GEN','fr_fr','0','Le salarié sélectionné n''a pas de contrat correspondant à la demande car l''embauche n''est pas incluse dans la profondeur de rétro.','1'
    :-'GENWKF95','GEN','fr_fr','0','Le salarié sélectionné n''a pas de contrat correspondant à la demande car le départ est présent dans les fichiers de paie et il n''est pas inclus dans la profondeur de rétro.','1'
1214:+'GENWKF77','GEN','fr_fr','0','Il n''y a pas de contrat suivant ? celui que vous voulez ins?rer. Modifiez votre saisie ou utilisez le WKF ouverture et/ou fermeture de contrat.','1'
1215:+'GENWKF86','GEN','fr_fr','0','Le contrat demand? (du ''#1'' au ''#2'') est en chevauchement total avec au moins un autre contrat : du ''#3'' au ''#4''','1'
1216:+'GENWKF87','GEN','fr_fr','0','Le contrat ins?r? est en chevauchement avec le contrat pr?c?dent.','2'
1217:+'GENWKF88','GEN','fr_fr','0','Le contrat ins?r? est en chevauchement avec le contrat suivant.','2'
1218:+'GENWKF89','GEN','fr_fr','0','Le contrat ins?r? est en chevauchement avec le contrat pr?c?dent et le contrat suivant.','2'
1219:+'GENWKF93','GEN','fr_fr','0','Le salari? s?lectionn? n''a pas de contrat correspondant ? la demande car l''embauche est pr?sente dans les fichiers de paie.','1'
1220:+'GENWKF94','GEN','fr_fr','0','Le salari? s?lectionn? n''a pas de contrat correspondant ? la demande car l''embauche n''est pas incluse dans la profondeur de r?tro.','1'
1221:+'GENWKF95','GEN','fr_fr','0','Le salari? s?lectionn? n''a pas de contrat correspondant ? la demande car le d?part est pr?sent dans les fichiers de paie et il n''est pas inclus dans la profondeur de r?tro.','1'
1222: ##
1223: SYS_DEF_ERREURS
1224: ==
1225: DELETE FROM SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('ZDV00058','ZOP00024','ZOP00026','ZPR00020')
    :-'ZDV00058','TGE','fr_fr','0','La période d''affectation doit être comprise dans la période contractuelle.','1'
1226:+'ZDV00058','TGE','fr_fr','0','La p?riode d''affectation doit ?tre comprise dans la p?riode contractuelle.','1'
1227: 'ZOP00024','TGE','fr_fr','0','Il ne peut exister au maximum que 10 oppositions par contrat.','3'
    :-'ZOP00026','TGE','fr_fr','0','La date de début doit être comprise dans la période contractuelle (#1 - #2).','3'
    :-'ZPR00020','TGE','fr_fr','0','Il ne peut exister au maximum que 20 prêts par contrat.','3'
1228:+'ZOP00026','TGE','fr_fr','0','La date de d?but doit ?tre comprise dans la p?riode contractuelle (#1 - #2).','3'
1229:+'ZPR00020','TGE','fr_fr','0','Il ne peut exister au maximum que 20 pr?ts par contrat.','3'
1230: ##
1231: SYS_DEF_ERREURS
1232: ==
1233: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'FDSP0001'
    :-'FDSP0001','STD','fr_fr','0','Tous les fichiers n''ont pas pu être téléchargés. Le(s) fichier(s) suivant(s) sont introuvables : ','1'
1234:+'FDSP0001','STD','fr_fr','0','Tous les fichiers n''ont pas pu ?tre t?l?charg?s. Le(s) fichier(s) suivant(s) sont introuvables : ','1'
1235: ##
1236: SYS_DEF_ERREURS
1237: ==
1238: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'FDSP0002'
    :-'FDSP0002','STD','fr_fr','0','Aucun fichier n''a pu être téléchargé. Le(s) fichier(s) suivant(s) sont introuvables : ','1'
1239:+'FDSP0002','STD','fr_fr','0','Aucun fichier n''a pu ?tre t?l?charg?. Le(s) fichier(s) suivant(s) sont introuvables : ','1'
1240: ##
1241: SYS_DEF_ERREURS
1242: ==
@@ -1251,12 +1251,12 @@ delete from SYS_DEF_ERREURS where CODERR = 'ESGSGN26' AND CODLANG = 'fr_fr' AND
1251: SYS_DEF_ERREURS
1252: ==
1253: delete from SYS_DEF_ERREURS where CODERR = 'ESGSGN27' AND CODLANG = 'fr_fr' AND CODMOD ='ESG'
    :-'ESGSGN27','ESG','fr_fr','0','Document bien chargé.','1'
1254:+'ESGSGN27','ESG','fr_fr','0','Document bien charg?.','1'
1255: ##
1256: SYS_DEF_ERREURS
1257: ==
1258: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENMED04'
    :-'GENMED04','GEN','fr_fr','0','En cas de suivi renforcé, le code de la visite ne peut pas être "Visite initiale" ou "Visite périodique". Veuillez corriger votre saisie.','1'
1259:+'GENMED04','GEN','fr_fr','0','En cas de suivi renforc?, le code de la visite ne peut pas ?tre "Visite initiale" ou "Visite p?riodique". Veuillez corriger votre saisie.','1'
1260: ##
1261: SYS_DEF_ERREURS
1262: ==
@@ -1265,7 +1265,7 @@ delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_D
1265: SYS_DEF_ERREURS
1266: ==
1267: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR = 'ADMPD223'
    :-'ADMPD223','ADM','fr_fr',0,'Une donnée ALP doit avoir un appel table renseigné sur son ergonomie par défaut pour qu''il y ait un intérêt à la mapper avec un custom field de type ''Code''',1
1268:+'ADMPD223','ADM','fr_fr',0,'Une donn?e ALP doit avoir un appel table renseign? sur son ergonomie par d?faut pour qu''il y ait un int?r?t ? la mapper avec un custom field de type ''Code''',1
1269: ##
1270: SYS_DEF_ERREURS
1271: ==
@@ -1275,14 +1275,14 @@ delete from SYS_DEF_ERREURS where CODERR = 'ESGSGN25' AND CODLANG = 'fr_fr' AND
1275: SYS_DEF_ERREURS
1276: ==
1277: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('GENSCT01','GENSCT02','GENSCT03')
    :-'GENSCT01','GEN','fr_fr',0,'Pour information, la date de début de la sanction ne peut intervenir moins de deux jours ouvrables, ni plus d''un mois après le jour fixé pour l''entretien.',2
    :-'GENSCT02','GEN','fr_fr',0,'La date de fin de la sanction ne peut pas être postérieure à la date de fin du contrat.',1
    :-'GENSCT03','GEN','fr_fr',0,'La date de début de la sanction ne peut pas être antérieure à la date de début du contrat.',1
1278:+'GENSCT01','GEN','fr_fr',0,'Pour information, la date de d?but de la sanction ne peut intervenir moins de deux jours ouvrables, ni plus d''un mois apr?s le jour fix? pour l''entretien.',2
1279:+'GENSCT02','GEN','fr_fr',0,'La date de fin de la sanction ne peut pas ?tre post?rieure ? la date de fin du contrat.',1
1280:+'GENSCT03','GEN','fr_fr',0,'La date de d?but de la sanction ne peut pas ?tre ant?rieure ? la date de d?but du contrat.',1
1281: ##
1282: SYS_DEF_ERREURS
1283: ==
1284: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'GENWK117'
    :-'GENWK117', 'GEN', 'fr_fr', 0, 'La suppression d''un historique, qui n''est pas le plus récent d''une période d''emploi, est interdite. ', 1
1285:+'GENWK117', 'GEN', 'fr_fr', 0, 'La suppression d''un historique, qui n''est pas le plus r?cent d''une p?riode d''emploi, est interdite. ', 1
1286: ##
1287: SYS_DEF_ERREURS
1288: ==
@@ -1296,29 +1296,29 @@ DELETE FROM SYS_DEF_ERREURS where CODMOD = 'ADM' and CODLANG = 'fr_fr' and NIV_D
1296: ##
1297: SYS_DEF_ERREURS (CODERR,CODMOD,CODLANG,NIV_DEFINITION,LIBERR,TYPERR)
1298: =IF_ROW_NOTEXIST=
    :-'GENWK119', 'GEN', 'fr_fr', 0, 'Pour un "contrat vendanges", la date de fin prévue ne peut pas être au delà d''un mois. Veuillez modifier la date de fin prévue du contrat.', 1
1299:+'GENWK119', 'GEN', 'fr_fr', 0, 'Pour un "contrat vendanges", la date de fin pr?vue ne peut pas ?tre au del? d''un mois. Veuillez modifier la date de fin pr?vue du contrat.', 1
1300: ##
1301: SYS_DEF_ERREURS
1302: ==
1303: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GAP00229'
    :-'GAP00229','GAP','fr_fr','0','Attention, le thème est utilisé dans le processus libre "#1".','2'
1304:+'GAP00229','GAP','fr_fr','0','Attention, le th?me est utilis? dans le processus libre "#1".','2'
1305: ##
1306: SYS_DEF_ERREURS
1307: ==
1308: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'GAP00230'
    :-'GAP00230','GAP','fr_fr','0','Une erreur de paramétrage est survenue. Veuillez contacter votre administrateur.','1'
1309:+'GAP00230','GAP','fr_fr','0','Une erreur de param?trage est survenue. Veuillez contacter votre administrateur.','1'
1310: ##
1311: SYS_DEF_ERREURS
1312: ==
1313: delete from SYS_DEF_ERREURS where CODMOD = 'EDI' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('EDICND01', 'EDICND02', 'EDICND03', 'EDICND04', 'EDICND05', 'EDICND06', 'EDICND07', 'EDICND08', 'EDICND09')
1314: 'EDICND01','EDI','fr_fr','0','Souhaitez-vous supprimer la condition ?','1'
    :-'EDICND02','EDI','fr_fr','0','Le code de la condition n''est pas valorisé.','3'
    :-'EDICND03','EDI','fr_fr','0','Veuillez sélectionner une condition.','3'
    :-'EDICND04','EDI','fr_fr','0','Une erreur est survenue sur l''écran. ','3'
    :-'EDICND05','EDI','fr_fr','0','Erreur lors de la suppression de la règle.','3'
    :-'EDICND06','EDI','fr_fr','0','La condition n''a pu être déterminée.','3'
1315:+'EDICND02','EDI','fr_fr','0','Le code de la condition n''est pas valoris?.','3'
1316:+'EDICND03','EDI','fr_fr','0','Veuillez s?lectionner une condition.','3'
1317:+'EDICND04','EDI','fr_fr','0','Une erreur est survenue sur l''?cran. ','3'
1318:+'EDICND05','EDI','fr_fr','0','Erreur lors de la suppression de la r?gle.','3'
1319:+'EDICND06','EDI','fr_fr','0','La condition n''a pu ?tre d?termin?e.','3'
1320: 'EDICND07','EDI','fr_fr','0','Erreur lors de la validation de la condition.','3'
    :-'EDICND08','EDI','fr_fr','0','Le code de la condition existe déjà sur cette édition.','3'
1321:+'EDICND08','EDI','fr_fr','0','Le code de la condition existe d?j? sur cette ?dition.','3'
1322: 'EDICND09','EDI','fr_fr','0','Une erreur est survenue lors de l''enregistrement de la condition.','3'
1323: ##
1324: SYS_DEF_ERREURS
@@ -1329,7 +1329,7 @@ delete from SYS_DEF_ERREURS where CODMOD = 'EDI' and CODLANG = 'fr_fr' and NIV_D
1329: SYS_DEF_ERREURS
1330: ==
1331: delete from SYS_DEF_ERREURS where CODMOD = 'EDI' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR in ('EDI00099') 
    :-'EDI00099','EDI','fr_fr','0','La génération est en cours, merci de patienter. Vous pouvez fermer cette fenêtre, vous verrez le fichier apparaître dans "Mes fichiers récents".','2'
1332:+'EDI00099','EDI','fr_fr','0','La g?n?ration est en cours, merci de patienter. Vous pouvez fermer cette fen?tre, vous verrez le fichier appara?tre dans "Mes fichiers r?cents".','2'
1333: ##
1334: SYS_DEF_ERREURS
1335: ==
@@ -1339,46 +1339,46 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'FDSP0003' AND CODLANG = 'fr_fr' AND
1339: SYS_DEF_ERREURS
1340: ==
1341: DELETE FROM SYS_DEF_ERREURS WHERE CODERR IN ('GENMAN01','GENMAN02','GENMAN03') AND CODLANG = 'fr_fr' AND NIV_DEFINITION = 0
    :-'GENMAN01','GEN','fr_fr','0','La date de fin du mandat est postérieure à la date de fin prévue du CDD.¿Veuillez modifier la date de début du mandat.','1'
    :-'GENMAN02','GEN','fr_fr','0','La date de début du mandat ne peut pas être antérieure à la date de début du contrat.','1'
    :-'GENMAN03','GEN','fr_fr','0','La date de fin du mandat ne peut pas être postérieure à la date de fin du contrat.','1'
1342:+'GENMAN01','GEN','fr_fr','0','La date de fin du mandat est post?rieure ? la date de fin pr?vue du CDD.?Veuillez modifier la date de d?but du mandat.','1'
1343:+'GENMAN02','GEN','fr_fr','0','La date de d?but du mandat ne peut pas ?tre ant?rieure ? la date de d?but du contrat.','1'
1344:+'GENMAN03','GEN','fr_fr','0','La date de fin du mandat ne peut pas ?tre post?rieure ? la date de fin du contrat.','1'
1345: ##
1346: SYS_DEF_ERREURS
1347: ==
1348: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GAPMG01', 'GAPMG02','GAPMG03')
    :-'GAPMG01','TGE','fr_fr','0','Suppression des matricules réalisée avec succès','1'
1349:+'GAPMG01','TGE','fr_fr','0','Suppression des matricules r?alis?e avec succ?s','1'
1350: 'GAPMG02','TGE','fr_fr','0','Erreur lors de la suppression des matricules.','3'
    :-'GAPMG03','TGE','fr_fr','0','Aucun matricule séléctionné','3'
1351:+'GAPMG03','TGE','fr_fr','0','Aucun matricule s?l?ctionn?','3'
1352: ##
1353: SYS_DEF_ERREURS
1354: ==
1355: delete from SYS_DEF_ERREURS where CODMOD = 'HRO' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and  CODERR in ('HRO00035', 'HRO00036', 'HRO00009') 
    :-'HRO00035','HRO','fr_fr','0','Le cid n''est pas renseigné.','1'
    :-'HRO00036','HRO','fr_fr','0','Le cid ne peut excéder 32 caractères.','1'
    :-'HRO00009','HRO','fr_fr','0','La valeur de ce champ est invalide, elle doit être au format : #1.','1'
1356:+'HRO00035','HRO','fr_fr','0','Le cid n''est pas renseign?.','1'
1357:+'HRO00036','HRO','fr_fr','0','Le cid ne peut exc?der 32 caract?res.','1'
1358:+'HRO00009','HRO','fr_fr','0','La valeur de ce champ est invalide, elle doit ?tre au format : #1.','1'
1359: ##
1360: SYS_DEF_ERREURS
1361: ==
1362: delete from SYS_DEF_ERREURS where CODMOD = 'API' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR IN ('API00003','API00010','API00011','API00012','API00013','API00014','API00015','API00016','API00017','API00018','API00019','API00020','API00021')
    :-'API00003', 'API', 'fr_fr', 0, 'Veuillez indiquer l''identifiant de l''application consommatrice à #.', 1
    :-'API00010', 'API', 'fr_fr', 0, 'Cet utilisateur n''existe pas, ou n''est pas associé à une application consommatrice.', 1
    :-'API00011', 'API', 'fr_fr', 0, 'Impossible de déterminer le client.', 1
1363:+'API00003', 'API', 'fr_fr', 0, 'Veuillez indiquer l''identifiant de l''application consommatrice ? #.', 1
1364:+'API00010', 'API', 'fr_fr', 0, 'Cet utilisateur n''existe pas, ou n''est pas associ? ? une application consommatrice.', 1
1365:+'API00011', 'API', 'fr_fr', 0, 'Impossible de d?terminer le client.', 1
1366: 'API00012', 'API', 'fr_fr', 0, 'L''id de l''application est obligatoire.', 1
    :-'API00013', 'API', 'fr_fr', 0, 'Cet id d''application existe déjà dans la base.', 1
1367:+'API00013', 'API', 'fr_fr', 0, 'Cet id d''application existe d?j? dans la base.', 1
1368: 'API00014', 'API', 'fr_fr', 0, 'L''application ''#'' n''existe pour aucun partenaire.', 1
    :-'API00015', 'API', 'fr_fr', 0, 'Le libellé de l''application est obligatoire.', 1
    :-'API00016', 'API', 'fr_fr', 0, 'Une application d''un partenaire porte le même libellé.', 1
    :-'API00017', 'API', 'fr_fr', 0, 'Il existe une application portant le même libellé.', 1
1369:+'API00015', 'API', 'fr_fr', 0, 'Le libell? de l''application est obligatoire.', 1
1370:+'API00016', 'API', 'fr_fr', 0, 'Une application d''un partenaire porte le m?me libell?.', 1
1371:+'API00017', 'API', 'fr_fr', 0, 'Il existe une application portant le m?me libell?.', 1
1372: 'API00018', 'API', 'fr_fr', 0, 'Erreur lors de l''enregistrement de l''application consommatrice.', 1
    :-'API00019', 'API', 'fr_fr', 0, 'L''origine est obligatoire pour utiliser les URIs de l''API Pay Data Input. Les autres URIs ont été enregistrées.', 1
    :-'API00020', 'API', 'fr_fr', 0, 'L''id de l''application ne doit pas contenir plus de 50 caractères.', 1
    :-'API00021', 'API', 'fr_fr', 0, 'Le libellé de l''application ne doit pas contenir plus de 250 caractères.', 1
1373:+'API00019', 'API', 'fr_fr', 0, 'L''origine est obligatoire pour utiliser les URIs de l''API Pay Data Input. Les autres URIs ont ?t? enregistr?es.', 1
1374:+'API00020', 'API', 'fr_fr', 0, 'L''id de l''application ne doit pas contenir plus de 50 caract?res.', 1
1375:+'API00021', 'API', 'fr_fr', 0, 'Le libell? de l''application ne doit pas contenir plus de 250 caract?res.', 1
1376: ##
1377: SYS_DEF_ERREURS
1378: ==
1379: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR IN ('GENWK126','GENWK127')
    :-'GENWK126','GEN','fr_fr','0','L''embauche étant présente dans les fichiers paie, il est peut-être nécessaire de saisir des rappels de paie.','2'
    :-'GENWK127','GEN','fr_fr','0','Modification impossible car la date d''embauche est postérieure à la date initiale et n''est pas sur le même mois de paie.','1'
1380:+'GENWK126','GEN','fr_fr','0','L''embauche ?tant pr?sente dans les fichiers paie, il est peut-?tre n?cessaire de saisir des rappels de paie.','2'
1381:+'GENWK127','GEN','fr_fr','0','Modification impossible car la date d''embauche est post?rieure ? la date initiale et n''est pas sur le m?me mois de paie.','1'
1382: ##
1383: SYS_DEF_ERREURS
1384: ==
@@ -1388,80 +1388,80 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'STDNULL' AND CODLANG = 'fr_fr' AND N
1388: SYS_DEF_ERREURS
1389: ==
1390: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR IN ('GENWK120','GENWK121','GENWK122','GENWK123','GENWK124','GENWK125')
    :-'GENWK120','GEN','fr_fr','0','Les choix renouvellement de télétravail et fin de télétravail ne sont pas compatibles.','1'
    :-'GENWK121','GEN','fr_fr','0','Un des deux choix renouvellement de télétravail ou fin de télétravail est obligatoire.','1'
    :-'GENWK122','GEN','fr_fr','0','Pour une fin de TAD, la date d''effet doit obligatoirement être égale à la date de fin de TAD + 1 jour. Vous devez abandonner et recommencer le processus à la bonne date d''effet.','1'
    :-'GENWK123','GEN','fr_fr','0','La date de fin de télétravail doit être comprise dans les dates du contrat.','1'
    :-'GENWK124','GEN','fr_fr','0','La date de fin de télétravail saisie doit être supérieure à la date de début de télétravail et à la date de fin précédente.','1'
    :-'GENWK125','GEN','fr_fr','0','Le nombre de jours de télétravail étant renseigné, vous devez sélectionner le(s) jour(s) ou 1/2 journée(s) de TAD.','1'
1391:+'GENWK120','GEN','fr_fr','0','Les choix renouvellement de t?l?travail et fin de t?l?travail ne sont pas compatibles.','1'
1392:+'GENWK121','GEN','fr_fr','0','Un des deux choix renouvellement de t?l?travail ou fin de t?l?travail est obligatoire.','1'
1393:+'GENWK122','GEN','fr_fr','0','Pour une fin de TAD, la date d''effet doit obligatoirement ?tre ?gale ? la date de fin de TAD + 1 jour. Vous devez abandonner et recommencer le processus ? la bonne date d''effet.','1'
1394:+'GENWK123','GEN','fr_fr','0','La date de fin de t?l?travail doit ?tre comprise dans les dates du contrat.','1'
1395:+'GENWK124','GEN','fr_fr','0','La date de fin de t?l?travail saisie doit ?tre sup?rieure ? la date de d?but de t?l?travail et ? la date de fin pr?c?dente.','1'
1396:+'GENWK125','GEN','fr_fr','0','Le nombre de jours de t?l?travail ?tant renseign?, vous devez s?lectionner le(s) jour(s) ou 1/2 journ?e(s) de TAD.','1'
1397: ##
1398: SYS_DEF_ERREURS
1399: ==
1400: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD208', 'ADMPD209','ADMPD210','ADMPD211','ADMPD212','ADMPD213','ADMPD214','ADMPD215','ADMPD216','ADMPD217')
    :-'ADMPD208','ADM','fr_fr',0,'La suppression de l''écran a été effectuée avec succès.',3
    :-'ADMPD209','ADM','fr_fr',0,'La validation de l''écran a été effectuée avec succès.',3
    :-'ADMPD210','ADM','fr_fr',0,'Etes-vous sûr de vouloir supprimer cet écran ?',3
    :-'ADMPD211','ADM','fr_fr',0,'Attention, après suppression, en cas d''ajout d''un nouvel écran récapitulatif, le paramétrage de l''ergonomie de cet écran ne sera pas repris sur le nouveau. Il faut modifier cet écran pour conserver le paramétrage existant.',3
    :-'ADMPD212','ADM','fr_fr',0,'Veuillez sélectionnez une opération.',3
    :-'ADMPD213','ADM','fr_fr',0,'Le code retour du #1 est obligatoire si un libellé est saisi',1
    :-'ADMPD214','ADM','fr_fr',0,'La mise à jour des écrans a été effectuée avec succès.',3
    :-'ADMPD215','ADM','fr_fr',0,'Vous ne pouvez pas modifier l''ordre de cet écran.',1
    :-'ADMPD216','ADM','fr_fr',0,'Veuillez sélectionner un groupe de données.',3
    :-'ADMPD217','ADM','fr_fr',0,'Veuillez sélectionner une donnée.',3
1401:+'ADMPD208','ADM','fr_fr',0,'La suppression de l''?cran a ?t? effectu?e avec succ?s.',3
1402:+'ADMPD209','ADM','fr_fr',0,'La validation de l''?cran a ?t? effectu?e avec succ?s.',3
1403:+'ADMPD210','ADM','fr_fr',0,'Etes-vous s?r de vouloir supprimer cet ?cran ?',3
1404:+'ADMPD211','ADM','fr_fr',0,'Attention, apr?s suppression, en cas d''ajout d''un nouvel ?cran r?capitulatif, le param?trage de l''ergonomie de cet ?cran ne sera pas repris sur le nouveau. Il faut modifier cet ?cran pour conserver le param?trage existant.',3
1405:+'ADMPD212','ADM','fr_fr',0,'Veuillez s?lectionnez une op?ration.',3
1406:+'ADMPD213','ADM','fr_fr',0,'Le code retour du #1 est obligatoire si un libell? est saisi',1
1407:+'ADMPD214','ADM','fr_fr',0,'La mise ? jour des ?crans a ?t? effectu?e avec succ?s.',3
1408:+'ADMPD215','ADM','fr_fr',0,'Vous ne pouvez pas modifier l''ordre de cet ?cran.',1
1409:+'ADMPD216','ADM','fr_fr',0,'Veuillez s?lectionner un groupe de donn?es.',3
1410:+'ADMPD217','ADM','fr_fr',0,'Veuillez s?lectionner une donn?e.',3
1411: ##
1412: SYS_DEF_ERREURS
1413: ==
1414: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('STDPLR09', 'STDPLR10','STDPLR11')
    :-'STDPLR09','STD','fr_fr','0','Il faut appliquer la sécurité pac en ajoutant le mot clé CL_SECU_PAC.','2'
    :-'STDPLR10','STD','fr_fr','0','Il faut appliquer la sécurité pac.','2'
    :-'STDPLR11','STD','fr_fr','0','Il faut renvoyer la colonne NUMPAC pour appliquer la sécurité de pac.','2'
1415:+'STDPLR09','STD','fr_fr','0','Il faut appliquer la s?curit? pac en ajoutant le mot cl? CL_SECU_PAC.','2'
1416:+'STDPLR10','STD','fr_fr','0','Il faut appliquer la s?curit? pac.','2'
1417:+'STDPLR11','STD','fr_fr','0','Il faut renvoyer la colonne NUMPAC pour appliquer la s?curit? de pac.','2'
1418: ##
1419: SYS_DEF_ERREURS
1420: ==
1421: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD208','ADMPD209','ADMPD210','ADMPD211','ADMPD212')
    :-'ADMPD208','ADM','fr_fr',0,'Veuillez sélectionner une donnée',1
    :-'ADMPD209','ADM','fr_fr',0,'Vous devez d''abord interroger une donnée',1
    :-'ADMPD210','ADM','fr_fr',0,'Veuillez sélectionner un dictionnaire',1
    :-'ADMPD211','ADM','fr_fr',0,'La validation des caractéristiques générales a été effectuée avec succès',1
    :-'ADMPD212','ADM','fr_fr',0,'Le nom de la donnée a été modifié : veuillez d''abord interroger',1
1422:+'ADMPD208','ADM','fr_fr',0,'Veuillez s?lectionner une donn?e',1
1423:+'ADMPD209','ADM','fr_fr',0,'Vous devez d''abord interroger une donn?e',1
1424:+'ADMPD210','ADM','fr_fr',0,'Veuillez s?lectionner un dictionnaire',1
1425:+'ADMPD211','ADM','fr_fr',0,'La validation des caract?ristiques g?n?rales a ?t? effectu?e avec succ?s',1
1426:+'ADMPD212','ADM','fr_fr',0,'Le nom de la donn?e a ?t? modifi? : veuillez d''abord interroger',1
1427: ##
1428: SYS_DEF_ERREURS
1429: ==
1430: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD213', 'ADMPD214','ADMPD215','ADMPD216','ADMPD217','ADMPD218','ADMPD219','ADMPD220','ADMPD221','ADMPD222')
    :-'ADMPD213','ADM','fr_fr',0,'La suppression de l''écran a été effectuée avec succès.',3
    :-'ADMPD214','ADM','fr_fr',0,'La validation de l''écran a été effectuée avec succès.',3
    :-'ADMPD215','ADM','fr_fr',0,'Etes-vous sûr de vouloir supprimer cet écran ?',3
    :-'ADMPD216','ADM','fr_fr',0,'Attention, après suppression, en cas d''ajout d''un nouvel écran récapitulatif, le paramétrage de l''ergonomie de cet écran ne sera pas repris sur le nouveau. Il faut modifier cet écran pour conserver le paramétrage existant.',3
    :-'ADMPD217','ADM','fr_fr',0,'Veuillez sélectionnez une opération.',3
    :-'ADMPD218','ADM','fr_fr',0,'Le code retour du #1 est obligatoire si un libellé est saisi',1
    :-'ADMPD219','ADM','fr_fr',0,'La mise à jour des écrans a été effectuée avec succès.',3
    :-'ADMPD220','ADM','fr_fr',0,'Vous ne pouvez pas modifier l''ordre de cet écran.',1
    :-'ADMPD221','ADM','fr_fr',0,'Veuillez sélectionner un groupe de données.',3
    :-'ADMPD222','ADM','fr_fr',0,'Veuillez sélectionner une donnée.',3
1431:+'ADMPD213','ADM','fr_fr',0,'La suppression de l''?cran a ?t? effectu?e avec succ?s.',3
1432:+'ADMPD214','ADM','fr_fr',0,'La validation de l''?cran a ?t? effectu?e avec succ?s.',3
1433:+'ADMPD215','ADM','fr_fr',0,'Etes-vous s?r de vouloir supprimer cet ?cran ?',3
1434:+'ADMPD216','ADM','fr_fr',0,'Attention, apr?s suppression, en cas d''ajout d''un nouvel ?cran r?capitulatif, le param?trage de l''ergonomie de cet ?cran ne sera pas repris sur le nouveau. Il faut modifier cet ?cran pour conserver le param?trage existant.',3
1435:+'ADMPD217','ADM','fr_fr',0,'Veuillez s?lectionnez une op?ration.',3
1436:+'ADMPD218','ADM','fr_fr',0,'Le code retour du #1 est obligatoire si un libell? est saisi',1
1437:+'ADMPD219','ADM','fr_fr',0,'La mise ? jour des ?crans a ?t? effectu?e avec succ?s.',3
1438:+'ADMPD220','ADM','fr_fr',0,'Vous ne pouvez pas modifier l''ordre de cet ?cran.',1
1439:+'ADMPD221','ADM','fr_fr',0,'Veuillez s?lectionner un groupe de donn?es.',3
1440:+'ADMPD222','ADM','fr_fr',0,'Veuillez s?lectionner une donn?e.',3
1441: ##
1442: SYS_DEF_ERREURS
1443: ==
1444: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD223','ADMPD224','ADMPD225','ADMPD226','ADMPD227','ADMPD228','ADMPD229','ADMPD230')
    :-'ADMPD223','ADM','fr_fr',0,'La #1 de l''écran a été effectuée avec succès.',3
    :-'ADMPD224','ADM','fr_fr',0,'Veuillez sélectionner un écran.',3
    :-'ADMPD225','ADM','fr_fr',0,'Veuillez sélectionner une règle de gestion.',3
    :-'ADMPD226','ADM','fr_fr',0,'La #1 de l''écran a été effectuée avec succès.',3
1445:+'ADMPD223','ADM','fr_fr',0,'La #1 de l''?cran a ?t? effectu?e avec succ?s.',3
1446:+'ADMPD224','ADM','fr_fr',0,'Veuillez s?lectionner un ?cran.',3
1447:+'ADMPD225','ADM','fr_fr',0,'Veuillez s?lectionner une r?gle de gestion.',3
1448:+'ADMPD226','ADM','fr_fr',0,'La #1 de l''?cran a ?t? effectu?e avec succ?s.',3
1449: 'ADMPD227','ADM','fr_fr',0,'Le champ #1 est obligatoire.',1
    :-'ADMPD228','ADM','fr_fr',0,'Pour le type d''écran #1, le champ #2 est obligatoire',1
    :-'ADMPD229','ADM','fr_fr',0,'Pour le type d''écran #1 ou #2, le champ #3 est obligatoire',1
    :-'ADMPD230','ADM','fr_fr',0,'Numéro d''opération absent',1
1450:+'ADMPD228','ADM','fr_fr',0,'Pour le type d''?cran #1, le champ #2 est obligatoire',1
1451:+'ADMPD229','ADM','fr_fr',0,'Pour le type d''?cran #1 ou #2, le champ #3 est obligatoire',1
1452:+'ADMPD230','ADM','fr_fr',0,'Num?ro d''op?ration absent',1
1453: ##
1454: SYS_DEF_ERREURS
1455: ==
1456: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMPD231','ADMPD232','ADMPD233','ADMPD234','ADMPD235','ADMPD236','ADMPD237','ADMPD238','ADMPD239','ADMPD240')
    :-'ADMPD231','ADM','fr_fr',0,'Vous devez sélectionner un projet.',1
    :-'ADMPD232','ADM','fr_fr',0,'Etes-vous sûr de vouloir supprimer cette règle de gestion ?',3
    :-'ADMPD233','ADM','fr_fr',0,'Cette règle n''existe pas dans le système.',1
    :-'ADMPD234','ADM','fr_fr',0,'La règle #1 a bien été supprimée.',3
    :-'ADMPD235','ADM','fr_fr',0,'Vous devez sélectionner une règle.',1
    :-'ADMPD236','ADM','fr_fr',0,'La règle a été enregistrée avec succès',3
    :-'ADMPD237','ADM','fr_fr',0,'Attention, le déverrouillage de l''onglet Tableau regénère le contenu de l''onglet Source : tout le formatage et les commentaires seront perdus. Continuer ?',3
    :-'ADMPD238','ADM','fr_fr',0,'Attention, l''onglet Tableau va être regénéré à partir de l''onglet Source : toutes les modifications effectuées dans cet onglet seront perdues. Continuer ?',3
1457:+'ADMPD231','ADM','fr_fr',0,'Vous devez s?lectionner un projet.',1
1458:+'ADMPD232','ADM','fr_fr',0,'Etes-vous s?r de vouloir supprimer cette r?gle de gestion ?',3
1459:+'ADMPD233','ADM','fr_fr',0,'Cette r?gle n''existe pas dans le syst?me.',1
1460:+'ADMPD234','ADM','fr_fr',0,'La r?gle #1 a bien ?t? supprim?e.',3
1461:+'ADMPD235','ADM','fr_fr',0,'Vous devez s?lectionner une r?gle.',1
1462:+'ADMPD236','ADM','fr_fr',0,'La r?gle a ?t? enregistr?e avec succ?s',3
1463:+'ADMPD237','ADM','fr_fr',0,'Attention, le d?verrouillage de l''onglet Tableau reg?n?re le contenu de l''onglet Source : tout le formatage et les commentaires seront perdus. Continuer ?',3
1464:+'ADMPD238','ADM','fr_fr',0,'Attention, l''onglet Tableau va ?tre reg?n?r? ? partir de l''onglet Source : toutes les modifications effectu?es dans cet onglet seront perdues. Continuer ?',3
1465: 'ADMPD239','ADM','fr_fr',0,'Erreur de conversion.',1
1466: 'ADMPD240','ADM','fr_fr',0,'Il y a #1 erreur(s) dans la regle.',1
1467: ##
@@ -1473,77 +1473,77 @@ DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND
1473: SYS_DEF_ERREURS
1474: ==
1475: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMZE241','ADMZE242')
    :-'ADMZE241','ADM','fr_fr',0,'La création pour le dictionnaire #1 est déjà activée dans l''écran #2',1
    :-'ADMZE242','ADM','fr_fr',0,'La suppression pour le dictionnaire #1 est déjà activée dans l''écran #2',1
1476:+'ADMZE241','ADM','fr_fr',0,'La cr?ation pour le dictionnaire #1 est d?j? activ?e dans l''?cran #2',1
1477:+'ADMZE242','ADM','fr_fr',0,'La suppression pour le dictionnaire #1 est d?j? activ?e dans l''?cran #2',1
1478: ##
1479: SYS_DEF_ERREURS
1480: ==
1481: DELETE FROM SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'STDPLR12'
    :-'STDPLR12','STD','fr_fr','0','Il faut obligatoirement sélectionner la colonne NUMPAC pour appliquer la sécurité PAC.','1'
1482:+'STDPLR12','STD','fr_fr','0','Il faut obligatoirement s?lectionner la colonne NUMPAC pour appliquer la s?curit? PAC.','1'
1483: ##
1484: SYS_DEF_ERREURS
1485: ==
1486: DELETE FROM SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'STDPLR13'
    :-'STDPLR13','STD','fr_fr','0','Il faut obligatoirement sélectionner la colonne COMPANY_ID pour appliquer la sécurité.','1'
1487:+'STDPLR13','STD','fr_fr','0','Il faut obligatoirement s?lectionner la colonne COMPANY_ID pour appliquer la s?curit?.','1'
1488: ##
1489: SYS_DEF_ERREURS
1490: ==
1491: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR IN ('ADMZE243','ADMZE244')
    :-'ADMZE243','ADM','fr_fr',0,'Vous devez sélectionner un écran.',1
    :-'ADMZE244','ADM','fr_fr',0,'Vous devez sélectionner au moins un collaborateur.',1
1492:+'ADMZE243','ADM','fr_fr',0,'Vous devez s?lectionner un ?cran.',1
1493:+'ADMZE244','ADM','fr_fr',0,'Vous devez s?lectionner au moins un collaborateur.',1
1494: ##
1495: SYS_DEF_ERREURS
1496: ==
1497: DELETE FROM SYS_DEF_ERREURS WHERE CODLANG = 'fr_fr' AND NIV_DEFINITION = '0' AND CODERR ='ADMPD99'
    :-'ADMPD99','HRO','fr_fr',0,'Veuillez sélectionner une régle d''affichage existante.',1
1498:+'ADMPD99','HRO','fr_fr',0,'Veuillez s?lectionner une r?gle d''affichage existante.',1
1499: ##
1500: SYS_DEF_ERREURS
1501: ==
1502: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00360')
    :-'TGE00360', 'TGE', 'fr_fr', 0, 'Les modifications effectuées concernent l''élément #1 de la famille #2 qui participe à la rétroactivité. Veuillez vérifier si la date de profondeur de rétroactivité #3 (élément WG94) est toujours d''actualité pour ce dossier.', 1
1503:+'TGE00360', 'TGE', 'fr_fr', 0, 'Les modifications effectu?es concernent l''?l?ment #1 de la famille #2 qui participe ? la r?troactivit?. Veuillez v?rifier si la date de profondeur de r?troactivit? #3 (?l?ment WG94) est toujours d''actualit? pour ce dossier.', 1
1504: ##
1505: SYS_DEF_ERREURS
1506: ==
1507: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00361')
    :-'TGE00361', 'TGE', 'fr_fr', 0, 'Les modifications effectuées concernent les éléments #1 de la famille #2 qui participent à la rétroactivité. Veuillez vérifier si la date de profondeur de rétroactivité #3 (élément WG94) est toujours d''actualité pour ce dossier.', 1
1508:+'TGE00361', 'TGE', 'fr_fr', 0, 'Les modifications effectu?es concernent les ?l?ments #1 de la famille #2 qui participent ? la r?troactivit?. Veuillez v?rifier si la date de profondeur de r?troactivit? #3 (?l?ment WG94) est toujours d''actualit? pour ce dossier.', 1
1509: ##
1510: SYS_DEF_ERREURS
1511: ==
1512: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00362')
    :-'TGE00362', 'TGE', 'fr_fr', 0, 'Les modifications effectuées concernent les éléments #1 qui participent à la rétroactivité. Veuillez vérifier si les dates de profondeur de rétroactivité #3 (élément WG94) des familles #2  sont toujours d''actualité pour ce dossier.', 1
1513:+'TGE00362', 'TGE', 'fr_fr', 0, 'Les modifications effectu?es concernent les ?l?ments #1 qui participent ? la r?troactivit?. Veuillez v?rifier si les dates de profondeur de r?troactivit? #3 (?l?ment WG94) des familles #2  sont toujours d''actualit? pour ce dossier.', 1
1514: ##
1515: SYS_DEF_ERREURS
1516: ==
1517: delete from SYS_DEF_ERREURS where CODMOD = 'HRO' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'HROENT19'
    :-'HROENT19','HRO','fr_fr',0,'Le champ libre "#1" de l''entité ne peut excéder #2 caractères.',1
1518:+'HROENT19','HRO','fr_fr',0,'Le champ libre "#1" de l''entit? ne peut exc?der #2 caract?res.',1
1519: ##
1520: SYS_DEF_ERREURS
1521: ==
1522: delete from SYS_DEF_ERREURS where CODMOD = 'STD' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR = 'STD00032'
    :-'STD00032','STD','fr_fr',0,'Vous ne pouvez pas saisir plus de #1 caractères.',1
1523:+'STD00032','STD','fr_fr',0,'Vous ne pouvez pas saisir plus de #1 caract?res.',1
1524: ##
1525: SYS_DEF_ERREURS
1526: ==
1527: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00360')
    :-'TGE00360','TGE','fr_fr',0,'Voulez-vous que la pièce jointe #1 soit visible au collaborateur ?',1
1528:+'TGE00360','TGE','fr_fr',0,'Voulez-vous que la pi?ce jointe #1 soit visible au collaborateur ?',1
1529: ##
1530: SYS_DEF_ERREURS
1531: ==
1532: DELETE FROM SYS_DEF_ERREURS WHERE CODERR = 'TGEST062' AND CODLANG = 'fr_fr' AND CODMOD ='GTA'
    :-'TGEST062', 'GTA', 'fr_fr', '0', 'Attention, vous êtes sur le point de désabonner ce login à Gestil, tous ses accès pour tous les PAC (environnements) seront coupés.<br />Pour supprimer l’accès à un PAC Gestil particulier, veuillez retirer le profil d’accès à ce PAC uniquement.<br />Êtes-vous sûr de vouloir désabonner ce login à Gestil ?', '3'
1533:+'TGEST062', 'GTA', 'fr_fr', '0', 'Attention, vous ?tes sur le point de d?sabonner ce login ? Gestil, tous ses acc?s pour tous les PAC (environnements) seront coup?s.<br />Pour supprimer l?acc?s ? un PAC Gestil particulier, veuillez retirer le profil d?acc?s ? ce PAC uniquement.<br />?tes-vous s?r de vouloir d?sabonner ce login ? Gestil ?', '3'
1534: ##
1535: SYS_DEF_ERREURS
1536: ==
1537: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00360')
    :-'TGE00360','TGE','fr_fr',0,'Voulez-vous que la pièce jointe "#1" soit visible par le collaborateur ?',1
1538:+'TGE00360','TGE','fr_fr',0,'Voulez-vous que la pi?ce jointe "#1" soit visible par le collaborateur ?',1
1539: ##
1540: SYS_DEF_ERREURS
1541: ==
1542: delete from SYS_DEF_ERREURS where CODMOD = 'GEN' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('GENWK128', 'GENWK129')
    :-'GENWK128','GEN','fr_fr',0,'Vous ne pouvez pas effectuer cette opération, veuillez utiliser le processus d''annulation d''embauche.',1
    :-'GENWK129','GEN','fr_fr',0,'Aucun historique n''est éligible à la suppression pour ce salarié.',2
1543:+'GENWK128','GEN','fr_fr',0,'Vous ne pouvez pas effectuer cette op?ration, veuillez utiliser le processus d''annulation d''embauche.',1
1544:+'GENWK129','GEN','fr_fr',0,'Aucun historique n''est ?ligible ? la suppression pour ce salari?.',2
1545: ##
1546: SYS_DEF_ERREURS
1547: ==
1548: delete from SYS_DEF_ERREURS where CODMOD = 'TGE' and CODLANG = 'fr_fr' and NIV_DEFINITION = '0' and CODERR in ('TGE00360')
    :-'TGE00360', 'TGE', 'fr_fr', 0, 'Les modifications effectuées concernent l''élément #1 de la famille #2 qui participe à la rétroactivité. Veuillez vérifier si la date de profondeur de rétroactivité #3 (élément WG94) est toujours d''actualité pour ce dossier.', 1
1549:+'TGE00360', 'TGE', 'fr_fr', 0, 'Les modifications effectu?es concernent l''?l?ment #1 de la famille #2 qui participe ? la r?troactivit?. Veuillez v?rifier si la date de profondeur de r?troactivit? #3 (?l?ment WG94) est toujours d''actualit? pour ce dossier.', 1
diff --git a/files-example2/FSED.txt b/files-example2/FSED.txt
deleted file mode 100644
index fe3ee50..0000000
--- a/files-example2/FSED.txt
+++ /dev/null
@@ -1,5176 +0,0 @@
~:-##
~:-TAG_CHARSET=@€éèç
~:-##
~:-FSED
~:-=SQL=
~:-CREATE OR REPLACE PACKAGE FSED 
~:-AS
~:- FUNCTION getTypeTable(
~:- p_table IN VARCHAR2)
~:- RETURN VARCHAR2;
~:- FUNCTION getClauseSelect(
~:- p_numpac IN VARCHAR2,
~:- p_nom_table_ou_alias IN VARCHAR2,
~:- p_donneegxp IN VARCHAR2,
~:- p_donnfiltre IN VARCHAR2,
~:- p_operfiltre IN VARCHAR2,
~:- p_valfiltre IN VARCHAR2,
~:- p_trtparticulier IN VARCHAR2,
~:- p_envoi_systematique IN VARCHAR2,
~:- p_data_type IN VARCHAR2,
~:- p_type_zadig IN VARCHAR2,
~:- p_masque IN VARCHAR2,
~:- p_occ IN VARCHAR2,
~:- p_avec_balises_photo IN BOOLEAN)
~:- RETURN VARCHAR2;
~:- FUNCTION getLibResolu(
~:- pNumPac       IN TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:- pCodeCaisse   IN TGE_REF_CAISSE.CODECAISSE%TYPE,
~:- pLibRUB       IN TGE_REF_RUBRIQUE.LIBRUB%TYPE)
~:- RETURN VARCHAR2;
~:- PROCEDURE FSED_ERREUR(
~:- p_id      IN NUMBER,
~:- p_nomproc IN VARCHAR2,
~:- p_idDate  IN VARCHAR2,
~:- p_erreur  IN CLOB );
~:- PROCEDURE preparation_FSED_unit(
~:- p_nomTable    IN VARCHAR2,
~:- p_alias       IN VARCHAR2,
~:- p_TABLETYPE   IN VARCHAR2,
~:- p_id_trt      IN NUMBER,
~:- p_numpac      IN VARCHAR2,
~:- p_periode     IN VARCHAR2,
~:- p_ALLERRETOUR IN VARCHAR2,
~:- p_nb_mois_paie_init IN NUMBER);
~:- PROCEDURE preparation_FSED(
~:- p_id_trt  IN NUMBER,
~:- p_numpac  IN VARCHAR2,
~:- p_periode IN VARCHAR2);
~:- PROCEDURE retour_Fsed(
~:- p_id IN NUMBER );
~:- PROCEDURE insertCart80(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER);
~:- PROCEDURE insertCart30(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER,
~:- p_table IN VARCHAR2);
~:- PROCEDURE sous_insertCart80(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER) ;
~:- PROCEDURE sous_insertCart30(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER,
~:- p_table IN VARCHAR2) ;
~:- PROCEDURE maj_CAD30(
~:- p_id IN NUMBER) ;
~:- PROCEDURE getPeriodeRecueil(
~:- p_numpac  IN TGE_REF_PAC.numpac%type,
~:- p_paiezad IN TGE_IMPORT_FSED_30.paiezad%type,
~:- p_dateDeb IN OUT DATE,
~:- p_dateFin IN OUT DATE);
~:- PROCEDURE tmp_histo_fsed_30(
~:- p_id  IN NUMBER ,
~:- p_numpac  IN TGE_REF_MAPDO.NUMPAC%TYPE,
~:- p_moi IN VARCHAR2);
~:- procedure FSED_AVANCEMENT_PLSQL(
~:- p_id             IN NUMBER,
~:- p_typeAction     IN VARCHAR2,
~:- p_detailAction   IN CLOB );
~:- PROCEDURE FSED_AVANCEMENT(
~:-    id  IN NUMBER,
~:-    txt IN VARCHAR2);
~:- PROCEDURE insert_gap_trt(
~:- p_id          IN NUMBER ,
~:- p_numpac      IN TGE_REF_PAC.numpac%type,
~:- p_periode     IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:- p_type_retour IN VARCHAR2);
~:- PROCEDURE insert_gap_trt_suivi(
~:- p_id               IN NUMBER ,
~:- p_statut           IN TGE_REF_PAC.numpac%type,
~:- p_code_retour_zpp  IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:- p_login            IN VARCHAR2,
~:- p_type_retour     IN VARCHAR2);
~:- PROCEDURE getPeriodeRecueilEvol(
~:- p_id      IN NUMBER,
~:- p_numpac  IN TGE_REF_PAC.numpac%type,
~:- p_periodeEnCours IN TGE_REF_PAC.periodeencours%type,
~:- p_paiezad IN TGE_IMPORT_FSED_30.paiezad%type,
~:- p_dateDeb IN OUT DATE,
~:- p_dateFin IN OUT DATE);
~:- END FSED;
~:-##
~:-FSED
~:-=SQL=
~:-create or replace PACKAGE body FSED AS
~:-  /********************************************************************************
~:-  Version     : V5.05.00
~:-  *********************************************************************************/
~:-  err_msg  VARCHAR(1000);
~:-  err_code VARCHAR(200);
~:-type pour_comp
~:-IS
~:-  record
~:-  (
~:-    CLE     VARCHAR2(1000),
~:-    numpac  VARCHAR2(6),
~:-    pacmat  VARCHAR2(8),
~:-    paiezad VARCHAR2(8),
~:-    dteffet DATE,
~:-    dtfin   DATE,
~:-    rank    NUMBER,
~:-    C1      VARCHAR2(1000),
~:-    C2      VARCHAR2(1000),
~:-    C3      VARCHAR2(1000),
~:-    C4      VARCHAR2(1000),
~:-    C5      VARCHAR2(1000),
~:-    C6      VARCHAR2(1000),
~:-    C7      VARCHAR2(1000),
~:-    C8      VARCHAR2(1000),
~:-    C9      VARCHAR2(1000),
~:-    C10     VARCHAR2(1000),
~:-    C11     VARCHAR2(1000),
~:-    C12     VARCHAR2(1000),
~:-    C13     VARCHAR2(1000),
~:-    C14     VARCHAR2(1000),
~:-    C15     VARCHAR2(1000),
~:-    C16     VARCHAR2(1000),
~:-    C17     VARCHAR2(1000),
~:-    C18     VARCHAR2(1000),
~:-    C19     VARCHAR2(1000),
~:-    C20     VARCHAR2(1000),
~:-    C21     VARCHAR2(1000),
~:-    C22     VARCHAR2(1000),
~:-    C23     VARCHAR2(1000),
~:-    C24     VARCHAR2(1000),
~:-    C25     VARCHAR2(1000),
~:-    C26     VARCHAR2(1000),
~:-    C27     VARCHAR2(1000),
~:-    C28     VARCHAR2(1000),
~:-    C29     VARCHAR2(1000),
~:-    C30     VARCHAR2(1000) );
~:-TYPE DATE_A275_h
~:-IS
~:-  RECORD
~:-  (
~:-    numpac        VARCHAR2(6),
~:-    IDPACMAT      VARCHAR2(14),
~:-    donnee_A275_h DATE );
~:-TYPE TAB_DATE_A275_H
~:-IS
~:-  TABLE OF DATE_A275_h INDEX BY binary_integer ;
~:-TYPE DATE_w580_h
~:-IS
~:-  RECORD
~:-  (
~:-    numpac        VARCHAR2(6),
~:-    IDPACMAT      VARCHAR2(14),
~:-    donnee_W580_h VARCHAR2(8) );
~:-TYPE TAB_DATE_w580_H
~:-IS
~:-  TABLE OF DATE_w580_h INDEX BY binary_integer ;
~:-TYPE DATE_WL52_h
~:-IS
~:-  RECORD
~:-  (
~:-    numpac        VARCHAR2(6),
~:-    IDPACMAT      VARCHAR2(14),
~:-    donnee_WL52_h VARCHAR2(8) );
~:-TYPE TAB_DATE_WL52_H
~:-IS
~:-  TABLE OF DATE_WL52_h INDEX BY binary_integer ;
~:-TYPE TAB_pour_comp
~:-IS
~:-  TABLE OF pour_comp INDEX BY binary_integer ;
~:-type pour_lib
~:-IS
~:-  record
~:-  (
~:-    LIB         VARCHAR2(1000),
~:-    TYPE_DONNEE VARCHAR2(1),
~:-    OCC         VARCHAR2(2) );
~:-TYPE TAB_pour_lib
~:-IS
~:-  TABLE OF pour_lib INDEX BY binary_integer ;
~:-type pour_retour
~:-IS
~:-  record
~:-  (
~:-    ID_TRT      NUMBER,
~:-    NUMPAC      VARCHAR2(6),
~:-    CLE         VARCHAR2(1000),
~:-    pacmat      VARCHAR2(8),
~:-    ELEM        VARCHAR2(1000),
~:-    OCC         VARCHAR2(2),
~:-    VALEUR      VARCHAR2(1000),
~:-    CODEOP      VARCHAR2(1),
~:-    TYPE_DONNEE VARCHAR2(1),
~:-    DTEFFET     DATE,
~:-    paiezad     VARCHAR2(8));
~:-TYPE TAB_pour_retour
~:-IS
~:-  TABLE OF pour_retour INDEX BY binary_integer ;
~:-type pour_cle
~:-IS
~:-  record
~:-  (
~:-    column_name VARCHAR2(255),
~:-    data_type   VARCHAR2(255));
~:-TYPE TAB_cle
~:-IS
~:-  TABLE OF pour_cle INDEX BY binary_integer ;
~:-  CURSOR cur_lig (p_id TGE_IMPORT_FSED.id_trt%TYPE)
~:-  IS
~:-    SELECT *
~:-    FROM TGE_IMPORT_FSED
~:-    WHERE id_trt             =p_id
~:-    AND SUBSTR(donnees,7,2) IN ('00','11','15','17','99')
~:-    ORDER BY num_lig;
~:-TYPE t_TGE_REF_VRREP
~:-IS
~:-  TABLE OF TGE_REF_VRREP%rowtype;
~:-TYPE t_TGE_REF_VRDES
~:-IS
~:-  TABLE OF TGE_REF_VRDES%rowtype;
~:-TYPE t_TGE_REF_VRVAL
~:-IS
~:-  TABLE OF TGE_REF_VRVAL%rowtype;
~:-TYPE t_TGE_REF_RUBRIQUE
~:-IS
~:-  TABLE OF TGE_REF_RUBRIQUE%rowtype;
~:-TYPE t_TGE_REF_LIBRUB_COTIS
~:-IS
~:-  TABLE OF TGE_REF_LIBRUB_COTIS%rowtype;
~:-TYPE t_TGE_REF_RUBRIQUE_CONTEXTE
~:-IS
~:-  TABLE OF TGE_REF_RUBRIQUE_CONTEXTE%rowtype;
~:-TYPE t_TGE_REF_DICOZ
~:-IS
~:-  TABLE OF TGE_REF_DICOZ%rowtype;
~:-TYPE t_TGE_IMPORT_FSED
~:-IS
~:-  TABLE OF TGE_IMPORT_FSED%rowtype;
~:-TYPE t_CODE_TABLE
~:-IS
~:-  TABLE OF VARCHAR2(5) INDEX BY VARCHAR2(15) ;
~:-TYPE t_numLig_00
~:-IS
~:-  TABLE OF NUMBER INDEX BY binary_integer ;
~:-TYPE t_numLig_99
~:-IS
~:-  TABLE OF NUMBER INDEX BY binary_integer ;
~:-  lig t_TGE_IMPORT_FSED;
~:-  tab_11R t_TGE_REF_VRREP;
~:-  elt_tab_11R TGE_REF_VRREP%rowtype;
~:-  tab_11D t_TGE_REF_VRDES;
~:-  elt_tab_11D TGE_REF_VRDES%rowtype;
~:-  tab_11D1 t_TGE_REF_VRDES;
~:-  elt_tab_11D1 TGE_REF_VRDES%rowtype;
~:-  tab_11V t_TGE_REF_VRVAL;
~:-  elt_tab_11V TGE_REF_VRVAL%rowtype;
~:-  tab_15 t_TGE_REF_RUBRIQUE;
~:-  tab_15_lib t_TGE_REF_LIBRUB_COTIS;
~:-  elt_tab_15 TGE_REF_RUBRIQUE%rowtype;
~:-  elt_tab_15_lib TGE_REF_LIBRUB_COTIS%rowtype;
~:-  tab_17CR t_TGE_REF_RUBRIQUE_CONTEXTE;
~:-  elt_tab_17CR TGE_REF_RUBRIQUE_CONTEXTE%rowtype;
~:-  tab_17DMF t_TGE_REF_DICOZ;
~:-  elt_tab_17DMF TGE_REF_DICOZ%rowtype;
~:-  w_Error_code    NUMBER(2)    :=0 ;
~:-  w_Error_msg     VARCHAR2(255):= '';
~:-  v_cmpt_numLigne NUMBER       := 0;
~:-  code_table_liste t_CODE_TABLE;
~:-  valdebug VARCHAR2(1);
~:-  tab_numLigne00 t_numLig_00;
~:-  tab_numligne99 t_numLig_99;
~:-  DicoPret          VARCHAR2(30);
~:-  soldePret         VARCHAR2(30);
~:-  MontantPret       VARCHAR2(30);
~:-  DicoOpposition    VARCHAR2(30);
~:-  soldeOpposition   VARCHAR2(30);
~:-  MontantOpposition VARCHAR2(30);
~:-  coldteffet        VARCHAR2(30);
~:-  coldatecle        VARCHAR2(30);
~:- MatEcrit          VARCHAR2(20);
~:-  oldvaleur         VARCHAR2(1000);
~:-  MatARenvoyer      VARCHAR2(20);
~:-  mMoins1           DATE;
~:-  CURSOR cur_numlig00 (p_id TGE_IMPORT_FSED.id_trt%TYPE)
~:-  IS
~:-    SELECT num_lig
~:-    FROM TGE_IMPORT_FSED
~:-    WHERE id_trt            =p_id
~:-    AND SUBSTR(donnees,7,2) ='00'
~:-    ORDER BY num_lig;
~:-  CURSOR cur_numlig99 (p_id TGE_IMPORT_FSED.id_trt%TYPE)
~:-  IS
~:-    SELECT num_lig
~:-    FROM TGE_IMPORT_FSED
~:-    WHERE id_trt            =p_id
~:-    AND SUBSTR(donnees,7,2) ='99'
~:-    ORDER BY num_lig;
~:-PROCEDURE FSED_AVANCEMENT(
~:-    id  IN NUMBER,
~:-    txt IN VARCHAR2)
~:-AS
~:-  PRAGMA AUTONOMOUS_TRANSACTION;
~:-  line   VARCHAR(32672);
~:-  status INT;
~:-BEGIN
~:-  IF valdebug IS NULL THEN
~:-    SELECT is_debug INTO valdebug FROM TGE_FSED_IS_DEBUG;
~:-  END IF;
~:-  IF valdebug='O' THEN
~:-    INSERT INTO TGE_FSED_AVANCEMENT_proc VALUES
~:-      (id,systimestamp,txt
~:-      );
~:-    COMMIT;
~:-  END IF;
~:-END FSED_AVANCEMENT;
~:-PROCEDURE FSED_ERREUR
~:-  (
~:-    p_id      IN NUMBER,
~:-    p_nomproc IN VARCHAR2,
~:-    p_idDate  IN VARCHAR2,
~:-    p_erreur  IN CLOB
~:-  )
~:-AS
~:-  PRAGMA AUTONOMOUS_TRANSACTION;
~:-  line   VARCHAR(32672);
~:-  status INT;
~:-BEGIN
~:-  INSERT
~:-  INTO TGE_FSED_ERREUR
~:-    (
~:-      ID,
~:-      PROC,
~:-      PARAM,
~:-      MESSAGE,
~:-      date_err
~:-    )
~:-    VALUES
~:-    (
~:-      p_id ,
~:-      p_nomproc,
~:-      p_idDate ,
~:-      p_erreur,
~:-      sysdate
~:-    );
~:-  COMMIT;
~:-END FSED_ERREUR;
~:-PROCEDURE FSED_AVANCEMENT_PLSQL(
~:-    p_id           IN NUMBER,
~:-    p_typeAction   IN VARCHAR2,
~:-    p_detailAction IN CLOB)
~:-AS
~:-  PRAGMA AUTONOMOUS_TRANSACTION;
~:-  line   VARCHAR(32672);
~:-  status INT;
~:-BEGIN
~:-  INSERT
~:-  INTO TGE_AVANCEMENT_PLSQL
~:-    (
~:-      NUM,
~:-      TYPE_ACTION,
~:-      DATE_ACTION,
~:-      DETAIL_ACTION
~:-    )
~:-    VALUES
~:-    (
~:-      p_id ,
~:-      p_typeAction,
~:-      SYSTIMESTAMP,
~:-      p_detailAction
~:-    );
~:-  COMMIT;
~:-END FSED_AVANCEMENT_PLSQL;
~:-PROCEDURE remplissage_ligne
~:-  (
~:-    tabRetour   IN OUT nocopy TAB_pour_retour,
~:-    tab         IN pour_comp,
~:-    tablib      IN pour_lib,
~:-    p_id_trt    IN NUMBER,
~:-    p_numretour IN OUT NUMBER,
~:-    p_numcol    IN NUMBER,
~:-    p_code_op   IN VARCHAR2,
~:-    p_TABLETYPE IN VARCHAR2
~:-  )
~:-AS
~:-  VALEUR_TO_SEND VARCHAR2
~:-  (
~:-    1000
~:-  )
~:-  ;
~:-BEGIN
~:-  IF p_numcol      =0 THEN
~:-    VALEUR_TO_SEND:=tab.C1;
~:-  elsif p_numcol   =1 THEN
~:-    VALEUR_TO_SEND:=tab.C2;
~:-  elsif p_numcol   =2 THEN
~:-    VALEUR_TO_SEND:=tab.C3;
~:-  elsif p_numcol   =3 THEN
~:-    VALEUR_TO_SEND:=tab.C4;
~:-  elsif p_numcol   =4 THEN
~:-    VALEUR_TO_SEND:=tab.C5;
~:-  elsif p_numcol   =5 THEN
~:-    VALEUR_TO_SEND:=tab.C6;
~:-  elsif p_numcol   =6 THEN
~:-    VALEUR_TO_SEND:=tab.C7;
~:-  elsif p_numcol   =7 THEN
~:-    VALEUR_TO_SEND:=tab.C8;
~:-  elsif p_numcol   =8 THEN
~:-    VALEUR_TO_SEND:=tab.C9;
~:-  elsif p_numcol   =9 THEN
~:-    VALEUR_TO_SEND:=tab.C10;
~:-  elsif p_numcol   =10 THEN
~:-    VALEUR_TO_SEND:=tab.C11;
~:-  elsif p_numcol   =11 THEN
~:-    VALEUR_TO_SEND:=tab.C12;
~:-  elsif p_numcol   =12 THEN
~:-    VALEUR_TO_SEND:=tab.C13;
~:-  elsif p_numcol   =13 THEN
~:-    VALEUR_TO_SEND:=tab.C14;
~:-  elsif p_numcol   =14 THEN
~:-    VALEUR_TO_SEND:=tab.C15;
~:-  elsif p_numcol   =15 THEN
~:-    VALEUR_TO_SEND:=tab.C16;
~:-  elsif p_numcol   =16 THEN
~:-    VALEUR_TO_SEND:=tab.C17;
~:-  elsif p_numcol   =17 THEN
~:-    VALEUR_TO_SEND:=tab.C18;
~:-  elsif p_numcol   =18 THEN
~:-    VALEUR_TO_SEND:=tab.C19;
~:-  elsif p_numcol   =19 THEN
~:-    VALEUR_TO_SEND:=tab.C20;
~:-  elsif p_numcol   =20 THEN
~:-    VALEUR_TO_SEND:=tab.C21;
~:-  elsif p_numcol   =21 THEN
~:-    VALEUR_TO_SEND:=tab.C22;
~:-  elsif p_numcol   =22 THEN
~:-    VALEUR_TO_SEND:=tab.C23;
~:-  elsif p_numcol   =23 THEN
~:-    VALEUR_TO_SEND:=tab.C24;
~:-  elsif p_numcol   =24 THEN
~:-    VALEUR_TO_SEND:=tab.C25;
~:-  elsif p_numcol   =25 THEN
~:-    VALEUR_TO_SEND:=tab.C26;
~:-  elsif p_numcol   =26 THEN
~:-    VALEUR_TO_SEND:=tab.C27;
~:-  elsif p_numcol   =27 THEN
~:-    VALEUR_TO_SEND:=tab.C28;
~:-  elsif p_numcol   =28 THEN
~:-    VALEUR_TO_SEND:=tab.C29;
~:-  elsif p_numcol   =29 THEN
~:-    VALEUR_TO_SEND:=tab.C30;
~:-  END IF;
~:-  --préparer envoi si NULL ou autre que valeur "ne pas envoyer"
~:-  IF VALEUR_TO_SEND IS NULL OR VALEUR_TO_SEND <>'_NOTSEND_' THEN
~:-    IF p_code_op     ='S' THEN
~:-      --les suppressions sont des envois à blanc
~:-      VALEUR_TO_SEND:=NULL;
~:-    END IF;
~:-    --éliminer les doublons même matricule déjà écrit et même valeur
~:-    IF MatEcrit=tab.pacmat||'#'||tab.paiezad AND oldvaleur=NVL(VALEUR_TO_SEND,'@NULL@') THEN
~:-      RETURN;
~:-    END IF;
~:-    --on a détecté au moins une différence
~:-    MatARenvoyer:=tab.pacmat||'#'||tab.paiezad;
~:-    --éliminer le passé et pour les historiques les doublons déjà écrits
~:-    IF NVL(tab.DTFIN,to_date('31.12.2099','dd.mm.yyyy'))            >= mMoins1
~:-      AND ( coldteffet <> 'a.DATE_EFF' 
~:-      OR MatARenvoyer<>MatEcrit OR oldvaleur<>NVL(VALEUR_TO_SEND,'@NULL@') )
~:-    THEN
~:-      tabRetour(p_numretour).VALEUR                                 :=VALEUR_TO_SEND;
~:-      tabRetour(p_numretour).DTEFFET                                :=tab.DTEFFET;
~:-      tabRetour(p_numretour).CLE                                    :=tab.CLE;
~:-      tabRetour(p_numretour).pacmat                                 :=tab.pacmat;
~:-      tabRetour(p_numretour).paiezad                                :=tab.paiezad;
~:-      tabRetour(p_numretour).ELEM                                   :=tablib.LIB;
~:-      tabRetour(p_numretour).CODEOP                                 :=p_code_op;
~:-      tabRetour(p_numretour).TYPE_DONNEE                            :=tablib.TYPE_DONNEE;
~:-    IF coldteffet = 'a.DATE_EFF' THEN
~:-    --au moins 1 histo écrit, forcer l'écriture des prochaines dates d'effet.
~:-    MatEcrit:=MatARenvoyer;
~:-    --mémoriser la valeur de cette colonne historique
~:-    oldvaleur:=NVL(VALEUR_TO_SEND,'@NULL@');
~:-    END IF;
~:-      IF LENGTH(TRIM(TRANSLATE(tablib.OCC, ' +-.0123456789', ' '))) IS NULL THEN
~:-        --occurrence numérique indiquée dans MAPDO
~:-        tabRetour(p_numretour).OCC :=tablib.OCC;
~:-      ELSE
~:-        IF tablib.OCC     ='**' OR tablib.OCC='*F' OR tablib.OCC='*I' THEN
~:-          IF p_TABLETYPE <>'OCCURS' THEN
~:-            --occurrences spéciales, ce ne sont pas des occurrences Zadig donc on vide
~:-            tabRetour(p_numretour).OCC :=NULL;
~:-          ELSE
~:-            --pour le type OCCURS valoriser OCC avec le rang par exemple 3ème enfant OCC=3
~:-            tabRetour(p_numretour).OCC:=tab.RANK;
~:-          END IF;
~:-        ELSE
~:-          --occurrence bizarre dans MAPDO (ni numérique, ni ** ni *F ni *I)
~:-          tabRetour(p_numretour).OCC :=tablib.OCC;
~:-        END IF;
~:-      END IF;
~:-      --incrémenter le n° de ligne pour anticiper la ligne suivante
~:-      p_numretour:=p_numretour+1;
~:-    END IF;
~:-  END IF;
~:-END remplissage_ligne;
~:-------------------------------------
~:- FUNCTION GET_NB_MOIS_PAIE_INIT
~:- RETURN NUMBER
~:- IS
~:- p_nb_mois_paie_init SYS_VARSYS.VALVAR%type ;
~:- BEGIN
~:- BEGIN
~:- select TO_NUMBER(NVL(VALVAR,'0')) into p_nb_mois_paie_init from SYS_VARSYS where MODULE = 'GAP' and CODVAR = 'NB_MOIS_PAIE_INIT';
~:- EXCEPTION
~:- WHEN NO_DATA_FOUND THEN
~:- p_nb_mois_paie_init :=1;
~:- END ;
~:-p_nb_mois_paie_init := p_nb_mois_paie_init-1;
~:-RETURN p_nb_mois_paie_init;
~:- END GET_NB_MOIS_PAIE_INIT ;
~:-------------------------------------
~:-FUNCTION difference_col
~:-  (
~:-    tab1     IN pour_comp,
~:-    tab2     IN pour_comp,
~:-    p_numcol IN NUMBER
~:-  )
~:-  RETURN INTEGER
~:-IS
~:-BEGIN
~:-  IF p_numcol=0 AND NVL(tab1.c1,'@NULL@') <>NVL(tab2.c1,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=1 AND NVL(tab1.c2,'@NULL@') <>NVL(tab2.c2,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=2 AND NVL(tab1.c3,'@NULL@') <>NVL(tab2.c3,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=3 AND NVL(tab1.c4,'@NULL@') <>NVL(tab2.c4,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=4 AND NVL(tab1.c5,'@NULL@') <>NVL(tab2.c5,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=5 AND NVL(tab1.c6,'@NULL@') <>NVL(tab2.c6,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=6 AND NVL(tab1.c7,'@NULL@') <>NVL(tab2.c7,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=7 AND NVL(tab1.c8,'@NULL@') <>NVL(tab2.c8,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=8 AND NVL(tab1.c9,'@NULL@') <>NVL(tab2.c9,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=9 AND NVL(tab1.c10,'@NULL@') <>NVL(tab2.c10,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=10 AND NVL(tab1.c11,'@NULL@') <>NVL(tab2.c11,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=11 AND NVL(tab1.c12,'@NULL@') <>NVL(tab2.c12,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=12 AND NVL(tab1.c13,'@NULL@') <>NVL(tab2.c13,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=13 AND NVL(tab1.c14,'@NULL@') <>NVL(tab2.c14,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=14 AND NVL(tab1.c15,'@NULL@') <>NVL(tab2.c15,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=15 AND NVL(tab1.c16,'@NULL@') <>NVL(tab2.c16,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=16 AND NVL(tab1.c17,'@NULL@') <>NVL(tab2.c17,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=17 AND NVL(tab1.c18,'@NULL@') <>NVL(tab2.c18,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=18 AND NVL(tab1.c19,'@NULL@') <>NVL(tab2.c19,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=19 AND NVL(tab1.c20,'@NULL@') <>NVL(tab2.c20,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=20 AND NVL(tab1.c21,'@NULL@') <>NVL(tab2.c21,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=21 AND NVL(tab1.c22,'@NULL@') <>NVL(tab2.c22,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=22 AND NVL(tab1.c23,'@NULL@') <>NVL(tab2.c23,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=23 AND NVL(tab1.c24,'@NULL@') <>NVL(tab2.c24,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=24 AND NVL(tab1.c25,'@NULL@') <>NVL(tab2.c25,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=25 AND NVL(tab1.c26,'@NULL@') <>NVL(tab2.c26,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=26 AND NVL(tab1.c27,'@NULL@') <>NVL(tab2.c27,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=27 AND NVL(tab1.c28,'@NULL@') <>NVL(tab2.c28,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=28 AND NVL(tab1.c29,'@NULL@') <>NVL(tab2.c29,'@NULL@') THEN
~:-    RETURN 1;
~:-  elsif p_numcol=29 AND NVL(tab1.c30,'@NULL@') <>NVL(tab2.c30,'@NULL@') THEN
~:-    RETURN 1;
~:-  ELSE
~:-    RETURN 0;
~:-  END IF;
~:-END difference_col;
~:-FUNCTION getTypeTable
~:-  (
~:-    p_table IN VARCHAR2
~:-  )
~:-  RETURN VARCHAR2
~:-IS
~:-  v_typeTable VARCHAR2(1);
~:-BEGIN
~:-IF p_table ='DIC_ADM_CONTRAT_SITU' THEN 
~:-    v_typeTable :='z';
~:-ELSE
~:-
~:-  BEGIN
~:-    SELECT typetable
~:-    INTO v_typeTable
~:-    FROM
~:-      (SELECT 'p' AS typetable
~:-      FROM user_cons_columns
~:-      WHERE table_name =p_table
~:-        --faux PACMAT, c'est un PAIEZAD
~:-      AND p_table         not like 'DIC_ADM_CONTRAT_HISTO%'
~:-      AND constraint_name IN
~:-        (SELECT user_constraints.constraint_name
~:-        FROM user_constraints
~:-        WHERE user_cons_columns.table_name =user_constraints.table_name
~:-        AND CONSTRAINT_TYPE                ='P'
~:-        )
~:-      AND column_name='PACMAT'
~:-      UNION
~:-      SELECT 'z' AS typetable
~:-      FROM user_cons_columns
~:-      WHERE (table_name =p_table
~:-        --PAIEZAD imposé
~:-      OR p_table           like 'DIC_ADM_CONTRAT_HISTO%')
~:-      AND constraint_name IN
~:-        (SELECT user_constraints.constraint_name
~:-        FROM user_constraints
~:-        WHERE user_cons_columns.table_name =user_constraints.table_name
~:-        AND CONSTRAINT_TYPE                ='P'
~:-        )
~:-      AND column_name= 'PAIEZAD'
~:-      UNION
~:-      SELECT 'm' AS typetable
~:-      FROM user_cons_columns
~:-      WHERE table_name     =p_table
~:-      AND constraint_name IN
~:-        (SELECT user_constraints.constraint_name
~:-        FROM user_constraints
~:-        WHERE user_cons_columns.table_name =user_constraints.table_name
~:-        AND CONSTRAINT_TYPE                ='P'
~:-        )
~:-      AND column_name= 'MATRIC'
~:-      );
~:-  EXCEPTION
~:-  WHEN NO_DATA_FOUND THEN
~:-    RETURN NULL;
~:-  END;
~:-END IF;
~:-  RETURN v_typeTable;
~:-END getTypeTable;
~:-PROCEDURE effaceMatricToutTable(
~:-    p_numpac IN VARCHAR2,
~:-    p_pacmat IN VARCHAR2 )
~:-AS
~:-  CURSOR cur_tables
~:-  IS
~:-    SELECT DISTINCT TABLEPHY
~:-    FROM tge_ref_mapta
~:-    WHERE numpac     = p_numpac
~:-    AND ALLERRETOUR IN ('A','2')
~:-    AND TABLEPHY    <>'DIC_ADM_CONTRAT'
~:-  UNION
~:-  SELECT DISTINCT TABLEPHY
~:-  FROM tge_ref_mapta
~:-  WHERE numpac        = '*'
~:-  AND ALLERRETOUR    IN ('A','2')
~:-  AND TABLEPHY       <>'DIC_ADM_CONTRAT'
~:-  AND TABLEPARAM NOT IN
~:-    (SELECT TABLEPARAM
~:-    FROM tge_ref_mapta
~:-    WHERE numpac     = p_numpac
~:-    AND ALLERRETOUR IN ('A','2')
~:-    AND TABLEPHY    <>'DIC_ADM_CONTRAT'
~:-    );
~:-  lig_tables cur_tables%rowtype;
~:-BEGIN
~:-  OPEN cur_tables;
~:-  LOOP
~:-    FETCH cur_tables INTO lig_tables;
~:-    EXIT
~:-  WHEN cur_tables%NOTFOUND ;
~:-    EXECUTE immediate 'DELETE FROM PHOTO_'||lig_tables.TABLEPHY||' where numpac=:2 and pacmat=:1' USING p_numpac,
~:-    p_pacmat;
~:-  END LOOP;
~:-  CLOSE cur_tables;
~:-END effaceMatricToutTable;
~:-PROCEDURE getSoldMontant(
~:-    p_numpac IN VARCHAR2 ,
~:-    p_id_trt IN NUMBER,
~:-    DicoPret OUT VARCHAR2 ,
~:-    soldePret OUT VARCHAR2 ,
~:-    MontantPret OUT VARCHAR2 ,
~:-    DicoOpposition OUT VARCHAR2 ,
~:-    soldeOpposition OUT VARCHAR2 ,
~:-    MontantOpposition OUT VARCHAR2 )
~:-AS
~:-BEGIN
~:-  SELECT MontantPret_DONNEE,
~:-    SoldePret_DONNEE,
~:-    DicoPret_DONNEE,
~:-    MontantOpposition_DONNEE,
~:-    SoldeOpposition_DONNEE,
~:-    DicoOpposition_DONNEE
~:-  INTO MontantPret,
~:-    soldePret,
~:-    DicoPret,
~:-    MontantOpposition,
~:-    soldeOpposition,
~:-    DicoOpposition
~:-  FROM
~:-    (
~:-    --ce SELECT fournit la liste element/donneegxp des éléments personnalisés
~:-    SELECT DISTINCT a.element,
~:-      a.DONNEEGXP
~:-    FROM tge_ref_mapdo a,
~:-      (
~:-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac     =p_numpac
~:-      AND ALLERRETOUR IN ('A','2','I')
~:-      UNION ALL
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac        ='*'
~:-      AND ALLERRETOUR    IN ('A','2','I')
~:-      AND tableparam NOT IN
~:-        (SELECT tableparam FROM tge_ref_mapta WHERE numpac=p_numpac
~:-        )
~:-      ) t ,
~:-      user_tables b
~:-    WHERE a.numpac   =p_numpac
~:-    AND t.tableparam =a.TABLEGXP
~:-    AND b.table_name =a.TABLEGXP
~:-    AND a.element   IN ('B712','B714','B832','B834')
~:-    UNION ALL
~:-    --ce SELECT fournit la liste element/donneegxp des éléments Pac "*"
~:-    SELECT DISTINCT a.element,
~:-      a.DONNEEGXP
~:-    FROM tge_ref_mapdo a,
~:-      (
~:-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac     =p_numpac
~:-      AND ALLERRETOUR IN ('A','2','I')
~:-      UNION ALL
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac        ='*'
~:-      AND ALLERRETOUR    IN ('A','2','I')
~:-      AND tableparam NOT IN
~:-        (SELECT tableparam FROM tge_ref_mapta WHERE numpac=p_numpac
~:-        )
~:-      ) t ,
~:-      user_tables b
~:-    WHERE a.numpac     ='*'
~:-    AND t.tableparam   =a.TABLEGXP
~:-    AND b.table_name   =a.TABLEGXP
~:-    AND a.element     IN ('B712','B714','B832','B834')
~:-    AND a.element NOT IN
~:-      (SELECT element
~:-      FROM tge_ref_mapdo a,
~:-        (
~:-        --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
~:-        SELECT *
~:-        FROM tge_ref_mapta
~:-        WHERE numpac     =p_numpac
~:-        AND ALLERRETOUR IN ('A','2','I')
~:-        UNION ALL
~:-        SELECT *
~:-        FROM tge_ref_mapta
~:-        WHERE numpac        ='*'
~:-        AND ALLERRETOUR    IN ('A','2','I')
~:-        AND tableparam NOT IN
~:-          (SELECT tableparam FROM tge_ref_mapta WHERE numpac=p_numpac
~:-          )
~:-        ) t ,
~:-        user_tables b
~:-      WHERE a.numpac   =p_numpac
~:-      AND t.tableparam =a.TABLEGXP
~:-      AND b.table_name =a.TABLEGXP
~:-      )
~:-    UNION ALL
~:-    --ce SELECT fournit la liste 'DICO'||element/tableparam des dictionnaires des éléments personnalisés
~:-    SELECT DISTINCT 'DICO'
~:-      ||a.element,
~:-      a.TABLEGXP AS DONNEEGXP
~:-    FROM tge_ref_mapdo a,
~:-      (
~:-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac     =p_numpac
~:-      AND ALLERRETOUR IN ('A','2','I')
~:-      UNION ALL
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac        ='*'
~:-      AND ALLERRETOUR    IN ('A','2','I')
~:-      AND tableparam NOT IN
~:-        (SELECT tableparam FROM tge_ref_mapta WHERE numpac=p_numpac
~:-        )
~:-      ) t , 
~:-      user_tables b
~:-    WHERE a.numpac   =p_numpac
~:-    AND t.tableparam =a.TABLEGXP
~:-    AND b.table_name =a.TABLEGXP
~:-    AND a.element   IN ('B712','B714','B832','B834')
~:-    UNION ALL
~:-    --ce SELECT fournit la liste 'DICO'||element/tableparam des dictionnaires des éléments Pac "*"
~:-    SELECT DISTINCT 'DICO'
~:-      ||a.element,
~:-      a.TABLEGXP AS DONNEEGXP
~:-    FROM tge_ref_mapdo a,
~:-      (
~:-      --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac     =p_numpac
~:-      AND ALLERRETOUR IN ('A','2','I')
~:-      UNION ALL
~:-      SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac        ='*'
~:-      AND ALLERRETOUR    IN ('A','2','I')
~:-      AND tableparam NOT IN
~:-        (SELECT tableparam FROM tge_ref_mapta WHERE numpac=p_numpac
~:-        )
~:-      ) t ,
~:-      user_tables b
~:-    WHERE a.numpac     ='*'
~:-    AND t.tableparam   =a.TABLEGXP
~:-    AND b.table_name   =a.TABLEGXP
~:-    AND a.element     IN ('B712','B714','B832','B834')
~:-    AND a.element NOT IN
~:-      (SELECT element
~:-      FROM tge_ref_mapdo a,
~:-        (
~:-        --liste résolue "t" des tables MAPTA en Aller pour éviter les tables en Retour
~:-        SELECT *
~:-        FROM tge_ref_mapta
~:-        WHERE numpac     =p_numpac
~:-        AND ALLERRETOUR IN ('A','2','I')
~:-        UNION ALL
~:-        SELECT *
~:-        FROM tge_ref_mapta
~:-        WHERE numpac        ='*'
~:-        AND ALLERRETOUR    IN ('A','2','I')
~:-        AND tableparam NOT IN
~:-          (SELECT tableparam FROM tge_ref_mapta WHERE numpac=p_numpac
~:-          )
~:-        ) t ,
~:-        user_tables b
~:-      WHERE a.numpac   =p_numpac
~:-      AND t.tableparam =a.TABLEGXP
~:-      AND b.table_name =a.TABLEGXP
~:-      )
~:-    ) --fin de la liste des éléments et des dictionnaires empilés dans la même colonne
~:-    --la fonction PIVOT transforme la liste element/donneegxp en distribution horizontale. Les lignes DICOB714 et DICOB834 sont abandonnées, on suppose que c'est le même dico.
~:-    pivot (MAX(DONNEEGXP) AS DONNEE FOR element IN ('B712' AS MontantPret, 'B714' AS SoldePret, 'B832' AS MontantOpposition, 'B834' AS SoldeOpposition, 'DICOB712' AS DicoPret, 'DICOB832' AS DicoOpposition));
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id_trt , 'getSoldMontant ' ,p_id_trt||','||p_numpac , err_code||'-'||err_msg );
~:-  raise;
~:-END getSoldMontant;
~:-PROCEDURE insert_gap_trt
~:-(
~:-    p_id          IN NUMBER ,
~:-    p_numpac      IN TGE_REF_PAC.numpac%type,
~:-    p_periode     IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:-    p_type_retour IN VARCHAR2 
~:-)
~:-IS
~:-  PRAGMA AUTONOMOUS_TRANSACTION;
~:-  status      INT;
~:-  v_dtdebMois VARCHAR2(8);
~:-  v_finMois   VARCHAR2(8);
~:-  v_periode TGE_REF_PAC.PERIODEENCOURS%TYPE;
~:-  v_req CLOB;
~:-BEGIN
~:-  --get date debut et fin du mois
~:-  FSED_AVANCEMENT(p_id,'insert_gap_trt Debut p_id='||p_id||';p_numpac='||p_numpac||';p_periode='||NVL(p_periode,v_periode)||';p_type_retour='||p_type_retour);
~:-  SELECT periodeencours INTO v_periode FROM tge_ref_pac WHERE numpac =p_numpac;
~:-  BEGIN
~:-    SELECT DATE_DEBUT_MOIS,
~:-      DATE_FIN_MOIS
~:-    INTO v_dtdebMois,
~:-      v_finMois
~:-    FROM TGE_REF_PER
~:-    WHERE numpac       = p_numpac
~:-    AND periodeencours = NVL(p_periode,v_periode);
~:-  EXCEPTION
~:-  WHEN NO_data_Found THEN
~:-    v_dtdebMois := v_periode ||'01';
~:-    select to_char(last_day(to_date(to_char(v_periode),'yyyymm')),'YYYYMMDD') into v_finMois   from dual;
~:-  WHEN OTHERS THEN
~:-    v_dtdebMois :=null;
~:-    v_finMois :=null;
~:-  END;
~:-  --La création dans GAP_TRT est donc conditionnée : on regarde s’il existe déjà dans GAP_TRT
~:-  --une ligne pour N° d’échange, date de paie et Numpac (infos de la carte 00).
~:-  v_req := 'MERGE into GAP_TRT USING (SELECT 1 FROM dual) ON ( ID_TRT= :p_id )';--AND NUMPAC = :p_numpac AND NUMERO_ECHANGE =''0000'' AND PERIODE_PAIE = :p_periode
~:-  v_req := v_req ||' WHEN NOT MATCHED THEN INSERT (ID_TRT,NUMPAC,PERIODE_PAIE,NUMERO_ECHANGE,MODELE,NATURE,DATE_DEBUT_PAIE,DATE_FIN_PAIE,WORKFLOW_ID,DATE_PREVUE_TRT,DATE_PLANIF_TRT,DATE_DEBUT_TRT,INFO) ';
~:-  v_req := v_req ||' values (:p_id,:p_numpac,:p_periode,''0000'',''ALP'',:v_dtdebMois,:v_dtdebMois,:v_finMois,''TGEPAY'||p_numpac||'PACGXP'||NVL(p_periode,v_periode)||'0000'',sysdate,sysdate,sysdate,:p_type_retour)' ;
~:-  EXECUTE IMMEDIATE v_req USING p_id,
~:-  p_id,
~:-  p_numpac,
~:-  NVL(p_periode,v_periode),
~:-  p_type_retour,
~:-  v_dtdebMois,
~:-  v_finMois,
~:-  p_type_retour;
~:-  COMMIT;
~:-  FSED_AVANCEMENT(p_id,'insert_gap_trt Fin v_req='||v_req);
~:-END insert_gap_trt;
~:-PROCEDURE insert_gap_trt_suivi(
~:-    p_id              IN NUMBER ,
~:-    p_statut          IN TGE_REF_PAC.numpac%type,
~:-    p_code_retour_zpp IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:-    p_login           IN VARCHAR2,
~:-    p_type_retour     IN VARCHAR2)
~:-IS
~:-  PRAGMA AUTONOMOUS_TRANSACTION;
~:-  status INT;
~:-  v_req  VARCHAR2(3000);
~:-BEGIN
~:-  IF p_type_retour IN ('RR','RC','RN','CL') THEN
~:-    FSED_AVANCEMENT(p_id,'insert_gap_trt_suivi Debut p_id='||p_id||';p_statut='||p_statut||';p_code_retour_zpp='||p_code_retour_zpp||';p_login='||p_login);
~:-    v_req := 'INSERT INTO gap_trt_suivi(ID_TRT,DATE_EVT,STATUT,CODE_RETOUR_ZPP,LOGIN) VALUES (:p_id,SYSTIMESTAMP,:p_statut ,:p_code_retour_zpp,:p_login)';
~:-    FSED_AVANCEMENT(p_id,'insert_gap_trt_suivi ='||p_id||';p_statut='||p_statut||';p_code_retour_zpp='||p_code_retour_zpp||';p_login='||p_login||';v_req='||v_req);
~:-    EXECUTE IMMEDIATE v_req USING p_id,
~:-    p_statut,
~:-    p_code_retour_zpp,
~:-    p_login;
~:-    COMMIT;
~:-    FSED_AVANCEMENT(p_id,'insert_gap_trt_suivi Fin');
~:-  END IF;
~:-END insert_gap_trt_suivi;
~:-/**********************************************************************
~:-  Funct : preparation_FSED_unit 
~:-  DESC  : 
~:-***********************************************************************/
~:-PROCEDURE preparation_FSED_unit(
~:-    p_nomTable  IN VARCHAR2,
~:-    p_alias     IN VARCHAR2,
~:-    p_TABLETYPE IN VARCHAR2,
~:-    p_id_trt    IN NUMBER,
~:-    p_numpac    IN VARCHAR2,
~:-    p_periode   IN VARCHAR2,
~:-    p_ALLERRETOUR IN VARCHAR2,
~:-     p_nb_mois_paie_init IN number)
~:-AS
~:-  --curseur sur MAPDO
~:-  CURSOR cur_mapdo IS
~:-    SELECT a.*,
~:-      b.*,
~:-      c.type AS typeZADIG,
~:-      c.longueur,
~:-      c.MASQUE
~:-    FROM
~:-      (SELECT *
~:-      FROM tge_ref_mapdo
~:-      WHERE numpac     =p_numpac
~:-      AND (tablegxp    =p_alias
~:-      AND element NOT IN ('A301','A302','A962')
~:-        --Pour ces 3 éléments on impose un alias spécial, ils seront traités indépendamment.
~:-      OR p_alias   ='VUE-A301-A302-A962'
~:-      AND element IN ('A301','A302','A962'))
~:-    UNION ALL
~:-    SELECT *
~:-    FROM tge_ref_mapdo
~:-    WHERE numpac     ='*'
~:-    AND (tablegxp    =p_alias
~:-    AND element NOT IN ('A301','A302','A962')
~:-      --Pour ces 3 éléments on impose un alias spécial, ils seront traités indépendamment.
~:-    OR p_alias       ='VUE-A301-A302-A962'
~:-    AND element     IN ('A301','A302','A962'))
~:-    AND element NOT IN
~:-      (SELECT element
~:-      FROM tge_ref_mapdo
~:-      WHERE numpac=p_numpac
~:-      )
~:-      ) a,
~:-      (SELECT column_name,
~:-        data_type
~:-      FROM user_tab_columns
~:-      WHERE table_name = p_nomTable
~:-      ) b,
~:-      (SELECT *
~:-      FROM TGE_REF_DICOZ
~:-      WHERE numpac=p_numpac
~:-      ) C
~:-    WHERE donneegxp  = column_name
~:-    AND c.element    =a.element
~:-    AND (donnfiltre IS NULL
~:-    OR donnfiltre   IN
~:-      (SELECT c.column_name
~:-      FROM user_tab_columns c
~:-      WHERE c.table_name = p_nomTable
~:-      ))
~:-    AND occurence NOT LIKE '%!%'
~:-    ORDER BY a.element,a.occurence;
~:-
~:-    lig_mapdo      cur_mapdo%rowtype;
~:-    requete        CLOB;
~:-    requetePhoto   CLOB;
~:-    requeteTDIF    CLOB;
~:-    clselect       CLOB;
~:-    numcol         NUMBER:=0;
~:-    i              NUMBER:=1;
~:-    j              NUMBER:=1;
~:-    numretour      NUMBER:=1;
~:-    tab1           TAB_pour_comp;
~:-    tab2           TAB_pour_comp;
~:-    tabLib         TAB_pour_lib;
~:-    tabRetour      TAB_pour_retour;
~:-    tabNotRetour   TAB_pour_retour;
~:-    donnee         VARCHAR(1000);
~:-    tabCles        TAB_cle;
~:-    cles           VARCHAR2(1000);
~:-    v_typeTable    VARCHAR2(1);
~:-    clwhere        VARCHAR(3000);
~:-    clfrom         VARCHAR(3000);
~:-    clwhereDate    VARCHAR(500);
~:-    clwherePrOp    VARCHAR(500);
~:-    coldtfin       VARCHAR(255);
~:-    histoARenvoyer BOOLEAN:=false;
~:-    hasDtfin       NUMBER;
~:-    hasDtfinSit    NUMBER;
~:-    reqLength      NUMBER;
~:-    photoLength    NUMBER;
~:-    curclemati     VARCHAR2(20);
~:-    curclematj     VARCHAR2(20);
~:-    preclemati     VARCHAR2(20);
~:-    preclematj     VARCHAR2(20);
~:-    tab1cle        VARCHAR2(1000);
~:-    tab2cle        VARCHAR2(1000);
~:-    w_where_dic    CLOB;
~:-    w_where_dic1   CLOB;
~:-    w_arg1         CLOB;
~:-    w_arg2         CLOB;
~:-    isDICOJointure Number;
~:-    w_mpe          varchar2(1);
~:-  BEGIN
~:-    --vérifier le type principal de la table m=MATRIC p=PACMAT z=PAIEZAD
~:-    v_typeTable:=getTypeTable(p_nomTable);
~:-    --lire le type de MPE (N=rien,M=MPE,C=CSCP)
~:-    select mpe into w_mpe from tge_ref_pac where numpac=p_numpac ;
~:-    --préparation des champs relatifs à la clé et à la date d'effet
~:-    SELECT a.column_name,
~:-      b.data_type bulk collect
~:-    INTO tabCles
~:-    FROM user_cons_columns a,
~:-      USER_TAB_COLUMNS b
~:-    WHERE a.table_name   =p_nomTable
~:-    AND a.table_name     =b.table_name
~:-    AND a.column_name    =b.column_name
~:-    AND constraint_name IN
~:-      (SELECT c.constraint_name
~:-      FROM user_constraints c
~:-      WHERE c.table_name =a.table_name
~:-      AND CONSTRAINT_TYPE='P'
~:-      );
~:-    --colonne dteffet du résultat qui se déverse dans DIF_FSED et participe aux jointures D_A_C et D_A_C_H
~:- if w_mpe='C' THEN
~:- coldteffet:='d.DSDSC';
~:- ELSE
~:- coldteffet:='d.DSDCN';
~:-END IF;
~:-    --coldatecle (colonne date dans la clé) sert à fabriquer le filtre qui élimine le futur
~:-    coldatecle:='';
~:-    --colonne dtfin du résultat qui participe aux jointures D_A_C et D_A_C_H
~:-    coldtfin :='to_date(''20991231'',''yyyymmdd'') as dtfin ';
~:-    --début du champ "cle" selon le type du dico
~:-    IF v_typeTable   ='m' THEN
~:-      cles          :='b.pacmat||''#''||d.paiezad';
~:-    ELSIF v_typeTable='p' THEN
~:-      cles          :='a.pacmat||''#''||d.paiezad';
~:-    ELSE
~:-      cles :='NVL(a.pacmat,a.paiezad)||''#''||a.paiezad';
~:-    END IF;
~:-    --reste du champ "cle"
~:-    FOR i IN tabCles.first..tabCles.last
~:-    LOOP
~:-      IF tabCles(i).column_name NOT IN ('NUMPAC','MATRIC','PACMAT','PAIEZAD','NUMCNT') THEN
~:-        cles                   :=cles||'||''#''||';
~:-        IF tabCles(i).data_type ='DATE' THEN
~:-          --une date dans la clé servira à filtrer le futur
~:-          coldatecle               :=tabCles(i).column_name;
~:-          cles                     :=cles||'to_char(a.'||coldatecle||',''yyyymmdd'')';
~:-          IF tabCles(i).column_name = 'DATE_EFF' THEN
~:-            coldteffet             :='a.DATE_EFF';
~:-          END IF;
~:-        ELSE
~:-          cles :=cles||'a.'||tabCles(i).column_name;
~:-        END IF;
~:-      END IF;
~:-    END LOOP;
~:-    --champ "cle" cas particulier de D_A_C
~:-    IF p_nomTable ='DIC_ADM_CONTRAT' THEN
~:-      coldatecle :='DSDCN';
~:-     if w_mpe='C' THEN
~:-     coldteffet :='d.DSDSC';
~:-      ELSE
~:-      coldteffet :='a.DSDCN';
~:-    END IF;
~:-      cles       :=cles||'||''#''||to_char(a.DSDCN,''yyyymmdd'')';
~:-    END IF;
~:-    --champ "cle" cas particulier de D_A_C_S
~:-    IF p_nomTable ='DIC_ADM_CONTRAT_SITU' THEN
~:-      coldatecle :='DSDSC';
~:-      coldteffet :='a.DSDSC';
~:-      cles       :=cles||'||''#''||to_char(a.DSDSC,''yyyymmdd'')';
~:-    END IF;
~:-    --préparation du filtre sur la date d'effet et la date de fin si elles existent
~:-    SELECT COUNT(*)
~:-    INTO   hasDtfinSit
~:-    FROM   user_tab_columns
~:-    WHERE  table_name =p_nomTable
~:-    AND     column_name  ='DATE_SORTIE_SIT_BO';
~:-     --préparation du filtre sur la date d'effet et la date de fin si elles existent
~:-    SELECT COUNT(*)
~:-    INTO   hasDtfin
~:-    FROM   user_tab_columns
~:-    WHERE  table_name =p_nomTable
~:-    AND    column_name  ='DATE_FIN';
~:-    clwhereDate     :='';
~:-    --si on a une date dans la clé on élimine le futur avec (date de naissance d'enfant, d'adhésion mutuelle, d'effet HISTO...)
~:-    IF coldatecle IS NOT NULL THEN
~:-      clwhereDate :=' and nvl(a.'||coldatecle||',to_date(''19000101'',''yyyymmdd''))<=last_day(to_date('''||p_periode||''',''yyyymm''))';
~:-      IF p_TABLETYPE='H2' AND p_nomTable ='DIC_PERIODES_RECUEIL_HIS' THEN
~:-      clwhereDate :=clwhereDate||' and to_char(a.'||coldatecle||',''yyyymm'')='''||p_periode||'''';
~:-      END IF;
~:-      IF  p_TABLETYPE='DERNIERE' THEN
~:-         clwhereDate :=clwhereDate||' and nvl(a.'||coldatecle||',to_date(''19000101'',''yyyymmdd''))<=d.date_sortie_sit_bo';
~:-      END IF;      
~:-      IF p_alias   ='VUE-A301-A302-A962' THEN
~:-        --cas particulier pour lire D_A_C_H jusqu'au 1er jour de M+1 donc on ajoute 1 jour à la limite
~:-        clwhereDate :=clwhereDate||'+1';
~:-      END IF;
~:-    END IF;
~:-    --si on a une date de fin dans la table on elle alimente la colonne dtfin pour exclure les vieux historiques inutiles (finis avant 1er jour de M-1)
~:-    IF hasDtfinSit >0 THEN
~:-      --date fin spéciale calculée par la GAP une seule fois à 2099 par MATRIC
~:-      coldtfin     :='a.DATE_SORTIE_SIT_BO as dtfin';
~:-    ELSIF p_nomtable in ('DIC_ADM_CONTRAT','DIC_ADM_CONTRAT_SITU') THEN
~:-      --pour D_A_C et D_A_C_S on va chercher DATE_SORTIE_SIT_BO sur D_A_C_H
~:-      coldtfin    :='d.DATE_SORTIE_SIT_BO as dtfin';
~:-    ELSIF hasDtfin >0 THEN
~:-      --date fin d'HISTO classique
~:-      coldtfin :='a.DATE_FIN as dtfin';
~:-    END IF;
~:-    --préparation du filtre sur prêt et opposition car solde=0 filtre, mais montant=0 force l'envoi.
~:-    IF p_alias     =DicoPret THEN
~:-      clwherePrOp := ' and (NVL(a.'||soldePret ||',0) !=0 or NVL(a.'||MontantPret ||',0) =0) ';
~:-    ELSIF p_alias  =DicoOpposition THEN
~:-      clwherePrOp := ' and (NVL(a.'||soldeOpposition||',0) !=0 or NVL(a.'||MontantOpposition||',0) =0) ';
~:-    ELSE
~:-      clwherePrOp:='';
~:-    END IF;
~:-    --création des requêtes sur DICO et table PHOTO
~:-    OPEN cur_mapdo;
~:-    LOOP
~:-      FETCH cur_mapdo INTO lig_mapdo;
~:-      IF (numcol =0 OR numcol >=30) THEN
~:-        FSED_AVANCEMENT(p_id_trt,'Creation requetes '||p_nomTable);
~:-        clselect :='select ';
~:-        tablib.delete;
~:-        IF v_typeTable    ='m' THEN
~:-        	IF coldatecle is not null THEN
~:-        		clselect       :=clselect||cles||' as CLE,b.numpac,b.pacmat,d.paiezad,greatest(a.'||coldatecle||','||coldteffet||') as dteffet,'||coldtfin;
~:-        	ELSE
~:-          		clselect       :=clselect||cles||' as CLE,b.numpac,b.pacmat,d.paiezad,'||coldteffet||' as dteffet,'||coldtfin;
~:-          	END IF;
~:-        ELSIF v_typeTable ='p' THEN
~:-          clselect       :=clselect||cles||' as CLE,a.numpac,a.pacmat,d.paiezad,'||coldteffet||' as dteffet,'||coldtfin;
~:-        ELSE
~:-          --les dicos 'z' (PAIEZAD) peuvent avoir une colonne PACMAT mal remplie
~:-          clselect :=clselect||cles||' as CLE,a.numpac,NVL(a.pacmat,a.paiezad) as pacmat,a.paiezad,'||coldteffet||' as dteffet,'||coldtfin;
~:-        END IF;
~:-        IF p_TABLETYPE     ='PREMIERE' OR p_TABLETYPE='DERNIERE' OR p_TABLETYPE='OCCURS' THEN
~:-          IF v_typetable   ='m' THEN
~:-            clselect      :=clselect||','||' row_number() over (partition by d.paiezad order by '||cles;
~:-          ELSIF v_typetable='p' THEN
~:-            clselect      :=clselect||','||' row_number() over (partition by a.paiezad order by '||cles;
~:-          ELSE
~:-            clselect :=clselect||','||' row_number() over (partition by a.paiezad order by '||cles;
~:-          END IF;
~:-          IF p_TABLETYPE='DERNIERE' THEN
~:-            clselect   :=clselect||' desc';
~:-          END IF;
~:-          clselect :=clselect||') as rank ';
~:-        ELSE
~:-          clselect :=clselect||',null as rank ';
~:-        END IF;
~:-        numcol :=0;
~:-      END IF;
~:-      IF cur_mapdo%NOTFOUND THEN
~:-        numcol:=numcol+1;
~:-        FOR k        IN numcol..30
~:-        LOOP
~:-          clselect :=clselect||','''' as C'||k ;
~:-        END LOOP;
~:-      ELSE
~:-        tablib(numcol).LIB                        :=lig_mapdo.ELEMENT;
~:-        IF lig_mapdo.TRTPARTICULIER               IS NULL THEN
~:-          IF lig_mapdo.data_type                   ='DATE' THEN
~:-            tablib(numcol).TYPE_DONNEE            :='D';
~:-          elsif instr(lig_mapdo.data_type,'NUMBER')>0 THEN
~:-            tablib(numcol).TYPE_DONNEE            :='N';
~:-          ELSE
~:-            tablib(numcol).TYPE_DONNEE:='A';
~:-          END IF;
~:-        ELSE
~:-          -- Transcription du format dans TGE_REF_DICOZ
~:-          IF lig_mapdo.typeZADIG       ='P' THEN
~:-            tablib(numcol).TYPE_DONNEE:='N';
~:-          ELSIF lig_mapdo.typeZADIG    ='N' AND lig_mapdo.MASQUE IN (1,2,3,4,5,6,7)THEN
~:-            tablib(numcol).TYPE_DONNEE:='D';
~:-          ELSIF lig_mapdo.typeZADIG    ='N' AND lig_mapdo.MASQUE NOT IN (1,2,3,4,5,6,7)THEN
~:-            tablib(numcol).TYPE_DONNEE:='N';
~:-          ELSIF lig_mapdo.typeZADIG    ='A' THEN
~:-            tablib(numcol).TYPE_DONNEE:='A';
~:-          ELSE
~:-            tablib(numcol).TYPE_DONNEE:=lig_mapdo.typeZADIG;
~:-          END IF;
~:-        END IF;
~:-        tablib(numcol).OCC                :=lig_mapdo.OCCURENCE;
~:-        clselect                          :=clselect||',';
~:-        donnee :=getClauseSelect(p_numpac,
~:-                                 'a',
~:-                                 lig_mapdo.DONNEEGXP,
~:-                                 lig_mapdo.DONNFILTRE,
~:-                                 lig_mapdo.OPERFILTRE,
~:-                                 lig_mapdo.VALFILTRE,
~:-                                 lig_mapdo.TRTPARTICULIER,
~:-                                 lig_mapdo.ENVOI_SYSTEMATIQUE,
~:-                                 lig_mapdo.data_type,
~:-                                 lig_mapdo.typeZADIG,
~:-                                 lig_mapdo.MASQUE,
~:-                                 tablib(numcol).OCC,
~:-                                 TRUE);
~:-        numcol :=numcol+1;
~:-        clselect :=clselect||donnee||' as C'||numcol;
~:-        FSED_AVANCEMENT(p_id_trt,'numcol='||TO_CHAR(numcol)||' mapdo='||lig_mapdo.NUMPAC||'/'||lig_mapdo.ELEMENT||'/'||lig_mapdo.OCCURENCE||'/'||lig_mapdo.DONNEEGXP||'/'||lig_mapdo.TABLEGXP||'/'||lig_mapdo.DONNFILTRE||'/'||lig_mapdo.OPERFILTRE||'/'||lig_mapdo.VALFILTRE||'/'||lig_mapdo.TRTPARTICULIER||'/'||lig_mapdo.ENVOI_SYSTEMATIQUE||'/'||lig_mapdo.FORCABLE_ECRAN_GENERE||' data_type='||lig_mapdo.data_type||' zadig='||lig_mapdo.typeZadig||'/'||TO_CHAR(lig_mapdo.longueur)||'/'||lig_mapdo.masque);
~:-      END IF;
~:-      --toutes les 30 colonnes on lance les requêtes et on effectue les comparaisons
~:-      IF (numcol =30 OR cur_mapdo%NOTFOUND) THEN
~:-        --clause from commune avec ses jointures
~:-        if w_mpe='C' THEN 
~:-        clfrom       :='(SELECT * FROM ( WITH TABLE_DATES_EFF (PACMAT, PAIEZAD, DATE_EFF) AS ( SELECT DACH2.PACMAT, DACH2.PAIEZAD , MAX(DATE_EFF) ';
~:-        ELSE
~:-        clfrom       :='(SELECT * FROM ( WITH TABLE_DATES_EFF (PACMAT, NUMCNT, DATE_EFF) AS ( SELECT DISTINCT DACH2.PACMAT, DACH2.NUMCNT , MAX(DATE_EFF) OVER (PARTITION BY L.NUMPAC, L.PACMAT, DACH2.NUMCNT) ';
~:-        END IF;
~:-        clfrom       :=clfrom||'FROM GAP_TRT_LISTE_MAT L, DIC_ADM_CONTRAT_HISTO DACH2 ';
~:-        clfrom       :=clfrom||'WHERE L.ID_TRT = '||p_id_trt||' AND L.NUMPAC = '''||p_numpac||''' AND DACH2.NUMPAC = '''||p_numpac||''' ';
~:-        if w_mpe='C' THEN 
~:-        clfrom       :=clfrom||'AND DACH2.PACMAT = L.PACMAT AND DACH2.DATE_EFF <=LAST_DAY(TO_DATE('''||p_periode||''',''yyyymm'')) AND DACH2.DATE_SORTIE_SIT_BO >= ADD_MONTHS((TO_DATE('''||p_periode||''',''yyyymm'')),-'||p_nb_mois_paie_init||') GROUP BY DACH2.NUMPAC, DACH2.PACMAT, DACH2.PAIEZAD ) ';
~:-        ELSE
~:-        clfrom       :=clfrom||'AND DACH2.PACMAT = L.PACMAT AND DACH2.DATE_EFF <=LAST_DAY(TO_DATE('''||p_periode||''',''yyyymm'')) AND DACH2.DATE_SORTIE_SIT_BO >= ADD_MONTHS((TO_DATE('''||p_periode||''',''yyyymm'')),-'||p_nb_mois_paie_init||') ) ';
~:-        END IF;
~:-        if w_mpe='C' THEN
~:-        clfrom       :=clfrom||'SELECT DACS.NUMPAC, DACS.MATRIC, DACS.PACMAT, MAX(DACS.CODE_CHRONO) CODE_CHRONO, DACS.PAIEZAD, MIN(DACS.DSDSC) DSDSC,MIN(C.DSDCN) DSDCN , MAX(DACH.DATE_SORTIE_SIT_BO) DATE_SORTIE_SIT_BO ';
~:-        ELSE
~:-        clfrom       :=clfrom||'SELECT DACS.NUMPAC, DACS.MATRIC, DACS.PACMAT, MAX(DACS.CODE_CHRONO) CODE_CHRONO, DACS.PAIEZAD, MIN(C.DSDCN) DSDCN, MAX(DACH.DATE_SORTIE_SIT_BO) DATE_SORTIE_SIT_BO ';
~:-        END IF;
~:-        clfrom       :=clfrom||'FROM TABLE_DATES_EFF T, DIC_ADM_CONTRAT C, DIC_ADM_CONTRAT_SITU DACS, DIC_ADM_CONTRAT_HISTO DACH ';
~:-        clfrom       :=clfrom||'WHERE C.NUMPAC = '''||p_numpac||''' AND DACS.NUMPAC = '''||p_numpac||''' AND DACH.NUMPAC = '''||p_numpac||''' ';
~:-        if w_mpe='C' THEN
~:-        clfrom       :=clfrom||'AND C.PACMAT = T.PACMAT AND DACH.PACMAT = T.PACMAT AND DACH.PAIEZAD = T.PAIEZAD AND DACH.DATE_EFF = T.DATE_EFF AND C.NUMCNT = DACS.NUMCNT AND DACS.PACMAT = T.PACMAT AND DACS.PAIEZAD = T.PAIEZAD AND DACS.PAIEZAD = DACH.PAIEZAD ';
~:-        ELSE
~:-        clfrom       :=clfrom||'AND C.PACMAT = T.PACMAT AND C.NUMCNT = T.NUMCNT AND DACH.PACMAT = T.PACMAT AND DACH.NUMCNT = T.NUMCNT AND DACH.DATE_EFF = T.DATE_EFF AND DACS.PACMAT = T.PACMAT AND DACS.NUMCNT = T.NUMCNT AND DACS.PAIEZAD = DACH.PAIEZAD ';
~:-        END IF;
~:-        if w_mpe='C' and p_nomTable ='DIC_ADM_CONTRAT' THEN
~:-         --jointure forcée entre DAC et DACS pour les situations contractuelles
~:-          clfrom       :=clfrom||'AND C.DSDCN <=LAST_DAY(TO_DATE('''||p_periode||''',''yyyymm'')) AND NVL(dach.DRPAI2, ''B'') <> ''B'' AND C.NATCOL IN (''SAL'',''STA'') GROUP BY DACS.NUMPAC, DACS.MATRIC, DACS.PACMAT, DACS.PAIEZAD )) d WHERE d.dsdsc between a.dsdcn AND nvl(a.dsfcn,to_date(''20991231'',''yyyymmdd'')) AND ';
~:-        ELSE
~:-			--SEUNA2-17301 Cas des dictionnaires historisés.
~:-			IF coldteffet='a.DATE_EFF' THEN
~:-			   clfrom       :=clfrom||'AND C.DSDCN <=LAST_DAY(TO_DATE('''||p_periode||''',''yyyymm'')) AND NVL(dach.DRPAI2, ''B'') <> ''B'' AND C.NATCOL IN (''SAL'',''STA'') GROUP BY DACS.NUMPAC, DACS.MATRIC, DACS.PACMAT, DACS.PAIEZAD )) d WHERE  a.DATE_EFF < d.date_sortie_sit_bo and 1=1 and nvl(a.DATE_FIN,to_date(''20991231'',''yyyymmdd'')) >= d.dsdcn  and ';    
~:-			ELSE
~:-			   clfrom       :=clfrom||'AND C.DSDCN <=LAST_DAY(TO_DATE('''||p_periode||''',''yyyymm'')) AND NVL(dach.DRPAI2, ''B'') <> ''B'' AND C.NATCOL IN (''SAL'',''STA'') GROUP BY DACS.NUMPAC, DACS.MATRIC, DACS.PACMAT, DACS.PAIEZAD )) d WHERE  '||coldteffet||' between d.dsdcn and d.date_sortie_sit_bo AND ';
~:-			END IF;          
~:-        END IF;
~:-        IF v_typeTable='m' THEN
~:-          --dictionnaire à base de MATRIC (conjoint, enfants, perso...)
~:-          clwhere       :='a.matric=d.matric '||clwhereDate;
~:-          requete       :=REPLACE(REPLACE(REPLACE(clselect,'b.','d.'),'@###',''),'###@','')||' from '||p_nomTable||' a, '||clfrom||clwhere||' order by cle';          
~:-          if w_mpe='C' THEN 
~:-          requetePhoto  :=REGEXP_REPLACE(REPLACE(clselect,'b.','a.'),'(@###)[^###@]+(###@)','''_TO_SEND_''')||' from PHOTO_'||p_nomTable||' a, '||REPLACE(REPLACE(REPLACE(clfrom,' DIC_ADM_CONTRAT C',' PHOTO_DIC_ADM_CONTRAT C'),'DIC_ADM_CONTRAT_SITU DACS','PHOTO_DIC_ADM_CONTRAT_SITU DACS'),'DIC_ADM_CONTRAT_HISTO DACH','PHOTO_DIC_ADM_CONTRAT_HISTO DACH')||'a.numpac='''||p_numpac||''' and a.pacmat=d.pacmat and '||clwhere||' order by cle';
~:-          else
~:-          requetePhoto  :=REGEXP_REPLACE(REPLACE(clselect,'b.','a.'),'(@###)[^###@]+(###@)','''_TO_SEND_''')||' from PHOTO_'||p_nomTable||' a, '||REPLACE(clfrom,' DIC_ADM_CONTRAT C',' PHOTO_DIC_ADM_CONTRAT C')||'a.numpac='''||p_numpac||''' and a.pacmat=d.pacmat and '||clwhere||' order by cle';                   
~:-          end if;
~:-
~:-        ELSIF v_typeTable='p' THEN
~:-          --dictionnaire à base de PACMAT (D_A_C, Oppositions à partir de la 5.03...)
~:-          clwhere      :='a.numpac='''||p_numpac||''' and a.pacmat=d.pacmat '||clwhereDate||clwherePrOp;
~:-          requete      :=REPLACE(REPLACE(clselect,'@###',''),'###@','')||' from '||p_nomTable||' a, '||clfrom||clwhere||' order by cle';
~:-          if w_mpe='C' THEN 
~:-          requetePhoto :=REGEXP_REPLACE(clselect,'(@###)[^###@]+(###@)','''_TO_SEND_''')||' from PHOTO_'||p_nomTable||' a, '||REPLACE(REPLACE(REPLACE(clfrom,' DIC_ADM_CONTRAT C',' PHOTO_DIC_ADM_CONTRAT C'),'DIC_ADM_CONTRAT_SITU DACS','PHOTO_DIC_ADM_CONTRAT_SITU DACS'),'DIC_ADM_CONTRAT_HISTO DACH','PHOTO_DIC_ADM_CONTRAT_HISTO DACH')||'d.numpac='''||p_numpac||''' and '||clwhere||' order by cle';
~:-          else
~:-          requetePhoto :=REGEXP_REPLACE(clselect,'(@###)[^###@]+(###@)','''_TO_SEND_''')||' from PHOTO_'||p_nomTable||' a, '||REPLACE(clfrom,' DIC_ADM_CONTRAT C',' PHOTO_DIC_ADM_CONTRAT C')||'d.numpac='''||p_numpac||''' and '||clwhere||' order by cle';
~:-          end if;
~:-        ELSE
~:-          --dictionnaire à base de PAIEZAD (D_A_C_H, imputations permanentes par exemple)
~:-          clwhere      :='a.numpac='''||p_numpac||''' and a.pacmat=d.pacmat and a.paiezad=d.paiezad '||clwhereDate||clwherePrOp;
~:-          requete      :=REPLACE(REPLACE(clselect,'@###',''),'###@','')||' from '||p_nomTable||' a, '||clfrom||clwhere||' order by cle';
~:-          if w_mpe='C' THEN 
~:-          requetePhoto :=REGEXP_REPLACE(clselect,'(@###)[^###@]+(###@)','''_TO_SEND_''')||' from PHOTO_'||p_nomTable||' a, '||REPLACE(REPLACE(REPLACE(clfrom,' DIC_ADM_CONTRAT C',' PHOTO_DIC_ADM_CONTRAT C'),'DIC_ADM_CONTRAT_SITU DACS','PHOTO_DIC_ADM_CONTRAT_SITU DACS'),'DIC_ADM_CONTRAT_HISTO DACH','PHOTO_DIC_ADM_CONTRAT_HISTO DACH')||'d.numpac='''||p_numpac||''' and '||clwhere||' order by cle';          
~:-          else
~:-          requetePhoto :=REGEXP_REPLACE(clselect,'(@###)[^###@]+(###@)','''_TO_SEND_''')||' from PHOTO_'||p_nomTable||' a, '||REPLACE(clfrom,' DIC_ADM_CONTRAT C',' PHOTO_DIC_ADM_CONTRAT C')||'d.numpac='''||p_numpac||''' and '||clwhere||' order by cle';
~:-          end if;
~:-        END IF;
~:-        requetePhoto :=REPLACE (requetePhoto,'to_char(''_TO_SEND_'',''yyyymmddHH24MISS'')','to_char(''_TO_SEND_'')');
~:-        --recup clause where
~:-        select instr(requete,'$DICOUPHOTO_JOINTURE') into isDICOJointure from dual;
~:-        IF isDICOJointure != 0 THEN
~:-        w_where_dic1 :=  REGEXP_SUBSTR(requete,'\(.*\)');
~:-        w_where_dic:= REPLACE(REGEXP_SUBSTR(requete,'\$DICOUPHOTO_JOINTURE[^\)]*'),'$DICOUPHOTO_JOINTURE(','');
~:-        --recup arg 1:
~:-        w_arg1 := substr(w_where_dic,1,instr(w_where_dic,',',-1)-1);
~:-        --recup arg 2 :
~:-        w_arg2 := substr(w_where_dic,instr(w_where_dic,',',-1)+1,length(w_where_dic)-instr(w_where_dic,',',-1));
~:-        requete :=REPLACE (REPLACE (requete,w_where_dic1,w_arg1),'$DICOUPHOTO_JOINTURE','');
~:-        requetePhoto :=REPLACE (REPLACE (requetePhoto,w_where_dic1,w_arg2),'$DICOUPHOTO_JOINTURE','');
~:-        END IF;
~:-        requete :=REPLACE (requete,'$DICOUPHOTO',p_nomTable);
~:-        requetePhoto :=REPLACE (requetePhoto, '$DICOUPHOTO','PHOTO_'||p_nomTable);
~:-        
~:-        IF tablib.exists(0) THEN
~:-          IF p_TABLETYPE ='PREMIERE' OR p_TABLETYPE='DERNIERE' THEN
~:-            requete     :='select * from ('||requete||') where rank=1';
~:-            requetePhoto:='select * from ('||requetePhoto||') where rank=1';
~:-          END IF;
~:-          tab1.delete;
~:-          tab2.delete;
~:-          EXECUTE immediate 'select length(:req) from dual' INTO reqLength USING requete ;
~:-          EXECUTE immediate 'select length(:req) from dual' INTO photoLength USING requetePhoto ;
~:-          FSED_AVANCEMENT(p_id_trt,'Execution requete '||p_alias);
~:-          FSED_AVANCEMENT(p_id_trt,SUBSTR(requete,1,4000));
~:-          IF reqLength IS NOT NULL AND reqLength>4000 THEN
~:-            FSED_AVANCEMENT(p_id_trt,SUBSTR(requete,4001,4000));
~:-            IF reqLength IS NOT NULL AND reqLength>8000 THEN
~:-              FSED_AVANCEMENT(p_id_trt,SUBSTR(requete,8001,4000));
~:-            END IF;
~:-          END IF;
~:-          EXECUTE immediate requete bulk collect INTO tab1 ;
~:-          FSED_AVANCEMENT(p_id_trt,'Fin execution requete DICO');
~:-
~:-          IF p_ALLERRETOUR != 'I' THEN
~:-            FSED_AVANCEMENT(p_id_trt,'Execution requetePhoto '||p_alias);
~:-            FSED_AVANCEMENT(p_id_trt,SUBSTR(requetePhoto,1,4000));
~:-            IF photoLength IS NOT NULL AND photoLength>4000 THEN
~:-              FSED_AVANCEMENT(p_id_trt,SUBSTR(requetePhoto,4001,4000));
~:-              IF photoLength IS NOT NULL AND photoLength>8000 THEN
~:-                FSED_AVANCEMENT(p_id_trt,SUBSTR(requetePhoto,8001,4000));
~:-              END IF;
~:-            END IF;
~:-            EXECUTE immediate requetePhoto bulk collect INTO tab2;
~:-            FSED_AVANCEMENT(p_id_trt,'Fin execution requete PHOTO ');
~:-          END IF;
~:-          FSED_AVANCEMENT(p_id_trt,'Debut traitement des differences lignes DICO='||TO_CHAR(NVL(tab1.last,0))||' lignes PHOTO='||TO_CHAR(NVL(tab2.last,0)));
~:-          numretour:=1;
~:-          tabRetour.delete;
~:-          --Boucle principale sur la colonne de 0 à 29 indicée par numcol
~:-          FOR numcol IN tablib.first..tablib.last
~:-          LOOP
~:-            --Pour chaque nouvelle colonne on initialise le dernier matricule, les matricules en cours, et les indices.
~:-            i            :=1;
~:-            j            :=1;
~:-            MatARenvoyer :=' ';
~:-            MatEcrit     :=' ';
~:-            oldvaleur    :=' ';
~:-            curclemati   :=' ';
~:-            curclematj   :=' ';
~:-            preclemati   :='#';
~:-            preclematj   :='#';
~:-            tab1cle      :=' ';
~:-            tab2cle      :=' ';
~:-            --Appareillage "tab1" (DIC_xxx) et "tab2" (PHOTO_DIC_xxx) triés selon leurs clés
~:-            WHILE i <= tab1.last OR j <= tab2.last
~:-            LOOP
~:-              IF i        <= tab1.last THEN
~:-                --constitution de la clé "matricule courant" partie GAP
~:-
~:-                curclemati:=tab1(i).pacmat||'#'||tab1(i).paiezad;
~:-                IF p_TABLETYPE IN ('OCCURS','PREMIERE','DERNIERE') THEN
~:-                  --clé de comparaison = couple pacmat-paiezad + rang de l'OCCURS (vaut 1 sur PREMIERE et DERNIERE)
~:-                  tab1cle :=curclemati||TO_CHAR(NVL(tab1(i).rank,0),'000');
~:-                ELSE
~:-                  --clé de comparaison = celle de DIF_FSED donc celle de la ligne Oracle
~:-                  tab1cle :=tab1(i).cle;
~:-                END IF;
~:-              ELSE
~:-                curclemati :=' ';
~:-                --clé de comparaison = high_value pour faciliter les comparaisons
~:-                tab1cle :=chr(255);
~:-              END IF;
~:-              IF j        <= tab2.last THEN
~:-                --constitution de la clé "matricule" courant partie PHOTO
~:-
~:-                curclematj:=tab2(j).pacmat||'#'||tab2(j).paiezad;
~:-                IF p_TABLETYPE IN ('OCCURS','PREMIERE','DERNIERE') THEN
~:-                  --clé de comparaison = couple pacmat-paiezad + rang de l'OCCURS (vaut 1 sur PREMIERE et DERNIERE)
~:-                  tab2cle :=curclematj||TO_CHAR(NVL(tab2(j).rank,0),'000');
~:-                ELSE
~:-                  --clé de comparaison = celle de DIF_FSED donc celle de la ligne Oracle
~:-                  tab2cle :=tab2(j).cle;
~:-                END IF;
~:-              ELSE
~:-                curclematj :=' ';
~:-                --clé de comparaison = high_value pour faciliter les comparaisons
~:-                tab2cle :=chr(255);
~:-              END IF;
~:-              --Tables avec historiques comme D_A_C_H : la clé contient des dates d'effet donc il faut adapter l'appareillage
~:-              IF coldteffet='a.DATE_EFF' THEN
~:-                IF i <= tab1.last AND curclemati=MatARenvoyer THEN
~:-                  --matricule déjà détecté en différence histo, on envoie tous les historiques. Les doublons sont éliminés automatiquement.
~:-                  remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
~:-                  --avancer dans tab1
~:-                  i :=i+1;
~:-                  preclemati:=curclemati;
~:-                Elsif j <= tab2.last AND curclematj=MatARenvoyer THEN
~:-                  --avancer dans tab2 pour épuiser les histos photo déjà détectés en différence
~:-                  j :=j+1;
~:-                  preclematj:=curclematj;
~:-                Elsif tab1cle < tab2cle and preclemati<>curclemati THEN
~:-                  --ligne gap ajoutée car clé gap plus petite que clé photo et c'était le 1er histo du matricule : création
~:-                  remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'C', p_TABLETYPE);
~:-                  --avancer dans tab1
~:-                  i :=i+1;
~:-                  preclemati:=curclemati;
~:-                Elsif tab1cle < tab2cle AND preclemati=curclemati THEN
~:-                  --ligne gap ajoutée car clé gap plus petite que clé photo et il existe un histo gap précédent sur le même matricule : il faut comparer les valeurs du précédent.
~:-                  IF difference_col( tab1(i) , tab1(i-1) , numcol )=1 THEN
~:-                    --modification constatée entre histo gap précédent (j) et histo gap courant (i)
~:-                    remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'C', p_TABLETYPE);
~:-                  END IF;
~:-                  --avancer dans tab1
~:-                  i :=i+1;
~:-                  preclemati:=curclemati;
~:-                Elsif tab1cle > tab2cle AND preclemati<>curclematj THEN
~:-                  --ligne gap supprimée et c'était le 1er histo du matricule : il faut forcer les valeurs à blanc sur cette date perdue.
~:-                  remplissage_ligne(tabRetour, tab2(j), tablib(numcol), p_id_trt, numretour, numcol, 'S', p_TABLETYPE);
~:-                  --avancer dans tab2
~:-                  j :=j+1;
~:-                  preclematj:=curclematj;
~:-                Elsif tab1cle > tab2cle AND preclemati=curclematj THEN
~:-                  --ligne gap supprimée et il existe un histo gap précédent sur le même matricule : il faut comparer les valeurs du précédent avec la photo.
~:-                  i :=i-1;
~:-                  IF difference_col( tab1(i) , tab2(j) , numcol )=1 THEN
~:-                    --modification constatée entre histo gap précédent et histo photo courant (date d'effet=photo)
~:-                    tab1(i).DTEFFET :=tab2(j).DTEFFET ;
~:-                    remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
~:-                  END IF;
~:-                  --avancer dans tab1 et tab2 car on a "comparé" ces 2 lignes
~:-                  i :=i+1;
~:-                  preclemati:=curclemati;
~:-                  j :=j+1;
~:-                  preclematj:=curclematj;
~:-                ELSE
~:-                  --comparaison car à ce stade il y a forcément égalité tab1cle=tab2cle (pacmat + paiezad + date d'effet)
~:-                  IF difference_col( tab1(i) , tab2(j) , numcol )=1 THEN
~:-                    --modification constatée
~:-                    remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
~:-                  END IF;
~:-                  --avancer dans tab1 et tab2
~:-                  i :=i+1;
~:-                  preclemati:=curclemati;
~:-                  j :=j+1;
~:-                  preclematj:=curclematj;
~:-                END IF;
~:-              ELSE
~:-                --Tables sans historiques comme DIC_ENFANTS ou DIC_ADM_PERSO
~:-                IF tab1cle < tab2cle THEN
~:-                  --ligne ajoutée car j épuisé ou clé i plus petite que clé j (ce qui marche aussi pour des historiques créés après photo)
~:-                  remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'C', p_TABLETYPE);
~:-                  --avancer dans tab1
~:-                  i    :=i+1;
~:-                  preclemati:=curclemati;
~:-                Elsif tab1cle > tab2cle THEN
~:-                  --ligne supprimée car i épuisé ou clé i plus grande que clé j
~:-                  remplissage_ligne(tabRetour, tab2(j), tablib(numcol), p_id_trt, numretour, numcol, 'S', p_TABLETYPE);
~:-                  --avancer dans tab2
~:-                  j :=j+1;
~:-                  preclematj:=curclematj;
~:-                ELSE
~:-                  --comparaison car à ce stade il y a forcément égalité de clé tab1(i).cle=tab2(j).cle -ou- OCCURS du couple pacmat-paiezad
~:-                  IF difference_col( tab1(i) , tab2(j) , numcol )=1 THEN
~:-                    --modification constatée
~:-                    remplissage_ligne(tabRetour, tab1(i), tablib(numcol), p_id_trt, numretour, numcol, 'M', p_TABLETYPE);
~:-                  END IF;
~:-                  --avancer dans tab1 et tab2
~:-                  i :=i+1;
~:-                  preclemati:=curclemati;
~:-                  j :=j+1;
~:-                  preclematj:=curclematj;
~:-                END IF;
~:-              END IF;
~:-            END LOOP;
~:-          END LOOP;
~:-          FSED_AVANCEMENT(p_id_trt,'Fin traitement des differences');
~:-          IF NVL(tabRetour.first,0)=0 THEN
~:-            FSED_AVANCEMENT(p_id_trt,'Pas de differences');
~:-          ELSE
~:-            FSED_AVANCEMENT(p_id_trt,'Insertion des differences numeros '||TO_CHAR(NVL(tabRetour.first,0))||' a '||TO_CHAR(NVL(tabRetour.last,0)));
~:-            FORALL i IN tabRetour.first..tabRetour.last
~:-            INSERT
~:-            INTO DIF_FSED_TEMPORARY
~:-              (
~:-                id_trt,
~:-                numpac,
~:-                CLE,
~:-                pacmat,
~:-                ELEM,
~:-                OCC,
~:-                VALEUR,
~:-                CODEOP,
~:-                TYPE_DONNEE ,
~:-                DTEFFET,
~:-                paiezad
~:-              )
~:-              VALUES
~:-              (
~:-                p_id_trt,
~:-                p_numpac,
~:-                tabRetour(i).CLE,
~:-                tabRetour(i).pacmat,
~:-                tabRetour(i).ELEM,
~:-                NVL(lpad(tabRetour(i).OCC,3,'0'),'  '),
~:-                tabRetour(i).VALEUR,
~:-                tabRetour(i).CODEOP,
~:-                tabRetour(i).TYPE_DONNEE,
~:-                tabRetour(i).DTEFFET,
~:-                tabRetour(i).paiezad
~:-              );
~:-            requeteTDIF:='INSERT INTO DIF_FSED (ID_TRT,NUMPAC,CLE,PACMAT,PAIEZAD,ELEM,OCC,VALEUR,CODEOP,TYPE_DONNEE,DTEFFET) (select ID_TRT,NUMPAC,CLE,PACMAT,PAIEZAD,ELEM,OCC,VALEUR,CODEOP,TYPE_DONNEE,DTEFFET from DIF_FSED_TEMPORARY)';
~:-            FSED_AVANCEMENT(p_id_trt,'Injection des differences dans DIF_FSED : '||requeteTDIF);
~:-             EXECUTE_IMMEDIATE_STRING  (requeteTDIF,0);
~:-            requeteTDIF:='TRUNCATE TABLE DIF_FSED_TEMPORARY';
~:-            FSED_AVANCEMENT(p_id_trt,'Vidage de DIF_FSED_TEMPORARY : '||requeteTDIF);
~:-             EXECUTE_IMMEDIATE_STRING  (requeteTDIF,0);
~:-          END IF;
~:-        END IF;
~:-      END IF;
~:-      EXIT
~:-    WHEN cur_mapdo%NOTFOUND ;
~:-    END LOOP;
~:-    CLOSE cur_mapdo;
~:-  EXCEPTION
~:-  WHEN OTHERS THEN
~:-    err_code := SQLCODE;
~:-    err_msg  := SQLERRM;
~:-    FSED_ERREUR( p_id_trt , 'preparation_FSED_unit' , p_nomTable||','||p_alias||','||p_TABLETYPE||','||p_id_trt||','||p_numpac||','||p_nb_mois_paie_init , err_code||'-'||err_msg );
~:-    raise;
~:-  END preparation_FSED_unit;
~:-/*********************************************************
~:-Proc : preparation_FSED
~:-Fctn :
~:-**********************************************************/
~:-PROCEDURE preparation_FSED
~:-  (
~:-    p_id_trt  IN NUMBER,
~:-    p_numpac  IN VARCHAR2,
~:-    p_periode IN VARCHAR2
~:-  )
~:-IS
~:-  CURSOR cur_tables
~:-  IS
~:-    SELECT *
~:-    FROM
~:-      (SELECT *
~:-      FROM tge_ref_mapta
~:-      WHERE numpac =p_numpac
~:-        --RSI DIT 39298 MPE : Fonction d'envoi inconditionnel pour la table TGE_OPTION_REPORT
~:-        --Ajout du type 'I'
~:-      AND ALLERRETOUR IN ('A','2','I')
~:-    UNION ALL
~:-    SELECT p_numpac,
~:-      '***',
~:-      'VUE-A301-A302-A962',
~:-      FICHIER,
~:-      TABLEPHY,
~:-      ALLERRETOUR,
~:-      TABLETYPE,
~:-      MOISZERO,
~:-      NBMOISCONS,
~:-      SENSIBLERHID,
~:-      RESERVE
~:-    FROM tge_ref_mapta
~:-    WHERE numpac  ='*'
~:-    AND tableparam='DIC_ADM_CONTRAT_HISTO'
~:-    UNION ALL
~:-    SELECT *
~:-    FROM tge_ref_mapta
~:-    WHERE numpac ='*'
~:-      --RSI DIT 39298 MPE : Fonction d'envoi inconditionnel pour la table TGE_OPTION_REPORT
~:-      --Ajout du type 'I'
~:-    AND ALLERRETOUR      IN ('A','2','I')
~:-    AND (tableparam) NOT IN
~:-      (SELECT tableparam FROM tge_ref_mapta WHERE numpac=p_numpac
~:-      )
~:-      )
~:-    ORDER BY tableparam;
~:-    lig cur_tables%rowtype;
~:-    nbPurgePhoto NUMBER:=0;
~:-    v_flag       NUMBER;
~:-    p_nb_mois_paie_init number;
~:-    pReq  CLOB;
~:-    w_PERIODEENCOURS TGE_REF_PAC.PERIODEENCOURS%TYPE;
~:-    w_DEB_RETRO      TGE_REF_PAC.DEB_RETRO%TYPE;
~:-    w_DEB_HISTO_RETRO TGE_REF_PAC.DEB_HISTO_RETRO%TYPE;
~:-    w_MIN_RETRO       TGE_REF_PAC.DEB_RETRO%TYPE;
~:-  BEGIN
~:-    --Purge de la table des erreurs en cas de relance manuelle du "call"
~:-   p_nb_mois_paie_init:= GET_NB_MOIS_PAIE_INIT();
~:-   SELECT PERIODEENCOURS ,DEB_RETRO,DEB_HISTO_RETRO,
~:-   greatest(DEB_HISTO_RETRO,TO_CHAR(ADD_MONTHS(TO_DATE(PERIODEENCOURS,'yyyymm'),-1*NB_MOIS_RETRO),'yyyymm'))
~:-   INTO   w_PERIODEENCOURS ,w_DEB_RETRO,w_DEB_HISTO_RETRO,w_MIN_RETRO
~:-   FROM TGE_REF_PAC 
~:-   WHERE NUMPAC =p_numpac;
~:-    DELETE
~:-    FROM TGE_FSED_ERREUR
~:-    WHERE id=p_id_trt;
~:-    --Purge de la table d'avancement activée si TGE_FSED_IS_DEBUG.IS_DEBUG='O'
~:-    DELETE
~:-    FROM TGE_FSED_AVANCEMENT_PROC
~:-    WHERE id=p_id_trt;
~:-    COMMIT;
~:-    pReq := 'select ADD_MONTHS(to_date('||p_periode||',''yyyymm''),-'||p_nb_mois_paie_init||') from dual';
~:-    EXECUTE IMMEDIATE pReq INTO  mMoins1;
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED *** START *** pac='||p_numpac||' periode='||p_periode||' intervalle de validite='||TO_CHAR(mMoins1,'yyyymmdd')||'-'||TO_CHAR(last_day(to_date(p_periode,'yyyymm')),'yyyymmdd'));
~:-    --Purge des photos si photo absente de DIC_ADM_CONTRAT
~:-    FOR tabPurgePhoto IN
~:-    (SELECT DISTINCT pacmat
~:-    FROM GAP_TRT_LISTE_MAT
~:-    WHERE id_trt    =p_id_trt
~:-    AND pacmat NOT IN
~:-      (SELECT pacmat FROM PHOTO_DIC_ADM_CONTRAT WHERE numpac=p_numpac
~:-      )
~:-    ORDER BY pacmat
~:-    )
~:-    LOOP
~:-      FSED_AVANCEMENT(p_id_trt,'Efface Photo toutes tables pacmat='||tabPurgePhoto.pacmat);
~:-      effaceMatricToutTable(p_numpac,tabPurgePhoto.pacmat);
~:-      nbPurgePhoto:=nbPurgePhoto+1;
~:-    END LOOP;
~:-    IF nbPurgePhoto=0 THEN
~:-      FSED_AVANCEMENT(p_id_trt,'Tous les Pacmat du traitement sont presents dans PHOTO_DIC_ADM_CONTRAT');
~:-    ELSE
~:-      FSED_AVANCEMENT(p_id_trt,'Nb pacmat absents de PHOTO_DIC_ADM_CONTRAT (effaceMatricToutTable) ='||TO_CHAR(nbPurgePhoto));
~:-    END IF;
~:-    getSoldMontant(p_numpac,p_id_trt,DicoPret,soldePret,MontantPret,DicoOpposition,soldeOpposition,MontantOpposition);
~:-    FSED_AVANCEMENT(p_id_trt,'Donnees filtres prets oppositions : soldePret='||DicoPret||'.'||soldePret||' MontantPret='||DicoPret||'.'||MontantPret|| ' soldeOpposition='||DicoOpposition||'.'||soldeOpposition||' MontantOpposition='||DicoOpposition||'.'||MontantOpposition);
~:-    OPEN cur_tables;
~:-    LOOP
~:-      FETCH cur_tables INTO lig;
~:-      EXIT
~:-    WHEN cur_tables%NOTFOUND ;
~:-      FSED_AVANCEMENT(p_id_trt,'preparation_FSED --- Debut Traitement alias '||lig.tableparam||' (table '||lig.tablephy||')');
~:-      preparation_FSED_unit(lig.tablephy,lig.tableparam,lig.TABLETYPE,p_id_trt,p_numpac,p_periode,lig.ALLERRETOUR ,p_nb_mois_paie_init);
~:-      FSED_AVANCEMENT(p_id_trt,'preparation_FSED --- Fin Traitement alias '||lig.tableparam||' (table '||lig.tablephy||')');
~:-    END LOOP;
~:-    CLOSE cur_tables;
~:-    SELECT COUNT(*) INTO v_flag FROM GAP_TRT_LISTE_MAT where ID_TRT = p_id_trt;
~:-    --Partie Rétro 
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED ---Début Rétro id_trt= '||p_id_trt);
~:-    IF w_DEB_RETRO is not null AND to_date(w_PERIODEENCOURS,'YYYYMM')>=to_date(w_DEB_RETRO,'YYYYMM') THEN
~:-     BEGIN
~:-     FSED_AVANCEMENT(p_id_trt,'preparation_FSED --- remplissage DIF_FSED_MODIF_RETRO id_trt= '||p_id_trt);
~:-     pReq := 'Alter TABLE DIF_FSED_MODIF_RETRO add partition ID_'||p_id_trt||' values ('||p_id_trt||')';
~:-     EXECUTE_IMMEDIATE_STRING( pReq,0);
~:-     FSED_AVANCEMENT(p_id_trt,'preparation_FSED--remplissage DIF_FSED_MODIF_RETRO--partition cree: ID_'||p_id_trt||', pReq '||pReq);
~:-    EXCEPTION
~:-    WHEN OTHERS THEN
~:-     FSED_AVANCEMENT(p_id_trt,'preparation_FSED--remplissage DIF_FSED_MODIF_RETRO-- Erreur partition ID_'||p_id_trt);
~:-    END ;
~:-    
~:-    --Insertion dans DIF_FSED_MODIF_RETRO
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion DIF_FSED_MODIF_RETRO--: ID_'||p_id_trt);
~:-    pReq := 'INSERT INTO DIF_FSED_MODIF_RETRO SELECT * FROM dif_fsed f WHERE numpac ='''||p_numpac||''' AND f.id_trt ='||p_id_trt;
~:- 	pReq := pReq ||' AND DTEFFET  <to_date('''||w_PERIODEENCOURS||'''||''01'',''YYYYMMDD'') ';
~:- 	pReq := pReq ||' AND  f.elem in (select ELEMENT from tge_ref_dicoz where  numpac='''||p_numpac||''' AND nvl(CALCUL_RETRO,0)=1 )';
~:- 	pReq := pReq ||' UNION  SELECT * FROM dif_fsed f WHERE numpac ='''||p_numpac||''' AND f.id_trt ='||p_id_trt;
~:- 	pReq := pReq ||' AND DTEFFET  <to_date('''||w_PERIODEENCOURS||'''||''01'',''YYYYMMDD'') '; 
~:- 	pReq := pReq ||' AND  exists (select 1 from dif_fsed t where t.numpac ='''||p_numpac||''' and t.id_trt ='''||p_id_trt||''' AND t.codeop=''C'' and t.ELEM =''A001'' and f.numpac = t.numpac AND f.id_trt = t.id_trt and f.paiezad=t.paiezad and f.pacmat=t.pacmat ) ';
~:- 	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début remplissage DIF_FSED_MODIF_RETRO--: ID_'||p_id_trt||', pReq '||pReq);
~:-    EXECUTE_IMMEDIATE_STRING( pReq,0);
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- FIN insertion DIF_FSED_MODIF_RETRO-- CALCUL DE STATISTIQUES: ID_'||p_id_trt);
~:-	DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'DIF_FSED_MODIF_RETRO',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4, partname => 'ID_'||p_id_trt||'');    
~:-    --Insertion dans GAP_TRT_MOIS_RETRO
~:-    pReq := ' insert into GAP_TRT_MOIS_RETRO (id_trt,numpac,pacmat,PERIODE_RETRO)';
~:-    pReq := pReq ||' WITH grm AS (SELECT pacmat,periode_retro FROM gap_retro_matric    g WHERE numpac = '''||p_numpac||''' AND EXISTS (SELECT 1 FROM gap_trt_liste_mat gtlm WHERE gtlm.id_trt = '||p_id_trt||' AND gtlm.numpac = g.numpac AND gtlm.pacmat = g.pacmat))';
~:-    pReq := pReq ||'     ,gsr AS (SELECT pacmat,periode_retro FROM gap_selection_retro g WHERE numpac = '''||p_numpac||''' AND EXISTS (SELECT 1 FROM gap_trt_liste_mat gtlm WHERE gtlm.id_trt = '||p_id_trt||' AND gtlm.numpac = g.numpac AND gtlm.pacmat = g.pacmat))';
~:-    --                 min_periode_retro : plus vieille rétro par matricule
~:-    pReq := pReq ||' ,min_periode_retro (pacmat,min_periode) AS (';
~:-    pReq := pReq ||' SELECT pacmat,MIN(periode_retro) FROM';
~:-    pReq := pReq ||' (          SELECT pacmat,periode_retro FROM grm';
~:-    pReq := pReq ||'  UNION ALL SELECT pacmat,periode_retro FROM gsr ) GROUP BY pacmat) ';
~:-    --                 histo_retro : historique des mois où on a fait de la rétro *et* sur quels mois
~:-    pReq := pReq ||' ,histo_retro AS (SELECT DISTINCT pacmat,periode,to_char(dteffet,''yyyymm'') as periode_retro FROM dif_fsed_histo h WHERE numpac = '''||p_numpac||''' AND EXISTS (SELECT 1 FROM gap_trt_liste_mat gtlm WHERE gtlm.id_trt = '||p_id_trt||' AND gtlm.numpac = h.numpac AND gtlm.pacmat = h.pacmat) ';
~:-    pReq := pReq ||'       AND periode>='''||w_MIN_RETRO||''' AND to_char(dteffet,''yyyymm'')<periode';
~:-    pReq := pReq ||'       AND  h.elem in (select ELEMENT from tge_ref_dicoz where  numpac='''||p_numpac||''' AND nvl(CALCUL_RETRO,0)=1) )';
~:-    --                 liste_mois_retro_pacmat : liste exhaustive des mois rétro par matricule (mois rétro paie en cours + mois rétro dans l'historique)
~:-    pReq := pReq ||' ,liste_mois_retro_pacmat (pacmat,periode_retro) AS ( ';
~:-    pReq := pReq ||'       SELECT pacmat,periode_retro      FROM grm';
~:-    pReq := pReq ||' UNION ALL SELECT pacmat,periode_retro      FROM gsr';
~:-    pReq := pReq ||' UNION ALL SELECT DISTINCT pacmat,periode_retro FROM histo_retro hr WHERE EXISTS (select 1 from min_periode_retro mpr WHERE hr.pacmat=mpr.pacmat and hr.periode_retro>=mpr.min_periode)';
~:-    pReq := pReq ||' UNION ALL SELECT DISTINCT pacmat,periode       FROM histo_retro hr WHERE EXISTS (select 1 from min_periode_retro mpr WHERE hr.pacmat=mpr.pacmat and hr.periode      >=mpr.min_periode))';
~:-    --                SELECT principal
~:-    pReq := pReq ||' SELECT DISTINCT '||p_id_trt||','''||p_numpac||''',pacmat,periode_retro FROM liste_mois_retro_pacmat';
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion GAP_TRT_MOIS_RETRO: ID_'||p_id_trt||', pReq '||pReq);   
~:-    EXECUTE_IMMEDIATE_STRING( pReq,0);
~:-    DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => SYS_CONTEXT('USERENV', 'SESSION_SCHEMA'), TABNAME => 'GAP_TRT_MOIS_RETRO', METHOD_OPT => 'FOR ALL COLUMNS SIZE 254', ESTIMATE_PERCENT => 100, CASCADE => TRUE, DEGREE => 4);
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Fin insertion GAP_TRT_MOIS_RETRO: ID_'||p_id_trt);
~:-    BEGIN
~:-     FSED_AVANCEMENT(p_id_trt,'preparation_FSED --- remplissage DIF_FSED_PARTIERETRO id_trt= '||p_id_trt);
~:-     pReq := 'Alter TABLE DIF_FSED_PARTIERETRO add partition ID_'||p_id_trt||' values ('||p_id_trt||')';
~:-     EXECUTE_IMMEDIATE_STRING( pReq,0);
~:-     FSED_AVANCEMENT(p_id_trt,'preparation_FSED--remplissage DIF_FSED_PARTIERETRO--partition cree: ID_'||p_id_trt);
~:-    EXCEPTION
~:-    WHEN OTHERS THEN
~:-     FSED_AVANCEMENT(p_id_trt,'preparation_FSED--remplissage DIF_FSED_PARTIERETRO--partition ID_'||p_id_trt||' existe déja');
~:-    END ;
~:-    --Insertion dans DIF_FSED_PARTIERETRO
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion LISTE_MOIS_RETRO: ID_'||p_id_trt);   
~:-    pReq := ' INSERT INTO LISTE_MOIS_RETRO (id_trt,numpac,pacmat,periode_retro) select id_trt,numpac,pacmat,periode_retro from (';
~:-	--WITH1 liste des vrais mois rétro
~:-	pReq := pReq ||' WITH liste_mois_retro_pacmat (id_trt,numpac,pacmat,periode_retro) AS ( ';
~:-	pReq := pReq ||'       SELECT '''||p_id_trt||''',numpac,pacmat,periode_retro FROM gap_trt_mois_retro WHERE numpac = '''||p_numpac||''' AND id_trt = '''||p_id_trt||''') ';
~:-	pReq := pReq ||' select id_trt,numpac,pacmat,periode_retro from liste_mois_retro_pacmat)';
~:-	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- requete LISTE_MOIS_RETRO: ID_'||p_id_trt||', pReq '||pReq);
~:-	EXECUTE_IMMEDIATE_STRING( pReq,0);
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion TRANCHES_MOIS_RETRO: ID_'||p_id_trt);   
~:-    pReq := ' INSERT INTO TRANCHES_MOIS_RETRO (id_trt,numpac,pacmat,periode_retro,prec_periode_retro) select id_trt,numpac,pacmat,periode_retro,prec_periode_retro from (';
~:-	--WITH1 liste des vrais mois rétro
~:-	pReq := pReq ||' WITH tranches_mois_retro_pacmat (id_trt,numpac,pacmat,periode_retro,prec_periode_retro) AS ( ';
~:-	pReq := pReq ||' SELECT '''||p_id_trt||''',lmr.numpac,lmr.pacmat,lmr.periode_retro,NVL((SELECT to_char(add_months(to_date(MAX(lmr2.periode_retro),''yyyymm''),1),''yyyymm'') FROM liste_mois_retro lmr2 WHERE lmr2.numpac = lmr.numpac and lmr2.pacmat=lmr.pacmat AND lmr2.periode_retro<lmr.periode_retro),'''||w_MIN_RETRO||''') FROM liste_mois_retro lmr where lmr.id_trt = '''||p_id_trt||''')';
~:-	pReq := pReq ||' select id_trt,numpac,pacmat,periode_retro,prec_periode_retro from tranches_mois_retro_pacmat)';
~:-	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- requete TRANCHES_MOIS_RETRO: ID_'||p_id_trt||', pReq '||pReq);
~:-	EXECUTE_IMMEDIATE_STRING( pReq,0);
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt);   
~:-    pReq := ' INSERT INTO DIF_FSED_PARTIERETRO ';
~:-	--WITH1 liste des vrais mois rétro
~:-	pReq := pReq ||' WITH liste_envoi_systematique(elem) AS( ';
~:-	pReq := pReq ||' SELECT ELEMENT FROM TGE_REF_MAPDO WHERE ''*''= decode (numpac,'''||p_numpac||''',''*'',numpac) AND NVL(ENVOI_SYSTEMATIQUE,''N'')=''O'' )';
~:-	--SELECT1 DIF_FSED_MODIF_RETRO
~:-	pReq := pReq ||' SELECT '''||p_id_trt||''', tmr.periode_retro AS periode, m.numpac, m.cle, m.pacmat, m.paiezad, m.elem, m.occ, m.valeur, m.codeop, m.type_donnee, m.dteffet ';
~:-	pReq := pReq ||' FROM dif_fsed_modif_retro m, tranches_mois_retro tmr ';
~:-	pReq := pReq ||' WHERE m.id_trt = '''||p_id_trt||''' and m.id_trt = tmr.id_trt AND m.numpac = tmr.numpac and m.pacmat = tmr.pacmat ';
~:-	pReq := pReq ||' AND  ( ' ;
~:-	pReq := pReq ||' greatest(TO_CHAR(m.dteffet,''yyyymm''),'''||w_MIN_RETRO||''') BETWEEN tmr.prec_periode_retro AND tmr.periode_retro ';
~:-	pReq := pReq ||' OR  substr(m.elem,0,1)>''W'' OR Exists (select * from liste_envoi_systematique les  where m.elem=les.elem ) ';
~:-	pReq := pReq ||' ) ' ;
~:-	--SELECT2 DIF_FSED_HISTO sauf les lignes déjà présentes dans DIF_FSED_MODIF_RETRO
~:-	pReq := pReq ||' UNION ALL SELECT '''||p_id_trt||''', h.periode, h.numpac, h.cle, h.pacmat, h.paiezad, h.elem, h.occ, h.valeur, h.codeop, h.type_donnee, h.dteffet ';
~:-	pReq := pReq ||' FROM dif_fsed_histo h, liste_mois_retro lmr ';
~:-	pReq := pReq ||' WHERE h.numpac = '''||p_numpac||''' AND lmr.id_trt = '''||p_id_trt||''' AND h.numpac = lmr.numpac and h.pacmat=lmr.pacmat AND periode>='''||w_MIN_RETRO||''' AND h.periode=lmr.periode_retro  ';
~:-	pReq := pReq ||' AND  substr(h.elem,0,1)<''W'' AND NOT Exists (select * from liste_envoi_systematique les  where h.elem=les.elem ) ';
~:-	pReq := pReq ||' AND NOT EXISTS  (SELECT 1 FROM dif_fsed_modif_retro m, tranches_mois_retro tmr ';
~:-	pReq := pReq ||' WHERE m.id_trt = '''||p_id_trt||''' AND m.id_trt = tmr.id_trt AND m.numpac = tmr.numpac and m.pacmat = tmr.pacmat AND greatest(TO_CHAR(m.dteffet,''yyyymm''),'''||w_MIN_RETRO||''') BETWEEN tmr.prec_periode_retro AND tmr.periode_retro ';
~:-	pReq := pReq ||'   AND greatest(TO_CHAR(m.dteffet,''yyyymm''),'''||w_MIN_RETRO||''') <= h.periode';
~:-	pReq := pReq ||'   AND m.numpac = h.numpac and m.pacmat = h.pacmat AND m.paiezad = h.paiezad AND m.elem = h.elem AND m.occ = h.occ )';
~:-	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Début insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt||', pReq '||pReq);
~:-	EXECUTE_IMMEDIATE_STRING( pReq,0);
~:-	FSED_AVANCEMENT(p_id_trt,'preparation_FSED-- Fin insertion DIF_FSED_PARTIERETRO: ID_'||p_id_trt);
~:-	FSED_AVANCEMENT(p_id_trt,'preparation_FSED ---Fin Rétro id_trt= '||p_id_trt);
~:-	END IF;
~:-    IF v_flag > 1000 THEN
~:-        DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'DIF_FSED',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
~:-    END IF;
~:-    FSED_AVANCEMENT(p_id_trt,'preparation_FSED *** END *** pac='||p_numpac||' periode='||p_periode);
~:-  EXCEPTION
~:-  WHEN OTHERS THEN
~:-    err_code := SQLCODE;
~:-    err_msg  := SQLERRM;
~:-    FSED_ERREUR( p_id_trt , 'preparation_FSED' , p_id_trt||','||p_numpac , err_code||'-'||err_msg );
~:-    raise;
~:-  END preparation_FSED;
~:-/***********************************************************************
~:-  Funct : getTableCode
~:-  DESC : recuperer le code table
~:-*************************************************************************/
~:-FUNCTION getTableCode(
~:-    plig TGE_IMPORT_FSED%rowtype)
~:-  RETURN VARCHAR
~:-IS
~:-  v_code_table VARCHAR2(5);
~:-  CURSOR C_VRTA
~:-  IS
~:-    SELECT * FROM TGE_REF_VRTA;
~:-  lig_vrta TGE_REF_VRTA%rowtype;
~:-BEGIN
~:-  IF code_table_liste.count=0 THEN
~:-    OPEN C_VRTA ;
~:-    LOOP
~:-      FETCH C_VRTA INTO lig_vrta ;
~:-      EXIT
~:-    WHEN C_VRTA%NOTFOUND;
~:-      IF lig_vrta.tablevr11                                       IS NOT NULL THEN
~:-        code_table_liste(lig_vrta.numpac||'#'||lig_vrta.TABLEVR11):= lig_vrta.TABLEZADIG;
~:-      END IF;
~:-    END LOOP;
~:-    CLOSE C_VRTA;
~:-  END IF;
~:-  IF code_table_liste.exists(SUBSTR(plig.donnees,1,6)||'#'||trim(SUBSTR(plig.donnees,10,3)) ) THEN
~:-    RETURN code_table_liste(SUBSTR(plig.donnees,1,6)||'#'||trim(SUBSTR(plig.donnees,10,3)) );
~:-  elsif code_table_liste.exists('*#'||trim(SUBSTR(plig.donnees,10,3)) ) THEN
~:-    RETURN code_table_liste('*#'||trim(SUBSTR(plig.donnees,10,3)) );
~:-  ELSE
~:-    RETURN trim(SUBSTR(plig.donnees,10,3));
~:-  END IF;
~:-END getTableCode;
~:-/********************************************************************
~:-Funct : getTypeColonne
~:-DESC  : recuperer le type de colonne
~:-**********************************************************************/
~:-FUNCTION getTypeColonne(
~:-    p_table   IN VARCHAR2,
~:-    p_colonne IN VARCHAR2)
~:-  RETURN VARCHAR2
~:-IS
~:-  v_typecolonne user_tab_columns.data_type%type;
~:-BEGIN
~:-  BEGIN
~:-    SELECT DISTINCT data_type
~:-    INTO v_typecolonne
~:-    FROM user_tab_columns cln
~:-    WHERE cln.table_name = p_table
~:-    AND cln.column_name  = p_colonne;
~:-  EXCEPTION
~:-  WHEN OTHERS THEN
~:-    RETURN (NULL);
~:-  END ;
~:-  IF v_typecolonne ='NUMBER' THEN
~:-    RETURN('N');
~:-  ELSIF v_typecolonne ='DATE' THEN
~:-    RETURN('D');
~:-  ELSIF v_typecolonne ='VARCHAR2' THEN
~:-    RETURN('V');
~:-  END IF;
~:-END getTypeColonne;
~:-/***********************************************************************
~:-PROC : setCart11 
~:-DESC : Cart 11
~:-*************************************************************************/
~:-PROCEDURE setCart11(
~:-    p_id IN NUMBER,
~:-    lig TGE_IMPORT_FSED%rowtype,
~:-    pNumPac TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:-    pCodeTable TGE_REF_VRTA.TABLEZADIG%TYPE,
~:-    pCodeTableOld TGE_REF_VRTA.TABLEZADIG%TYPE)
~:-IS
~:-  type_carte   VARCHAR2(3) := '';
~:-  v_code_table VARCHAR2(5);
~:-  v_num_ligne  VARCHAR2(4);
~:-  v_code_seq   VARCHAR2(1);
~:-  v_nom_champ  VARCHAR2(4);
~:-  v_existVRREP number :=0 ;
~:-BEGIN
~:-  type_carte                         := trim(SUBSTR(lig.donnees,18,2));
~:-  IF type_carte                       ='R' THEN
~:-    elt_tab_11R.NUMERO_DE_PAC        :=pNumPac;
~:-    elt_tab_11R.CODE_TABLE           :=pCodeTable;
~:-    elt_tab_11R.FONCTIONNALITE       :=trim(SUBSTR(lig.donnees,20,2));
~:-    elt_tab_11R.NOM_DE_LA_TABLE      :=trim(SUBSTR(lig.donnees,22,35));
~:-    elt_tab_11R.CLASSE_PROTECTION    :=trim(SUBSTR(lig.donnees,57,3));
~:-    elt_tab_11R.CODE_MAJ_CAL         :=trim(SUBSTR(lig.donnees,60,1));
~:-    elt_tab_11R.TABLE_USAGE_MULTIPLE :=trim(SUBSTR(lig.donnees,61,1));
~:-    elt_tab_11R.NOM_TABLEASSOCIE     :=trim(SUBSTR(lig.donnees,62,3));
~:-    elt_tab_11R.VALEURS_MENSUELLES   :=trim(SUBSTR(lig.donnees,66,1));
~:-    elt_tab_11R.CODE_TOPAGE          :=trim(SUBSTR(lig.donnees,67,1));
~:-    elt_tab_11R.REPERCUSSION_TVP     :=trim(SUBSTR(lig.donnees,68,1));
~:-    elt_tab_11R.PGM_COHE_LIGNE       :=trim(SUBSTR(lig.donnees,69,8));
~:-    elt_tab_11R.DATE_DERNIERE_MAJ    :=trim(SUBSTR(lig.donnees,77,8));
~:-    elt_tab_11R.HEURE_DERNIERE_MAJ   :=trim(SUBSTR(lig.donnees,85,4));
~:-    elt_tab_11R.TRAIT_PARTICULIER    :=trim(SUBSTR(lig.donnees,89,1));
~:-    elt_tab_11R.CODE_DESTINATION_1   :=trim(SUBSTR(lig.donnees,90,1));
~:-    elt_tab_11R.CODE_DESTINATION_2   :=trim(SUBSTR(lig.donnees,91,1));
~:-    elt_tab_11R.CODE_DESTINATION_3   :=trim(SUBSTR(lig.donnees,92,1));
~:-    elt_tab_11R.CODE_DESTINATION_4   :=trim(SUBSTR(lig.donnees,93,1));
~:-    elt_tab_11R.CODE_DESTINATION_5   :=trim(SUBSTR(lig.donnees,94,1));
~:-    elt_tab_11R.PGM_COHE_TABLE       :=trim(SUBSTR(lig.donnees,95,8));
~:-    elt_tab_11R.TEMOIN_VR_BASE       :=trim(SUBSTR(lig.donnees,103,1));
~:-    elt_tab_11R.TEMOIN_SITE_MULTIPLE :=trim(SUBSTR(lig.donnees,104,1));
~:-    elt_tab_11R.CODE_GESTIONNAIRE    :=trim(SUBSTR(lig.donnees,105,1));
~:-    elt_tab_11R.CODE_EDI             :=trim(SUBSTR(lig.donnees,106,1));
~:-    elt_tab_11R.NB_LIG_MINI          :=trim(SUBSTR(lig.donnees,111,4));
~:-    elt_tab_11R.NB_LIG_MAXI          :=trim(SUBSTR(lig.donnees,115,4));
~:-    elt_tab_11R.NB_LIG_TOTALES       :=trim(SUBSTR(lig.donnees,119,4));
~:-    elt_tab_11R.NB_LIG_ACTIVES       :=trim(SUBSTR(lig.donnees,123,4));
~:-    IF tab_11R                       IS NULL THEN
~:-      tab_11R                        := t_TGE_REF_VRREP();
~:-    END IF;
~:-    select count(*) into v_existVRREP from TGE_REF_VRREP where TGE_REF_VRREP.NUMERO_DE_PAC=elt_tab_11R.NUMERO_DE_PAC and TGE_REF_VRREP.CODE_TABLE=elt_tab_11R.CODE_TABLE;
~:-	if(v_existVRREP=0) then
~:-	tab_11R.extend;
~:-	tab_11R(tab_11R.last)            :=elt_tab_11R;
~:-	end if ;
~:-  elsif type_carte                    ='D' THEN
~:-    v_nom_champ                      := trim (SUBSTR(lig.donnees,20,4));
~:-    elt_tab_11D.NUMERO_DE_PAC        := pNumPac;
~:-    elt_tab_11D.CODE_TABLE           := pCodeTable;
~:-    elt_tab_11D.NOM_DU_CHAMP         := v_nom_champ;
~:-    elt_tab_11D.ELEMENT_DE_RECHERCHE := trim (SUBSTR(lig.donnees,24,4));
~:-    elt_tab_11D.VALEUR_ASSOCIEE      := trim (SUBSTR(lig.donnees,28,3));
~:-    elt_tab_11D.CODE_MAJ             := trim (SUBSTR(lig.donnees,31,1));
~:-    elt_tab_11D.NB_OCCURRENCES       := trim (SUBSTR(lig.donnees,32,2));
~:-    elt_tab_11D.NATURE               := trim (SUBSTR(lig.donnees,34,1));
~:-    elt_tab_11D.NB_ENTIERS           := trim (SUBSTR(lig.donnees,35,2));
~:-    elt_tab_11D.NB_DECIMALES         := trim (SUBSTR(lig.donnees,37,2));
~:-    elt_tab_11D.LONGUEUR             := trim (SUBSTR(lig.donnees,39,2));
~:-    elt_tab_11D.CODE_CONTROLE_FORMAT := trim (SUBSTR(lig.donnees,41,2));
~:-    elt_tab_11D.CLASSE_PROTECTION    := trim (SUBSTR(lig.donnees,43,2));
~:-    elt_tab_11D.TYPE_MANIPULATION    := trim (SUBSTR(lig.donnees,45,1));
~:-    elt_tab_11D.CODE_DESCRIPTEUR     := trim (SUBSTR(lig.donnees,46,1));
~:-    elt_tab_11D.CODE_OUVERTURE       := trim (SUBSTR(lig.donnees,47,1));
~:-    elt_tab_11D.BL_ZERO_SIGNIFICATIF := trim (SUBSTR(lig.donnees,48,1));
~:-    elt_tab_11D.CODE_OBLIGATION      := trim (SUBSTR(lig.donnees,49,1));
~:-    elt_tab_11D.CODE_VALIDATION      := trim (SUBSTR(lig.donnees,50,1));
~:-    elt_tab_11D.VAL_POS_COLON_DEBUT  := trim (SUBSTR(lig.donnees,51,2));
~:-    elt_tab_11D.VAL_POS_COLON_FIN    := trim (SUBSTR(lig.donnees,53,2));
~:-    elt_tab_11D.VAL_POS_VALEUR       := trim (SUBSTR(lig.donnees,55,35));
~:-    elt_tab_11D.CNTL_TAB_REFER_TABLE := trim (SUBSTR(lig.donnees,90,5));
~:-    elt_tab_11D.CNTL_TAB_COLON_DEBUT := trim (SUBSTR(lig.donnees,95,2));
~:-    elt_tab_11D.CNTL_TAB_COLON_FIN   := trim (SUBSTR(lig.donnees,97,2));
~:-    elt_tab_11D.CODE_GRAVITE         := trim (SUBSTR(lig.donnees,99,1));
~:-    elt_tab_11D.LIBELLE              := trim (SUBSTR(lig.donnees,100,35));
~:-    elt_tab_11D.MORCEAU_1_NOM_TABLE  := trim (SUBSTR(lig.donnees,135,3));
~:-    elt_tab_11D.MORCEAU_1_COL_DEB    := trim (SUBSTR(lig.donnees,138,3));
~:-    elt_tab_11D.MORCEAU_1_COL_FIN    := trim (SUBSTR(lig.donnees,141,3));
~:-    elt_tab_11D.MORCEAU_2_NOM_TABLE  := trim (SUBSTR(lig.donnees,144,3));
~:-    elt_tab_11D.MORCEAU_2_COL_DEB    := trim (SUBSTR(lig.donnees,147,3));
~:-    elt_tab_11D.MORCEAU_2_COL_FIN    := trim (SUBSTR(lig.donnees,150,3));
~:-    elt_tab_11D.MORCEAU_3_NOM_TABLE  := trim (SUBSTR(lig.donnees,153,3));
~:-    elt_tab_11D.MORCEAU_3_COL_DEB    := trim (SUBSTR(lig.donnees,156,3));
~:-    elt_tab_11D.MORCEAU_3_COL_FIN    := trim (SUBSTR(lig.donnees,159,3));
~:-    elt_tab_11D.MORCEAU_4_NOM_TABLE  := trim (SUBSTR(lig.donnees,162,3));
~:-    elt_tab_11D.MORCEAU_4_COL_DEB    := trim (SUBSTR(lig.donnees,165,3));
~:-    elt_tab_11D.MORCEAU_4_COL_FIN    := trim (SUBSTR(lig.donnees,168,3));
~:-    elt_tab_11D.S_P_CONTROLE         := trim (SUBSTR(lig.donnees,171,8));
~:-    elt_tab_11D.INVISIBLE            := trim (SUBSTR(lig.donnees,179,1));
~:-    IF tab_11D                       IS NULL THEN
~:-      tab_11D                        := t_TGE_REF_VRDES();
~:-    END IF;
~:-    tab_11D.extend;
~:-    tab_11D(tab_11D.last)            := elt_tab_11D;
~:-  elsif type_carte                    ='D1' THEN
~:-    elt_tab_11D1.NUMERO_DE_PAC       := pNumPac;
~:-    elt_tab_11D1.CODE_TABLE          := pCodeTable;
~:-    elt_tab_11D1.NOM_DU_CHAMP        := trim (SUBSTR(lig.donnees,20,4));
~:-    elt_tab_11D1.MORCEAU_5_NOM_TABLE := trim (SUBSTR(lig.donnees,24,3));
~:-    elt_tab_11D1.MORCEAU_5_COL_DEB   := trim (SUBSTR(lig.donnees,27,3));
~:-    elt_tab_11D1.MORCEAU_5_COL_FIN   := trim (SUBSTR(lig.donnees,30,3));
~:-    elt_tab_11D1.MORCEAU_6_NOM_TABLE := trim (SUBSTR(lig.donnees,33,3));
~:-    elt_tab_11D1.MORCEAU_6_COL_DEB   := trim (SUBSTR(lig.donnees,36,3));
~:-    elt_tab_11D1.MORCEAU_6_COL_FIN   := trim (SUBSTR(lig.donnees,39,3));
~:-    elt_tab_11D1.MORCEAU_7_NOM_TABLE := trim (SUBSTR(lig.donnees,42,3));
~:-    elt_tab_11D1.MORCEAU_7_COL_DEB   := trim (SUBSTR(lig.donnees,45,3));
~:-    elt_tab_11D1.MORCEAU_7_COL_FIN   := trim (SUBSTR(lig.donnees,48,3));
~:-    elt_tab_11D1.MORCEAU_8_NOM_TABLE := trim (SUBSTR(lig.donnees,51,3));
~:-    elt_tab_11D1.MORCEAU_8_COL_DEB   := trim (SUBSTR(lig.donnees,54,3));
~:-    elt_tab_11D1.MORCEAU_8_COL_FIN   := trim (SUBSTR(lig.donnees,57,3));
~:-    elt_tab_11D1.MORCEAU_9_NOM_TABLE := trim (SUBSTR(lig.donnees,60,3));
~:-    elt_tab_11D1.MORCEAU_9_COL_DEB   := trim (SUBSTR(lig.donnees,63,3));
~:-    elt_tab_11D1.MORCEAU_9_COL_FIN   := trim (SUBSTR(lig.donnees,66,3));
~:-    IF tab_11D1                      IS NULL THEN
~:-      tab_11D1                       := t_TGE_REF_VRDES();
~:-    END IF;
~:-    tab_11D1.extend;
~:-    tab_11D1(tab_11D1.last)   :=elt_tab_11D1;
~:-  elsif type_carte             ='V' THEN
~:-    elt_tab_11V.NUMERO_DE_PAC :=pNumPac;
~:-    elt_tab_11V.CODE_TABLE    :=pCodeTable;
~:-    v_num_ligne               := trim (SUBSTR(lig.donnees,19,4));
~:-    v_code_seq                := trim (SUBSTR(lig.donnees,24,1));
~:-    IF v_code_seq             IS NULL THEN
~:-      v_code_seq              :='1';
~:-    END IF;
~:-    IF pCodeTableOld  != pCodeTable THEN
~:-      v_cmpt_numLigne := 0;
~:-    END IF;
~:-    IF v_num_ligne      IS NULL THEN
~:-      IF v_code_seq      ='1' THEN
~:-        v_cmpt_numLigne := v_cmpt_numLigne+100;
~:-      END IF;
~:-      elt_tab_11V.NUMERO_DE_LIGNE:= TO_CHAR(v_cmpt_numLigne,'FM09999999') ||v_code_seq;
~:-    ELSE
~:-      elt_tab_11V.NUMERO_DE_LIGNE:= TO_CHAR((to_number(v_num_ligne)*100),'FM09999999') ||v_code_seq;
~:-    END IF;
~:-    elt_tab_11V.ENREGISTREMENT := SUBSTR(lig.donnees,29,86);
~:-    elt_tab_11V.LONGUEUR_INFO  := trim (SUBSTR(lig.donnees,26,3));
~:-    IF tab_11V                 IS NULL THEN
~:-      tab_11V                  := t_TGE_REF_VRVAL();
~:-    END IF;
~:-    tab_11V.extend;
~:-    tab_11V(tab_11V.last):=elt_tab_11V;
~:-  END IF;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id , 'setCart11' , lig.num_lig||','||pNumPac||','||pCodeTable , err_code||'-'||err_msg );
~:-  raise;
~:-  raise_application_error(-20000, 'FSED cart 11  '|| sqlerrm);
~:-END setCart11;
~:-/**************************************************
~:-Fonc : getLibResolu 
~:-DESC : Calcul du libelle resolu
~:-**************************************************/
~:-FUNCTION getLibResolu(pNumPac       IN TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:-                      pCodeCaisse   IN TGE_REF_CAISSE.CODECAISSE%TYPE,
~:-                      pLibRUB       IN TGE_REF_RUBRIQUE.LIBRUB%TYPE) RETURN VARCHAR2 IS 
~:-                      
~:-w_libcaisse        TGE_REF_CAISSE.LIBCAISSE%TYPE;
~:-w_nombre_occ       NUMBER;
~:-w_libResolu        TGE_REF_LIBRUB_COTIS.LIB_RESOLU%TYPE;
~:-w_first_pos        NUMBER;
~:-w_length_seq       NUMBER :=1;
~:-w_reste            TGE_REF_RUBRIQUE.LIBRUB%TYPE;
~:-j                  NUMBER ; 
~:-w_seq              TGE_REF_RUBRIQUE.LIBRUB%TYPE;
~:-wLibRUB            TGE_REF_RUBRIQUE.LIBRUB%TYPE;
~:-BEGIN
~:-  BEGIN 
~:-  SELECT LIBCAISSE
~:-  INTO   w_libcaisse
~:-  FROM   TGE_REF_CAISSE
~:-  WHERE  numpac= pNumPac
~:-  AND    codecaisse = pCodeCaisse;
~:-  EXCEPTION 
~:-    WHEN OTHERS THEN 
~:-     w_libcaisse := null;
~:-  END ;
~:-  wLibRUB := REPLACE(pLibRUB,'£','#');
~:-  select ( (LENGTH(wLibRUB) - LENGTH(REPLACE(wLibRUB,'#',NULL)) ) / NVL(LENGTH('#'),1) ) INTO w_nombre_occ from dual;
~:-  
~:-  IF w_nombre_occ =1 THEN
~:-    select substr(replace(wLibRUB,'#',w_libcaisse),0,40) INTO w_libResolu from dual;
~:-  ELSE
~:-
~:-    select instr (wLibRUB ,'#') into w_first_pos from dual;
~:-    for i IN w_first_pos..length(wLibRUB) Loop 
~:-      if substr(wLibRUB,i+1,1)='#' THEN 
~:-        w_length_seq:= w_length_seq+1;
~:-      else         
~:-         exit;
~:-      END IF;
~:-    END LOOP;
~:-    if w_length_seq =1 THEN 
~:-     select substr(replace(wLibRUB,'#',w_libcaisse),0,40) INTO w_libResolu from dual;
~:-    else
~:-      for k in 0..w_length_seq-1 loop
~:-        w_seq := w_seq ||'#';
~:-      end loop;
~:-      select replace(wLibRUB,w_seq,substr(w_libcaisse,0,w_length_seq)) INTO w_libResolu from dual;
~:-      w_seq := null;
~:-    end if;
~:-  END IF;
~:-  return w_libResolu;
~:-END getLibResolu ;
~:-      
~:-/**************************************************************************
~:-PROC : setCart15 
~:-DESC : cart 15
~:-***************************************************************************/
~:-PROCEDURE setCart15(
~:-    p_id    IN NUMBER,
~:-    lig     IN TGE_IMPORT_FSED%rowtype,
~:-    pNumPac IN TGE_REF_VRREP.NUMERO_DE_PAC%TYPE)
~:-IS
~:-w_codegroup tge_ref_caisse.codegroup%type;
~:-
~:-CURSOR REF_CAISSE(p_caisseref IN TGE_REF_CAISSE.caisseref%type,pNumPac IN TGE_REF_VRREP.NUMERO_DE_PAC%TYPE) is 
~:-  SELECT CODECAISSE
~:-  FROM   TGE_REF_CAISSE
~:-  WHERE  NUMPAC    = pNumPac
~:-  AND    caisseref = p_caisseref ;
~:-
~:-BEGIN
~:-  elt_tab_15.NUMPAC              := pNumPac;
~:-  elt_tab_15.CODERUB             := trim(SUBSTR(lig.donnees,10,4));
~:-  elt_tab_15.NOSEQU              := trim(SUBSTR(lig.donnees,24,1));
~:-  elt_tab_15.TYPERUB             := trim(SUBSTR(lig.donnees,29,1));
~:-  elt_tab_15.SENSRUB             := trim(SUBSTR(lig.donnees,30,1));
~:-  elt_tab_15.CODEUNITE           := trim(SUBSTR(lig.donnees,31,1));
~:-  elt_tab_15.LIBRUB              := trim(SUBSTR(lig.donnees,32,40));
~:-  elt_tab_15.CODEFICHE           := trim(SUBSTR(lig.donnees,72,1));
~:-  elt_tab_15.FLAGDVDR            := trim(SUBSTR(lig.donnees,73,1));
~:-  elt_tab_15.LIBLAN1             := trim(SUBSTR(lig.donnees,74,20));
~:-  elt_tab_15.LIBLAN2             := trim(SUBSTR(lig.donnees,94,20));
~:-  elt_tab_15.LIBLAN3             := trim(SUBSTR(lig.donnees,114,20));
~:-  elt_tab_15.NATURERUB           := trim(SUBSTR(lig.donnees,134,1));
~:-  elt_tab_15.ORDREXEC            := trim(SUBSTR(lig.donnees,135,4));
~:-  elt_tab_15.CODETAUX            := trim(SUBSTR(lig.donnees,139,3));
~:-  elt_tab_15.CODEACCDEREMISE     := trim(SUBSTR(lig.donnees,142,3));
~:-  elt_tab_15.QUALIFNOMBRE        := trim(SUBSTR(lig.donnees,145,1));
~:-  elt_tab_15.QUALIFTAUX          := trim(SUBSTR(lig.donnees,146,1));
~:-  elt_tab_15.QUALIFMONTANT       := trim(SUBSTR(lig.donnees,147,1));
~:-  elt_tab_15.FLAGMONTANT         := trim(SUBSTR(lig.donnees,148,1));
~:-  elt_tab_15.FLAGNB              := trim(SUBSTR(lig.donnees,149,1));
~:-  elt_tab_15.FLAGTAUX            := trim(SUBSTR(lig.donnees,150,1));
~:-  elt_tab_15.FLAGPCTG            := trim(SUBSTR(lig.donnees,151,1));
~:-  elt_tab_15.FLAGIMP             := trim(SUBSTR(lig.donnees,152,1));
~:-  elt_tab_15.POSITIONCURSEUR     := trim(SUBSTR(lig.donnees,153,1));
~:-  elt_tab_15.CODECAISSE          := trim(SUBSTR(lig.donnees,154,3));
~:-  elt_tab_15.CODEVENTILCOMPTABLE := trim(SUBSTR(lig.donnees,157,4));
~:-  elt_tab_15.TYPTRAIT            := trim(SUBSTR(lig.donnees,171,10));
~:-  elt_tab_15.FLAGARRET           := trim(SUBSTR(lig.donnees,161,1));
~:-  elt_tab_15.FLAGRATTACH         := trim(SUBSTR(lig.donnees,162,1));
~:-  elt_tab_15.OPTION_RETRO        := trim(SUBSTR(lig.donnees,163,1));
~:-  elt_tab_15.CSCP        		 := trim(SUBSTR(lig.donnees,164,1));
~:-   IF LENGTH(lig.donnees)>240 THEN
~:- elt_tab_15.TEXTE_EXPLICATIF    := trim(SUBSTR(lig.donnees,241,400));
~:- ELSE elt_tab_15.TEXTE_EXPLICATIF  := '' ;
~:- END IF ;
~:-
~:-  BEGIN
~:-     SELECT CODEGROUP
~:-     INTO   w_codegroup
~:-     FROM   TGE_REF_CAISSE
~:-     WHERE  NUMPAC     = pNumPac
~:-     AND    CODECAISSE = elt_tab_15.CODECAISSE ;
~:-  EXCEPTION
~:-    WHEN OTHERS THEN
~:-      w_codegroup :=NULL;
~:-  END ;
~:-  
~:-  IF tab_15_lib  IS NULL THEN
~:-     tab_15_lib := t_TGE_REF_LIBRUB_COTIS();
~:-  END IF;
~:-  
~:-  IF elt_tab_15.CODECAISSE  is null THEN 
~:-    elt_tab_15_lib.NUMPAC     := pNumPac;
~:-    elt_tab_15_lib.CODERUB    := nvl(elt_tab_15.CODERUB,'*');
~:-    elt_tab_15_lib.LIB_RESOLU := elt_tab_15.LIBRUB;
~:-    elt_tab_15_lib.CODECAISSE := '*';
~:-    elt_tab_15_lib.CAISSEREF  := '*';
~:-    
~:-    tab_15_lib.extend;
~:-    tab_15_lib(tab_15_lib.last):=elt_tab_15_lib;
~:-  ELSE
~:-    IF elt_tab_15.LIBRUB not like '%#%'  and elt_tab_15.LIBRUB not like '%£%' THEN  
~:-        elt_tab_15_lib.NUMPAC     := pNumPac;
~:-        elt_tab_15_lib.CODERUB    := nvl(elt_tab_15.CODERUB,'*');
~:-        elt_tab_15_lib.LIB_RESOLU := elt_tab_15.LIBRUB;      
~:-        IF w_codegroup ='R' THEN 
~:-          FOR i IN REF_CAISSE (elt_tab_15.CODECAISSE,pNumPac) LOOP
~:-          elt_tab_15_lib.CAISSEREF  :=elt_tab_15.CODECAISSE;
~:-          elt_tab_15_lib.CODECAISSE :=nvl(i.CODECAISSE,'*');
~:-          tab_15_lib.extend;
~:-          tab_15_lib(tab_15_lib.last):=elt_tab_15_lib;
~:-          END LOOP;
~:-        ELSE
~:-          elt_tab_15_lib.CODECAISSE :=nvl(elt_tab_15.CODECAISSE,'*');
~:-          elt_tab_15_lib.CAISSEREF  :='*';
~:-          tab_15_lib.extend;
~:-          tab_15_lib(tab_15_lib.last):=elt_tab_15_lib;
~:-        END IF;
~:-        
~:-    ELSE
~:-     FOR i IN REF_CAISSE (elt_tab_15.CODECAISSE,pNumPac) LOOP
~:-        elt_tab_15_lib.NUMPAC     := pNumPac;
~:-        elt_tab_15_lib.CODERUB    := nvl(elt_tab_15.CODERUB,'*');            
~:-        elt_tab_15_lib.CODECAISSE := nvl(i.CODECAISSE,'*');
~:-        elt_tab_15_lib.LIB_RESOLU := getLibResolu(pNumPac,elt_tab_15_lib.CODECAISSE,elt_tab_15.LIBRUB); 
~:-        IF w_codegroup ='R' THEN 
~:-          elt_tab_15_lib.CAISSEREF  := elt_tab_15.CODECAISSE;
~:-         ELSE
~:-           elt_tab_15_lib.CAISSEREF  := '*';
~:-         END IF;        
~:-         tab_15_lib.extend;
~:-         tab_15_lib(tab_15_lib.last):=elt_tab_15_lib;
~:-      END LOOP;
~:-    
~:-    END IF ;
~:-  END IF;     
~:-  
~:-  IF tab_15                      IS NULL THEN
~:-    tab_15                       := t_TGE_REF_RUBRIQUE();
~:-  END IF;
~:-  tab_15.extend;
~:-  tab_15(tab_15.last):=elt_tab_15;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id , 'setCart15' , lig.num_lig||','||pNumPac , err_code||'-'||err_msg );
~:-  raise_application_error(-20000, 'FSED cart 15  '|| sqlerrm);
~:-END setCart15;
~:-/*******************************************************************
~:-PROC : setCart17
~:-DESC :  cart 17
~:-*******************************************************************/
~:-PROCEDURE setCart17(
~:-    p_id IN NUMBER,
~:-    lig TGE_IMPORT_FSED%rowtype,
~:-    pNumPac TGE_REF_VRREP.NUMERO_DE_PAC%TYPE)
~:-IS
~:-  type_carte VARCHAR(3) := '';
~:-BEGIN
~:-  type_carte                   := trim(SUBSTR(lig.donnees,10,2));
~:-  IF type_carte                 ='CR' THEN
~:-    elt_tab_17CR.NUMPAC        := pNumPac;
~:-    elt_tab_17CR.CODERUB       := trim(SUBSTR(lig.donnees,13,4));
~:-    elt_tab_17CR.NOSEQU        := trim(SUBSTR(lig.donnees,18,3));
~:-    elt_tab_17CR.CONTEXTE      := trim(SUBSTR(lig.donnees,22,50));
~:-    elt_tab_17CR.CONTEXTESUITE := trim(SUBSTR(lig.donnees,72,30));
~:-    IF tab_17CR                IS NULL THEN
~:-      tab_17CR                 := t_TGE_REF_RUBRIQUE_CONTEXTE();
~:-    END IF;
~:-    tab_17CR.extend;
~:-    tab_17CR(tab_17CR.last)         :=elt_tab_17CR;
~:-  elsif type_carte                   ='DM' THEN
~:-    IF trim(SUBSTR(lig.donnees,13,1))='F' THEN
~:-      elt_tab_17DMF.NUMPAC          := pNumPac;
~:-      elt_tab_17DMF.ELEMENT         := trim(SUBSTR(lig.donnees,15,4));
~:-      elt_tab_17DMF.CODEMODIF       := trim(SUBSTR(lig.donnees,134,1));
~:-      elt_tab_17DMF.LIBELLE         := trim(SUBSTR(lig.donnees,22,35));
~:-      elt_tab_17DMF.TYPE            := trim(SUBSTR(lig.donnees,58,1));
~:-      elt_tab_17DMF.LONGUEUR        := to_number(trim(SUBSTR(lig.donnees,60,2)));
~:-      elt_tab_17DMF.NBDECI          := to_number(trim(SUBSTR(lig.donnees,62,1)));
~:-      elt_tab_17DMF.MASQUE          := to_number(trim(SUBSTR(lig.donnees,64,2)));
~:-      elt_tab_17DMF.STATUT          := trim(SUBSTR(lig.donnees,67,1));
~:-      elt_tab_17DMF.GROUPE          := trim(SUBSTR(lig.donnees,69,3));
~:-      elt_tab_17DMF.OCC1            := to_number(trim(SUBSTR(lig.donnees,73,3)));
~:-      elt_tab_17DMF.OCC2            := to_number(trim(SUBSTR(lig.donnees,77,3)));
~:-      elt_tab_17DMF.IND1            := trim(SUBSTR(lig.donnees,81,5));
~:-      elt_tab_17DMF.IND2            := trim(SUBSTR(lig.donnees,86,4));
~:-      elt_tab_17DMF.TEMOINS         := trim(SUBSTR(lig.donnees,91,42));
~:-      elt_tab_17DMF.CALCUL_RETRO    := trim(SUBSTR(lig.donnees,136,1));
~:-      elt_tab_17DMF.CSCP    		:= trim(SUBSTR(lig.donnees,137,1));
~:-      IF tab_17DMF                  IS NULL THEN
~:-        tab_17DMF                   := t_TGE_REF_DICOZ();
~:-      END IF;
~:-      tab_17DMF.extend;
~:-      tab_17DMF(tab_17DMF.last) :=elt_tab_17DMF;
~:-    END IF;
~:-  END IF;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id , 'setCart17' , lig.num_lig||','||pNumPac , err_code||'-'||err_msg );
~:-  raise_application_error(-20000, 'FSED cart 17  '|| sqlerrm);
~:-END setCart17;
~:-/***********************************************************************
~:-PROC : getNumLigne
~:-DESC : recuperer le code table
~:-*************************************************************************/
~:-PROCEDURE getNumLigne(
~:-    p_id IN NUMBER)
~:-IS
~:-BEGIN
~:-  OPEN cur_numlig00(p_id) ;
~:-  LOOP
~:-    FETCH cur_numlig00 BULK COLLECT INTO tab_numLigne00 ;
~:-    EXIT
~:-  WHEN cur_numlig00%NOTFOUND;
~:-  END LOOP;
~:-  CLOSE cur_numlig00;
~:-  OPEN cur_numlig99(p_id) ;
~:-  LOOP
~:-    FETCH cur_numlig99 BULK COLLECT INTO tab_numLigne99 ;
~:-    EXIT
~:-  WHEN cur_numlig99%NOTFOUND;
~:-  END LOOP;
~:-  CLOSE cur_numlig99;
~:-END getNumLigne;
~:-/***********************************************************************
~:-FUNCT : GET_H2_COLONNE
~:-DESC : recuperer la colonne clé de type DATE pour les tables de type H2
~:-*************************************************************************/
~:-FUNCTION GET_H2_COLONNE(
~:-    p_table_name IN VARCHAR2)
~:-  RETURN VARCHAR2
~:-IS
~:-  w_column_name user_cons_columns.column_name%TYPE;
~:-BEGIN
~:-  BEGIN
~:-    SELECT column_name
~:-    INTO w_column_name
~:-    FROM user_cons_columns
~:-    WHERE table_name     =p_table_name
~:-    AND constraint_name IN
~:-      (SELECT user_constraints.constraint_name
~:-      FROM user_constraints
~:-      WHERE user_cons_columns.table_name =user_constraints.table_name
~:-      AND CONSTRAINT_TYPE                ='P'
~:-      )
~:-    AND column_name IN
~:-      (SELECT tab.column_name
~:-      FROM user_tab_columns tab
~:-      WHERE tab.table_name =p_table_name
~:-      AND tab.data_type    ='DATE'
~:-      );
~:-    RETURN(w_column_name);
~:-  EXCEPTION
~:-  WHEN NO_DATA_FOUND THEN
~:-    RETURN(NULL);
~:-  END;
~:-END GET_H2_COLONNE;
~:-/***********************************************************************
~:-FUNCT : GET_M3_COLONNE
~:-DESC : recuperer la colonne clé
~:-*************************************************************************/
~:-FUNCTION GET_M3_COLONNE(
~:-    p_table_name IN VARCHAR2)
~:-  RETURN VARCHAR2
~:-IS
~:-  w_column_name user_cons_columns.column_name%TYPE;
~:-BEGIN
~:-  BEGIN
~:-    SELECT column_name
~:-    INTO w_column_name
~:-    FROM user_cons_columns
~:-    WHERE table_name     =p_table_name
~:-    AND constraint_name IN
~:-      (SELECT user_constraints.constraint_name
~:-      FROM user_constraints
~:-      WHERE user_cons_columns.table_name =user_constraints.table_name
~:-      AND CONSTRAINT_TYPE                ='P'
~:-      )
~:-    AND column_name IN
~:-      (SELECT tab.column_name
~:-      FROM user_tab_columns tab
~:-      WHERE tab.table_name     =p_table_name
~:-      AND tab.data_type!       ='DATE'
~:-      AND tab.column_name NOT IN ('NUMPAC','PAIEZAD','PACMAT')
~:-      );
~:-    RETURN(w_column_name);
~:-  EXCEPTION
~:-  WHEN NO_DATA_FOUND THEN
~:-    RETURN(NULL);
~:-  END;
~:-END GET_M3_COLONNE;
~:-/***********************************************************************
~:-FUNCT : GET_MONTH_00 
~:-DESC : retourne le  mois de paie indiqué dans le FSED carte 00
~:-*************************************************************************/
~:-FUNCTION GET_PERIODE_00(
~:-    p_id       IN NUMBER ,
~:-    p_numligne IN NUMBER )
~:-  RETURN NUMBER
~:-IS
~:-  w_moi_eff NUMBER ;
~:-BEGIN
~:-  SELECT SUBSTR(donnees,70,6)
~:-  INTO w_moi_eff
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE id_trt =p_id
~:-  AND NUM_LIG  =p_numligne;
~:-  RETURN (w_moi_eff);
~:-END GET_PERIODE_00 ;
~:-/***********************************************************************
~:-FUNCT : IS_VALID_COLUMN 
~:-DESC : retourne 1 si c'est une colonne de la table
~:-*************************************************************************/
~:-FUNCTION IS_VALID_COLUMN(
~:-    p_TABLE_NAME VARCHAR2 ,
~:-    p_colonne IN VARCHAR2 )
~:-  RETURN NUMBER
~:-IS
~:-  flag NUMBER ;
~:-BEGIN
~:-  SELECT COUNT(*)
~:-  INTO flag
~:-  FROM user_tab_columns
~:-  WHERE table_name =p_TABLE_NAME
~:-  AND column_name  =p_colonne;
~:-  RETURN (flag);
~:-END IS_VALID_COLUMN ;
~:-/***********************************************************************
~:-FUNCT : GET_NUMPAC 
~:-DESC : retourne le  numpac carte 00
~:-*************************************************************************/
~:-FUNCTION GET_NUMPAC(
~:-    p_id       IN NUMBER ,
~:-    p_numligne IN NUMBER )
~:-  RETURN VARCHAR2
~:-IS
~:-  w_numpac VARCHAR2(7) ;
~:-BEGIN
~:-  SELECT SUBSTR(donnees,1,6)
~:-  INTO w_numpac
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE id_trt =p_id
~:-  AND NUM_LIG  =p_numligne;
~:-  RETURN (w_numpac);
~:-END GET_NUMPAC ;
~:-/****************************************************************
~:-FUNCT : GET_Statement 
~:-DESC : retourne sql statment avec le type de colonne
~:-*****************************************************************/
~:-    FUNCTION GET_Statement(
~:-    p_type_colonne IN VARCHAR2 ,
~:-    p_type_DICOZ   IN VARCHAR2 ,
~:-    p_colonne      IN VARCHAR2 ,
~:-    p_alias        IN VARCHAR2 )
~:-  RETURN VARCHAR2
~:-IS
~:-  v_alias VARCHAR2(100):=' ';
~:-BEGIN
~:-  IF p_alias IS NOT NULL THEN
~:-    v_alias  :=p_alias||'.';
~:-  END IF;
~:-  IF p_type_colonne ='N' AND p_type_DICOZ ='N' THEN
~:-    RETURN('TO_NUMBER(replace('||v_alias||p_colonne||',''.'','',''))');
~:-  ELSIF p_type_DICOZ ='D1' AND p_type_colonne='D' THEN
~:-    RETURN('decode(is_date('||v_alias||p_colonne||',''YYYYMMDD''),1,TO_date('||v_alias||p_colonne||',''YYYYMMDD''),null)');--yyyyMMdd
~:-  ELSIF p_type_DICOZ ='D2' AND p_type_colonne='D' THEN
~:-    RETURN('decode(is_date('||v_alias||p_colonne||',''MMYYYY''),1,TO_date('||v_alias||p_colonne||',''MMYYYY''),decode(is_date('||v_alias||p_colonne||',''YYYYMM''),1,TO_date('||v_alias||p_colonne||',''YYYYMM''),null))');--MMyyyy/YYYYMM
~:-   ELSIF p_type_DICOZ ='D3' AND p_type_colonne='D' THEN
~:-    RETURN('decode(is_date('||v_alias||p_colonne||',''YYYYMM''),1,TO_date('||v_alias||p_colonne||',''YYYYMM''),null)');--yyyyMM
~:-   ELSIF p_type_DICOZ ='D4' AND p_type_colonne='D' THEN
~:-    RETURN('decode(is_date('||v_alias||p_colonne||',''DD''),1,TO_date('||v_alias||p_colonne||',''DD''),null)');--dd
~:-   ELSIF p_type_DICOZ ='D5' AND p_type_colonne='D' THEN
~:-    RETURN('decode(is_date('||v_alias||p_colonne||',''MM''),1,TO_date('||v_alias||p_colonne||',''MM''),null)');--MM 
~:-   ELSIF p_type_DICOZ ='D6' AND p_type_colonne='D' THEN
~:-    RETURN('decode(is_date('||v_alias||p_colonne||',''YYYYMMDD''),1,TO_date('||v_alias||p_colonne||',''YYYYMMDD''),null)');--yyyy
~:-   ELSIF p_type_DICOZ ='D7' AND p_type_colonne='D' THEN
~:-    RETURN('decode(is_date('||v_alias||p_colonne||',''YYYYMMDD''),1,TO_date('||v_alias||p_colonne||',''YYYYMMDD''),null)');
~:-  ELSIF p_type_DICOZ ='V' THEN
~:-    RETURN('TO_CHAR('||v_alias||p_colonne||')');
~:-  ELSE
~:-    RETURN(v_alias||p_colonne);
~:-  END IF;
~:-END GET_STATEMENT ;
~:-/****************************************************************
~:-FUNCT : GET_Statement 
~:-DESC : 
~:-*****************************************************************/
~:-FUNCTION GET_Statement(
~:-    p_type_colonne IN VARCHAR2 ,
~:-    p_type_DICOZ   IN VARCHAR2,
~:-    p_colonne      IN VARCHAR2 )
~:-  RETURN VARCHAR2
~:-IS
~:-BEGIN
~:-  RETURN GET_Statement (p_type_colonne,p_type_DICOZ , p_colonne , 'i');
~:-END GET_STATEMENT ;
~:-/****************************************************************
~:-FUNCT : GET_TYPE_RETOUR 
~:-DESC  : retourne type de retour
~:-*****************************************************************/
~:-FUNCTION GET_TYPE_RETOUR(
~:-    p_id       IN NUMBER ,
~:-    p_numligne IN NUMBER)
~:-  RETURN VARCHAR2
~:-IS
~:-  w_type_retour VARCHAR2(2);
~:-BEGIN
~:-  SELECT SUBSTR(DONNEES,68,2)
~:-  INTO w_type_retour
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE id_trt      =p_id
~:-  AND NUM_LIG       =p_numligne;
~:-  IF w_type_retour IS NULL OR w_type_retour='  ' OR w_type_retour='RT' THEN
~:-    w_type_retour  :='RN';
~:-  END IF;
~:-  RETURN (w_type_retour);
~:-END GET_TYPE_RETOUR ;
~:-/*****************************************************
~:-PROC : purge_carte80
~:-DESC :
~:-*****************************************************/
~:-PROCEDURE purge_carte80(
~:-    p_id    IN NUMBER,
~:-    p_mois  IN VARCHAR2,
~:-    p_lig00 IN NUMBER ,
~:-    p_lig99 IN NUMBER )
~:-IS
~:-BEGIN
~:-  DELETE
~:-  FROM DIC_TGE_RESPAIE_RUBRIQUE
~:-  WHERE (numpac,paiezad,TO_CHAR(to_date(periodepaie),'YYYYMM')) IN
~:-    (SELECT numpac ,
~:-      paiezad ,
~:-      PERIODEPAIE
~:-    FROM TGE_IMPORT_FSED_80
~:-    WHERE id_trt =p_id
~:-    AND numligne BETWEEN p_lig00 AND p_lig99
~:-    GROUP BY(numpac,paiezad,PERIODEPAIE)
~:-    HAVING COUNT(*)>0
~:-    ) ;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id , 'purge_carte80' , NULL, err_code||'-'||err_msg );
~:-  raise_application_error(-20000, 'FSED purge_carte80  '|| sqlerrm);
~:-END purge_carte80;
~:-/******************************************************************
~:-PROC : insertCart80 
~:-********************************************************************/
~:-PROCEDURE sous_insertCart80(
~:-    p_id    IN NUMBER,
~:-    p_newId IN NUMBER)
~:-IS
~:-  req          VARCHAR2(32767);
~:-  v_start      NUMBER;
~:-  v_stop       NUMBER;
~:-  v_flag_cart  NUMBER;
~:-  w_moi_retour NUMBER;
~:-  w_numpac TGE_REF_MAPDO.NUMPAC%TYPE;
~:-  jobno         NUMBER;
~:-  w_type_retour VARCHAR2(2);
~:-BEGIN
~:-  v_start := DBMS_UTILITY.GET_TIME;
~:-  getNumLigne(p_id);
~:-  IF tab_numLigne00 IS NOT NULL AND tab_numLigne99 IS NOT NULL THEN
~:-    FOR i IN tab_numLigne00.first..tab_numLigne00.last
~:-    LOOP
~:-      IF i            <=tab_numLigne99.count AND tab_numLigne99(i) IS NOT NULL THEN
~:-        w_moi_retour  := GET_PERIODE_00(p_id,tab_numLigne00(i));
~:-        w_numpac      := GET_NUMPAC(p_id,tab_numLigne00(i));
~:-        w_type_retour := GET_TYPE_RETOUR(p_id,tab_numLigne00(i));
~:-        insert_gap_trt(p_id,w_numpac,w_moi_retour,w_type_retour);
~:-        insert_gap_trt_suivi(p_id,'DEBUT',NULL,'BATCH',w_type_retour);
~:-        purge_carte80(p_id,w_moi_retour,tab_numLigne00(i),tab_numLigne99(i));
~:-        -- la periodepaie est forcé au premier jour du moi
~:-        req := 'INSERT INTO DIC_TGE_RESPAIE_RUBRIQUE (NUMPAC,PAIEZAD,PACMAT,CLASSE,CAISSE_RUB,CLEIMP,CODERES,CODERUB,IMPUTATION,MONTANT,NOMBRE,ORDRE,PERIODEPAIE,SENS,TAUX,TYPE,DATE_DEB_ARRET,PERIODE_RATTACH_DEB,PERIODE_RATTACH_FIN,PERIODE_AFFECTATION,MATRIC) ';
~:-        req := req ||' SELECT DISTINCT i.numpac,i.paiezad,i.pacmat ,i.classe,i.attribut ,';--DIT  50818
~:-        req := req ||' (dense_rank() over(partition by i.NUMPAC, i.PAIEZAD, i.CODERUB, i.CODERES order by i.NUMLIGNE)-1 )as CLEIMP';
~:-        req := req ||' ,i.coderes,i.coderub,i.imputation, case when  i.sens =''-''  then ((i.montant)*(-1)) else i.montant end as montant ,';
~:-        req         := req ||' i.nombre,to_number(r.ORDREXEC),TO_DATE('||w_moi_retour||'01,''YYYYMMDD''),';
~:-        req         := req ||' i.sens,i.taux,';
~:-        req         := req ||' i.type,to_date(i.DATE_DEB_ARRET,''yyyymmdd''),to_date(i.PERIODE_RATTACH_DEB,''yyyymmdd''),to_date(i.PERIODE_RATTACH_FIN,''yyyymmdd''),to_date(replace(i.PERIODE_AFFECTATION,''000000'',null),''yyyymm''),i.MATRICULE FROM TGE_IMPORT_FSED_80 i,TGE_REF_RUBRIQUE r  WHERE id_trt= :id_trt ';
~:-        req         := req ||' AND r.coderub= i.coderub AND r.numpac = i.numpac ';
~:-        req         := req ||' AND ( ';
~:-        req         := req ||' (numligne >=' ||tab_numLigne00(i)||' AND numligne <= '||tab_numLigne99(i)||') ';
~:-        req         := req ||' ) ';
~:-        v_flag_cart := 1;
~:-      ELSE
~:-        v_flag_cart := 0;
~:-      END IF;
~:-      IF req IS NOT NULL THEN
~:-        insert_gap_trt(p_id,w_numpac,w_moi_retour,w_type_retour);
~:-        EXECUTE IMMEDIATE req USING p_id;
~:-      ELSIF req IS NULL OR v_flag_cart = 0 THEN
~:-        FSED_ERREUR( p_id , 'sous_insertCart80' , NULL, err_code||'-'||err_msg );
~:-      END IF;
~:-    END LOOP;
~:-  ELSE
~:-    req := NULL;
~:-  END IF;
~:-  merge INTO
~:-  (SELECT * FROM GAP_TRT_LISTE_MAT WHERE id_trt=p_id
~:-  ) a USING
~:-  (SELECT DISTINCT numpac,
~:-    NVL(pacmat,paiezad) AS pacmat
~:-  FROM TGE_import_fsed_80
~:-  WHERE id_trt     =p_id
~:-  ) b ON (a.numpac =b.numpac AND a.pacmat=b.pacmat)
~:-WHEN NOT matched THEN
~:-  INSERT
~:-    (a.id_trt,a.numpac,a.pacmat
~:-    ) VALUES
~:-    (p_id,b.numpac,b.pacmat
~:-    );
~:-  tab_numLigne00.delete;
~:-  tab_numLigne99.delete;
~:-  v_stop := DBMS_UTILITY.GET_TIME;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := err_msg||' '||SQLERRM;
~:-  --DBMS_OUTPUT.PUT_LINE(req);
~:-  --FIXME utiliser la procédure trace_dbms_output()
~:-  FSED_ERREUR( p_id , 'insertCart80' , p_id || ',' || p_newId, err_code||'-'||err_msg||'- Requete : '||req);
~:-  raise_application_error(-20000, 'FSED insertCart80  '|| sqlerrm);
~:-END sous_insertCart80;
~:-/******************************************************************
~:-PROC : insertCart30 (p_id IN NUMBER)
~:-DESC :
~:-********************************************************************/
~:-PROCEDURE insertCart80
~:-  (
~:-    p_id    IN NUMBER,
~:-    p_newId IN NUMBER
~:-  )
~:-IS
~:-  PRAGMA AUTONOMOUS_TRANSACTION;
~:-  jobno    NUMBER;
~:-  finished NUMBER;
~:-BEGIN
~:-  finished:=1;
~:-  dbms_job.submit(jobno, 'sous_insertCart80('||p_id||','||p_newid||')',sysdate, NULL);
~:-END insertCart80;
~:-/*******************************************************************
~:-PROC : tmp_histo_fsed_30
~:-Fonc :
~:-********************************************************************/
~:-PROCEDURE tmp_histo_fsed_30(
~:-    p_id     IN NUMBER ,
~:-    p_numpac IN TGE_REF_MAPDO.NUMPAC%TYPE,
~:-    p_moi    IN VARCHAR2
~:-  )
~:-IS
~:-  CURSOR tmp_30
~:-  IS
~:-    SELECT DISTINCT do.DONNEEGXP ,
~:-      ( SELECT DISTINCT data_type
~:-      FROM user_tab_columns cln
~:-      WHERE cln.table_name = do.TABLEGXP
~:-      AND cln.column_name  = do.DONNEEGXP
~:-      ) AS typeelt,
~:-    dicoz.longueur
~:-  FROM
~:-    (SELECT * FROM TGE_REF_MAPDO WHERE numpac=p_numpac
~:-    UNION ALL
~:-    SELECT *
~:-    FROM TGE_REF_MAPDO
~:-    WHERE numpac     ='*'
~:-    AND ELEMENT NOT IN
~:-      (SELECT ELEMENT FROM TGE_REF_MAPDO WHERE numpac=p_numpac
~:-      )
~:-    ) DO ,tge_import_fsed_30 imp,tge_ref_dicoz dicoz
~:-  WHERE do.TABLEGXP    ='DIC_ADM_CONTRAT_HISTO'
~:-  AND imp.code_element =do.element
~:-  AND imp.tablegxp     =do.tablegxp
~:-  AND imp.donneegxp    =do.donneegxp
~:-  AND id_trt           =p_id
~:-  AND imp.numpac       = p_numpac
~:-  AND imp.TABLEGXP     =do.tablegxp
~:-  AND imp.code_element =do.element
~:-  AND dicoz.element    = do.element
~:-  AND dicoz.numpac     = imp.numpac ;
~:-  stmtClause CLOB ;
~:-  cmp NUMBER :=0;
~:-BEGIN
~:-  stmtClause := 'insert into TGE_FSED_30_TEMPORARY (id_trt,numpac,pacmat,paiezad,TOUPDATE)  (SELECT ';
~:-  stmtClause :=stmtClause||'/*+  BATCH_TABLE_ACCESS_BY_ROWID(@"SEL$291F8F59" "DACH2"@"SEL$3") LEADING(@"SEL$B29E968D" "VW_SQ_1"@"SEL$E9784550" "T"@"SEL$2" "A"@"SEL$2") INDEX(@"SEL$B29E968D" "A"@"SEL$2" ("DIC_ADM_CONTRAT_HISTO"."NUMPAC" "DIC_ADM_CONTRAT_HISTO"."PAIEZAD" "DIC_ADM_CONTRAT_HISTO"."DATE_EFF")) BATCH_TABLE_ACCESS_BY_ROWID(@"SEL$B29E968D" "T"@"SEL$2") NO_ACCESS(@"SEL$B29E968D" "VW_SQ_1"@"SEL$E9784550") BATCH_TABLE_ACCESS_BY_ROWID(@"SEL$5" "F"@"SEL$5") USE_HASH(@"SEL$4FDF941B" "HISTO"@"SEL$1") LEADING(@"SEL$4FDF941B" "COMPTEUR"@"SEL$4" "HISTO"@"SEL$1") NO_ACCESS(@"SEL$4FDF941B" "HISTO"@"SEL$1") NO_ACCESS(@"SEL$4FDF941B" "COMPTEUR"@"SEL$4") UNNEST(@"SEL$3") */ ';
~:-  stmtClause :=stmtClause||p_id||','''||p_numpac||''',compteur.pacmat,compteur.paiezad,decode(nvl(cmp,-1),cmp1,''N'',''O'') as TOUPDATE FROM ';
~:-  stmtClause :=stmtClause||' (SELECT t.pacmat,t.paiezad,count(*) as cmp  FROM tge_import_fsed_30 t , dic_adm_contrat_histo a  where t.numpac ='''||p_numpac||''' and t.id_trt='||p_id||' and t.tablegxp=''DIC_ADM_CONTRAT_HISTO''';
~:-  stmtClause :=stmtClause||' and a.paiezad = t.paiezad and a.pacmat =t.pacmat ';
~:-  stmtClause :=stmtClause||' and a.numpac='''||p_numpac||''' and a.date_eff= ';
~:-  stmtClause :=stmtClause||'(select max(dach2.date_eff) from dic_adm_contrat_histo dach2 where dach2.date_eff<=TO_DATE('''||p_moi||'01'',''YYYYMMDD'') and dach2.paiezad = t.paiezad ';
~:-  stmtClause :=stmtClause||' AND dach2.pacmat= t.pacmat and dach2.numpac='''||p_numpac||''')';
~:-  stmtClause :=stmtClause|| ' AND (';
~:-  FOR c IN tmp_30
~:-  LOOP
~:-    IF cmp!=0 THEN
~:-      stmtClause :=stmtClause||' OR ';
~:-    END IF;
~:-    cmp                      := cmp+1;
~:-    IF c.typeelt              ='DATE' THEN
~:-      stmtClause             :=stmtClause||' ( NVL(to_char(a.'||c.donneegxp;
~:-      IF c.longueur   =6 THEN
~:-        stmtClause           :=stmtClause||',''YYYYMM''';
~:-      elsif c.longueur=8 THEN
~:-        stmtClause           :=stmtClause||',''YYYYMMDD''';
~:-      elsif c.longueur=4 THEN
~:-        stmtClause           :=stmtClause||',''YYYY''';
~:-      elsif c.longueur=2 THEN
~:-        stmtClause           :=stmtClause||',''MM''';
~:-      END IF;
~:-      stmtClause   :=stmtClause||'),''NULL'')=NVL(to_char(replace(replace(t.valeur,'' '','''')';
~:-      IF c.longueur   =6 THEN
~:-        stmtClause           :=stmtClause||',''000000'',null';
~:-      elsif c.longueur=8 THEN
~:-        stmtClause           :=stmtClause||',''00000000'',null';
~:-      elsif c.longueur=4 THEN
~:-        stmtClause           :=stmtClause||',''0000'',null';
~:-      elsif c.longueur=2 THEN
~:-        stmtClause           :=stmtClause||',''00'',null';
~:-      END IF;
~:-      stmtClause   :=stmtClause||')),''NULL'') ';
~:-      stmtClause   :=stmtClause||' AND t.donneegxp ='''||c.donneegxp||''')' ;
~:-    elsif c.typeelt ='VARCHAR2' THEN
~:-      stmtClause   :=stmtClause||'( NVL(a.'||c.donneegxp||',''NULL'')=NVL(to_char(t.valeur),''NULL'') AND t.donneegxp ='''||c.donneegxp||''')' ;
~:-    ELSE
~:-      stmtClause :=stmtClause||' ( NVL(a.'||c.donneegxp||',0)=nvl(is_number(t.valeur),0) AND t.donneegxp ='''||c.donneegxp||''')' ;
~:-    END IF;
~:-  END LOOP;
~:-  stmtClause :=stmtClause|| ' )group by t.pacmat,t.paiezad)HISTO right join (select f.pacmat,f.paiezad,count(*)as cmp1 from tge_import_fsed_30 f WHERE f.numpac='''||p_numpac||''' AND f.id_trt  ='||p_id||' AND f.tablegxp=''DIC_ADM_CONTRAT_HISTO'' group by f.pacmat,f.paiezad) Compteur ';
~:-  stmtClause :=stmtClause||' ON  histo.pacmat =compteur.pacmat and histo.paiezad =compteur.paiezad ) ';
~:-  FSED_AVANCEMENT(p_id,'tmp_histo_fsed_30 stmtClause= '||substr(stmtClause,0,3800) );
~:-  --dbms_output.put_line('test '||stmtClause);
~:-  --FIXME utiliser la procédure trace_dbms_output()
~:-   EXECUTE_IMMEDIATE_STRING  (stmtClause,0);
~:-END tmp_histo_fsed_30;
~:-/*******************************************************************
~:-PROC : sous_insertCart30
~:-Fonc : traitement des tables M1,M7,M3ANNEE,M3MOIS,MULTIPLE,OCCC
~:-UNIQUE,H2 et AVPERS.
~:-********************************************************************/
~:-PROCEDURE sous_insertCart30(
~:-    p_id    IN NUMBER,
~:-    p_newId IN NUMBER,
~:-    p_table IN VARCHAR2 )
~:-IS
~:-  req               CLOB;
~:-  reqChrono         VARCHAR2(500);
~:-  reqRc             CLOB;
~:-  w_date_RC         DATE;
~:-  w_date_indic      DATE;
~:-  w_date_COMP       DATE;
~:-  reqPropag         CLOB;
~:-  reqTrace          CLOB;
~:-  reqW580           CLOB;
~:-  reqWL52           CLOB;
~:-  reqUdpateDate     CLOB;
~:-  ssreq             CLOB;
~:-  v_start           NUMBER;
~:-  v_stop            NUMBER;
~:-  w_table           TGE_REF_MAPDO.TABLEGXP%TYPE;
~:-  w_table_param     TGE_REF_MAPDO.TABLEGXP%TYPE;
~:-  w_type_colonne    VARCHAR2(1);
~:-  w_cle             VARCHAR2(12);
~:-  w_type            VARCHAR2(1);
~:-  w_colonne_30      VARCHAR2(12);
~:-  coldtfin          VARCHAR2(50);
~:-  v_flag_cart       NUMBER;
~:-  w_date_eff        user_cons_columns.column_name%TYPE;
~:-  w_code_caisse     user_cons_columns.column_name%TYPE;
~:-  w_ann_social      VARCHAR2(100);
~:-  w_table_soc       VARCHAR2(100);
~:-  w_type_retour     VARCHAR2(2);
~:-  w_moi_retour      NUMBER;
~:-  w_numpac          TGE_REF_MAPDO.NUMPAC%TYPE;
~:-  w_trace           VARCHAR2(50);
~:-  tabW580_h         TAB_DATE_w580_H;
~:-  tabWL52_h         TAB_DATE_WL52_H;
~:-  objTable          TGE_REF_MAPTA%rowtype;
~:-  w_00              NUMBER;
~:-  w_99              NUMBER;
~:-  w_elem            VARCHAR2(4);
~:-  w_occ             VARCHAR2(2);
~:-  
~:-  CURSOR cur_element ( p_numpac IN VARCHAR2)
~:-  IS
~:-    SELECT DISTINCT do.DONNEEGXP ,
~:-      (SELECT DISTINCT data_type
~:-       FROM   user_tab_columns cln
~:-       WHERE  cln.table_name = do.TABLEGXP
~:-       AND    cln.column_name  = do.DONNEEGXP
~:-      ) AS typeelt,
~:-     ( select case 
~:-       when type='N' and masque=1 THEN 'D1'  
~:-       when type='N' and masque=2 THEN 'D2' 
~:-       when type='N' and masque=3 THEN 'D3' 
~:-       when type='N' and masque=4 THEN 'D4' 
~:-       when type='N' and masque=5 THEN 'D5' 
~:-       when type='N' and masque=6 THEN 'D6' 
~:-       when type='N' and masque=7 THEN 'D7' 
~:-       when type='P'  OR (type ='N' AND MASQUE NOT IN (1,2,3,4,5,6,7))THEN 'N' 
~:-       WHEN type ='A' THEN 'V'
~:-       ELSE type 
~:-       end as typeDICOZ
~:-      from tge_ref_dicoz d where numpac=p_numpac and element=do.element )as typeDICOZ
~:-      
~:-   FROM
~:-    (SELECT * FROM TGE_REF_MAPDO WHERE numpac=p_numpac
~:-     UNION ALL
~:-     SELECT *
~:-     FROM TGE_REF_MAPDO
~:-     WHERE numpac     ='*'
~:-     AND ELEMENT NOT IN
~:-      (SELECT ELEMENT FROM TGE_REF_MAPDO WHERE numpac=p_numpac)
~:-    ) DO 
~:-  WHERE do.TABLEGXP=p_table
~:-  AND EXISTS
~:-    (SELECT code_element,
~:-            tablegxp,
~:-            donneegxp
~:-    FROM  tge_import_fsed_30 imp
~:-    WHERE id_trt       = p_id
~:-    AND   imp.numpac   = p_numpac
~:-    AND   imp.TABLEGXP = do.tablegxp
~:-    AND   imp.code_element = do.element
~:-    ) ;
~:-
~:-  CURSOR cur_element_histo ( p_numpac IN VARCHAR2)
~:-  IS
~:-    SELECT DISTINCT do.DONNEEGXP ,
~:-      ( SELECT DISTINCT data_type
~:-        FROM user_tab_columns cln
~:-        WHERE cln.table_name = do.TABLEGXP
~:-        AND cln.column_name  = do.DONNEEGXP
~:-      ) AS typeelt
~:-    FROM
~:-     (SELECT * FROM TGE_REF_MAPDO WHERE numpac=p_numpac
~:-      UNION ALL
~:-      SELECT *
~:-      FROM TGE_REF_MAPDO
~:-      WHERE numpac     ='*'
~:-      AND ELEMENT NOT IN
~:-      (SELECT ELEMENT FROM TGE_REF_MAPDO WHERE numpac=p_numpac)
~:-    ) DO
~:-  WHERE do.TABLEGXP=p_table
~:-  AND EXISTS
~:-    (SELECT code_element,
~:-      tablegxp,
~:-      donneegxp
~:-    FROM tge_import_fsed_30 imp
~:-    WHERE id_trt        =p_id
~:-    AND imp.numpac      = p_numpac
~:-    AND imp.TABLEGXP    =do.tablegxp
~:-    AND imp.code_element=do.element
~:-    ) ;
~:-
~:-  CURSOR cur_SECUPACMAT ( p_numpac IN VARCHAR2)
~:-  IS
~:-    SELECT DISTINCT do.DONNEEGXP ,
~:-      ( SELECT DISTINCT data_type
~:-      FROM user_tab_columns cln
~:-      WHERE cln.table_name = 'SECUPACMAT'
~:-      AND cln.column_name  = do.DONNEEGXP
~:-      ) AS typeelt,
~:-      ( select case 
~:-       when type='N' and masque=1 THEN 'D1'  
~:-       when type='N' and masque=2 THEN 'D2' 
~:-       when type='N' and masque=3 THEN 'D3' 
~:-       when type='N' and masque=4 THEN 'D4' 
~:-       when type='N' and masque=5 THEN 'D5' 
~:-       when type='N' and masque=6 THEN 'D6' 
~:-       when type='N' and masque=7 THEN 'D7' 
~:-       when type='P'  OR (type ='N' AND MASQUE NOT IN (1,2,3,4,5,6,7))THEN 'N' 
~:-       WHEN type ='A' THEN 'V'
~:-       ELSE type 
~:-       end as typeDICOZ
~:-      from tge_ref_dicoz d where numpac=p_numpac and element=do.element )as typeDICOZ
~:-  FROM
~:-    (SELECT * FROM TGE_REF_MAPDO WHERE numpac=p_numpac
~:-    UNION ALL
~:-    SELECT *
~:-    FROM TGE_REF_MAPDO
~:-    WHERE numpac     ='*'
~:-    AND ELEMENT NOT IN
~:-      (SELECT ELEMENT FROM TGE_REF_MAPDO WHERE numpac=p_numpac
~:-      )
~:-    ) DO,
~:-    user_tab_columns u
~:-  WHERE do.TABLEGXP ='DIC_ADM_CONTRAT'
~:-  AND u.column_name = do.DONNEEGXP
~:-  AND u.table_name  = 'SECUPACMAT'
~:-  AND EXISTS
~:-    (SELECT code_element,
~:-      tablegxp,
~:-      donneegxp
~:-    FROM tge_import_fsed_30 imp
~:-    WHERE id_trt        =p_id
~:-    AND imp.numpac      =p_numpac
~:-    AND imp.TABLEGXP    =do.tablegxp
~:-    AND imp.code_element=do.element
~:-    ) ;
~:-  clinsertcols       CLOB;
~:-  clinsertsel        CLOB;
~:-  clinsertvalues     CLOB;
~:-  clmerge            CLOB;
~:-  nbmapta            NUMBER;
~:-  hasDtfin           NUMBER;
~:-  clssreqPivotMerge  CLOB;
~:-  clupdateMerge      CLOB;
~:-  clinsertDonMerge   CLOB;
~:-  clinsertValMerge   CLOB;
~:-  clssreqPivotSec    CLOB;
~:-  clupdSecu          CLOB;
~:-  clinsertDonSecu    CLOB;
~:-  clinsertValSecu    CLOB;
~:-TYPE t_colonne IS  TABLE OF user_tab_columns.column_name%type;
~:-  tab_colonne         t_colonne;
~:-  donneesUpdatePropag CLOB;
~:-  donneesSelectPropag CLOB;
~:-BEGIN
~:-  FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début p_id='||p_id||';p_newId='||p_newId||';p_table='||p_table);
~:-  v_start := DBMS_UTILITY.GET_TIME;
~:-  getNumLigne(p_id);
~:-  --gestion du trigger des DACH : insertion dans la table temporaire BYPASS_TRG_DACH_ON_SESSION
~:-  INSERT INTO BYPASS_TRG_DACH_ON_SESSION(date_event,MESSAGE)VALUES(sysdate,'Retour de paie Carte 30');
~:-  COMMIT;
~:-  FOR i IN tab_numLigne00.first..tab_numLigne00.last
~:-  LOOP
~:-    IF i <=tab_numLigne99.count AND tab_numLigne99(i)IS NOT NULL THEN
~:-      w_numpac := GET_NUMPAC(p_id,tab_numLigne00(i));
~:-      w_type_retour := GET_TYPE_RETOUR(p_id,tab_numLigne00(i));
~:-      IF p_table IN ('DIC_TGE_PRETS','DIC_TGE_OPPOSITIONS') THEN
~:-        reqChrono := ' AND ( (pacmat,NVL(code_chrono,''0'') ) IN (select pacmat,nvl(max(imp.code_chrono),''0'')  from tge_import_FSED_30 imp WHERE  imp.id_trt='||p_id||' AND imp.numpac='''||w_numpac||''' AND imp.tablegxp = '''||p_table||''' and imp.CODE_ELEMENT=tge_import_FSED_30.CODE_ELEMENT AND NVL(imp.indicatif,''XyZ'')=NVL(tge_import_FSED_30.indicatif,''XyZ'') AND imp.pacmat =tge_import_FSED_30.pacmat   group by imp.pacmat))';
~:-      ELSE
~:-        reqChrono := '';
~:-      END IF;
~:-      IF w_type_retour IN ('RN','RC','RT') THEN
~:-        w_moi_retour := GET_PERIODE_00(p_id,tab_numLigne00(i));
~:-        IF p_table    ='DIC_ADM_CONTRAT_HISTO' THEN
~:-          FSED_AVANCEMENT(p_id,'tmp_histo_fsed_30 Début p_id='||p_id ||';w_numpac='||w_numpac||';w_moi_retour='||w_moi_retour );
~:-          DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'GAP_TRT_LISTE_MAT',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
~:-              DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'TGE_IMPORT_FSED',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
~:-              DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'TGE_IMPORT_FSED_30',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
~:-          tmp_histo_fsed_30(p_id,w_numpac,w_moi_retour);
~:-          COMMIT;
~:-          DBMS_STATS.GATHER_TABLE_STATS( ownname => sys_context('USERENV','SESSION_SCHEMA') ,TABNAME=>'TGE_FSED_30_TEMPORARY',METHOD_OPT => 'FOR ALL COLUMNS SIZE 254',estimate_percent => 100, cascade => true , DEGREE=>4);
~:-          FSED_AVANCEMENT(p_id,'tmp_histo_fsed_30 Fin ');
~:-        END IF;
~:-        SELECT COUNT(*)
~:-        INTO nbmapta
~:-        FROM
~:-          (SELECT * FROM TGE_REF_MAPTA WHERE numpac=w_numpac
~:-          UNION ALL
~:-          SELECT *
~:-          FROM TGE_REF_MAPTA
~:-          WHERE numpac        ='*'
~:-          AND TABLEPARAM NOT IN
~:-            (SELECT TABLEPARAM FROM TGE_REF_MAPTA WHERE numpac=w_numpac
~:-            )
~:-          ) TA
~:-        WHERE ta.tableparam=p_table
~:-        AND ALLERRETOUR   IN ('2','R')
~:-        AND TABLETYPE     IS NOT NULL
~:-        AND TABLEPHY      IS NOT NULL ;
~:-        IF (nbmapta        > 0) THEN
~:-          SELECT DISTINCT numpac,
~:-            NULL AS rownumber ,
~:-            tableparam,
~:-            NULL AS fichier,
~:-            tablephy,
~:-            allerretour,
~:-            tabletype,
~:-            lpad(moiszero,2,0),
~:-            nbmoiscons,
~:-            sensiblerhid,
~:-            reserve
~:-          INTO objtable
~:-          FROM
~:-            (SELECT * FROM TGE_REF_MAPTA WHERE numpac=w_numpac
~:-            UNION ALL
~:-            SELECT *
~:-            FROM TGE_REF_MAPTA
~:-            WHERE numpac        ='*'
~:-            AND TABLEPARAM NOT IN
~:-              (SELECT TABLEPARAM FROM TGE_REF_MAPTA WHERE numpac=w_numpac
~:-              )
~:-            ) TA
~:-          WHERE ta.tableparam=p_table
~:-          AND ALLERRETOUR   IN ('2','R')
~:-          AND TABLETYPE     IS NOT NULL
~:-          AND TABLEPHY      IS NOT NULL;
~:-          IF objtable.TABLETYPE ='M3ANNEE' THEN
~:-            reqW580 := 'SELECT numpac,paiezad, valeur FROM TGE_IMPORT_FSED_30 AN WHERE  ID_TRT = :1 and AN.numpac  = :2 AND code_element =''W580'' ';
~:-            EXECUTE IMMEDIATE reqW580 bulk collect INTO tabW580_h USING p_id,
~:-            w_numpac;
~:-          END IF;
~:-          IF objtable.TABLETYPE ='M1' THEN
~:-            reqWL52 := 'SELECT numpac,paiezad, valeur FROM TGE_IMPORT_FSED_30 AN WHERE  ID_TRT = :1 and AN.numpac  = :2 AND code_element =''WL52'' ';
~:-            EXECUTE IMMEDIATE reqWL52 bulk collect INTO tabWL52_h USING p_id,
~:-            w_numpac;
~:-          END IF;
~:-          w_table       := objtable.TABLEPHY;
~:-          w_table_param := objtable.TABLEPARAM;
~:-          w_type        := getTypeTable(w_table);
~:-          FOR trig IN
~:-          (SELECT object_name
~:-          FROM user_objects
~:-          WHERE lower(object_type)='trigger'
~:-          AND lower(object_name) LIKE '%'
~:-            ||lower(w_table)
~:-            ||'%'
~:-          AND (lower(object_name) LIKE 'horo%' )
~:-          )
~:-          LOOP
~:-             EXECUTE_IMMEDIATE_STRING  ('ALTER TRIGGER ' || trig.object_name ||' disable ',0);
~:-          END LOOP;
~:-          w_date_eff := GET_H2_COLONNE(w_table);
~:-          --RSI : En cas de RN, si 1 ligne existe dans la même année sociale, il faut la détruire. La date de paie AAAAMM01 sera insérée
~:-          IF w_type_retour = 'RN' THEN
~:-          --DEBUT M3ANNEE
~:-            IF objtable.TABLETYPE ='M3ANNEE' THEN
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RN '||objtable.TABLETYPE );
~:-              IF tabW580_h.exists(1) THEN
~:-                req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  ';
~:-                req := req ||' EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and numpac  = :numpac  and TGE_IMPORT_FSED_30.paiezad=T.paiezad';
~:-                req := req ||' AND TGE_IMPORT_FSED_30.CODE_ELEMENT =''W580'' AND SUBSTR('''||w_moi_retour||''',5,2)>=TGE_IMPORT_FSED_30.valeur ';
~:-                req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                req := req ||' SUBSTR('''||w_moi_retour||''',1,4)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-                req := req ||' AND TO_DATE(';
~:-                req := req ||' SUBSTR('''||w_moi_retour||''',1,4)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364 )';
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';w_numpac'||w_numpac||';req='||req );
~:-                EXECUTE IMMEDIATE req USING p_id,
~:-                w_numpac;
~:-                req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  ';
~:-                req := req ||' EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and numpac  = :numpac and TGE_IMPORT_FSED_30.paiezad=T.paiezad  ';
~:-                req := req ||' AND TGE_IMPORT_FSED_30.CODE_ELEMENT =''W580'' AND SUBSTR('''||w_moi_retour||''',5,2)<TGE_IMPORT_FSED_30.valeur ';
~:-                req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                req := req ||' (SUBSTR('''||w_moi_retour||''',1,4)-1)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-                req := req ||' AND TO_DATE(';
~:-                req := req ||' (SUBSTR('''||w_moi_retour||''',1,4)-1)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364 )';
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';w_numpac'||w_numpac||';req='||req );
~:-                EXECUTE IMMEDIATE req USING p_id,
~:-                w_numpac;
~:-              ELSE
~:-                IF SUBSTR(w_moi_retour,5,2)>=objtable.MOISZERO THEN
~:-                  req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-                  req                      := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                  req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-                  req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-                  req                      := req ||' AND TO_DATE(';
~:-                  req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-                  req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')+364';
~:-                ELSE
~:-                  req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-                  req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                  req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||''';
~:-                  req := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-                  req := req ||' AND TO_DATE(';
~:-                  req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-                  req := req ||objtable.MOISZERO||'||''01'''||',''YYYYMMDD'')+364';
~:-                END IF ;
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';w_numpac'||w_numpac||';req='||req );
~:-                EXECUTE IMMEDIATE req USING p_id;
~:-                req:='';
~:-              END IF;
~:-            END IF;
~:-          --FIN M3ANNEE 
~:-          --DEBUT M1
~:-          IF objtable.TABLETYPE ='M1' THEN
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RN '||objtable.TABLETYPE );
~:-              IF tabWL52_h.exists(1) THEN
~:-                req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  ';
~:-                req := req ||' EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and numpac  = :numpac  and TGE_IMPORT_FSED_30.paiezad=T.paiezad';
~:-                req := req ||' AND TGE_IMPORT_FSED_30.CODE_ELEMENT =''WL52'' AND SUBSTR('''||w_moi_retour||''',5,2)>=TGE_IMPORT_FSED_30.valeur ';
~:-                req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                req := req ||' SUBSTR('''||w_moi_retour||''',1,4)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-                req := req ||' AND TO_DATE(';
~:-                req := req ||' SUBSTR('''||w_moi_retour||''',1,4)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364 )';
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';w_numpac'||w_numpac||';req='||req );
~:-                EXECUTE IMMEDIATE req USING p_id,
~:-                w_numpac;
~:-                req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  ';
~:-                req := req ||' EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and numpac  = :numpac and TGE_IMPORT_FSED_30.paiezad=T.paiezad  ';
~:-                req := req ||' AND TGE_IMPORT_FSED_30.CODE_ELEMENT =''WL52'' AND SUBSTR('''||w_moi_retour||''',5,2)<TGE_IMPORT_FSED_30.valeur ';
~:-                req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                req := req ||' (SUBSTR('''||w_moi_retour||''',1,4)-1)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-                req := req ||' AND TO_DATE(';
~:-                req := req ||' (SUBSTR('''||w_moi_retour||''',1,4)-1)||';
~:-                req := req ||' NVL(TGE_IMPORT_FSED_30.valeur,'''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364 )';
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';w_numpac'||w_numpac||';req='||req );
~:-                EXECUTE IMMEDIATE req USING p_id,
~:-                w_numpac;
~:-              ELSE
~:-                IF SUBSTR(w_moi_retour,5,2)>=objtable.MOISZERO THEN
~:-                  req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-                  req                      := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                  req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-                  req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-                  req                      := req ||' AND TO_DATE(';
~:-                  req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-                  req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')+364';
~:-                ELSE
~:-                  req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-                  req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-                  req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||''';
~:-                  req := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-                  req := req ||' AND TO_DATE(';
~:-                  req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-                  req := req ||objtable.MOISZERO||'||''01'''||',''YYYYMMDD'')+364';
~:-                END IF ;
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';w_numpac'||w_numpac||';req='||req );
~:-                EXECUTE IMMEDIATE req USING p_id;
~:-                req:='';
~:-              END IF;
~:-            END IF;
~:-          --FIN M1
~:-            --RSI : En cas de RN, si 1 ligne existe dans la même année statistique, il faut la détruire. La date de paie AAAAMM01 sera insérée.
~:-            IF objtable.TABLETYPE ='M9' THEN
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RN TABLETYPE M9');
~:-              IF SUBSTR(w_moi_retour,5,2)>=objtable.MOISZERO THEN
~:-                req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) AND '||w_date_eff||' between TO_DATE(SUBSTR('||w_moi_retour||',1,4)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'') and (TO_DATE(SUBSTR('||w_moi_retour||',1,4)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'')+364)';
~:-              ELSE
~:-                req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) AND '||w_date_eff||' between TO_DATE((SUBSTR('||w_moi_retour||',1,4)-1)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'') and (TO_DATE((SUBSTR('||w_moi_retour||',1,4)-1)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'')+364)';
~:-              END IF;
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete req p_id='||p_id||';req='||req);
~:-              EXECUTE IMMEDIATE req USING p_id;
~:-              req:='';
~:-            END IF;
~:-          END IF;
~:-          IF objtable.TABLETYPE ='AVPERS' THEN
~:-            w_code_caisse      :='';
~:-          ELSE
~:-            w_code_caisse := GET_M3_COLONNE(w_table);
~:-          END IF;
~:-          IF w_type    ='m' THEN
~:-            w_cle     := 'MATRIC';
~:-          ELSIF w_type ='p' THEN
~:-            w_cle     := 'PACMAT';
~:-          ELSIF w_type ='z' THEN
~:-            w_cle     := 'PAIEZAD';
~:-          END IF;
~:-          IF w_cle        = 'MATRIC' THEN
~:-            w_colonne_30 := 'MATRICULE';
~:-          ELSE
~:-            w_colonne_30 := w_cle;
~:-          END IF;
~:-          IF objtable.TABLETYPE <> 'AVPERS' OR w_table ='DIC_ADM_CONTRAT' THEN
~:-            FOR C IN cur_element(w_numpac)
~:-            LOOP
~:-              req                  :='';
~:-              reqUdpateDate        :='';
~:-              reqPropag            :='';
~:-              w_type_colonne       := SUBSTR(c.typeelt,0,1);
~:-              w_trace              := C.DONNEEGXP;
~:-              IF clssreqPivotMerge IS NOT NULL THEN
~:-                clssreqPivotMerge  :=clssreqPivotMerge||',';
~:-              END IF;
~:-              clssreqPivotMerge:=clssreqPivotMerge||' '''||C.DONNEEGXP||'''  as '||C.DONNEEGXP ;
~:-              IF clupdateMerge IS NOT NULL THEN
~:-                clupdateMerge  :=clupdateMerge||',';
~:-              END IF;
~:-              clupdateMerge       :=clupdateMerge||'T.'||C.DONNEEGXP||'='||GET_Statement (w_type_colonne,C.typeDICOZ ,C.DONNEEGXP) ;
~:-              IF clinsertDonMerge IS NOT NULL THEN
~:-                clinsertDonMerge  :=clinsertDonMerge||',';
~:-              END IF;
~:-              clinsertDonMerge    :=clinsertDonMerge||C.DONNEEGXP ;
~:-              IF clinsertValMerge IS NOT NULL THEN
~:-                clinsertValMerge  :=clinsertValMerge||',';
~:-              END IF;
~:-              clinsertValMerge:=clinsertValMerge||GET_Statement (w_type_colonne,C.typeDICOZ ,C.DONNEEGXP) ;
~:-            END LOOP;
~:-          END IF;
~:-          -- TABLE Unique
~:-          IF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='UNIQUE' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  UNIQUE ');
~:-            req             := 'MERGE INTO '||w_table ||' T USING ';
~:-            req             := req ||' (select tge.* from (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp  ,valeur  FROM TGE_IMPORT_FSED_30 TGE  where ID_TRT= ' ;
~:-            req             := req ||':id AND tablegxp='''||w_table ||''' ';
~:-            req             := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND  numpac='''||w_numpac||'''   ';
~:-            IF w_type_retour ='RC' AND IS_VALID_COLUMN (w_table,'PACMAT') >0 THEN
~:-              req           := req || ' AND PAIEZAD in (select PAIEZAD from dic_adm_contrat_situ a where numpac = tge.numpac and pacmat not in ';
~:-              req           := req || ' (SELECT PACMAT FROM GAP_TRT_LISTE_MAT_HISTO G WHERE G.NUMPAC=a.NUMPAC AND G.PERIODE_PAIE = '''||w_moi_retour||''' AND TO_CHAR(G.DATE_COMP,''YYYYMM'')<= '''||w_moi_retour||'''))';
~:-            END IF ;
~:-            req                      := req|| reqChrono;
~:-            req                      := req ||') pivot ( max(valeur) for donneegxp in ( '||clssreqPivotMerge;
~:-            req                      := req ||')) )tge)  i';
~:-            req                      := req ||' on ( T.numpac=i.numpac and T.'||w_colonne_30||'=i.'||w_cle;
~:-            req                      := req ||') ';
~:-            IF w_type_retour          ='RN' THEN
~:-              req                    := req ||' when MATCHED THEN ';
~:-              req                    := req ||' UPDATE  set '||clupdateMerge;
~:-              req                  := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',type_writer=''N'' ';
~:-              END IF;
~:-              req                      := req ||' when NOT MATCHED THEN INSERT (numpac,pacmat,MATRIC,DATE_CREATION,'||w_cle||',';
~:-              IF w_cle                  ='PAIEZAD' THEN
~:-                req                    := req || clinsertDonMerge;
~:-                IF objtable.ALLERRETOUR ='2' THEN
~:-                  req                  := req ||',type_writer';
~:-                END IF;
~:-                req := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD, ';
~:-              ELSE
~:-                req                    := req ||clinsertDonMerge;
~:-                IF objtable.ALLERRETOUR ='2' THEN
~:-                  req                  := req ||',type_writer';
~:-                END IF;
~:-                req := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.'||w_colonne_30||',';
~:-              END IF;
~:-              req                    := req || clinsertValMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',''N''';
~:-              END IF;
~:-              req := req ||')';
~:-              --
~:-            END IF;
~:-            IF w_type_retour          ='RC' THEN
~:-              req                    := req ||' when MATCHED THEN UPDATE  set '||clupdateMerge;
~:-              req                  := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',type_writer=''N''';
~:-              END IF;
~:-              req                      := req ||' when NOT MATCHED THEN INSERT (numpac,pacmat,MATRIC,DATE_CREATION,'||w_cle||',';
~:-              IF w_cle                  ='PAIEZAD' THEN
~:-                req                    := req || clinsertDonMerge;
~:-                IF objtable.ALLERRETOUR ='2' THEN
~:-                  req                  := req ||',type_writer';
~:-                END IF;
~:-                req := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD, ';
~:-              ELSE
~:-                req                    := req ||clinsertDonMerge;
~:-                IF objtable.ALLERRETOUR ='2' THEN
~:-                  req                  := req ||',type_writer';
~:-                END IF;
~:-                req := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.'||w_colonne_30||',';
~:-              END IF;
~:-              req                    := req || clinsertValMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',''N''';
~:-              END IF;
~:-              req := req ||')';
~:-            END IF;
~:-            
~:-            --TABLE H2
~:-          ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE = 'H2' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  H2 ');
~:-            req                    := 'MERGE INTO '||w_table ||' T USING ';
~:-            req                    := req ||' (select  TGE.*,';
~:-            req                    := req ||'TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-            req                    := req ||'as '||w_date_eff||', ';
~:-            req                    := req ||' numpac||nvl(tge.pacmat,'||w_colonne_30||') as idPACMAT';
~:-            req                    := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp  ,valeur from tge_import_FSED_30  WHERE  ID_TRT= ' ;
~:-            req                    := req ||':id AND tablegxp='''||w_table ||''' ';
~:-            req                    := req ||' AND ( numligne >=:ligne0 AND numligne <= :ligne99) and numpac='''||w_numpac||'''  ';
~:-            req                    := req || reqChrono;
~:-            req                    := req ||') pivot ( max(valeur) for donneegxp in (';
~:-            req                    := req || clssreqPivotMerge;
~:-            req                    := req ||')) )tge  ) i';
~:-            req                    := req ||' on ( T.numpac=i.numpac and T.paiezad =i.paiezad AND T.'||w_date_eff||'=i.'||w_date_eff||') ';
~:-            req                    := req ||' when NOT MATCHED THEN INSERT (numpac,pacmat,MATRIC,DATE_CREATION,paiezad,'||w_date_eff||','||clinsertDonMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',type_writer';
~:-            END IF;
~:-            req                    := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD,i.'||w_DATE_EFF||', ';
~:-            req                    := req || clinsertValMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',''N''';
~:-            END IF;
~:-            req                    := req ||')';
~:-            req                    := req ||' when MATCHED THEN ';
~:-            req                    := req ||' UPDATE  set '||clupdateMerge;
~:-            req                  := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',type_writer=''N''';
~:-            END IF;
~:-            -- Si il y a une colonne dtFin, on met à jour la date
~:-            SELECT COUNT(*)
~:-            INTO hasDtfin
~:-            FROM user_tab_columns
~:-            WHERE table_name =w_table
~:-            AND column_name  ='DTFIN';
~:-            IF hasDtfin      >0 THEN
~:-              -- table H2  forcer le DTFIN au dernier jour du mois
~:-              reqUdpateDate   :=' update  '||w_table || ' a  set DTFIN= last_day('||w_date_eff||') ' ;
~:-              reqUdpateDate   :=reqUdpateDate|| ' where  exists(select * FROM TGE_IMPORT_FSED_30 TGE  WHERE  ID_TRT= ' ;
~:-              reqUdpateDate   := reqUdpateDate ||':id  AND tablegxp='''||w_table ||''' ';
~:-              reqUdpateDate   := reqUdpateDate ||' AND ( numligne >=:ligne0 AND numligne <= :ligne99) ';
~:-              IF w_colonne_30  = 'PACMAT' THEN
~:-                reqUdpateDate := reqUdpateDate ||' and TGE.numpac=a.numpac and nvl(TGE.PACMAT,TGE.PAIEZAD) =a.'||w_colonne_30||'   ';
~:-              ELSE
~:-                reqUdpateDate := reqUdpateDate ||' and TGE.numpac=a.numpac and TGE.PAIEZAD =a.'||w_colonne_30||'   ';
~:-              END IF;
~:-              reqUdpateDate := reqUdpateDate ||') ';
~:-            END IF;
~:-            --TABLE AVPERS
~:-          ELSIF objtable.TABLETYPE = 'AVPERS' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  AVPERS ');
~:-            --calcul de la date fin
~:-            IF w_table ='DIC_ADM_CONTRAT' THEN
~:-              coldtfin:='DSFCN';
~:-            ELSE
~:-              coldtfin:='DATE_FIN';
~:-            END IF;
~:-            SELECT column_name BULK COLLECT
~:-            INTO tab_colonne
~:-            FROM user_tab_columns
~:-            WHERE table_name = w_table
~:-            AND column_name NOT LIKE '%IDPACMAT%'
~:-            ORDER BY column_id;
~:-            -- eliminer les doublons du merge des AVPERS
~:-            IF w_table='DIC_ADM_CONTRAT_HISTO' THEN
~:-              FOR K IN cur_element_histo(w_numpac)
~:-              LOOP
~:-                clinsertcols   :='';
~:-                clinsertsel    :='';
~:-                clinsertvalues :='';
~:-                FOR indx IN tab_colonne.first .. tab_colonne.last
~:-                LOOP
~:-                  IF tab_colonne(indx) =w_date_eff THEN
~:-                    IF clinsertsel    IS NULL THEN
~:-                      clinsertsel     :='TO_DATE('''||w_moi_retour||'01'',''YYYYMMDD'') as '||w_date_eff;
~:-                      clinsertcols    :=tab_colonne(indx);
~:-                      clinsertvalues  :='I.'||tab_colonne(indx);
~:-                    ELSE
~:-                      clinsertsel    :=clinsertsel||',TO_DATE('''||w_moi_retour||'01'',''YYYYMMDD'') as '||w_date_eff;
~:-                      clinsertcols   :=clinsertcols||','||tab_colonne(indx);
~:-                      clinsertvalues :=clinsertvalues||','||'I.'||tab_colonne(indx);
~:-                    END IF;
~:-                  elsif objtable.ALLERRETOUR ='2' AND tab_colonne(indx)='TYPE_WRITER' THEN
~:-                    IF clinsertsel          IS NULL THEN
~:-                      clinsertsel           :='''N'' as type_writer';
~:-                      clinsertcols          :=tab_colonne(indx);
~:-                      clinsertvalues        :='''N''';
~:-                    ELSE
~:-                      clinsertsel    :=clinsertsel||',a.'||tab_colonne(indx);
~:-                      clinsertcols   :=clinsertcols||','||tab_colonne(indx);
~:-                      clinsertvalues :=clinsertvalues||',''N''';
~:-                    END IF;
~:-                  ELSE
~:-                    IF clinsertsel   IS NULL THEN
~:-                      clinsertsel    :='a.'||tab_colonne(indx);
~:-                      clinsertcols   :=tab_colonne(indx);
~:-                      clinsertvalues :='I.'||tab_colonne(indx);
~:-                    ELSE
~:-                      clinsertsel    :=clinsertsel||',a.'||tab_colonne(indx);
~:-                      clinsertcols   :=clinsertcols||','||tab_colonne(indx);
~:-                      clinsertvalues :=clinsertvalues||','||'I.'||tab_colonne(indx);
~:-                    END IF;
~:-                  END IF;
~:-                END LOOP;
~:-                -- construction de la requête de propagation
~:-                --si la colonne des AVPERS est une date
~:-                IF NVL(k.typeelt,'XyZ') ='DATE' THEN
~:-                  donneesUpdatePropag  := donneesUpdatePropag || 'a.' || K.DONNEEGXP || '= decode (instr(tge.' || K.DONNEEGXP || ',''-''),0,TO_DATE(tge.' || K.DONNEEGXP || ',''YYYYMMDD''),TO_DATE(tge.' || K.DONNEEGXP || ',''yy-mm-dd'')) ,';
~:-                ELSE
~:-                  donneesUpdatePropag := donneesUpdatePropag || 'a.' || K.DONNEEGXP || '= tge.' || K.DONNEEGXP || ' ,';
~:-                END IF;
~:-
~:-                donneesSelectPropag := donneesSelectPropag || K.DONNEEGXP || ' ,';
~:-                clssreqPivotMerge   := clssreqPivotMerge || '''' || K.DONNEEGXP || ''' AS '|| K.DONNEEGXP || ' ,';
~:-              END LOOP;
~:-            END IF ;
~:-            IF w_table       ='DIC_ADM_CONTRAT_HISTO' THEN
~:-              req           := 'INSERT INTO '||w_table ||'('||clinsertcols||') ';
~:-              req           := req || ' WITH Cont AS(SELECT  MAX(DATE_EFF) AS mydate,numpac as numpac ,pacmat as pacmat FROM    DIC_ADM_CONTRAT_HISTO WHERE '||w_date_eff||' <TO_DATE('||w_moi_retour||'01,''YYYYMMDD'')  GROUP BY numpac,pacmat)';
~:-              req           := req || ' SELECT /*+ LEADING(@"SEL$C19C7BAF" "TGE"@"SEL$3" "A"@"SEL$2" "TGE_FSED_30_TEMPORARY"@"SEL$6" "CONT"@"SEL$2" "D"@"SEL$5")*/'||clinsertsel||' FROM '||w_table ||'  a , cont WHERE EXISTS(SELECT 1 FROM TGE_IMPORT_FSED_30 TGE WHERE ';
~:-              req           := req || ' ID_TRT = ' ;
~:-              req           := req ||':id AND ( numligne >=:ligne00 AND numligne <= :ligne99) ';
~:-              IF w_colonne_30= 'PACMAT' THEN
~:-                req         := req ||' and TGE.numpac=a.numpac and nvl(TGE.PACMAT,TGE.PAIEZAD) =a.'||w_colonne_30||'  AND TGE.tablegxp    = ''DIC_ADM_CONTRAT_HISTO'')      ';
~:-              ELSE
~:-                req := req ||' and TGE.numpac=a.numpac and TGE.PAIEZAD =a.'||w_colonne_30||'  AND TGE.tablegxp    = ''DIC_ADM_CONTRAT_HISTO'')       ';
~:-              END IF;
~:-              req := req ||' AND A.DATE_EFF =Cont.mydate AND A.NUMPAC =Cont.NUMPAC AND A.PACMAT =Cont.PACMAT';
~:-              --Ajout du contrôle sur la date de fin de contrat pour ne pas générer de nouvelles dates d'effets si celle ci est supérieur à la date de fin .
~:-              req := req ||' AND TO_DATE('''||w_moi_retour||'01'',''YYYYMMDD'') < ( select NVL(DSFCN,to_date(''20991231'',''YYYYMMDD'')) from DIC_ADM_CONTRAT where NUMPAC=a.numpac and  PACMAT=a.PACMAT and  NUMCNT=a.NUMCNT )';
~:-              req := req ||' and not exists (select 1 from  '||w_table || ' d where d.numpac=a.numpac and d.'||w_colonne_30||' =a.'||w_colonne_30||' and d.'||w_date_eff||'=TO_DATE('||w_moi_retour||'01,''YYYYMMDD'') ) ';
~:-              req := req ||' and exists (select 1 from  TGE_FSED_30_TEMPORARY where id_trt ='||p_id||' AND numpac = a.numpac and '||w_colonne_30||' =a.'||w_colonne_30||' and TOUPDATE=''O'' ) ';
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Insert DACH='||substr(req,0,3800) );
~:-              EXECUTE IMMEDIATE req USING p_id,
~:-              tab_numLigne00(i),
~:-              tab_numLigne99(i);
~:-              IF donneesUpdatePropag IS NOT NULL THEN
~:-                donneesUpdatePropag  := SUBSTR(donneesUpdatePropag, 0, LENGTH(donneesUpdatePropag) - 1); -- enlever la virgule de trop à la fin
~:-              END IF;
~:-              IF donneesSelectPropag IS NOT NULL THEN
~:-                donneesSelectPropag  := SUBSTR(donneesSelectPropag, 0, LENGTH(donneesSelectPropag) - 1); -- enlever la virgule de trop à la fin
~:-              END IF;
~:-              IF clssreqPivotMerge IS NOT NULL THEN
~:-                clssreqPivotMerge  := SUBSTR(clssreqPivotMerge, 0, LENGTH(clssreqPivotMerge) - 1); -- enlever la virgule de trop à la fin
~:-              END IF;
~:-            END IF;
~:-            IF w_table        ='DIC_ADM_CONTRAT_HISTO' THEN
~:-              reqPropag      := 'merge  into ' || w_table || ' a using (SELECT  * from (SELECT * FROM (SELECT id_trt, numpac, paiezad, pacmat, donneegxp, valeur';
~:-              reqPropag      := reqPropag || ' FROM TGE_IMPORT_FSED_30 TGE WHERE ID_TRT =';
~:-              reqPropag      := reqPropag || ' :id AND tablegxp = ''' || w_table ||'''';
~:-              reqPropag      := reqPropag || ' AND (numligne >= :ligne0 AND numligne <= :ligne99)  AND (numpac,pacmat,paiezad) in (select numpac, pacmat, paiezad from TGE_FSED_30_TEMPORARY where id_trt='''||p_id||''' and toupdate=''O'')';
~:-              reqPropag      := reqPropag || reqChrono;
~:-              reqPropag      := reqPropag || ') PIVOT(MAX(valeur) FOR DONNEEGXP IN (' || clssreqPivotMerge || ')) ) ) tge  on (';
~:-              reqPropag      := reqPropag || '  TGE.numpac = a.numpac';
~:-              IF w_colonne_30 = 'PACMAT' THEN
~:-                reqPropag    := reqPropag || ' AND NVL(TGE.PACMAT, TGE.PAIEZAD) = a.' || w_colonne_30;
~:-              ELSE
~:-                reqPropag := reqPropag || ' AND TGE.PAIEZAD = a.' || w_colonne_30 ;
~:-              END IF;
~:-              reqPropag              := reqPropag || ' and ' || w_date_eff || ' >= TO_DATE(''' || w_moi_retour || '01'',''YYYYMMDD'') and  ' || w_date_eff || '< ADD_MONTHS(TO_DATE(''' || w_moi_retour || '01'',''YYYYMMDD''), 1) ) when matched then update set ';
~:-              IF objtable.ALLERRETOUR = '2' THEN
~:-                reqPropag            := reqPropag || ' a.type_writer = ''N'', ';
~:-              END IF;
~:-              reqPropag := reqPropag ||''|| donneesUpdatePropag ;
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Merge DACH='||substr(reqPropag,0,3800) );
~:-              -- lancer la requete de propagation avec pivot
~:-              EXECUTE IMMEDIATE reqPropag USING p_id,
~:-              tab_numLigne00(i),
~:-              tab_numLigne99(i);
~:-
~:-            END IF;
~:-            IF w_table                ='DIC_ADM_CONTRAT' AND clssreqPivotMerge IS NOT NULL THEN
~:-              req                    := 'MERGE INTO '||w_table ||' T USING ';
~:-              req                    := req ||'(select TGE.*';
~:-              req                    := req ||',numpac||nvl(tge.pacmat,'||w_colonne_30||') as idPACMAT';
~:-              req                    := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat, donneegxp,indicatif,valeur from tge_import_FSED_30  where ID_TRT= ' ;
~:-              req                    := req ||':id  AND tablegxp='''||w_table ||''' ';
~:-              req                    := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND numpac='''||w_numpac||'''  ';
~:-              req                    := req || reqChrono;
~:-              req                    := req ||' ) pivot(max(valeur) for donneegxp in ('||clssreqPivotMerge;
~:-              req                    := req ||')) )tge)  i';
~:-              req                    := req ||' on ( T.numpac=i.numpac and T.paiezad =i.paiezad and (';
~:-              req                    := req||'(T.DSDCN<= TO_DATE('''||w_moi_retour||''', ''YYYYMM'')  and T.DSFCN is not null and T.DSFCN between TO_DATE('''||w_moi_retour||''', ''YYYYMM'') and last_day(to_date('''||w_moi_retour||''',''YYYYMM'')))';
~:-              req                    := req||' OR(T.DSDCN between TO_DATE('''||w_moi_retour||''', ''YYYYMM'') and last_day(to_date('''||w_moi_retour||''',''YYYYMM''))AND NVL(T.DSFCN,to_date(''20991231'',''YYYYMMDD''))>= last_day(to_date('''||w_moi_retour||''',''YYYYMM'')))';
~:-              req                    := req||' OR (T.DSDCN <=last_day(to_date('''||w_moi_retour||''',''YYYYMM''))AND  T.DSFCN IS  NULL)';
~:-              req                    := req||') ';
~:-              req                    := req ||') ';
~:-              req                    := req ||' when MATCHED THEN UPDATE  set ' ;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||'type_writer=''N'', ';
~:-              END IF;
~:-              req := req ||clupdateMerge;
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 DAC='||substr(req,0,3800) );
~:-              EXECUTE IMMEDIATE req USING p_id,
~:-              tab_numLigne00(i),
~:-              tab_numLigne99(i);
~:-              --Mise à jour de la donnée dans secupacmat
~:-              FOR C IN cur_secupacmat(w_numpac)
~:-              LOOP
~:-                req                :='';
~:-                w_type_colonne     := SUBSTR(c.typeelt,0,1);
~:-                IF clssreqPivotSec IS NOT NULL THEN
~:-                  clssreqPivotSec  :=clssreqPivotSec||',';
~:-                END IF;
~:-                clssreqPivotSec:=clssreqPivotSec||' '''||C.DONNEEGXP||'''  as '||C.DONNEEGXP ;
~:-                IF clupdSecu   IS NOT NULL THEN
~:-                  clupdSecu    :=clupdSecu||',';
~:-                END IF;
~:-                clupdSecu          :=clupdSecu||'T.'||C.DONNEEGXP||'='||GET_Statement (w_type_colonne,C.typeDICOZ ,C.DONNEEGXP) ;
~:-                IF clinsertDonSecu IS NOT NULL THEN
~:-                  clinsertDonSecu  :=clinsertDonSecu||',';
~:-                END IF;
~:-                clinsertDonSecu    :=clinsertDonSecu||C.DONNEEGXP ;
~:-                IF clinsertValSecu IS NOT NULL THEN
~:-                  clinsertValSecu  :=clinsertValSecu||',';
~:-                END IF;
~:-                clinsertValSecu:=clinsertValSecu||GET_Statement (w_type_colonne,C.typeDICOZ ,C.DONNEEGXP) ;
~:-              END LOOP;
~:-              IF clssreqPivotSec IS NOT NULL THEN
~:-                req              := 'MERGE INTO SECUPACMAT T USING ';
~:-                req              := req ||'(select TGE.*';
~:-                req              := req ||',numpac||nvl(tge.pacmat,'||w_colonne_30||') as idPACMAT';
~:-                req              := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat, donneegxp,indicatif  ,valeur from tge_import_FSED_30  where ID_TRT= ' ;
~:-                req              := req ||':id  AND tablegxp='''||w_table ||''' ';
~:-                req              := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND numpac='''||w_numpac||'''  ';
~:-                req              := req || reqChrono;
~:-                req              := req ||' ) pivot(max(valeur) for donneegxp in ('||clssreqPivotSec;
~:-                req              := req ||')) )tge)  i';
~:-                req              := req ||' on ( T.numpac=i.numpac and T.pacmat =i.pacmat and (';
~:-                req              := req||'(to_date(T.DSDCN,''YYYYMMDD'')<= TO_DATE('''||w_moi_retour||''', ''YYYYMM'')  and T.DSFCN is not null and TO_DATE(T.DSFCN,''YYYYMMDD'') between TO_DATE('''||w_moi_retour||''', ''YYYYMM'') and last_day(to_date('''||w_moi_retour||''',''YYYYMM'')))';
~:-                req              := req||' OR(to_date(T.DSDCN,''YYYYMMDD'') between TO_DATE('''||w_moi_retour||''', ''YYYYMM'') and last_day(to_date('''||w_moi_retour||''',''YYYYMM''))AND NVL(TO_DATE(T.DSFCN,''YYYYMMDD''),to_date(''20991231'',''YYYYMMDD''))>= last_day(to_date('''||w_moi_retour||''',''YYYYMM'')))';
~:-                req              := req||' OR (to_date(T.DSDCN,''YYYYMMDD'') <=last_day(to_date('''||w_moi_retour||''',''YYYYMM''))AND  T.DSFCN IS  NULL)';
~:-                req              := req||') ';
~:-                req              := req ||') ';
~:-                req              := req ||' when MATCHED THEN UPDATE  set ' ;
~:-                req              := req ||clupdSecu;
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 SECUPACMAT='|| substr(req,0,3600));
~:-                EXECUTE IMMEDIATE req USING p_id,
~:-                tab_numLigne00(i),
~:-                tab_numLigne99(i);
~:-              END IF;
~:-            END IF;
~:-            -- lancer la requete trace
~:-            reqTrace := REPLACE('INSERT INTO SYS_TRC_MODIF 
~:-SELECT DISTINCT ''RETOUR_PAIE'', 
~:-CURRENT_TIMESTAMP, 
~:-3, 
~:-''Retour de paie type AVPERS'', 
~:-''numpac='' || tge.numpac || ''&' || w_colonne_30 || '='' || nvl(tge.' || w_colonne_30 || ',tge.paiezad) || ''&PERIODEPAIE='' || TO_DATE(''' || w_moi_retour || '01'', ''YYYYMMDD'') || ''&ELEMENT='' || tge.code_element || ''&VALEUR='' || tge.valeur, 
~:-''Retour de paie'', 
~:-''M'', 
~:-null, 
~:-null, 
~:-null, 
~:-null ,
~:-tge.numpac,
~:-tge.pacmat,
~:-tge.PAIEZAD,
~:-tge.MATRICULE,
~:-tge.DATE_EFFET 
~:-FROM TGE_IMPORT_FSED_30 TGE 
~:-
~:-WHERE ID_TRT = :id AND tablegxp='''||w_table ||'''  AND ( numligne >=:ligne0 AND numligne <= :ligne99) and TGE.numpac=a.numpac', 'a.', 'TGE.' );
~:-            FSED_AVANCEMENT(p_id,' SYS_TRC_MODIF= '|| substr(reqTrace,0,3600));
~:-            EXECUTE IMMEDIATE reqTrace USING p_id,
~:-            tab_numLigne00(i),
~:-            tab_numLigne99(i);
~:-            reqTrace :=null;
~:-            -- Table M7
~:-          ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M7' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M7 ');
~:-           req                    := 'MERGE INTO ' || w_table ||' t USING ' ||
~:-              '(SELECT * FROM ' || 
~:-              '(SELECT ID_TRT, ' || 
~:-              'NUMPAC, ' || 
~:-              'PAIEZAD, ' || 
~:-              'PACMAT, ' || 
~:-              'MATRICULE, ' || 
~:-              'DONNEEGXP, ' || 
~:-              'VALEUR, ' || 
~:-              'TO_DATE(SUBSTR(INDICATIF, 1, 6) || ''01'', ''YYYYMMDD'') AS ' || w_date_eff || ', ' || 
~:-              'NUMPAC || NVL(PACMAT, PAIEZAD) AS IDPACMAT ' || 
~:-              'FROM TGE_IMPORT_FSED_30 ' || 
~:-              'WHERE ID_TRT = :id  AND TABLEGXP = ''' || w_table ||''' AND (NUMLIGNE >= :ligne0 AND NUMLIGNE <= :ligne99) AND NUMPAC = ''' || w_numpac || '''' || 
~:-              ') PIVOT(MAX(VALEUR) FOR DONNEEGXP IN (' || clssreqPivotMerge || '))' || 
~:-              ') i ' || 
~:-              'ON (t.NUMPAC = i.NUMPAC AND t.PAIEZAD = i.PAIEZAD AND t.' || w_date_eff || ' = i.' || w_date_eff || ') ' || 
~:-              'WHEN MATCHED THEN ';
~:-            req                    := req || 'UPDATE SET ' ;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||'type_writer=''N'', ';
~:-            END IF;
~:-            req                    := req ||clupdateMerge;
~:-            req                    := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-            req                    := req ||' when NOT MATCHED THEN ';
~:-            req                    := req ||' INSERT (numpac,pacmat,MATRIC,DATE_CREATION,paiezad,'||w_date_eff||','||clinsertDonMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',type_writer';
~:-            END IF;
~:-            req                    := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD,i.'||w_DATE_EFF||', ';
~:-            req                    := req || clinsertValMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',''N''';
~:-            END IF;
~:-            req := req ||' )';
~:-            ---TABLE M1
~:-          ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M1' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M1 ');
~:-            IF w_type_retour ='RC' THEN
~:-              reqRc         := 'select min ('||w_date_eff||') from '||w_table ||' WHERE numpac =:numpac and paiezad in (select distinct paiezad from TGE_IMPORT_FSED_30 where id_trt = :id )';
~:-              EXECUTE immediate reqRC INTO w_date_RC USING w_numpac,
~:-              p_id;
~:-            END IF ;
~:-            req                    := 'MERGE INTO '||w_table ||' T USING ';
~:-            req                    := req ||'(select tge.*, ';
~:-            req                    := req ||'TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-            req                    := req ||'as '||w_date_eff||', ';
~:-            req                    := req ||'numpac||nvl(tge.pacmat,'||w_colonne_30||') as idPACMAT';
~:-            req                    := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp  ,valeur from tge_import_FSED_30  where ID_TRT= ' ;
~:-            req                    := req ||':id  AND tablegxp='''||w_table ||''' ';
~:-            req                    := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND numpac='''||w_numpac||''' ';
~:-            req                    := req || reqChrono;
~:-            req                    := req ||') pivot(max(valeur) for donneegxp in ('||clssreqPivotMerge;
~:-            req                    := req ||')) )tge)  i';
~:-            req                    := req ||' on ( T.numpac=i.numpac and T.paiezad =i.paiezad AND T.'||w_date_eff||'=i.'||w_date_eff||') ';
~:-            req                    := req ||' when MATCHED THEN ' ;
~:-            req                    := req ||' UPDATE  set ' ;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||'type_writer=''N'', ';
~:-            END IF;
~:-            req                      := req ||clupdateMerge;
~:-            req                      := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-            IF w_type_retour          ='RN' OR (w_type_retour ='RC' AND (w_date_RC < TO_DATE(w_moi_retour||'01','YYYYMMDD'))OR w_date_RC is null) THEN
~:-              req                    := req ||' when NOT MATCHED THEN ' ;
~:-              req                    := req ||' INSERT (numpac,pacmat,MATRIC,DATE_CREATION,paiezad,'||w_date_eff||','||clinsertDonMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',type_writer';
~:-              END IF;
~:-              req                    := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD,i.'||w_DATE_EFF||', ';
~:-              req                    := req ||clinsertValMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',''N''';
~:-              END IF;
~:-              req := req ||')';
~:-            END IF ;
~:-            ---TABLE M9
~:-          ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M9' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M9 ');
~:-            IF w_type_retour ='RC' THEN
~:-              reqRc         := 'select min ('||w_date_eff||') from '||w_table ||' WHERE numpac =:numpac and paiezad in (select distinct paiezad from TGE_IMPORT_FSED_30 where id_trt = :id )';
~:-              EXECUTE immediate reqRC INTO w_date_RC USING w_numpac,
~:-              p_id;
~:-            END IF;
~:-            req                    := 'MERGE INTO '||w_table ||' T USING ';
~:-            req                    := req ||'(select tge.*';
~:-            req                    := req ||', TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-            req                    := req ||'as '||w_date_eff;
~:-            req                    := req ||', numpac||nvl(tge.pacmat,'||w_colonne_30||') as idPACMAT';
~:-            req                    := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp  ,valeur from tge_import_FSED_30 where ID_TRT= ' ;
~:-            req                    := req ||':id  AND tablegxp='''||w_table ||''' ';
~:-            req                    := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND numpac='''||w_numpac||''' ';
~:-            req                    := req || reqChrono;
~:-            req                    := req ||') pivot(max(valeur) for donneegxp in ('||clssreqPivotMerge;
~:-            req                    := req ||')) )tge)  i';
~:-            req                    := req ||' on ( T.numpac=i.numpac and T.paiezad =i.paiezad AND T.'||w_date_eff||'=i.'||w_date_eff||') ';
~:-            req                    := req ||' when MATCHED THEN ' ;
~:-            req                    := req ||' UPDATE  set ' ;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||'type_writer=''N'', ';
~:-            END IF;
~:-            req                      := req ||clupdateMerge;
~:-            req                      := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-            IF w_type_retour          ='RN' OR (w_type_retour ='RC' AND ( w_date_RC < TO_DATE(w_moi_retour||'01','YYYYMMDD'))OR w_date_RC IS NULL) THEN
~:-              req                    := req ||' when NOT MATCHED THEN ' ;
~:-              req                    := req ||' INSERT (numpac,pacmat,MATRIC,DATE_CREATION,paiezad,'||w_date_eff||','||clinsertDonMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',type_writer';
~:-              END IF;
~:-              req                    := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD,i.'||w_DATE_EFF||', ';
~:-              req                    := req || clinsertValMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',''N''';
~:-              END IF;
~:-              req := req ||')';
~:-            END IF;
~:-            ---Table M3ANNEE
~:-          ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M3ANNEE' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M3ANNEE ');
~:-            IF w_type_retour ='RC' THEN
~:-              reqRc         := 'select min ('||w_date_eff||') from '||w_table ||' WHERE numpac =:numpac and paiezad in (select distinct paiezad from TGE_IMPORT_FSED_30 where id_trt = :id )';
~:-              EXECUTE immediate reqRC INTO w_date_RC USING w_numpac,
~:-              p_id;
~:-            END IF;
~:-            req                    := 'MERGE INTO '||w_table ||' T USING ';
~:-            req                    := req ||'(select tge.*, ';
~:-            req                    := req ||'TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-            req                    := req ||'as '||w_date_eff||', ';
~:-            req                    := req ||'NVL(substr(indicatif,1,3),0) as '||w_code_caisse||',';
~:-            req                    := req ||'numpac||nvl(tge.pacmat,'||w_colonne_30||')as idPACMAT';
~:-            req                    := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp, indicatif  ,valeur from tge_import_FSED_30  where ID_TRT= ' ;
~:-            req                    := req ||':id  AND tablegxp='''||w_table ||''' ';
~:-            req                    := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND numpac='''||w_numpac||''' ';
~:-            req                    := req || reqChrono;
~:-            req                    := req ||') pivot(max(valeur) for donneegxp in ('||clssreqPivotMerge;
~:-            req                    := req ||')) )tge)  i';
~:-            req                    := req ||' on ( T.numpac=i.numpac and T.paiezad =i.paiezad AND T.'||w_code_caisse||'=i.'||w_code_caisse||' AND i.'||w_date_eff||'= T.'||w_date_eff||') ';
~:-            req                    := req ||' when MATCHED THEN ' ;
~:-            req                    := req ||' UPDATE  set ' ;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||'type_writer=''N'', ';
~:-            END IF;
~:-            req                      := req ||clupdateMerge;
~:-            req                      := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-            IF w_type_retour          ='RN' OR (w_type_retour ='RC' AND (w_date_RC < TO_DATE(w_moi_retour||'01','YYYYMMDD'))OR w_date_RC is null ) THEN
~:-              req                    := req ||' when NOT MATCHED THEN ' ;
~:-              req                    := req ||' INSERT (numpac,pacmat,MATRIC,DATE_CREATION,paiezad,'||w_date_eff||','||w_code_caisse||','||clinsertDonMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',type_writer';
~:-              END IF;
~:-              req                    := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD,i.'||w_DATE_EFF||',i.'||w_code_caisse||', ';
~:-              req                    := req || clinsertValMerge;
~:-              IF objtable.ALLERRETOUR ='2' THEN
~:-                req                  := req ||',''N''';
~:-              END IF;
~:-              req := req ||')';
~:-            END IF;
~:-            ---Table M3MOIS
~:-          ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE ='M3MOIS' THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  M3MOIS ');
~:-            req                    := 'MERGE INTO '||w_table ||' T USING ';
~:-            req                    := req ||'(select tge.*,';
~:-            req                    := req ||'TO_DATE(replace ('||w_moi_retour||',SUBSTR('||w_moi_retour||',5,2),substr(indicatif,1,2))'||'||''01'''||',''YYYYMMDD'')';
~:-            req                    := req ||'as '||w_date_eff;
~:-            req                    := req ||',substr(indicatif,4,3) as '||w_code_caisse||',';
~:-            req                    := req ||'numpac||nvl(tge.pacmat,'||w_colonne_30||') as idPACMAT';
~:-            req                    := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp,indicatif  ,valeur from tge_import_FSED_30  where ID_TRT= ' ;
~:-            req                    := req ||':id  AND tablegxp='''||w_table ||''' ';
~:-            req                    := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND numpac='''||w_numpac||''' ';
~:-            req                    := req || reqChrono;
~:-            req                    := req ||' ) pivot(max(valeur) for donneegxp in ('||clssreqPivotMerge;
~:-            req                    := req ||')) )tge )  i';
~:-            req                    := req ||' on ( T.numpac=i.numpac and T.paiezad =i.paiezad AND T.'||w_code_caisse||'=i.'||w_code_caisse||' AND i.'||w_date_eff||'= T.'||w_date_eff||') ';
~:-            req                    := req ||' when MATCHED THEN ' ;
~:-            req                    := req ||' UPDATE  set ';
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||'type_writer=''N'',';
~:-            END IF;
~:-            req                    := req ||clupdateMerge;
~:-            req                    := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-            req                    := req ||' when NOT MATCHED THEN ' ;
~:-            req                    := req ||' INSERT (numpac,pacmat,MATRIC,DATE_CREATION,paiezad,'||w_date_eff||','||w_code_caisse||','||clinsertDonMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',type_writer';
~:-            END IF;
~:-            req                    := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,i.PAIEZAD,i.'||w_DATE_EFF||',i.'||w_code_caisse||', ';
~:-            req                    := req || clinsertValMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',''N''';
~:-            END IF;
~:-            req := req ||')';
~:-            ---Tables MULTIPLE et OCCURS
~:-          ELSIF clssreqPivotMerge IS NOT NULL AND objtable.TABLETYPE IN ('MULTIPLE','OCCURS') THEN
~:-            FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Début  '||objtable.TABLETYPE);
~:-            req              := 'MERGE INTO '||w_table ||' T USING ';
~:-            req              := req ||'(select TGE.*';
~:-            IF w_code_caisse IS NOT NULL THEN
~:-              req            := req ||',substr(indicatif,1,3) as '||w_code_caisse;
~:-            END IF ;
~:-            req := req ||',numpac||nvl(tge.pacmat,'||w_colonne_30||') as idPACMAT';
~:-            IF p_table IN ('DIC_TGE_PRETS','DIC_TGE_OPPOSITIONS') THEN 
~:-            req := req ||' FROM (select * from (select id_trt,numpac,pacmat,MATRICULE, donneegxp,indicatif  ,valeur from tge_import_FSED_30  where ID_TRT= ' ;
~:-            ELSE
~:-            req := req ||' FROM (select * from (select id_trt,numpac, paiezad,pacmat,MATRICULE, donneegxp,indicatif  ,valeur from tge_import_FSED_30  where ID_TRT= ' ;
~:-            END IF;
~:-            req := req ||':id  AND tablegxp='''||w_table ||''' ';
~:-            req := req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99) AND numpac='''||w_numpac||'''  ';
~:-            req := req || reqChrono;
~:-            req := req ||' ) pivot(max(valeur) for donneegxp in ('||clssreqPivotMerge;
~:-            req := req ||')) )tge)  i';
~:-            req := req ||' on ( T.numpac=i.numpac ';
~:-            IF w_table NOT IN ('DIC_TGE_PRETS','DIC_TGE_OPPOSITIONS') THEN
~:-              req := req ||' and T.paiezad =i.paiezad ';
~:-            ELSE
~:-              req := req ||' and T.pacmat =i.pacmat ';
~:-            END IF;
~:-            req             := req ||'  and i.'||w_code_caisse||'=t.'||w_code_caisse;
~:-            IF w_type_retour ='RC' THEN
~:-              req           := req ||' AND T.PACMAT NOT IN (SELECT PACMAT FROM GAP_TRT_LISTE_MAT_HISTO G WHERE G.NUMPAC=T.NUMPAC AND G.PERIODE_PAIE = '''||w_moi_retour||''' AND SUBSTR(TO_CHAR(G.DATE_RESP,''YYYYMMDD''),5,2)<= '||SUBSTR(w_moi_retour,5,2)||')';
~:-            END IF;
~:-            req                    := req ||') ';
~:-            req                    := req ||' when MATCHED THEN UPDATE  set ' ;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||'type_writer=''N'', ';
~:-            END IF;
~:-            req := req ||clupdateMerge;
~:-            req := req ||',DATE_DERNIERE_MODIF=sysdate ';
~:-            req := req ||' when NOT MATCHED THEN INSERT (numpac,pacmat,MATRIC,DATE_CREATION,';
~:-            IF w_table NOT IN ('DIC_TGE_PRETS','DIC_TGE_OPPOSITIONS') THEN
~:-              req := req ||' PAIEZAD,';
~:-            END IF;
~:-            IF w_code_caisse IS NOT NULL THEN
~:-              req            := req ||w_code_caisse||',';
~:-            END IF ;
~:-            req                    := req ||clinsertDonMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',type_writer';
~:-            END IF;
~:-            req := req ||') VALUES (i.numpac,i.pacmat,i.MATRICULE,sysdate,';
~:-            IF w_table NOT IN ('DIC_TGE_PRETS','DIC_TGE_OPPOSITIONS') THEN
~:-              req := req ||'  i.PAIEZAD,';
~:-            END IF;
~:-            IF w_code_caisse IS NOT NULL THEN
~:-              req            := req ||'i.'||w_code_caisse||',';
~:-            END IF ;
~:-            req                    := req || clinsertValMerge;
~:-            IF objtable.ALLERRETOUR ='2' THEN
~:-              req                  := req ||',''N''';
~:-            END IF;
~:-            req := req ||')';
~:-          END IF;
~:-          IF req IS NOT NULL THEN
~:-            w_00 :=tab_numLigne00(i);
~:-            w_99 :=tab_numLigne99(i);
~:-            IF objtable.TABLETYPE IN('H2','M7') THEN
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';Ligne00='||tab_numLigne00(i)||';Ligne99='||tab_numLigne99(i)||'='|| substr(req,0,3600));
~:-              EXECUTE IMMEDIATE req USING p_id,
~:-              tab_numLigne00(i),
~:-              tab_numLigne99(i);
~:-              IF reqUdpateDate IS NOT NULL THEN
~:-                FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';Ligne00='||tab_numLigne00(i)||';Ligne99='||tab_numLigne99(i)||'='|| substr(reqUdpateDate,0,3600));
~:-                EXECUTE IMMEDIATE reqUdpateDate USING p_id,
~:-                tab_numLigne00(i),
~:-                tab_numLigne99(i);
~:-              END IF;
~:-            elsiF objtable.TABLETYPE IN('M1','M3ANNEE') THEN
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';Ligne00='||tab_numLigne00(i)||';Ligne99='||tab_numLigne99(i)||'='|| substr(req,0,3600));
~:-              EXECUTE IMMEDIATE req USING p_id,
~:-              tab_numLigne00(i),
~:-              tab_numLigne99(i);
~:-            ELSiF objtable.TABLETYPE <> 'AVPERS' THEN
~:-              FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 p_id='||p_id||';Ligne00='||tab_numLigne00(i)||';Ligne99='||tab_numLigne99(i)||'='|| substr(req,0,3600));
~:-              EXECUTE IMMEDIATE req USING p_id,
~:-              tab_numLigne00(i),
~:-              tab_numLigne99(i) ;
~:-            END IF;
~:-            IF w_table = 'DIC_TGE_RESPAIE_UNIQUE' THEN
~:-              R_PRESENT_FICHIER_PAIE( w_numpac , null );
~:-            END IF;
~:-          END IF;
~:-        END IF;
~:-      END IF;
~:-    END IF;
~:-    IF objtable.TABLETYPE ='AVPERS' AND w_table ='DIC_ADM_CONTRAT_HISTO' THEN
~:-      -- insertion dans SECUPACMAT_TMP_CONTRAT
~:-      INSERT
~:-      INTO SECUPACMAT_TMP_CONTRAT
~:-        (
~:-          numpac,
~:-          pacmat
~:-        )
~:-      SELECT DISTINCT numpac,
~:-        NVL(pacmat,paiezad)
~:-      FROM TGE_IMPORT_FSED_30
~:-      WHERE ID_TRT=p_id
~:-      AND numligne BETWEEN tab_numLigne00(i) AND tab_numLigne99(i)
~:-      AND tablegxp=w_table ;
~:-      -- lancement de la procédure ALIM_IDX_CH_RETOUR_PAIE
~:-      ALIM_IDX_CH_RETOUR_PAIE();
~:-      --suppression des matricules de la table SECUPACMAT_TMP_CONTRAT
~:-       EXECUTE_IMMEDIATE_STRING ( 'truncate table SECUPACMAT_TMP_CONTRAT',0);
~:-    END IF;
~:-  END LOOP;
~:-  FOR trig IN
~:-  (SELECT object_name
~:-  FROM user_objects
~:-  WHERE lower(object_type)='trigger'
~:-  AND lower(object_name) LIKE '%'
~:-    ||lower(w_table)
~:-    ||'%'
~:-  AND (lower(object_name) LIKE 'horo%' )
~:-  )
~:-  LOOP
~:-     EXECUTE_IMMEDIATE_STRING  ('ALTER TRIGGER ' || trig.object_name ||' enable ',0);
~:-  END LOOP;
~:-  --Mise à jour des indicateurs de production pour la période traité dans le retour de paie te pour chaque salarié traité.
~:-  req             := 'update GAP_TRT_LISTE_MAT_HISTO ';
~:-  IF w_type_retour ='RN' THEN
~:-    w_date_indic  := to_date(sysdate);
~:-    req           := req ||'set DATE_RESP = :date_effet ';
~:-  END IF;
~:-  IF w_type_retour ='RC' THEN
~:-    SELECT MAX(date_COMP)
~:-    INTO w_date_comp
~:-    FROM GAP_TRT_LISTE_MAT_HISTO
~:-    WHERE numpac     = w_numpac
~:-    AND periode_paie = w_moi_retour
~:-    AND pacmat      IN
~:-      (SELECT DISTINCT pacmat
~:-      --DIT 50818 
~:-      FROM DIC_ADM_CONTRAT_SITU
~:-      WHERE numpac = w_numpac
~:-      AND paiezad IN
~:-        (SELECT DISTINCT paiezad FROM TGE_IMPORT_FSED_30 WHERE id_trt = p_id
~:-        )
~:-      );
~:-    IF w_date_comp  <to_date(sysdate) THEN
~:-      w_date_indic := w_date_comp;
~:-    ELSE
~:-      w_date_indic := to_date(sysdate);
~:-    END IF;
~:-    req:= req ||'set DATE_COMP = :date_effet ';
~:-  END IF ;
~:-  req:= req || ' where NUMPAC = :numpac  and   PERIODE_PAIE = :periode ';
~:-  req:= req || ' and pacmat in (select distinct pacmat from DIC_ADM_CONTRAT_SITU where numpac = : numpac and paiezad in (select distinct paiezad from TGE_IMPORT_FSED_30 where id_trt = :trt) )';
~:-  EXECUTE IMMEDIATE req USING w_date_indic,
~:-  w_numpac,
~:-  w_moi_retour,
~:-  w_numpac,
~:-  p_id;
~:-  --RSI : En cas de RC, il faut regarder si elle est plus vieille que le mois du retour complémentaire.
~:-  IF w_type_retour ='RC' THEN
~:-  --DEBUT M3ANNEE
~:-    IF objtable.TABLETYPE ='M3ANNEE' THEN
~:-      IF tabW580_h.exists(1) THEN
~:-        FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC '||objtable.TABLETYPE );
~:-        FOR i IN tabW580_h.first..tabW580_h.last
~:-        LOOP
~:-          IF SUBSTR(w_moi_retour,5,2)>=tabW580_h(i).donnee_W580_h THEN
~:-            req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-            req                      := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-            req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||';
~:-            req                      := req ||' NVL('''||tabW580_h(i).donnee_W580_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-            req                      := req ||' AND TO_DATE(';
~:-            req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||';
~:-            req                      := req ||' NVL('''||tabW580_h(i).donnee_W580_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364';
~:-            req                      := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-          ELSE
~:-            req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad) ';
~:-            req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-            req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-            req := req ||' NVL('''||tabW580_h(i).donnee_W580_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-            req := req ||' AND TO_DATE(';
~:-            req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-            req := req ||' NVL('''||tabW580_h(i).donnee_W580_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364';
~:-            req := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-          END IF;
~:-          FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC req='||substr(req,0,3700));
~:-          EXECUTE IMMEDIATE req USING p_id;
~:-        END LOOP;
~:-      ELSE
~:-        IF SUBSTR(w_moi_retour,5,2)>=objtable.MOISZERO THEN
~:-          req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-          req                      := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-          req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-          req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-          req                      := req ||' AND TO_DATE(';
~:-          req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-          req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')+364';
~:-          req                      := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-        ELSE
~:-          req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-          req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-          req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||''';
~:-          req := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-          req := req ||' AND TO_DATE(';
~:-          req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-          req := req ||objtable.MOISZERO||'||''01'''||',''YYYYMMDD'')+364';
~:-          req := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-        END IF ;
~:-        FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC req='||substr(req,0,3700));
~:-        EXECUTE IMMEDIATE req USING p_id;
~:-        req:='';
~:-      END IF;
~:-    END IF;
~:-  -- Fin M3ANNEE
~:-  --DEBUT M1
~:-  IF objtable.TABLETYPE = 'M1' THEN
~:-      IF tabWL52_h.exists(1) THEN
~:-        FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC '||objtable.TABLETYPE );
~:-        FOR i IN tabWL52_h.first..tabWL52_h.last
~:-        LOOP
~:-          IF SUBSTR(w_moi_retour,5,2)>=tabWL52_h(i).donnee_WL52_h THEN
~:-            req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-            req                      := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-            req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||';
~:-            req                      := req ||' NVL('''||tabWL52_h(i).donnee_WL52_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-            req                      := req ||' AND TO_DATE(';
~:-            req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||';
~:-            req                      := req ||' NVL('''||tabWL52_h(i).donnee_WL52_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364';
~:-            req                      := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-          ELSE
~:-            req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad) ';
~:-            req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-            req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-            req := req ||' NVL('''||tabWL52_h(i).donnee_WL52_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')';
~:-            req := req ||' AND TO_DATE(';
~:-            req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-            req := req ||' NVL('''||tabWL52_h(i).donnee_WL52_h||''','''||objtable.MOISZERO||''')'||'||''01'''||',''YYYYMMDD'')+364';
~:-            req := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-          END IF;
~:-          FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC req='||substr(req,0,3700));
~:-          EXECUTE IMMEDIATE req USING p_id;
~:-        END LOOP;
~:-      ELSE
~:-        IF SUBSTR(w_moi_retour,5,2)>=objtable.MOISZERO THEN
~:-          req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-          req                      := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-          req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-          req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-          req                      := req ||' AND TO_DATE(';
~:-          req                      := req ||' SUBSTR('||w_moi_retour||',1,4)||''';
~:-          req                      := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')+364';
~:-          req                      := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-        ELSE
~:-          req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) ';
~:-          req := req ||' AND '||w_date_eff||' between TO_DATE(';
~:-          req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||''';
~:-          req := req ||objtable.MOISZERO||'''||''01'''||',''YYYYMMDD'')';
~:-          req := req ||' AND TO_DATE(';
~:-          req := req ||' (SUBSTR('||w_moi_retour||',1,4)-1)||';
~:-          req := req ||objtable.MOISZERO||'||''01'''||',''YYYYMMDD'')+364';
~:-          req := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-        END IF ;
~:-        FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC req='||substr(req,0,3700));
~:-        EXECUTE IMMEDIATE req USING p_id;
~:-        req:='';
~:-      END IF;
~:-    END IF;
~:-  --FIN M1
~:-  
~:-    IF objtable.TABLETYPE ='M9' THEN
~:-      FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC M9');
~:-      IF SUBSTR(w_moi_retour,5,2)>=objtable.MOISZERO THEN
~:-        req                      := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) AND '||w_date_eff||' between TO_DATE(SUBSTR('||w_moi_retour||',1,4)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'') and (TO_DATE(SUBSTR('||w_moi_retour||',1,4)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'')+364) ';
~:-      ELSE
~:-        req := ' delete from  '||w_table ||' T where numpac ='''||w_numpac||''' AND  EXISTS (select 1 from TGE_IMPORT_FSED_30 where id_trt = :id and TGE_IMPORT_FSED_30.paiezad=T.paiezad ) AND '||w_date_eff||' between TO_DATE((SUBSTR('||w_moi_retour||',1,4)-1)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'') and (TO_DATE((SUBSTR('||w_moi_retour||',1,4)-1)||'''||objtable.MOISZERO||'''||''01'',''YYYYMMDD'')+364)';
~:-      END IF;
~:-      req := req ||' AND '||w_date_eff||' < TO_DATE('||w_moi_retour||'||''01'''||',''YYYYMMDD'')';
~:-      FSED_AVANCEMENT(p_id,'FSED.sous_insertCart30 Delete RC req='||substr(req,0,3700));
~:-      EXECUTE IMMEDIATE req USING p_id;
~:-      req:='';
~:-    END IF;
~:-  END IF;
~:-  v_stop := DBMS_UTILITY.GET_TIME;
~:-  tab_numLigne00.delete;
~:-  tab_numLigne99.delete;
~:-  IF p_table ='DIC_ADM_CONTRAT_HISTO' THEN
~:-    COMMIT;
~:-    FSED_AVANCEMENT(p_id,'MAJ_DATE_FIN_CONTRAT_HISTO ');
~:-    MAJ_DATE_FIN_CONTRAT_HISTO();
~:-    COMMIT;
~:-    FSED_AVANCEMENT(p_id,'R_DATE_FIN_BO_CONTRAT_HISTO');
~:-    R_DATE_FIN_BO_CONTRAT_HISTO();
~:-    FSED_AVANCEMENT(p_id,'R_DATE_SORTIE_SIT_BO_CNT_HISTO');
~:-    R_DATE_SORTIE_SIT_BO_CNT_HISTO();
~:-    FSED_AVANCEMENT(p_id,'Fin R_DATE_SORTIE_SIT_BO_CNT_HISTO');
~:-  END IF;
~:-  COMMIT;
~:-  --gestion du trigger des DACH : suppression de la table temporaire BYPASS_TRG_DACH_ON_SESSION
~:-  DELETE FROM BYPASS_TRG_DACH_ON_SESSION;
~:-   EXECUTE_IMMEDIATE_STRING ('truncate table TGE_FSED_30_TEMPORARY',0);
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  --gestion du trigger des DACH : suppression de la table temporaire BYPASS_TRG_DACH_ON_SESSION
~:-  DELETE FROM BYPASS_TRG_DACH_ON_SESSION;
~:-   EXECUTE_IMMEDIATE_STRING ('truncate table TGE_FSED_30_TEMPORARY',0);
~:-  err_code := SQLCODE;
~:-  err_msg  := err_msg||' '||SQLERRM;
~:- IF reqTrace is not null then
~:-    FSED_ERREUR(p_id , 'Trace SYS_TRC_MODIF ',p_id || ',' || p_newId || ',' || p_table, err_code || '-' || err_msg||' requete :'||req );
~:- END IF;
~:-  FSED_ERREUR(p_id , 'insertCart30 '||p_table||' ' || w_elem, p_id || ',' || p_newId || ',' || p_table, err_code || '-' || err_msg||' requete :'||req );
~:-  raise_application_error(-20000, 'FSED insertCart30  '|| sqlerrm||' w_00 :'||w_00||'w_99 :'||w_99||'elem :'||w_elem||'occur'||w_occ);
~:-END sous_insertCart30;
~:-/********************************************************************
~:-PROC : insertCart30(p_id    IN NUMBER,
~:-p_newId IN NUMBER,
~:-p_table IN VARCHAR2 )
~:-DESC : Procedure de lancement de retour de paie pour les cartes 30
~:-*********************************************************************/
~:-PROCEDURE insertCart30(
~:-    p_id    IN NUMBER ,
~:-    p_newId IN NUMBER ,
~:-    p_table IN VARCHAR2) parallel_enable
~:-IS
~:-  jobno NUMBER;
~:-BEGIN
~:-  dbms_job.submit(jobno, 'sous_insertCart30('||p_id||','||p_newid||','||p_table||');',sysdate, NULL);
~:-END insertCart30;
~:-/*****************************************************************************
~:-PROC : getPeriodeReceuil(p_numpac  in     TGE_REF_PAC.numpac%type,
~:-p_paiezad in     TGE_IMPORT_FSED_30.paiezad%type,
~:-p_dateDeb in out DATE,
~:-p_dateFin in out DATE)
~:-DESC : retourne la date debut et fin de la periode de recueil
~:-TEST : getPeriodeReceuil('TLSE01','0001492')-->(2010-01-01,2014-02-02)
~:-*******************************************************************************/
~:-PROCEDURE getPeriodeRecueil(
~:-    p_numpac  IN TGE_REF_PAC.numpac%type,
~:-    p_paiezad IN TGE_IMPORT_FSED_30.paiezad%type,
~:-    p_dateDeb IN OUT DATE,
~:-    p_dateFin IN OUT DATE)
~:-IS
~:-  w_dsdcn DIC_ADM_CONTRAT.dsdcn%TYPE;
~:-  w_dsfcn DIC_ADM_CONTRAT.dsfcn%TYPE;
~:-  w_dr DATE;
~:-  w_fr DATE;
~:-  w_periodeEnCours tge_ref_pac.periodeencours%TYPE;
~:-  w_doneegxpFin TGE_REF_MAPDO.donneegxp%type;
~:-  w_doneegxpDeb TGE_REF_MAPDO.donneegxp%type;
~:-  w_req CLOB;
~:-  w_pacmat DIC_ADM_CONTRAT_SITU.pacmat%type;--DIT 50818 
~:-BEGIN
~:-  SELECT pacmat
~:-  INTO w_pacmat
~:-  FROM DIC_ADM_CONTRAT_SITU --DIT 50818 
~:-  WHERE numpac =p_numpac
~:-  AND paiezad  = p_paiezad
~:-  AND rownum   =1 ;
~:-  BEGIN
~:-    SELECT POP.DSDCN,
~:-      POP.DSFCN,
~:-      CASE
~:-        WHEN R.DATE_DEBUT_1 IS NOT NULL
~:-        THEN R.DATE_DEBUT_1
~:-        ELSE L.DEBUT_PERIODE
~:-      END AS DT_RECUEIL_DEB,
~:-      CASE
~:-        WHEN R.DATE_FIN_1 IS NOT NULL
~:-        THEN R.DATE_FIN_1
~:-        ELSE L.FIN_PERIODE
~:-      END AS DT_RECUEIL_FIN,
~:-      POP.PERIODEENCOURS
~:-    INTO w_dsdcn,
~:-      w_dsfcn,
~:-      p_dateDeb,
~:-      p_dateFin,
~:-      w_periodeEnCours
~:-    FROM
~:-      (SELECT C.NUMPAC,
~:-        S.paiezad,--DIT 50818 
~:-        c.pacmat,
~:-        P.PERIODEENCOURS,
~:-        C.DSDCN AS DSDCN,
~:-        C.DSFCN AS DSFCN
~:-      FROM DIC_ADM_CONTRAT C,
~:-        DIC_ADM_CONTRAT_SITU S,--DIT 50818 
~:-        TGE_REF_PAC P
~:-      WHERE C.NUMPAC = P.NUMPAC
~:-      AND C.NUMPAC   = S.NUMPAC
~:-      AND C.PACMAT   = S.PACMAT
~:-      AND C.NUMCNT   = S.NUMCNT
~:-      AND C.NUMPAC   = p_numpac
~:-      AND S.PAIEZAD  = p_paiezad--DIT 50818 
~:-      ) POP ,
~:-      SECUPACMAT S ,
~:-      DIC_TGE_PERIODES_RECUEIL R ,
~:-      TGE_REF_LTP L
~:-    WHERE POP.NUMPAC       = S.NUMPAC
~:-    AND POP.PACMAT         = S.PACMAT
~:-    AND POP.NUMPAC         = L.NUMPAC
~:-    AND POP.PERIODEENCOURS = L.MOIS_PAIE
~:-    AND POP.PAIEZAD        = R.PAIEZAD(+)
~:-    AND POP.NUMPAC         = R.NUMPAC(+)
~:-    AND rownum             = 1 ;
~:-  EXCEPTION
~:-  WHEN OTHERS THEN
~:-    err_msg := SQLERRM;
~:-  END;
~:-  SELECT m.donneegxp
~:-  INTO w_doneegxpDeb
~:-  FROM TGE_REF_MAPDO M
~:-  WHERE ( ELEMENT = 'A275' )
~:-  AND ( ( (SELECT COUNT(*)
~:-    FROM TGE_REF_MAPDO
~:-    WHERE NUMPAC=p_numpac
~:-    AND ELEMENT = M.ELEMENT) > 0
~:-  AND M.NUMPAC  = 'TLSE01' )
~:-  OR ( (SELECT COUNT(*)
~:-    FROM TGE_REF_MAPDO
~:-    WHERE NUMPAC=p_numpac
~:-    AND ELEMENT = M.ELEMENT) = 0
~:-  AND M.NUMPAC  ='*' ) );
~:-  SELECT m.donneegxp
~:-  INTO w_doneegxpFin
~:-  FROM TGE_REF_MAPDO M
~:-  WHERE ( ELEMENT = 'A309' )
~:-  AND ( ( (SELECT COUNT(*)
~:-    FROM TGE_REF_MAPDO
~:-    WHERE NUMPAC=p_numpac
~:-    AND ELEMENT = M.ELEMENT) > 0
~:-  AND M.NUMPAC  = 'TLSE01' )
~:-  OR ( (SELECT COUNT(*)
~:-    FROM TGE_REF_MAPDO
~:-    WHERE NUMPAC    =p_numpac
~:-    AND ELEMENT     = M.ELEMENT) = 0
~:-  AND M.NUMPAC      ='*' ) );
~:-  IF w_doneegxpDeb IS NOT NULL AND w_doneegxpFin IS NOT NULL THEN
~:-    w_req          := 'select distinct '||w_doneegxpDeb||','||w_doneegxpFin ||' from DIC_ADM_CONTRAT_HISTO where numpac = :numpac and pacmat= :pacmat and DATE_EFF <= :dateeff ';
~:-    EXECUTE immediate w_req INTO w_dr,
~:-    w_fr USING p_numpac,
~:-    w_pacmat,
~:-    last_day(to_date(w_periodeencours,'YYYYMM'));
~:-  END IF;
~:-  IF p_dateDeb >w_dr AND w_dr <p_dateFin THEN
~:-    p_dateDeb := w_dr ;
~:-  END IF ;
~:-  IF w_fr      > to_date(w_periodeencours,'YYYYMM') AND w_fr < last_day(to_date(w_periodeencours,'YYYYMM')) THEN
~:-    p_dateFin := w_fr;
~:-  END IF;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_msg := SQLERRM;
~:-END getPeriodeRecueil;
~:-/*************************************************************************************************************************************
~:-PROC :  maj_CAD30   (p_id IN NUMBER)
~:-DESC :  Procedure de mise à jour des compteurs aprés retour de paie
~:-TEST :  cad_compteur          : code_compteur in ('CPO','CRTT') and matricule in ('0001494','0001492','0001498','0001576','0001510')
~:-TGE_REF_MAPDO         : TRTPARTICULIER like 'CAD=%' and ELEMENT IN ('I001','I002','I005','J003','T301','T303')
~:-DIC_ADM_CONTRAT       : matric in ('0001494','0001492','0001498','0001576','0001510') and NUMPAC ='TLSE01'
~:-DIC_ADM_CONTRAT_HISTO : pacmat in ('00001492','00001494','00001498','00001510','00001576') and numpac ='TLSE01'
~:-TGE_IMPORT_FSED_30    : code_element in ('I001','I002','I005','T301','T303','J003') and id_trt =2576
~:-CAD.CAD_unite_cpt('0001510','20130101','CPO') -->'U'
~:-CAD.CAD_unite_cpt('0001498','20130101','CPO') -->NULL
~:-CAD.CAD_unite_cpt('0001576','20130101','CPO') -->NULL
~:-CAD.CAD_unite_cpt('0001498','20130101','CRTT')-->'U'
~:-CAD.CAD_unite_cpt('0001492','20130101','CRTT')-->'U'
~:-CAD.CAD_unite_cpt('0001494','20130101','CRTT')-->'U'
~:-CAD.CAD_unite_cpt('0001510','20130101','CRTT')-->'U'
~:-***************************************************************************************************************************************/
~:-PROCEDURE maj_CAD30(
~:-    p_id IN NUMBER)
~:-IS
~:-  CURSOR cur_element ( pnumpac IN VARCHAR2)
~:-  IS
~:-    SELECT DISTINCT DO.ELEMENT,
~:-      do.TRTPARTICULIER ,
~:-      imp.paiezad,
~:-      imp.pacmat
~:-    FROM
~:-      (SELECT *
~:-      FROM TGE_REF_MAPDO
~:-      WHERE numpac= pnumpac
~:-      AND TRTPARTICULIER LIKE 'CAD=%'
~:-    UNION ALL
~:-    SELECT *
~:-    FROM TGE_REF_MAPDO
~:-    WHERE numpac     ='*'
~:-    AND ELEMENT NOT IN
~:-      (SELECT ELEMENT FROM TGE_REF_MAPDO WHERE numpac=pnumpac
~:-      )
~:-    AND TRTPARTICULIER LIKE 'CAD=%'
~:-      ) DO ,
~:-      tge_import_fsed_30 imp
~:-    WHERE id_trt        = p_id
~:-    AND imp.code_element= do.element
~:-    ORDER BY DO.ELEMENT;
~:-    w_cad CAD_COMPTEUR.CODE_COMPTEUR%TYPE;
~:-    w_pot CAD_COMPTEUR.POT1_FJ%TYPE;
~:-    w_cad_temp  VARCHAR2(11);
~:-    w_pot_temp  VARCHAR2(11);
~:-    w_type_date VARCHAR2(11);
~:-    w_req_maj CLOB;
~:-    w_req CLOB;
~:-    w_seq      NUMBER;
~:-    w_unit     VARCHAR2(1);
~:-    w_cadCount NUMBER := 1;
~:-    w_numpac TGE_REF_PAC.NUMPAC%TYPE;
~:-    w_periode    DATE;
~:-    w_dateDed    DATE;
~:-    w_dateFin    DATE;
~:-    w_moi_retour NUMBER;
~:-    w_matric     DIC_ADM_CONTRAT_SITU.matric%type;--DIT 50818 
~:-    w_dateCalcul  DATE;
~:-    w_matricCount NUMBER :=1;
~:-    obj_cad CAD_DATEVALID;
~:-    tab_DATEVALID TAB_CAD_DATEVALID;
~:-    w_datevalidCount NUMBER :=1;
~:-    w_num number;
~:-    w_num2 number;
~:-    W_IS_T1_LIKE_DECIDIUM SYS_VARSYS.VALVAR%TYPE;
~:-    w_DSDSC DIC_ADM_CONTRAT_SITU.DSDSC%TYPE;
~:-  TYPE t_cad
~:-IS
~:-  TABLE OF VARCHAR2(5) INDEX BY VARCHAR2(2) ;
~:-TYPE t_matric
~:-IS
~:-  TABLE OF VARCHAR2(32) INDEX BY VARCHAR2(2) ;
~:-  tab_cad TAB_SMALLVARCHAR;
~:-  tab_matric TAB_SMALLVARCHAR; 
~:-BEGIN
~:-  FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 début');
~:-  ---Sélection des éléments liés à des compteurs
~:-  --T1 LIKE DECIDECIDIUM 
~:-  BEGIN 
~:-  SELECT upper(NVL(VALVAR,'FALSE'))
~:-  INTO W_IS_T1_LIKE_DECIDIUM
~:-  FROM SYS_VARSYS 
~:-  WHERE codvar='IS_T1_LIKE_DECIDIUM'
~:-  AND MODULE='GTA';
~:-  Exception 
~:-   WHEN OTHERS THEN 
~:-   W_IS_T1_LIKE_DECIDIUM :='FALSE';
~:-    FSED_AVANCEMENT(p_id,'Warning : la varsys IS_T1_LIKE_DECIDIUM n existe pas ');
~:-  END;
~:-  getNumLigne(p_id);
~:-  FOR i IN tab_numLigne00.first..tab_numLigne00.last
~:-  LOOP
~:-    IF i            <=tab_numLigne99.count AND tab_numLigne99(i) IS NOT NULL THEN
~:-      w_numpac      := GET_NUMPAC(p_id,tab_numLigne00(i));
~:-      w_moi_retour  := GET_PERIODE_00(p_id,tab_numLigne00(i));
~:-      tab_DATEVALID := TAB_CAD_DATEVALID();
~:-      tab_cad       := TAB_SMALLVARCHAR();
~:-      tab_matric    := TAB_SMALLVARCHAR();
~:-      FOR C IN cur_element(w_numpac)
~:-      LOOP
~:-        FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 loop '||C.TRTPARTICULIER||'  '||'paiezad'||C.paiezad);
~:-        w_cad_temp  := SUBSTR(C.TRTPARTICULIER,1,instr(C.TRTPARTICULIER,',')-1);
~:-        w_cad       := SUBSTR(w_cad_temp,instr(w_cad_temp,'=')              +1,LENGTH(w_cad_temp));
~:-        w_pot_temp  := SUBSTR(C.TRTPARTICULIER,instr(C.TRTPARTICULIER,',')  +1,LENGTH(C.TRTPARTICULIER));
~:-        w_pot       := NVL(SUBSTR(w_pot_temp,1,instr(w_pot_temp,'F')        -2),NVL(SUBSTR(w_pot_temp,1,instr(w_pot_temp,'D')-2),w_pot_temp));
~:-        w_type_date := NVL(SUBSTR(w_pot_temp,LENGTH(w_pot_temp)             -1,instr(w_pot_temp,'F')),SUBSTR(w_pot_temp,LENGTH(w_pot_temp)-1,instr(w_pot_temp,'D')));
~:-        --T1 LIKE DECIDECIDIUM 
~:-        IF W_IS_T1_LIKE_DECIDIUM ='FALSE' THEN 
~:-        --getPeriodeRecueil(w_numpac,C.paiezad,w_dateDed,w_dateFin);
~:-        FSED_AVANCEMENT(p_id,'Avant :getPeriodeRecueil:paiezad '||C.paiezad||' '||'w_dateDed'||w_dateDed||' '||'w_dateFin'||w_dateFin);
~:-        getPeriodeRecueilEvol(p_id,w_numpac,w_moi_retour,C.paiezad,w_dateDed,w_dateFin);
~:-        FSED_AVANCEMENT(p_id,'Apres :getPeriodeRecueil:paiezad '||C.paiezad||' '||'w_dateDed'||w_dateDed||' '||'w_dateFin'||w_dateFin);
~:-        END IF; 
~:-        IF w_type_date   ='FP' THEN
~:-          w_periode     := LAST_DAY(TO_DATE(w_moi_retour,'YYYYMM'));
~:-        elsif w_type_date='DP' THEN
~:-          w_periode     := TO_DATE(w_moi_retour,'YYYYMM');
~:-        elsif w_type_date='DR' AND W_IS_T1_LIKE_DECIDIUM ='FALSE' THEN
~:-          w_periode     := w_dateDed;
~:-        elsif w_type_date='FR' AND W_IS_T1_LIKE_DECIDIUM ='FALSE' THEN
~:-          w_periode     := w_dateFin ;
~:-        END IF;
~:-
~:-        -- on mémorise que ce matricule/compteur a déjà été effacé, il ne faut pas le reeffacer sous peine de perre les compteurs déjà positionnés
~:-        w_req := 'insert into CAD_RETP_MATRIC_CPT_DELETED values (nvl((SELECT DISTINCT MATRIC FROM DIC_ADM_CONTRAT WHERE PAIEZAD = :paiezad AND NUMPAC = :numpac),''INCONNU''),:w_cad)';
~:-        EXECUTE immediate w_req USING C.paiezad,
~:-        w_numpac,
~:-        w_cad;
~:-        commit;
~:-        IF w_cad IS NOT NULL THEN
~:-          tab_cad.extend;
~:-          tab_cad(w_cadCount):= w_cad;
~:-          w_cadCount         := w_cadCount + 1;
~:-        END IF;
~:-        BEGIN
~:-          SELECT DISTINCT matric,DSDSC
~:-          INTO w_matric,w_DSDSC
~:-          FROM DIC_ADM_CONTRAT_SITU
~:-          WHERE numpac =w_numpac
~:-          AND paiezad  =C.paiezad ;
~:-        EXCEPTION
~:-        WHEN NO_DATA_FOUND THEN
~:-          w_matric := NULL;
~:-        WHEN OTHERS THEN
~:-          err_msg := SQLERRM;
~:-        END;
~:-        IF w_matric IS NOT NULL THEN
~:-          tab_matric.extend;
~:-          tab_matric(w_matricCount) := w_matric;
~:-          w_matricCount             := w_matricCount+1;
~:-          FSED_AVANCEMENT(p_id,'FSED.maj_CAD30: CAD.CAD_UNITE_CPT');
~:-          w_unit     := CAD.CAD_UNITE_CPT(w_matric,TO_CHAR(to_date(w_moi_retour,'YYYYMM'),'YYYYMMDD'),w_cad);
~:-          IF w_unit  IS NOT NULL THEN
~:-            w_req    := 'MERGE INTO CAD_COMPTEUR CA USING ';
~:-            w_req    := w_req ||'(SELECT * from (select  (select distinct c.matric from dic_ADM_CONTRAt c,DIC_ADm_CONTRAT_HISTO h where c.numpac=h.numpac and  c.numpac =:numpac AND c.paiezad =TGE.paiezad and h.ZA996 =''Z'' and c.pacmat =h.pacmat   )';
~:-            w_req    := w_req ||' as MATRICULE ,to_char(to_date('''||w_periode||'''),''YYYYMMDD'') as DJOUR ,';
~:-            w_req    := w_req ||' is_number(TGE.VALEUR) AS ';
~:-            IF w_unit = 'H' THEN
~:-              w_req  := w_req ||' pot'||w_pot||'_FH';
~:-            ELSE
~:-              w_req := w_req ||' pot'||w_pot||'_FJ';
~:-            END IF ;
~:-            w_req   := w_req ||' FROM TGE_IMPORT_FSED_30 TGE  where ID_TRT= :id and code_element= :elt and numpac = :numpac and tge.paiezad = :paiezad';
~:-            w_req   := w_req ||' AND (numligne >=:ligne0 AND numligne <= :ligne99)) where MATRICULE is not null)i ';
~:-            w_req   := w_req ||' ON (CA.MATRICULE =i.MATRICULE AND CA.DJOUR =i.DJOUR AND CA.TYPEMJ =''I'' AND CA.CODE_COMPTEUR = :cad )';
~:-            w_req   := w_req ||' when MATCHED THEN ' ;
~:-            w_req   := w_req ||' UPDATE  set ';
~:-            IF w_unit= 'H' THEN
~:-              w_req := w_req ||' pot'||w_pot||'_FH =(i.pot'||w_pot||'_FH)*3600 ';
~:-            ELSE
~:-              w_req := w_req ||' pot'||w_pot||'_FJ =(i.pot'||w_pot||'_FJ)';
~:-            END IF ;
~:-            w_req   := w_req ||' when NOT MATCHED THEN ' ;
~:-            w_req   := w_req ||' INSERT (MATRICULE, CODE_COMPTEUR, DJOUR,DATE_MAJ, TYPEMJ,';
~:-            IF w_unit= 'H' THEN
~:-              w_req := w_req ||' pot'||w_pot||'_FH)';
~:-            ELSE
~:-              w_req := w_req ||' pot'||w_pot||'_FJ)';
~:-            END IF;
~:-            w_req   := w_req ||'VALUES (i.MATRICULE,'''||w_cad||''',i.DJOUR,sysdate,''I'', ';
~:-            IF w_unit= 'H' THEN
~:-              w_req := w_req ||'(i.pot'||w_pot||'_FH)*3600 )';
~:-            ELSE
~:-              w_req := w_req ||'i.pot'||w_pot||'_FJ)';
~:-            END IF;
~:-            FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Merge : w_cad='||w_cad||' c.paiezad='||c.paiezad ||' C.ELEMENT='||C.ELEMENT||'tab_numLigne00(i)='||tab_numLigne00(i)||'tab_numLigne99(i)='||tab_numLigne99(i)||'substr('||w_req||',0,3600)' );
~:-            EXECUTE IMMEDIATE w_req USING w_numpac,
~:-            p_id,
~:-            C.ELEMENT,
~:-            w_numpac,
~:-            c.paiezad,
~:-            tab_numLigne00(i),
~:-            tab_numLigne99(i),
~:-            w_cad;
~:-          END IF;
~:-        END IF;
~:-        --  creation de l'objet + insertion dans le tableau TAB_CAD_DATEVALID
~:-        FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 insertion dans le tableau TAB_CAD_DATEVALID  paiezad '||c.paiezad||'  '||'dateDeb'||w_dateDed||' w_unit '||w_unit);
~:-        --T1 LIKE DECIDECIDIUM 
~:-        IF W_IS_T1_LIKE_DECIDIUM ='TRUE' THEN 
~:-        w_dateDed := w_periode ;
~:-        END IF;
~:-        IF w_matric IS NOT NULL AND w_dateDed IS NOT NULL AND w_unit IS NOT NULL AND w_cad IS NOT NULL THEN
~:-          Obj_CAD   := NEW CAD_DATEVALID( w_cad, c.element, c.paiezad,w_matric,w_dateDed,w_DSDSC,w_unit);
~:-          tab_DATEVALID.extend;
~:-          tab_DATEVALID(w_datevalidCount):= Obj_CAD ;
~:-          w_datevalidCount               := w_datevalidCount +1;
~:-        END IF;
~:-      END LOOP;
~:-    END IF;
~:-  END LOOP;
~:-  COMMIT;
~:-  FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Insertion des matricules dans CAD_CALCUL_EN_COURS_MATRIC ');
~:-  --- Insertion des matricules dans CAD_CALCUL_EN_COURS_MATRIC avec un nouvel ID :CAD_SEQ_CALCUL.NEXTVAL
~:-  w_seq := CAD_SEQ_CALCUL.NEXTVAL;
~:-  INSERT INTO CAD_CALCUL_EN_COURS_MATRIC
~:-    (ID,MATRICULE
~:-    )
~:-  SELECT DISTINCT w_seq ,
~:-    CAD.MATRIC
~:-  FROM
~:-    (SELECT DISTINCT ta.Matricule AS matric FROM TABLE (tab_DATEVALID) ta
~:-    )CAD ;
~:-  --- Lancement du calcul
~:-  --- si au moin 1 cad par element
~:-  IF w_cadCount >1 THEN
~:-    IF W_IS_T1_LIKE_DECIDIUM ='FALSE' THEN 
~:-    SELECT MIN(i.Periode_Recueil) INTO w_dateCalcul FROM TABLE(tab_DATEVALID) i;
~:-    IF w_dateCalcul >TO_DATE(w_moi_retour,'YYYYMM') THEN
~:-      w_dateCalcul := add_months(TO_DATE(w_moi_retour,'YYYYMM'),-1);
~:-    END IF;
~:-    ELSE 
~:-      w_dateCalcul := add_months(TO_DATE(w_moi_retour,'YYYYMM'),-1);
~:-    END IF; 
~:-    BEGIN
~:-      FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 avant CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR w_seq='||w_seq||' w_dateCalcul='||w_dateCalcul);
~:-      CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR(w_seq,TO_CHAR(w_dateCalcul,'YYYYMMDD'),NULL,'true','true');
~:-      FSED_AVANCEMENT(p_id,'FSED.maj_CAD30  après  CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR');
~:-    EXCEPTION
~:-    WHEN OTHERS THEN
~:-      err_code := SQLCODE;
~:-      err_msg  := SQLERRM;
~:-      FSED_AVANCEMENT(p_id,'FSED.maj_CAD30:ERR:CAD.CAD_MAJ_VALEUR_LISTE_RUBJOUR '||err_code||' '||err_msg);
~:-    END;
~:-  END IF;
~:-  COMMIT;
~:-  --la suppression du passé pour les matricules concernés par le retour
~:-  IF tab_matric.count>=1 AND tab_cad.count>=1 THEN
~:-    w_req:='truncate table TGE_MAJ_30_MATRIC_TEMPORARY';
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Vidage 1 de TGE_MAJ_30_MATRIC_TEMPORARY : '||w_req);
~:-     EXECUTE_IMMEDIATE_STRING  (w_req,0);
~:-    w_req:='truncate table TGE_MAJ_30_CPT_TEMPORARY';
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Vidage 1 de TGE_MAJ_30_CPT_TEMPORARY : '||w_req);
~:-     EXECUTE_IMMEDIATE_STRING ( w_req,0);
~:-    -- insert into temporary table TGE_MAJ_30_MATRIC_TEMPORARY et TGE_MAJ_30_CPT_TEMPORARY 
~:-    FORALL i IN tab_matric.first..tab_matric.last
~:-    INSERT INTO TGE_MAJ_30_MATRIC_TEMPORARY (matricule) values(tab_matric(i));
~:-    FORALL i IN tab_cad.first..tab_cad.last
~:-    INSERT INTO TGE_MAJ_30_CPT_TEMPORARY (CODE_COMPTEUR) values(tab_cad(i));
~:-    select count(*) into w_num from TGE_MAJ_30_MATRIC_TEMPORARY;
~:-    select count(*) into w_num2 from TGE_MAJ_30_cpt_TEMPORARY;
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 insertion temporary nb_matric='||w_num||' nb_cpt= '||w_num2);
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 suppression du passé');
~:-    w_req :=
~:-    'UPDATE CAD_COMPTEUR set pot1_FJ = null , pot1_FH = null ,pot2_FJ = null , pot2_FH = null ,pot3_FJ = null , pot3_FH = null ,pot4_FJ = null , pot4_FH = null, 
~:-pot5_FJ = null , pot5_FH = null ,pot6_FJ = null , pot6_FH = null ,pot7_FJ = null , pot7_FH = null ,pot8_FJ = null , pot8_FH = null, 
~:-pot9_FJ = null , pot9_FH = null ,pot10_FJ = null , pot10_FH = null ,pot11_FJ = null , pot11_FH = null ,pot12_FJ = null , pot12_FH = null , 
~:-POT1_VALEURJ  = null ,POT1_VALEURH  = null ,POT2_VALEURJ  = null ,POT2_VALEURH  = null ,POT3_VALEURJ  = null ,POT3_VALEURH  = null , 
~:-POT4_VALEURJ  = null ,POT4_VALEURH  = null ,POT5_VALEURJ  = null ,POT5_VALEURH  = null ,POT6_VALEURJ  = null ,POT6_VALEURH  = null , 
~:-POT7_VALEURJ  = null ,POT7_VALEURH  = null ,POT8_VALEURJ  = null ,POT8_VALEURH  = null ,POT9_VALEURJ  = null ,POT9_VALEURH  = null , 
~:-POT10_VALEURJ = null ,POT10_VALEURH = null ,POT11_VALEURJ = null ,POT11_VALEURH = null ,POT12_VALEURJ = null ,POT12_VALEURH = null , 
~:-POTV1_VALEURJ = null ,POTV1_VALEURH = null ,POTV2_VALEURJ = null ,POTV2_VALEURH = null ,POTV3_VALEURJ = null ,POTV3_VALEURH = null , 
~:-POTV4_VALEURJ = null ,POTV4_VALEURH = null ,POTV5_VALEURJ = null ,POTV5_VALEURH = null ,POTV6_VALEURJ = null ,POTV6_VALEURH = null '
~:-    ;
~:-    w_req := w_req ||'  where MATRICULE in (select matricule from TGE_MAJ_30_MATRIC_TEMPORARY)';
~:-    w_req := w_req ||' and CODE_COMPTEUR in (select CODE_COMPTEUR from TGE_MAJ_30_CPT_TEMPORARY)';
~:-    w_req := w_req ||' and typeMJ =''I'' and to_date(DJOUR,''YYYYMMDD'') < :periode';
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 req supression :periode='||w_dateCalcul||'w_req : '||w_req);
~:-    EXECUTE immediate w_req USING to_date(w_dateCalcul);
~:-    w_req:='truncate table TGE_MAJ_30_MATRIC_TEMPORARY';
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Vidage 2 de TGE_MAJ_30_MATRIC_TEMPORARY : '||w_req);
~:-     EXECUTE_IMMEDIATE_STRING  (w_req,0);
~:-    w_req:='truncate table TGE_MAJ_30_CPT_TEMPORARY';
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 Vidage 2 de TGE_MAJ_30_CPT_TEMPORARY : '||w_req);
~:-     EXECUTE_IMMEDIATE_STRING  (w_req,0);
~:-  END IF;
~:-  --Mettre à jour CAD_MATRIC_DATE_VALID :update la date de début de validité avec la date de début de recueil de la période suivante:
~:-  IF tab_DATEVALID.count>=1 THEN
~:-   IF W_IS_T1_LIKE_DECIDIUM ='FALSE' THEN 
~:-  FSED_AVANCEMENT(p_id,'FSED.maj_CAD30  loop tab_DATEVALID');
~:-    FOR i IN tab_DATEVALID.first..tab_DATEVALID.last
~:-    LOOP
~:-      UPDATE CAD_MATRIC_DATEVALID a
~:-      SET a.DATE_DEB_PER                   = TO_CHAR(ADD_MONTHS( to_date(tab_DATEVALID(i).Periode_Recueil),1),'YYYYMMDD')
~:-      WHERE a.Matricule                    = tab_DATEVALID(i).Matricule
~:-      AND a.code_compteur                  = tab_DATEVALID(i).Code_Compteur
~:-      AND to_date(a.DATE_EFFET,'YYYYMMDD') =
~:-        (SELECT MAX(to_date(b.date_effet,'YYYYMMDD'))
~:-        FROM cad_matric_datevalid b
~:-        WHERE to_date(b.date_effet,'YYYYMMDD')<= to_date(ADD_MONTHS( to_date(tab_DATEVALID(i).Periode_Recueil),1))
~:-        AND a.code_compteur                    =b.code_compteur
~:-        AND a.matricule                        =b.matricule
~:-        );
~:-    END LOOP;
~:-    ELSE 
~:-    FSED_AVANCEMENT(p_id,'FSED.maj_CAD30  MERGE CAD_MATRIC_DATEVALID');
~:-    merge INTO
~:-    (SELECT MATRICULE,CODE_COMPTEUR,DATE_EFFET,UNITE_TENUE,DATE_DEB_PER,DATE_FIN_PER ,
~:-    DATE_FIN_ACQUIS,DATE_DEB_ACQUIS,MAJ_CONTRAT,VISUHOUJ FROM CAD_MATRIC_DATEVALID ) a
~:-    USING
~:-    (SELECT distinct i.Matricule , i.Code_Compteur,
~:-    to_char(i.DATE_DEBUT,'YYYYMMDD') as DATE_DEB , i.unite FROM TABLE(tab_DATEVALID) i ) b
~:-    ON (a.Matricule =b.Matricule AND a.Code_Compteur=b.Code_Compteur and a.DATE_EFFET=to_char(w_periode,'YYYYMMDD'))
~:-    WHEN NOT matched THEN
~:-    INSERT
~:-    (a.Matricule,a.Code_Compteur,a.DATE_EFFET ,a.UNITE_TENUE,a.DATE_DEB_PER,a.DATE_FIN_PER ,
~:-    a.DATE_FIN_ACQUIS,a.DATE_DEB_ACQUIS,a.MAJ_CONTRAT,a.VISUHOUJ
~:-    --DATE_DEB_PER ,DATE_DEB_ACQUIS = DACS.DSDSC ,MAJ_CONTRAT =N  ,VISUHOUJ ='H' si unite ='H' sinon 'J'
~:-     ) VALUES
~:-     (b.Matricule,b.Code_Compteur,to_char(w_periode,'YYYYMMDD'),b.unite,b.DATE_DEB,'21991231','21991231',b.DATE_DEB,'N',decode(b.unite, 'H', 'H', 'J')
~:-    )
~:-    when matched then
~:-    UPDATE set a.UNITE_TENUE =b.unite ,a.DATE_DEB_PER =b.DATE_DEB ,a.DATE_FIN_PER='21991231' ,
~:-    a.DATE_FIN_ACQUIS='21991231',a.DATE_DEB_ACQUIS=b.DATE_DEB,a.MAJ_CONTRAT='N',a.VISUHOUJ=decode(b.unite, 'H', 'H', 'J');
~:-  END IF;
~:-  END IF;
~:-  FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 premier truncate CAD_RETP_MATRIC_CPT_DELETED');
~:-  w_req:='truncate table CAD_RETP_MATRIC_CPT_DELETED';
~:-   EXECUTE_IMMEDIATE_STRING  (w_req,0);
~:-  FSED_AVANCEMENT(p_id,'maj_CAD30 fin procédure');
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_AVANCEMENT(p_id,'ERR FSED.maj_CAD30 w_cad='||w_cad||'w_req :'||w_req);
~:-  w_req    :='truncate table CAD_RETP_MATRIC_CPT_DELETED';
~:-  FSED_AVANCEMENT(p_id,'FSED.maj_CAD30 second truncate (exception)CAD_RETP_MATRIC_CPT_DELETED' );
~:-   EXECUTE_IMMEDIATE_STRING ( w_req,0);
~:-  FSED_ERREUR( p_id , 'maj_CAD30 ' , NULL, err_code||'-'||err_msg);
~:-  raise_application_error(-20000, 'FSED maj_CAD30  '|| sqlerrm);
~:-END maj_CAD30;
~:-/******************************************************************
~:-PROC : insertData (pNumPac       TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:-pCodeTable    TGE_REF_VRREP.CODE_TABLE%TYPE )
~:-DESC :  Insertion dans les tables: TGE_REF_VRREP,TGE_REF_VRDES,
~:-TGE_REF_VRVAL,TGE_REF_RUBRIQUE,TGE_REF_RUBRIQUE_CONTEXTE
~:-TGE_REF_DICOZ
~:-********************************************************************/
~:-PROCEDURE insertData(
~:-    p_id IN NUMBER,
~:-    pNumPac TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:-    pCodeTable TGE_REF_VRREP.CODE_TABLE%TYPE )
~:-IS
~:-  v_exist_vrrep NUMBER := 0;
~:-  v_exist_vrdes NUMBER := 0;
~:-BEGIN
~:- 
~:-  IF tab_11R IS NOT NULL THEN
~:-    forall i IN tab_11R.first..tab_11R.last
~:-    INSERT INTO TGE_REF_VRREP VALUES tab_11R
~:-      (i
~:-      );
~:-  END IF;
~:-  IF tab_11D IS NOT NULL THEN
~:-    forall i IN tab_11D.first..tab_11D.last
~:-    INSERT INTO TGE_REF_VRDES VALUES tab_11D
~:-      (i
~:-      );
~:-  END IF;
~:-  IF tab_11D1 IS NOT NULL AND tab_11D1.first > 0 THEN
~:-      forall i IN tab_11D1.first..tab_11D1.last
~:-    --UPDATE TGE_REF_VRDES SET row=tab_11D1(i) WHERE NUMERO_DE_PAC=tab_11D1(i).NUMERO_DE_PAC and CODE_TABLE=tab_11D1(i).CODE_TABLE and NOM_DU_CHAMP=tab_11D1(i).NOM_DU_CHAMP;
~:-    --DIT 76475
~:-    UPDATE TGE_REF_VRDES
~:-    SET MORCEAU_5_NOM_TABLE = tab_11D1(i).MORCEAU_5_NOM_TABLE ,
~:-      MORCEAU_5_COL_DEB     = tab_11D1(i).MORCEAU_5_COL_DEB ,
~:-      MORCEAU_5_COL_FIN     = tab_11D1(i).MORCEAU_5_COL_FIN ,
~:-      MORCEAU_6_NOM_TABLE   = tab_11D1(i).MORCEAU_6_NOM_TABLE ,
~:-      MORCEAU_6_COL_DEB     = tab_11D1(i).MORCEAU_6_COL_DEB ,
~:-      MORCEAU_6_COL_FIN     = tab_11D1(i).MORCEAU_6_COL_FIN ,
~:-      MORCEAU_7_NOM_TABLE   = tab_11D1(i).MORCEAU_7_NOM_TABLE ,
~:-      MORCEAU_7_COL_DEB     = tab_11D1(i).MORCEAU_7_COL_DEB ,
~:-      MORCEAU_7_COL_FIN     = tab_11D1(i).MORCEAU_7_COL_FIN ,
~:-      MORCEAU_8_NOM_TABLE   = tab_11D1(i).MORCEAU_8_NOM_TABLE ,
~:-      MORCEAU_8_COL_DEB     = tab_11D1(i).MORCEAU_8_COL_DEB ,
~:-      MORCEAU_8_COL_FIN     = tab_11D1(i).MORCEAU_8_COL_FIN ,
~:-      MORCEAU_9_NOM_TABLE   = tab_11D1(i).MORCEAU_9_NOM_TABLE ,
~:-      MORCEAU_9_COL_DEB     = tab_11D1(i).MORCEAU_9_COL_DEB ,
~:-      MORCEAU_9_COL_FIN     = tab_11D1(i).MORCEAU_9_COL_FIN
~:-    WHERE NUMERO_DE_PAC     =tab_11D1(i).NUMERO_DE_PAC
~:-    AND CODE_TABLE          =tab_11D1(i).CODE_TABLE
~:-    AND NOM_DU_CHAMP        =tab_11D1(i).NOM_DU_CHAMP;
~:-  END IF;
~:-  IF tab_11V IS NOT NULL THEN
~:-    forall i IN tab_11V.first..tab_11V.last
~:-    INSERT INTO TGE_REF_VRVAL VALUES tab_11V
~:-      (i
~:-      );
~:-  END IF;
~:-  IF tab_15 IS NOT NULL THEN
~:-    forall i IN tab_15.first..tab_15.last
~:-    INSERT INTO TGE_REF_RUBRIQUE VALUES tab_15
~:-      (i
~:-      );
~:-  END IF;
~:-  
~:-  IF tab_15_lib IS NOT NULL and tab_15_lib.exists(1) THEN
~:-   forall i IN tab_15_lib.first..tab_15_lib.last  
~:-     MERGE INTO TGE_REF_LIBRUB_COTIS lib using 
~:-      dual
~:-     on (lib.NUMPAC = tab_15_lib(i).numpac and lib.CODERUB=tab_15_lib(i).coderub and lib.CODECAISSE=tab_15_lib(i).codecaisse)
~:-     when MATCHED THEN 
~:-     UPDATE  set lib.CAISSEREF=tab_15_lib(i).CAISSEREF,
~:-                 lib.LIB_RESOLU=tab_15_lib(i).LIB_RESOLU
~:-     when NOT MATCHED THEN 
~:-     INSERT (NUMPAC,CODERUB,CODECAISSE,CAISSEREF,LIB_RESOLU)
~:-     VALUES (tab_15_lib(i).numpac ,tab_15_lib(i).coderub ,tab_15_lib(i).codecaisse,tab_15_lib(i).CAISSEREF,tab_15_lib(i).LIB_RESOLU);
~:-  END IF;
~:-  IF tab_17CR IS NOT NULL THEN
~:-    forall i IN tab_17CR.first..tab_17CR.last
~:-    INSERT INTO TGE_REF_RUBRIQUE_CONTEXTE VALUES tab_17CR
~:-      (i
~:-      );
~:-  END IF;
~:-  IF tab_17DMF IS NOT NULL THEN
~:-    forall i IN tab_17DMF.first..tab_17DMF.last
~:-    INSERT INTO TGE_REF_DICOZ VALUES tab_17DMF
~:-      (i
~:-      );
~:-  END IF;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id , 'insertData' , pNumPac||','||pCodeTable , err_code||'-'||err_msg );
~:-  raise_application_error(-20000, 'FSED insertion  '|| sqlerrm);
~:-END insertData;
~:-/*****************************************************
~:-PROC : purge_array
~:-DESC :
~:-*****************************************************/
~:-PROCEDURE purge_array
~:-  (
~:-    p_id IN NUMBER
~:-  )
~:-IS
~:-BEGIN
~:-  IF tab_11R IS NOT NULL THEN
~:-    tab_11R.DELETE;
~:-  END IF;
~:-  IF tab_11D IS NOT NULL THEN
~:-    tab_11D.DELETE;
~:-  END IF;
~:-  IF tab_11D1 IS NOT NULL THEN
~:-    tab_11D1.DELETE;
~:-  END IF;
~:-  IF tab_11V IS NOT NULL THEN
~:-    tab_11V.DELETE;
~:-  END IF;
~:-  IF tab_15 IS NOT NULL THEN
~:-    tab_15.DELETE;
~:-  END IF;
~:-  IF tab_15_lib IS NOT NULL THEN
~:-    tab_15_lib.DELETE;
~:-  END IF;
~:-  IF tab_17CR IS NOT NULL THEN
~:-    tab_17CR.DELETE;
~:-  END IF;
~:-  IF tab_17DMF IS NOT NULL THEN
~:-    tab_17DMF.DELETE;
~:-  END IF;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id , 'purge_array' , NULL , err_code||'-'||err_msg );
~:-  raise_application_error(-20000, 'FSED purge array  '|| sqlerrm);
~:-END purge_array;
~:-/*********************************************************************
~:-PROC : purge_table (pNumPac       TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:-pCodeTable    TGE_REF_VRREP.Code_TABLE%TYPE)
~:-DESC : purge table
~:-**********************************************************************/
~:-PROCEDURE purge_table
~:-  (
~:-    p_id IN NUMBER,
~:-    pNumPac TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:-    pCodeTable TGE_REF_VRREP.Code_TABLE%TYPE,
~:-    numcarte_00 IN NUMBER
~:-  )
~:-IS
~:-  a_count     NUMBER:=0;
~:-  numcarte_99 NUMBER;
~:-BEGIN
~:-  FOR i IN tab_numLigne00.first..tab_numLigne00.last
~:-  LOOP
~:-    IF tab_numLigne00
~:-      (
~:-        i
~:-      )
~:-                  =numcarte_00 THEN
~:-      numcarte_99:=tab_numLigne99
~:-      (
~:-        i
~:-      )
~:-      ;
~:-    END IF;
~:-  END LOOP;
~:-  SELECT COUNT(*)
~:-  INTO a_count
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE SUBSTR(donnees,1,6)=pNumpac
~:-  AND id_trt               =p_id
~:-  AND SUBSTR(donnees,7,2)
~:-    || SUBSTR(donnees,18,1)='11R'
~:-  AND num_lig BETWEEN numcarte_00 AND numcarte_99;
~:-  IF a_count>0 THEN
~:-    FSED_AVANCEMENT(p_id,'Vidage de TGE_REF_VRREP Pac ('||pNumPac||')');
~:-     --DSH : Les VR mises à jour et non encore envoyé à zadig(code_gestionnaire ='G' and temoin_vr_base = O: Valeurs modifiées non envoyées ou K : Echec du dernier envoi des valeurs ou E : en cours d'envoi ) ne doivent pas être supprimés
~:- 	DELETE FROM TGE_REF_VRREP WHERE NUMERO_DE_PAC=pNumPac and (code_gestionnaire <>'G' or ( code_gestionnaire ='G' and temoin_vr_base <>'O' and temoin_vr_base <>'K' and temoin_vr_base <>'E') );
~:-    
~:-  END IF;
~:-  SELECT COUNT(*)
~:-  INTO a_count
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE SUBSTR(donnees,1,6)=pNumpac
~:-  AND id_trt               =p_id
~:-  AND SUBSTR(donnees,7,2)
~:-    || SUBSTR(donnees,18,1)='11D'
~:-  AND num_lig BETWEEN numcarte_00 AND numcarte_99;
~:-  IF a_count>0 THEN
~:-    FSED_AVANCEMENT(p_id,'Vidage de TGE_REF_VRDES Pac ('||pNumPac||')');
~:-    DELETE FROM TGE_REF_VRDES WHERE NUMERO_DE_PAC=pNumPac;
~:-  END IF;
~:-  SELECT COUNT(*)
~:-  INTO a_count
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE SUBSTR(donnees,1,6)=pNumpac
~:-  AND id_trt               =p_id
~:-  AND SUBSTR(donnees,7,2)  ='15'
~:-  AND num_lig BETWEEN numcarte_00 AND numcarte_99;
~:-  IF a_count>0 THEN
~:-    FSED_AVANCEMENT(p_id,'Vidage de TGE_REF_RUBRIQUE Pac ('||pNumPac||')');
~:-    DELETE FROM TGE_REF_RUBRIQUE WHERE numpac=pNumPac;
~:-    FSED_AVANCEMENT(p_id,'Vidage de TGE_REF_LIBRUB_COTIS Pac ('||pNumPac||')');
~:-    DELETE FROM TGE_REF_LIBRUB_COTIS WHERE numpac = pNumPac;
~:-  END IF;
~:-  SELECT COUNT(*)
~:-  INTO a_count
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE SUBSTR(donnees,1,6)=pNumpac
~:-  AND id_trt               =p_id
~:-  AND SUBSTR(donnees,7,2)
~:-    || SUBSTR(donnees,10,2)='17CR'
~:-  AND num_lig BETWEEN numcarte_00 AND numcarte_99;
~:-  IF a_count>0 THEN
~:-    FSED_AVANCEMENT(p_id,'Vidage de TGE_REF_RUBRIQUE_CONTEXTE Pac ('||pNumPac||')');
~:-    DELETE FROM TGE_REF_RUBRIQUE_CONTEXTE WHERE numpac=pNumPac;
~:-  END IF;
~:-  SELECT COUNT(*)
~:-  INTO a_count
~:-  FROM TGE_IMPORT_FSED
~:-  WHERE SUBSTR(donnees,1,6)=pNumpac
~:-  AND id_trt               =p_id
~:-  AND SUBSTR(donnees,7,2)
~:-    || SUBSTR(donnees,10,2)
~:-    || SUBSTR(donnees,13,1)='17DMF'
~:-  AND num_lig BETWEEN numcarte_00 AND numcarte_99;
~:-  IF a_count>0 THEN
~:-    FSED_AVANCEMENT(p_id,'Vidage de TGE_REF_DICOZ Pac ('||pNumPac||')');
~:-    DELETE FROM TGE_REF_DICOZ WHERE numpac=pNumPac;
~:-  END IF;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := SQLERRM;
~:-  FSED_ERREUR( p_id , 'purge_table' , pNumPac||','||pCodeTable , err_code||'-'||err_msg );
~:-  raise_application_error(-20000, 'FSED purge array  '|| sqlerrm);
~:-END purge_table;
~:-/**********************************************************************
~:-PROC : retour_Referentiel (p_id IN NUMBER )
~:-DESC :
~:-***********************************************************************/
~:-PROCEDURE retour_Fsed(
~:-    p_id IN NUMBER )
~:-IS
~:-  num_carte    VARCHAR(2) := '';
~:-  carte_00     BOOLEAN    :=false;
~:-  v_numpac     VARCHAR(6);
~:-  exist_numpac NUMBER;
~:-  v_code_table TGE_REF_VRVAL.CODE_TABLE%TYPE;
~:-  v_code_table_Old TGE_REF_VRVAL.CODE_TABLE%TYPE := '$';
~:-  v_table_Old TGE_REF_VRVAL.CODE_TABLE%TYPE      := '$';
~:-  v_cmpt      NUMBER                                  := 0 ;
~:-  v_cmpt_rest NUMBER ;
~:-  v_cmpt1     NUMBER := 0 ;
~:-  v_code TGE_REF_VRVAL.CODE_TABLE%TYPE ;
~:-  v_start         NUMBER;
~:-  v_stop          NUMBER;
~:-  listeTablePurge VARCHAR2(32767):=',';
~:-  v_type_retour   VARCHAR2(2);
~:-  v_moi_retour    NUMBER;
~:-  v_type          VARCHAR2(1);
~:-  isVRVAL         BOOLEAN := false ;
~:-  isVRDES         BOOLEAN := false ;
~:-  isRUBRIQUE      BOOLEAN := false ;
~:-  isDICOZ         BOOLEAN := false ;
~:-  v_id            NUMBER ;
~:-  w_exist         number := -1;
~:-  w_code_gest    tge_ref_vrrep.code_gestionnaire%type;
~:-  v_type_carte    varchar2(3) :=' ';
~:-BEGIN
~:-  v_start := DBMS_UTILITY.GET_TIME;
~:-  v_id    :=p_id;
~:-  getNumLigne(v_id);
~:-  -- Lecture ligne à ligne de la table
~:-   FSED_AVANCEMENT(v_id,'Début Traitement cartes référentiel paie');
~:-  OPEN cur_lig(v_id);
~:-  LOOP
~:-    FETCH cur_lig BULK COLLECT INTO lig limit 10000;
~:-    EXIT
~:-  WHEN lig.count   =0;
~:-    IF lig.first  IS NOT NULL THEN
~:-      v_cmpt_rest := lig.COUNT;
~:-      FOR i IN lig.FIRST..lig.LAST
~:-      LOOP
~:-        --Extraction du numéro de la carte
~:-        num_carte  := SUBSTR(lig(i).donnees,7,2);
~:-        IF num_carte='00' THEN
~:-          v_numpac := SUBSTR(lig(i).donnees,1,6);
~:-          -- test d'existence du pac
~:-          SELECT COUNT(numpac)
~:-          INTO exist_numpac
~:-          FROM TGE_REF_PAC
~:-          WHERE numpac     =v_numpac;
~:-          IF exist_numpac  >0 THEN
~:-            carte_00      :=true;
~:-            v_type_retour := SUBSTR(lig(i).donnees,68,2);
~:-            IF v_type_retour IN('RC','RN') THEN
~:-              v_moi_retour :=SUBSTR(lig(i).donnees,70,6);
~:-              insert_gap_trt(v_id,v_numpac,v_moi_retour,v_type_retour);
~:-            ELSIF v_type_retour ='RR' THEN
~:-              insert_gap_trt(v_id,v_numpac,NULL,v_type_retour);
~:-            END IF;
~:-            insert_gap_trt_suivi(v_id,'DEBUT',NULL,'BATCH',v_type_retour);
~:-          END IF;
~:-          FSED_AVANCEMENT(v_id,'Traitement référentiel Carte 00 type : '||v_type_retour);
~:-        elsif num_carte='99' THEN
~:-          carte_00    :=false;  
~:-          FSED_AVANCEMENT(v_id,'Traitement référentiel Carte 99 ');
~:-          v_id := GAP_TRT_SEQ_ID.nextval;
~:-        END IF;
~:-        -- traitement de chaque type de carte
~:-        IF num_carte='00' THEN
~:-          FSED_AVANCEMENT(v_id,'Traitement référentiel purge tables (numpac='||v_numpac||'/code table ='||v_code_table||'/num ligne='||lig(i).num_lig);
~:-          purge_table(v_id,v_numpac,v_code_table,lig(i).num_lig);
~:-        END IF ;
~:-        IF num_carte    ='11' THEN
~:-          v_code_table := getTableCode (lig(i))||trim(SUBSTR(lig(i).donnees,14,2));
~:-          v_type       :=SUBSTR(lig(i).donnees,18,1);
~:-          v_type_carte := trim(SUBSTR(lig(i).donnees,18,2));
~:-          w_exist:= -1;
~:-          w_code_gest:='';
~:-          if v_type_carte ='V' THEN
~:-          begin
~:-          select CODE_GESTIONNAIRE ,1
~:-          into   w_code_gest,
~:-                 w_exist
~:-          from  tge_ref_vrrep 
~:-          where numero_de_pac     = v_numpac
~:-          and   code_table        = v_code_table;
~:-          exception 
~:-          when no_data_found then 
~:-          w_exist := -1;
~:-          end;
~:-          end if;
~:-        END IF;
~:-        IF carte_00 AND v_code_table_Old        != v_code_table AND num_carte ='11' THEN
~:-           IF (instr(listeTablePurge,v_code_table)=0 AND SUBSTR(lig(i).donnees,18,1)='V' and (w_exist = -1 OR (w_code_gest !='G' AND w_exist=1))) THEN
~:-            DELETE
~:-            FROM TGE_REF_VRVAL
~:-            WHERE NUMERO_DE_PAC=v_numpac
~:-            AND CODE_TABLE     =v_code_table;
~:-            v_code_table_Old  := v_code_table;
~:-            listeTablePurge   :=listeTablePurge||v_code_table||',';
~:-          END IF;
~:-        END IF ;
~:-IF carte_00 
~:- OR( carte_00 =false and (tab_11V IS NOT NULL OR tab_11R IS NOT NULL  OR tab_11D IS NOT NULL OR tab_11D1 IS NOT NULL 
~:- OR tab_15 IS NOT NULL OR tab_15_lib IS NOT NULL OR tab_17CR IS NOT NULL OR tab_17DMF IS NOT NULL))
~:-THEN
~:-  v_cmpt           :=v_cmpt              +1 ;
~:-  IF v_type_retour  ='RR' AND num_carte IN ('11','15','17') THEN
~:-    IF num_carte    ='11' AND v_type='V' THEN
~:-      isVRVAL      := true ;
~:-    ELSIF num_carte ='11' AND v_type='D' THEN
~:-      isVRDES      := true ;
~:-    ELSIF num_carte ='15' THEN
~:-      isRUBRIQUE   := true ;
~:-    ELSIF num_carte ='17' THEN
~:-      isDICOZ      := true ;
~:-    END IF;
~:-  END IF;
~:-  
~:-  ---Insertion Intermediaire
~:-  IF v_cmpt      = 10000 OR v_cmpt_rest <10000 THEN
~:-    v_cmpt1     := v_cmpt1   +v_cmpt;
~:-    v_cmpt_rest := lig.COUNT - v_cmpt1;
~:-    
~:-    insertData(v_id,v_numpac,v_code_table);
~:-    --Vider les tableaux
~:-    purge_array(v_id);
~:-    v_cmpt := 0;
~:-  END IF;
~:-  IF num_carte ='11' THEN
~:-    IF w_exist = -1 OR (w_code_gest !='G' AND w_exist=1) THEN
~:-      setCart11(v_id,lig(i),v_numpac,v_code_Table,v_table_Old);
~:-    END IF;
~:-    v_table_Old := v_code_Table ;
~:-  elsif num_carte='15' THEN
~:-    setCart15(v_id,lig(i),v_numpac);
~:-  elsif num_carte ='17' THEN
~:-    setCart17(v_id,lig(i),v_numpac);
~:-  END IF;
~:-END IF;
~:-END LOOP;
~:-IF isVRVAL THEN
~:-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire VRVAL Pac ('||v_numpac||')' );
~:-    insert_gap_trt_suivi(v_id,'VRVAL',NULL,'BATCH',v_type_retour);
~:-  END IF;
~:-  IF isVRDES THEN
~:-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire VRDES Pac ('||v_numpac||')' );
~:-    insert_gap_trt_suivi(v_id,'VRDES',NULL,'BATCH',v_type_retour);
~:-  END IF;
~:-  IF isRUBRIQUE THEN
~:-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire RUBRIQUE Pac ('||v_numpac||')' );
~:-    insert_gap_trt_suivi(v_id,'RUBRIQUE',NULL,'BATCH',v_type_retour);
~:-  END IF;
~:-  IF isDICOZ THEN
~:-    FSED_AVANCEMENT(v_id,'Détection de la présence du dictionnaire DICOZ Pac ('||v_numpac||')' );
~:-    insert_gap_trt_suivi(v_id,'DICOZ',NULL,'BATCH',v_type_retour);
~:-  END IF;
~:-IF tab_11R IS NOT NULL THEN
~:-    IF (v_cmpt_rest<10000) THEN 
~:-     FSED_AVANCEMENT(p_id,'Chargement de TGE_REF_VRREP');
~:-    END IF;
~:-END IF;
~:-IF tab_11D IS NOT NULL THEN
~:-    IF (v_cmpt_rest<10000) THEN 
~:-     FSED_AVANCEMENT(p_id,'Chargement de TGE_REF_VRDES');
~:-    END IF;
~:-END IF;
~:-IF tab_11V IS NOT NULL THEN
~:-    IF (v_cmpt_rest<10000) THEN 
~:-     FSED_AVANCEMENT(p_id,'Chargement de TGE_REF_VRVAL');
~:-    END IF;
~:-END IF;
~:-IF tab_15 IS NOT NULL THEN
~:-    IF (v_cmpt_rest<10000) THEN 
~:-     FSED_AVANCEMENT(p_id,'Chargement de TGE_REF_RUBRIQUE');
~:-    END IF;
~:-END IF;
~:-IF tab_15_lib IS NOT NULL and tab_15_lib.exists(1) THEN
~:-    IF (v_cmpt_rest<10000) THEN 
~:-     FSED_AVANCEMENT(p_id,'Chargement de TGE_REF_LIBRUB_COTIS');
~:-    END IF;
~:-END IF;
~:- IF tab_17CR IS NOT NULL THEN
~:-    IF (v_cmpt_rest<10000) THEN 
~:-     FSED_AVANCEMENT(p_id,'Chargement de TGE_REF_RUBRIQUE_CONTEXTE');
~:-    END IF;
~:-END IF;
~:-IF tab_17DMF IS NOT NULL THEN
~:-IF (v_cmpt_rest<10000) THEN 
~:-     FSED_AVANCEMENT(p_id,'Chargement de TGE_REF_DICOZ');
~:-    END IF;
~:-END IF;
~:-END IF;
~:-IF isVRVAL THEN
~:-    FSED_AVANCEMENT(v_id,'Fin du chargement du dictionnaire VRVAL' );
~:-  END IF;
~:-  IF isVRDES THEN
~:-    FSED_AVANCEMENT(v_id,'Fin du chargement du dictionnaire VRDES' );
~:-  END IF;
~:-  IF isRUBRIQUE THEN
~:-    FSED_AVANCEMENT(v_id,'Fin du chargement du dictionnaire RUBRIQUE' );
~:-  END IF;
~:-  IF isDICOZ THEN
~:-    FSED_AVANCEMENT(v_id,'Fin du chargement du dictionnaire DICOZ' );
~:-  END IF;    
~:-    isVRVAL    :=false;
~:-    isVRDES    :=false;
~:-    isRUBRIQUE :=false;
~:-    isDICOZ    :=false;
~:-  END LOOP;
~:-  CLOSE cur_lig;
~:-  v_stop := DBMS_UTILITY.GET_TIME;
~:-  FSED_AVANCEMENT(v_id,'Fin Traitement cartes référentiel paie');
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_code := SQLCODE;
~:-  err_msg  := err_msg||' '||SQLERRM;
~:-  FSED_ERREUR( v_id , 'retour_Fsed' , v_id , err_code||'-'||err_msg );
~:-  raise_application_error(-20000, 'retour_Fsed  '|| sqlerrm );
~:-END retour_Fsed;
~:-  /*****************************************************************************
~:- PROC : getPeriodeRecueilEvol
~:- DESC : retourne la date debut et fin de la periode de recueil 
~:- *******************************************************************************/
~:- PROCEDURE getPeriodeRecueilEvol(
~:-    p_id             IN NUMBER,
~:-    p_numpac         IN TGE_REF_PAC.numpac%type,
~:-    p_periodeEnCours IN TGE_REF_PAC.periodeencours%type,
~:-    p_paiezad        IN TGE_IMPORT_FSED_30.paiezad%type,
~:-    p_dateDeb        IN OUT DATE,
~:-    p_dateFin        IN OUT DATE)
~:-IS
~:-  w_A01_DONNEE TGE_REF_MAPDO.donneegxp%type;
~:-  w_A02_DONNEE TGE_REF_MAPDO.donneegxp%type;
~:-  w_A03_DONNEE TGE_REF_MAPDO.donneegxp%type;
~:-  w_tablegxp    TGE_REF_MAPDO.tablegxp%type;
~:-  w_req CLOB;
~:-  w_pacmat DIC_ADM_CONTRAT_SITU.pacmat%type;--DIT 50818 
~:-  w_activite     VARCHAR2(20);
~:-  w_etablissment VARCHAR2(20);
~:-  w_categorie    VARCHAR2(20);
~:-  
~:-  A01_NOM_ELT    VARCHAR2(20);
~:-  A02_NOM_ELT    VARCHAR2(20);
~:-  A03_NOM_ELT    VARCHAR2(20);
~:-  
~:-  requetePivot  VARCHAR2(3000);
~:-BEGIN
~:-
~:-  select A01_NOM_ELT, A02_NOM_ELT, A03_NOM_ELT
~:-  into   A01_NOM_ELT, A02_NOM_ELT, A03_NOM_ELT
~:-  from (
~:-   SELECT NOM_ARG,NOM_ELT FROM TABLE(GET_TGE_MAP_ARG_ELT_BY_NUMPAC(p_numpac))
~:-  )
~:-  pivot (MAX(NOM_ELT) AS NOM_ELT FOR (NOM_ARG) in ('A01' AS A01,'A02' AS A02,'A03' AS A03));	
~:-	
~:-  SELECT pacmat
~:-  INTO   w_pacmat
~:-  FROM   DIC_ADM_CONTRAT_SITU --DIT 50818 
~:-  WHERE  numpac =p_numpac
~:-  AND    paiezad  = p_paiezad
~:-  AND rownum   =1 ;
~:-
~:-requetePivot :=    
~:-'SELECT tablegxp ,
~:-  A01_DONNEE ,
~:-  A02_DONNEE,
~:-  A03_DONNEE
~:-
~:-FROM
~:-  (SELECT *
~:-  FROM
~:-    ( SELECT DISTINCT c.element,
~:-      c.tablegxp,
~:-      c.DONNEEGXP
~:-    FROM
~:-      (SELECT * FROM user_tables
~:-      ) b,
~:-      tge_ref_mapdo c
~:-    WHERE C.numpac   ='''||p_numpac||'''
~:-    AND b.table_name =c.TABLEGXP
~:-    AND c.element   IN ('''||A01_NOM_ELT||''','''||A02_NOM_ELT||''','''|| A03_NOM_ELT||''')
~:-    UNION ALL
~:-    SELECT DISTINCT c.element,
~:-      c.tablegxp,
~:-      c.DONNEEGXP
~:-    FROM
~:-      (SELECT * FROM user_tables
~:-      ) b,
~:-      tge_ref_mapdo c
~:-    WHERE C.numpac              =''*''
~:-    AND b.table_name            =c.TABLEGXP
~:-    AND c.element              IN ('''||A01_NOM_ELT||''','''||A02_NOM_ELT||''','''|| A03_NOM_ELT||''')
~:-    AND (TABLEGXP,ELEMENT) NOT IN
~:-      (SELECT a.TABLEGXP,
~:-        a.element
~:-      FROM tge_ref_mapdo a,
~:-        (SELECT * FROM user_tables
~:-        ) b
~:-      WHERE a.numpac  ='''||p_numpac||'''
~:-      AND b.table_name=a.TABLEGXP
~:-      AND A.ELEMENT   IN ('''||A01_NOM_ELT||''','''||A02_NOM_ELT||''','''|| A03_NOM_ELT||''')
~:-      )
~:-    ) pivot ( MAX(DONNEEGXP) AS DONNEE FOR (element) IN(
~:-    '''||A01_NOM_ELT||''' AS A01 ,'''||A02_NOM_ELT||''' AS A02,'''||A03_NOM_ELT||''' AS A03
~:-    ))
~:-  )';
~:-  EXECUTE IMMEDIATE
~:-  requetePivot
~:-  INTO 
~:-  w_tablegxp,
~:-  w_A01_DONNEE,
~:-  w_A02_DONNEE,
~:-  w_A03_DONNEE
~:-  ;
~:-  IF w_A01_DONNEE IS NOT NULL AND w_A02_DONNEE IS NOT NULL AND w_A03_DONNEE IS NOT NULL THEN
~:-    w_req          := 'select distinct '||w_A01_DONNEE||','||w_A02_DONNEE ||','||w_A03_DONNEE ||' from '||w_tablegxp ||' where numpac = :numpac and pacmat= :pacmat and DATE_EFF <= :dateeff and DATE_SORTIE_SIT_BO >= :datesortie ';
~:-    EXECUTE immediate w_req INTO w_activite,w_etablissment,w_categorie
~:-    USING p_numpac,w_pacmat,last_day(to_date(p_periodeEnCours,'YYYYMM')),last_day(to_date(p_periodeEnCours,'YYYYMM'));
~:-  END IF;
~:-   FSED_AVANCEMENT(p_id,'getPeriodeRecueil:w_activite,w_etablissment,w_categorie '||w_activite||','||w_etablissment||','||w_categorie);
~:-  
~:-BEGIN
~:-select a.DT_RECUEIL_DEB ,
~:-       a.DT_RECUEIL_FIN
~:-INTO   p_dateDeb ,
~:-       p_dateFin 
~:-FROM (
~:-SELECT
~:-  CASE
~:-    WHEN TO_CHAR(REC.DATE_DEBUT_1,'YYYYMMDD') IS NOT NULL
~:-    THEN REC.DATE_DEBUT_1
~:-    ELSE to_date(SUBSTR(LTP.ENREGISTREMENT,29,8), 'DDMMYYYY')
~:-  END AS DT_RECUEIL_DEB,
~:-  CASE
~:-    WHEN TO_CHAR(REC.DATE_FIN_1,'YYYYMMDD') IS NOT NULL
~:-    THEN REC.DATE_FIN_1
~:-    ELSE to_date(SUBSTR(LTP.ENREGISTREMENT, 37 ,8 ), 'DDMMYYYY')
~:-  END AS DT_RECUEIL_FIN
~:-
~:-FROM TGE_REF_VRVAL LTP
~:-LEFT JOIN DIC_TGE_PERIODES_RECUEIL REC
~:-ON ( REC.PAIEZAD                        = p_paiezad
~:-AND REC.NUMPAC                          = p_numpac)
~:-WHERE LTP.CODE_TABLE                    = 'LTP'
~:-AND NUMERO_DE_PAC                       = p_numpac
~:-AND SUBSTR(LTP.ENREGISTREMENT, 19 , 6 ) = SUBSTR(p_periodeEncours,5, 6)
~:-  ||SUBSTR(p_periodeEncours,0, 4) --expl '012014'
~:-AND w_activite     between SUBSTR(LTP.ENREGISTREMENT,1 ,2) AND  SUBSTR(LTP.ENREGISTREMENT,3,2)
~:-AND w_etablissment between SUBSTR(LTP.ENREGISTREMENT,5 ,5) AND  SUBSTR(LTP.ENREGISTREMENT,10,5)
~:-AND w_categorie    between SUBSTR(LTP.ENREGISTREMENT,15,2) AND  SUBSTR(LTP.ENREGISTREMENT,17,2)
~:-ORDER BY NUMERO_DE_LIGNE ASC) a
~:-where rownum =1;
~:-EXCEPTION 
~:- WHEN NO_DATA_FOUND THEN 
~:-    p_dateDeb := null;
~:-    p_dateFin := null;
~:-FSED_AVANCEMENT(p_id,'ERREUR :getPeriodeRecueil: NO_DATA_FOUND for dateDeb et DateFin');
~:- WHEN OTHERS THEN
~:-  err_msg := SQLERRM; 
~:- FSED_AVANCEMENT(p_id,'ERREUR :getPeriodeRecueil:err_msg : '||err_msg );
~:-END ;
~:-EXCEPTION
~:-WHEN OTHERS THEN
~:-  err_msg := SQLERRM;
~:-  FSED_AVANCEMENT(p_id,'ERREUR :getPeriodeRecueil:err_msg : '||err_msg||' req'||w_req||' '||'using '|| p_numpac||','||w_pacmat||','||last_day(to_date(p_periodeEnCours,'YYYYMM'))||','||last_day(to_date(p_periodeEnCours,'YYYYMM')));
~:-END getPeriodeRecueilEvol;
~:-  /*****************************************************************************
~:- PROC : getClauseSelect
~:- DESC : la clause SELECT correspondant à une donnée mappée
~:- *******************************************************************************/
~:- FUNCTION getClauseSelect(
~:-    p_numpac             IN VARCHAR2,
~:-    p_nom_table_ou_alias IN VARCHAR2,
~:-    p_donneegxp          IN VARCHAR2,
~:-    p_donnfiltre         IN VARCHAR2,
~:-    p_operfiltre         IN VARCHAR2,
~:-    p_valfiltre          IN VARCHAR2,
~:-    p_trtparticulier     IN VARCHAR2,
~:-    p_envoi_systematique IN VARCHAR2,
~:-    p_data_type          IN VARCHAR2,
~:-    p_type_zadig         IN VARCHAR2,
~:-    p_masque             IN VARCHAR2,
~:-    p_occ                IN VARCHAR2,
~:-    p_avec_balises_photo IN BOOLEAN)
~:-  RETURN VARCHAR2
~:-IS
~:-  donnee      VARCHAR(1000);
~:-  donneeChar  VARCHAR(1000);
~:-  donneeFilt  VARCHAR(1000);
~:-BEGIN
~:-  IF p_donneegxp            IS NOT NULL THEN
~:-    donneeChar                      :=p_nom_table_ou_alias||'.'||p_donneegxp;
~:-    IF p_trtparticulier     IS NOT NULL AND NOT (instr(p_trtparticulier,'SI_VIDE=',1)=1 OR instr(p_trtparticulier,'DIV=',1)=1 OR instr(p_trtparticulier,'TAB=',1)=1 OR instr(p_trtparticulier,'INI=',1)=1 OR instr(p_trtparticulier,'SUB=',1)=1 OR instr(p_trtparticulier,'PAYS',1)=1 ) THEN
~:-      donneeChar                    :=REPLACE(p_trtparticulier,'$DONNEEGXP',donneeChar);
~:-      donneeChar                    :=REPLACE(donneeChar,'$NUMPAC',''''||p_numpac||'''');
~:-      donneeChar                    :=REPLACE(donneeChar,'$MATRIC',p_nom_table_ou_alias||'.'||'MATRIC');
~:-      donneeChar                    :=REPLACE(donneeChar,'$TABLE',p_nom_table_ou_alias);
~:-      IF p_avec_balises_photo AND p_envoi_systematique='O' THEN
~:-        --les balises @### et ###@ permettront de remplacer la donnée par une valeur bidon dans la PHOTO et ainsi forcer l'envoi
~:-        donneeChar :='@###'||donneeChar||'###@';
~:-      END IF;
~:-    END IF;
~:-    IF p_data_type   ='DATE' AND p_trtparticulier IS NULL AND p_type_zadig    ='N' AND p_masque IN (1,2,3,4,5,6,7) THEN
~:-      donneeChar            :='to_char('||p_nom_table_ou_alias||'.'||p_donneegxp||',''yyyymmddHH24MISS'')';
~:-    ELSIF p_data_type='DATE' AND p_trtparticulier IS NOT NULL AND p_type_zadig    ='N' AND p_masque IN (1,2,3,4,5,6,7) AND p_donneegxp IS NOT NULL THEN
~:-      donneeChar            :='to_char('||donneechar||',''yyyymmddHH24MISS'')';
~:-    ELSE
~:-      donneeChar:='to_char('||donneeChar||')';
~:-    END IF;
~:-    IF p_donnfiltre    IS NOT NULL AND p_operfiltre IS NOT NULL THEN
~:-      donneeFilt               :=' case when ('||p_nom_table_ou_alias||'.'||p_donnfiltre;
~:-      IF p_valfiltre   IS NULL THEN
~:-        IF p_operfiltre = '=' THEN
~:-          donneeFilt           :=donneeFilt||' IS NULL';
~:-        ELSE
~:-          donneeFilt:=donneeFilt||' IS NOT NULL';
~:-        END IF;
~:-      ELSIF p_operfiltre                  ='IN' THEN
~:-        donneeFilt                               :=donneeFilt||' IN ('||p_valfiltre||')';
~:-      ELSIF p_operfiltre                  ='NI' THEN
~:-        donneeFilt                               :=donneeFilt||' NOT IN ('||p_valfiltre||')';
~:-      ELSIF SUBSTR(upper(p_valfiltre),1,3)='TO_' THEN
~:-        donneeFilt                               :=donneeFilt||p_operfiltre||p_valfiltre;
~:-      ELSE
~:-        donneeFilt:=donneeFilt||p_operfiltre||''''||p_valfiltre||'''';
~:-      END IF;
~:-      donneeFilt:=donneeFilt||') then '||donneeChar||' else ''_NOTSEND_'' end ';
~:-    ELSE
~:-      donneeFilt:=donneeChar;
~:-    END IF;
~:-    IF p_occ   ='*F' THEN
~:-      donnee               :='case when '||p_nom_table_ou_alias||'.'||'ECRADR=''ADR'' then '||donneeFilt||' else ''_NOTSEND_'' end';
~:-    ELSIF p_occ='*I' THEN
~:-      donnee               :='case when '||p_nom_table_ou_alias||'.'||'ECRADR=''ADI'' then '||donneeFilt||' else ''_NOTSEND_'' end';
~:-    ELSE
~:-      donnee:=donneeFilt;
~:-    END IF;
~:-  ELSE
~:-    donnee :=''''||REPLACE(p_trtparticulier,'INI=','')||'''' ;
~:-  END IF;
~:-  IF instr(p_trtparticulier,'SI_VIDE=',1)>0 THEN
~:-    donnee                                      :='nvl('||donnee||','''||REPLACE(p_trtparticulier,'SI_VIDE=','')||''')';
~:-  END IF;
~:-  IF instr(p_trtparticulier,'DIV=',1)>0 THEN
~:-    donnee                                  :='to_char(to_number('||donnee||')/to_number('||REPLACE(p_trtparticulier,'DIV=','')||'))';
~:-  END IF;
~:-  IF instr(p_trtparticulier,'TAB=',1)>0 THEN
~:-    donnee                                  :=donnee;
~:-  END IF;
~:-  IF instr(p_trtparticulier,'SUB=',1)>0 THEN
~:-    donnee                                  :=REPLACE(p_trtparticulier,'SUBSTR=','SUBSTR('||donnee||',')||')';
~:-  END IF;
~:-  RETURN donnee;
~:-END getClauseSelect ;        
~:-END FSED;
diff --git a/files-example2/FSED_newt.txt b/files-example2/FSED_newt.txt
deleted file mode 100644
index 8b30d3f..0000000
--- a/files-example2/FSED_newt.txt
+++ /dev/null
@@ -1,101 +0,0 @@
~:-##
~:-TAG_CHARSETHELLO=@€éèç
~:-##
~:-FSED88
~:-=SQL=
~:-CREATE OR REPLACE PACKAGE FSED
~:-AS
~:- FUNCTION getTypeTable(
~:- p_table IN VARCHAR2)
~:- RETURN VARCHAR2;
~:- FUNCTION getClauseSelect(
~:- p_numpac IN VARCHAR2,
~:- p_nom_table_ou_alias IN VARCHAR2,
~:- p_donneegxp IN VARCHAR2,
~:- p_donnfiltre IN VARCHAR2,
~:- p_operfiltre IN VARCHAR2,
~:- p_valfiltre IN VARCHAR2,
~:- p_trtparticulier IN VARCHAR2,
~:- p_envoi_systematique IN VARCHAR2,
~:- p_data_type IN VARCHAR2,
~:- p_type_zadig IN VARCHAR2,
~:- p_masque IN VARCHAR2,
~:- p_occ IN VARCHAR2,
~:- p_avec_balises_photo IN BOOLEAN)
~:- RETURN VARCHAR2;
~:- FUNCTION getLibResolu(
~:- pNumPac       IN TGE_REF_VRREP.NUMERO_DE_PAC%TYPE,
~:- pCodeCaisse   IN TGE_REF_CAISSE.CODECAISSE%TYPE,
~:- pLibRUB       IN TGE_REF_RUBRIQUE.LIBRUB%TYPE)
~:- RETURN VARCHAR2;
~:- PROCEDURE FSED_ERREUR(
~:- p_id      IN NUMBER,
~:- p_nomproc IN VARCHAR2,
~:- p_idDate  IN VARCHAR2,
~:- p_erreur  IN CLOB );
~:- PROCEDURE preparation_FSED_unit(
~:- p_nomTable    IN VARCHAR2,
~:- p_alias       IN VARCHAR2,
~:- p_TABLETYPE   IN VARCHAR2,
~:- p_id_trt      IN NUMBER,
~:- p_numpac      IN VARCHAR2,
~:- p_periode     IN VARCHAR2,
~:- p_ALLERRETOUR IN VARCHAR2,
~:- p_nb_mois_paie_init IN NUMBER);
~:- PROCEDURE preparation_FSED(
~:- p_id_trt  IN NUMBER,
~:- p_numpac  IN VARCHAR2,
~:- p_periode IN VARCHAR2);
~:- PROCEDURE retour_Fsed(
~:- p_id IN NUMBER );
~:- PROCEDURE insertCart80(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER);
~:- PROCEDURE insertCart30(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER,
~:- p_table IN VARCHAR2);
~:- PROCEDURE sous_insertCart80(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER) ;
~:- PROCEDURE sous_insertCart30(
~:- p_id    IN NUMBER,
~:- p_newId IN NUMBER,
~:- p_table IN VARCHAR2) ;
~:- PROCEDURE maj_CAD30(
~:- p_id IN NUMBER) ;
~:- PROCEDURE getPeriodeRecueil(
~:- p_numpac  IN TGE_REF_PAC.numpac%type,
~:- p_paiezad IN TGE_IMPORT_FSED_30.paiezad%type,
~:- p_dateDeb IN OUT DATE,
~:- p_dateFin IN OUT DATE);
~:- PROCEDURE tmp_histo_fsed_30(
~:- p_id  IN NUMBER ,
~:- p_numpac  IN TGE_REF_MAPDO.NUMPAC%TYPE,
~:- p_moi IN VARCHAR2);
~:- procedure FSED_AVANCEMENT_PLSQL(
~:- p_id             IN NUMBER,
~:- p_typeAction     IN VARCHAR2,
~:- p_detailAction   IN CLOB );
~:- PROCEDURE FSED_AVANCEMENT(
~:-    id  IN NUMBER,
~:-    txt IN VARCHAR2);
~:- PROCEDURE insert_gap_trt(
~:- p_id          IN NUMBER ,
~:- p_numpac      IN TGE_REF_PAC.numpac%type,
~:- p_periode     IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:- p_type_retour IN VARCHAR2);
~:- PROCEDURE insert_gap_trt_suivi(
~:- p_id               IN NUMBER ,
~:- p_statut           IN TGE_REF_PAC.numpac%type,
~:- p_code_retour_zpp  IN TGE_REF_PAC.PERIODEENCOURS%TYPE,
~:- p_login            IN VARCHAR2,
~:- p_type_retour     IN VARCHAR2);
~:- PROCEDURE getPeriodeRecueilEvol(
~:- p_id      IN NUMBER,
~:- p_numpac  IN TGE_REF_PAC.numpac%type,
~:- p_periodeEnCours IN TGE_REF_PAC.periodeencours%type,
~:- p_paiezad IN TGE_IMPORT_FSED_30.paiezad%type,
~:- p_dateDeb IN OUT DATE,
~:- p_dateFin IN OUT DATE);
~:- END FSED;
~:\ No newline at end of file
diff --git a/files-example2/test.txt b/files-example2/test.txt
index ce25f97..a05adbd 100644
--- a/files-example2/test.txt
+++ b/files-example2/test.txt
@@ -1 +1 @@
 :-Mackendy
 :\ No newline at end of file
1:+MP
 :\ No newline at end of file
