##
TAG_CHARSET=@€ιθη
##
UPDATE_TACHE_STATUTS
=SQL=
CREATE OR REPLACE PROCEDURE UPDATE_TACHE_STATUTS(pTACHE_ID NUMBER)
AS BEGIN
    UPDATE TACHE SET
        STATUTS_OK = (SELECT COUNT(LOG_ID) FROM TACHE_LOG_TMP WHERE TACHE_ID = pTACHE_ID AND STATUT = 1),
        STATUTS_WARNING = (SELECT COUNT(LOG_ID) FROM TACHE_LOG_TMP WHERE TACHE_ID = pTACHE_ID AND STATUT = 2), 
        STATUTS_ERREUR = (SELECT COUNT(LOG_ID) FROM TACHE_LOG_TMP WHERE TACHE_ID = pTACHE_ID AND STATUT = 3) 
	WHERE TACHE_ID = pTACHE_ID;
    COMMIT;
END UPDATE_TACHE_STATUTS;
