##
VARSYS_USR
=SQL=
CREATE OR REPLACE VIEW VARSYS_USR AS
SELECT
    U.LOGIN AS LOGIN_KEY,
    U.CODVAR AS CODVAR_KEY,
    U.LOGIN,
    S.MODULE,
    U.CODVAR,
    U.VALVAR_PERSO AS VALVAR,
    S.DESCRIPTION,
    S.TYPVAR,
    S.BLOQUE
FROM SYS_VARSYS_USR U
LEFT JOIN (
    SELECT MODULE,CODVAR,VALVAR,DESCRIPTION,TYPVAR,BLOQUE FROM VARSYS_CLIENT
    UNION ALL
    SELECT MODULE,CODVAR,VALVAR,DESCRIPTION,TYPVAR,BLOQUE FROM VARSYS_MODELE WHERE (MODULE,CODVAR) NOT IN (
        SELECT MODULE,CODVAR FROM VARSYS_CLIENT
    )
) S ON S.CODVAR = U.CODVAR
