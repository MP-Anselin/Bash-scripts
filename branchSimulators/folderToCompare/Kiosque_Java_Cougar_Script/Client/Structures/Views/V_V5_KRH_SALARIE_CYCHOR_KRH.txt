##
V_V5_KRH_SALARIE_CYCHOR_KRH
=SQL=
CREATE OR REPLACE VIEW V_V5_KRH_SALARIE_CYCHOR_KRH ("ID_SALARIE_CYCHOR_KRH","MATRICULE","ID_CYCLE_KRH","ID_HORAIRE_KRH","DATE_DEBUT","DATE_FIN","DEBUT_CYCLE","DEFAULT_AFFECTATION") AS 
select 1 as ID_SALARIE_CYCHOR_KRH, MATRICULE, ID_CYCLE_KRH, ID_HORAIRE_KRH, DATE_DEBUT_CYCLOR as DATE_DEBUT, null as DATE_FIN, DEBUT_CYCLE, 1 as DEFAULT_AFFECTATION
from V_V5_KRH_SALARIE_USER
where MATRICULE not in (select distinct(MATRICULE) from T_V5_KRH_SALARIE_CYCHOR_KRH)
and (ID_CYCLE_KRH is not null or ID_HORAIRE_KRH is not null)
union
select ID_SALARIE_CYCHOR_KRH, MATRICULE, ID_CYCLE_KRH, ID_HORAIRE_KRH, DATE_DEBUT, DATE_FIN, DEBUT_CYCLE, 0 as DEFAULT_AFFECTATION
from T_V5_KRH_SALARIE_CYCHOR_KRH
