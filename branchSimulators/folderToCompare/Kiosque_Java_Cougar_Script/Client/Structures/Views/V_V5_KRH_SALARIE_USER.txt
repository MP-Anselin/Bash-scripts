##
V_V5_KRH_SALARIE_USER
=SQL=
CREATE OR REPLACE VIEW V_V5_KRH_SALARIE_USER ("IS_SORTI", "CODE_CONTRAT", "CODE_SEGMENT", "CODE_CATEGORIE", "CODE_CATEGORIE_PRO", "CODE_REGIME", "CODE_OTT", "SALAIRE_HORAIRE_FP", "SALAIRE_HORAIRE_HTT", "CONGES_OUVRABLE_PRIS", "CONGES_OUVRABLE_PRIS_SIMULE", "DATE_CUMUL_NET_FISCAL", "CUMUL_NET_FISCAL", "CUMUL_NET_FISCAL_ANNEE_PREC", "HORS_PAIE", "CODE_HORAIRE", "CODE_CLASSE_HORAIRE", "TYPEGTA", "TAUX_ALLOCATION_FORMATION", "CODE_MOTIF_EVT_ENT", "LIB_MOTIF_EVT_ENT", "DATE_DEBUT_EVT_ENT", "DATE_FIN_EVT_ENT", "CODE_POP_STATION", "DATE_FIN_PERIODE_ESSAI_1", "DATE_FIN_PERIODE_ESSAI_2", "DATE_RENOUV_PERIODE_ESSAI", "MATRICULE", "NOM", "PRENOM", "SEXE", "QUALITE", "DATE_NAISSANCE", "DATE_ENTREE", "DATE_ENTREE_GROUPE", "DATE_SORTIE", "DATE_ANCIENNETE_FICTIVE", "CODE_CONVENTION_COLLECTIVE", "CODE_ETABLISSEMENT", "LIBELLE_ETABLISSEMENT", "CODE_SOCIETE", "LIBELLE_SOCIETE", "CODE_SERVICE", "LIBELLE_SERVICE", "LIBELLE_EMPLOI", "CODE_EMPLOI", "CODE_METIER", "LIBELLE_METIER", "CODE_EMPLOI_INSEE", "LIBELLE_EMPLOI_INSEE", "LIBELLE_CODE_EMPLOI", "AGE", "ANCIENNETE", "CODE_AFFECTATION", "GTAWEB_PROFIL_UTILISATEUR", "GTAWEB_PROFIL_MANAGER", "GTAWEB_PROFIL_EXPERT", "ACCUEILDRTEXT", "ACCUEILGCHEXT", "ACTEUR_INDIRECT_ENTR", "ACTEUR_INDIRECT_FORM", "ACTEUR_INDIRECT_TAL", "ADRESSE_SITE", "CORRESPONDANT_GTAWEB", "CORRESPONDANT_PAIE", "DATE_DEBUT_CYCLOR", "DEBUT_CYCLE", "DELAI_SUPPR_EMAIL_LU", "DESCRIPTION_SITE", "DIRECTEUR_RH_ENTR", "DIRECTEUR_RH_FORM", "DIRECTEUR_RH_TAL", "EMAIL_FROM", "EMAIL_TITRE", "EMAIL_VERIF", "EXPERT_ENTR", "EXPERT_FORM", "EXPERT_GTAWEB", "EXPERT_PAIE", "EXPERT_SECURITE", "EXPERT_TAL", "GESTIONNAIRE_ATTESTATION", "GESTIONNAIRE_ENTR", "GESTIONNAIRE_FORM", "GESTIONNAIRE_GTAWEB", "GESTIONNAIRE_PAIE", "GESTIONNAIRE_TAL", "ID_ATTESTATION_SITE", "ID_CYCLE_KRH", "ID_HORAIRE_KRH", "ID_MESSAGE_C1", "ID_MESSAGE_C2", "ID_MESSAGE_G1", "ID_MESSAGE_G1_EXP", "ID_MESSAGE_G1_RESP", "ID_MESSAGE_G2", "ID_MESSAGE_G2_EXP", "ID_MESSAGE_G2_RESP", "LANGUE", "LOGOEXT", "MATRICULE_PAIE", "MENUEXT", "OPT_AFFICHAGE_ARBRES", "OPT_ATTEST", "OPT_BULLETIN", "OPT_DONNEESPERSOS", "OPT_KRH_COMP_RESP", "OPT_KRH_ENTR", "OPT_KRH_ENTR_DT_NO_BILF", "OPT_KRH_ENTR_FICHE_INDIV", "OPT_KRH_ENTR_MISSION", "OPT_KRH_FORM", "OPT_KRH_FORM_DELAI_INSC", "OPT_KRH_FORM_DELAI_SUPPR_INSC", "OPT_KRH_FORM_DEMANDE_COLL", "OPT_KRH_FORM_DEMANDE_COLL_RESP", "OPT_KRH_FORM_DEMANDE_RESP", "OPT_KRH_FORM_DT_NO_EVAL_CHAUD", "OPT_KRH_FORM_DT_NO_EVAL_FROID", "OPT_KRH_FORM_INSCRIPTION_COLL", "OPT_KRH_FORM_INSCRIPTION_RESP", "OPT_KRH_FORM_NBJRS_EVAL_FROID", "OPT_KRH_GTAWEB", "OPT_KRH_PAIE", "OPT_KRH_PAIE_ABS_AUTODECLA", "OPT_KRH_PAIE_ABS_AUTODECLA_COM", "OPT_KRH_PAIE_ABS_AUTODECLA_CP", "OPT_KRH_PLANNINGEQUIPE_MASK", "OPT_KRH_TAL", "OPT_PARTAGEPLANNING", "OPT_PLANNINGEQUIPE", "RESPONSABLE_ENTR", "RESPONSABLE_FORM", "RESPONSABLE_GTAWEB", "RESPONSABLE_PAIE", "RESPONSABLE_RH_ENTR", "RESPONSABLE_RH_FORM", "RESPONSABLE_RH_TAL", "RESPONSABLE_TAL", "RETENTION_FICHIER", "STYLEEXT", "SUPERIEUR_HIERARCHIQUE", "TITRE_SITE", "USEMOD_COLLABORATEUR", "USEMOD_EXPERT", "USEMOD_MANAGER", "DATE_CREATION", "DATE_CREATION_ANNUAIRE", "DATE_MODIF", "DEFAULT_ROLE", "EMAIL", "EST_ACTEUR_INDIRECT_ENTR", "EST_ACTEUR_INDIRECT_FORM", "EST_ACTEUR_INDIRECT_TAL", "EST_AUTOVALIDE_PAIE", "EST_CORRESPONDANT_GTAWEB", "EST_CORRESPONDANT_PAIE", "EST_DIRECTEUR_RH_ENTR", "EST_DIRECTEUR_RH_FORM", "EST_DIRECTEUR_RH_TAL", "EST_EXPERT_ENTR", "EST_EXPERT_FORM", "EST_EXPERT_GTAWEB", "EST_EXPERT_PAIE", "EST_EXPERT_SECURITE", "EST_EXPERT_TAL", "EST_GESTIONNAIRE_ATTESTATION", "EST_GESTIONNAIRE_ENTR", "EST_GESTIONNAIRE_FORM", "EST_GESTIONNAIRE_GTAWEB", "EST_GESTIONNAIRE_PAIE", "EST_GESTIONNAIRE_TAL", "EST_RESPONSABLE", "EST_RESPONSABLE_ENTR", "EST_RESPONSABLE_FORM", "EST_RESPONSABLE_GTAWEB", "EST_RESPONSABLE_PAIE", "EST_RESPONSABLE_RH_ENTR", "EST_RESPONSABLE_RH_FORM", "EST_RESPONSABLE_RH_TAL", "EST_RESPONSABLE_TAL", "EST_UTILISATEUR", "EST_UTILISATEUR_ENTR", "EST_UTILISATEUR_FORM", "EST_UTILISATEUR_GTAWEB", "EST_UTILISATEUR_PAIE", "EST_UTILISATEUR_TAL", "HAS_CREDENTIALS_NOTIF", "ID_IDENTITE_FORMAT_INLINE", "ID_IDENTITE_FORMAT_TABLE", "MSG_DELAI_RETENTION_EMAIL", "MSG_DELAI_SUPPR_EMAIL", "NB_LIGNES_PAR_PAGE", "OPT_EMAIL_HTML", "OPT_MODE_MENU", "OPT_MODIF_EMAIL_COLL", "OPT_MVT_MENU", "OPT_RETENTION_EMAIL", "RECALCUL", "RETENTION_FILTRES", "SELECT_ROLE_OPTION", "STATUT_ANNUAIRE") AS 
  select  /*+ NO_USE_NL(s) index(p, PK_V5_KRH_PROFIL_USER)*/ 
 case when DATE_SORTIE is not null and DATE_SORTIE < trunc(sysdate) then 1 else 0 end as IS_SORTI 
, s.CODE_CONTRAT
, s.CODE_SEGMENT
, s.CODE_CATEGORIE
, s.CODE_CATEGORIE_PRO
, s.CODE_REGIME
, s.CODE_OTT
, s.SALAIRE_HORAIRE_FP
, s.SALAIRE_HORAIRE_HTT
, s.CONGES_OUVRABLE_PRIS
, s.CONGES_OUVRABLE_PRIS_SIMULE
, s.DATE_CUMUL_NET_FISCAL
, s.CUMUL_NET_FISCAL
, s.CUMUL_NET_FISCAL_ANNEE_PREC
, s.HORS_PAIE
, s.CODE_HORAIRE
, s.CODE_CLASSE_HORAIRE
, s.TYPEGTA
, s.TAUX_ALLOCATION_FORMATION
, s.CODE_MOTIF_EVT_ENT
, s.LIB_MOTIF_EVT_ENT
, s.DATE_DEBUT_EVT_ENT
, s.DATE_FIN_EVT_ENT
, s.CODE_POP_STATION
, s.DATE_FIN_PERIODE_ESSAI_1
, s.DATE_FIN_PERIODE_ESSAI_2
, s.DATE_RENOUV_PERIODE_ESSAI
, s.MATRICULE
, s.NOM
, s.PRENOM
, s.SEXE
, s.QUALITE
, s.DATE_NAISSANCE
, s.DATE_ENTREE
, s.DATE_ENTREE_GROUPE
, s.DATE_SORTIE
, s.DATE_ANCIENNETE_FICTIVE
, s.CODE_CONVENTION_COLLECTIVE
, s.CODE_ETABLISSEMENT
, s.LIBELLE_ETABLISSEMENT
, s.CODE_SOCIETE
, s.LIBELLE_SOCIETE
, s.CODE_SERVICE
, s.LIBELLE_SERVICE
, s.LIBELLE_EMPLOI
, s.CODE_EMPLOI
, s.CODE_METIER
, s.LIBELLE_METIER
, s.CODE_EMPLOI_INSEE
, s.LIBELLE_EMPLOI_INSEE
, s.LIBELLE_CODE_EMPLOI
, months_between(sysdate, nvl(DATE_NAISSANCE, sysdate))/12 as AGE 
, months_between(sysdate, nvl(DATE_ANCIENNETE_FICTIVE, sysdate))/12 as ANCIENNETE 
, CODE_AFFECTATION_CALCULE AS CODE_AFFECTATION 
, case when u.EST_UTILISATEUR_GTAWEB = 1 then NVL(u.GTAWEB_PROFIL_UTILISATEUR, p.GTAWEB_PROFIL_UTILISATEUR) else null end as GTAWEB_PROFIL_UTILISATEUR
, case when u.EST_RESPONSABLE_GTAWEB = 1 then NVL(u.GTAWEB_PROFIL_MANAGER, p.GTAWEB_PROFIL_MANAGER) else null end as GTAWEB_PROFIL_MANAGER
, case when u.EST_EXPERT_GTAWEB = 1 then NVL(u.GTAWEB_PROFIL_EXPERT, p.GTAWEB_PROFIL_EXPERT) else null end as GTAWEB_PROFIL_EXPERT
, ACCUEILDRTEXT
, ACCUEILGCHEXT
, NVL(u.ACTEUR_INDIRECT_ENTR, p.ACTEUR_INDIRECT_ENTR) as ACTEUR_INDIRECT_ENTR
, NVL(u.ACTEUR_INDIRECT_FORM, p.ACTEUR_INDIRECT_FORM) as ACTEUR_INDIRECT_FORM
, NVL(u.ACTEUR_INDIRECT_TAL, p.ACTEUR_INDIRECT_TAL) as ACTEUR_INDIRECT_TAL
, ADRESSE_SITE
, NVL(u.CORRESPONDANT_GTAWEB, p.CORRESPONDANT_GTAWEB) as CORRESPONDANT_GTAWEB
, NVL(u.CORRESPONDANT_PAIE, p.CORRESPONDANT_PAIE) as CORRESPONDANT_PAIE
, DATE_DEBUT_CYCLOR
, DEBUT_CYCLE
, DELAI_SUPPR_EMAIL_LU
, DESCRIPTION_SITE
, NVL(u.DIRECTEUR_RH_ENTR, p.DIRECTEUR_RH_ENTR) as DIRECTEUR_RH_ENTR
, NVL(u.DIRECTEUR_RH_FORM, p.DIRECTEUR_RH_FORM) as DIRECTEUR_RH_FORM
, NVL(u.DIRECTEUR_RH_TAL, p.DIRECTEUR_RH_TAL) as DIRECTEUR_RH_TAL
, EMAIL_FROM
, EMAIL_TITRE
, EMAIL_VERIF
, NVL(u.EXPERT_ENTR, p.EXPERT_ENTR) as EXPERT_ENTR
, NVL(u.EXPERT_FORM, p.EXPERT_FORM) as EXPERT_FORM
, NVL(u.EXPERT_GTAWEB, p.EXPERT_GTAWEB) as EXPERT_GTAWEB
, NVL(u.EXPERT_PAIE, p.EXPERT_PAIE) as EXPERT_PAIE
, EXPERT_SECURITE
, NVL(u.EXPERT_TAL, p.EXPERT_TAL) as EXPERT_TAL
, NVL(u.GESTIONNAIRE_ATTESTATION, p.GESTIONNAIRE_ATTESTATION) as GESTIONNAIRE_ATTESTATION
, NVL(u.GESTIONNAIRE_ENTR, p.GESTIONNAIRE_ENTR) as GESTIONNAIRE_ENTR
, NVL(u.GESTIONNAIRE_FORM, p.GESTIONNAIRE_FORM) as GESTIONNAIRE_FORM
, NVL(u.GESTIONNAIRE_GTAWEB, p.GESTIONNAIRE_GTAWEB) as GESTIONNAIRE_GTAWEB
, NVL(u.GESTIONNAIRE_PAIE, p.GESTIONNAIRE_PAIE) as GESTIONNAIRE_PAIE
, NVL(u.GESTIONNAIRE_TAL, p.GESTIONNAIRE_TAL) as GESTIONNAIRE_TAL
, ID_ATTESTATION_SITE
, ID_CYCLE_KRH
, ID_HORAIRE_KRH
, ID_MESSAGE_C1
, ID_MESSAGE_C2
, ID_MESSAGE_G1
, ID_MESSAGE_G1_EXP
, ID_MESSAGE_G1_RESP
, ID_MESSAGE_G2
, ID_MESSAGE_G2_EXP
, ID_MESSAGE_G2_RESP
, NVL(u.LANGUE, p.LANGUE) as LANGUE
, LOGOEXT
, MATRICULE_PAIE
, MENUEXT
, OPT_AFFICHAGE_ARBRES
, OPT_ATTEST
, OPT_BULLETIN
, NVL(u.OPT_DONNEESPERSOS, p.OPT_DONNEESPERSOS) as OPT_DONNEESPERSOS
, OPT_KRH_COMP_RESP
, OPT_KRH_ENTR
, OPT_KRH_ENTR_DT_NO_BILF
, OPT_KRH_ENTR_FICHE_INDIV
, OPT_KRH_ENTR_MISSION
, OPT_KRH_FORM
, OPT_KRH_FORM_DELAI_INSC
, OPT_KRH_FORM_DELAI_SUPPR_INSC
, OPT_KRH_FORM_DEMANDE_COLL
, OPT_KRH_FORM_DEMANDE_COLL_RESP
, OPT_KRH_FORM_DEMANDE_RESP
, OPT_KRH_FORM_DT_NO_EVAL_CHAUD
, OPT_KRH_FORM_DT_NO_EVAL_FROID
, OPT_KRH_FORM_INSCRIPTION_COLL
, OPT_KRH_FORM_INSCRIPTION_RESP
, OPT_KRH_FORM_NBJRS_EVAL_FROID
, OPT_KRH_GTAWEB
, OPT_KRH_PAIE
, OPT_KRH_PAIE_ABS_AUTODECLA
, OPT_KRH_PAIE_ABS_AUTODECLA_COM
, OPT_KRH_PAIE_ABS_AUTODECLA_CP
, OPT_KRH_PLANNINGEQUIPE_MASK
, OPT_KRH_TAL
, OPT_PARTAGEPLANNING
, OPT_PLANNINGEQUIPE
, NVL(u.RESPONSABLE_ENTR, p.RESPONSABLE_ENTR) as RESPONSABLE_ENTR
, NVL(u.RESPONSABLE_FORM, p.RESPONSABLE_FORM) as RESPONSABLE_FORM
, NVL(u.RESPONSABLE_GTAWEB, p.RESPONSABLE_GTAWEB) as RESPONSABLE_GTAWEB
, NVL(u.RESPONSABLE_PAIE, p.RESPONSABLE_PAIE) as RESPONSABLE_PAIE
, NVL(u.RESPONSABLE_RH_ENTR, p.RESPONSABLE_RH_ENTR) as RESPONSABLE_RH_ENTR
, NVL(u.RESPONSABLE_RH_FORM, p.RESPONSABLE_RH_FORM) as RESPONSABLE_RH_FORM
, NVL(u.RESPONSABLE_RH_TAL, p.RESPONSABLE_RH_TAL) as RESPONSABLE_RH_TAL
, NVL(u.RESPONSABLE_TAL, p.RESPONSABLE_TAL) as RESPONSABLE_TAL
, RETENTION_FICHIER
, STYLEEXT
, NVL(u.SUPERIEUR_HIERARCHIQUE, p.SUPERIEUR_HIERARCHIQUE) as SUPERIEUR_HIERARCHIQUE
, TITRE_SITE
, NVL(u.USEMOD_COLLABORATEUR, p.USEMOD_COLLABORATEUR) as USEMOD_COLLABORATEUR
, NVL(u.USEMOD_EXPERT, p.USEMOD_EXPERT) as USEMOD_EXPERT
, NVL(u.USEMOD_MANAGER, p.USEMOD_MANAGER) as USEMOD_MANAGER
, DATE_CREATION
, DATE_CREATION_ANNUAIRE
, DATE_MODIF
, DEFAULT_ROLE
, EMAIL
, NVL(EST_ACTEUR_INDIRECT_ENTR, 0) as EST_ACTEUR_INDIRECT_ENTR
, NVL(EST_ACTEUR_INDIRECT_FORM, 0) as EST_ACTEUR_INDIRECT_FORM
, NVL(EST_ACTEUR_INDIRECT_TAL, 0) as EST_ACTEUR_INDIRECT_TAL
, NVL(EST_AUTOVALIDE_PAIE, 0) as EST_AUTOVALIDE_PAIE
, NVL(EST_CORRESPONDANT_GTAWEB, 0) as EST_CORRESPONDANT_GTAWEB
, NVL(EST_CORRESPONDANT_PAIE, 0) as EST_CORRESPONDANT_PAIE
, NVL(EST_DIRECTEUR_RH_ENTR, 0) as EST_DIRECTEUR_RH_ENTR
, NVL(EST_DIRECTEUR_RH_FORM, 0) as EST_DIRECTEUR_RH_FORM
, NVL(EST_DIRECTEUR_RH_TAL, 0) as EST_DIRECTEUR_RH_TAL
, NVL(EST_EXPERT_ENTR, 0) as EST_EXPERT_ENTR
, NVL(EST_EXPERT_FORM, 0) as EST_EXPERT_FORM
, NVL(EST_EXPERT_GTAWEB, 0) as EST_EXPERT_GTAWEB
, NVL(EST_EXPERT_PAIE, 0) as EST_EXPERT_PAIE
, NVL(EST_EXPERT_SECURITE, 0) as EST_EXPERT_SECURITE
, NVL(EST_EXPERT_TAL, 0) as EST_EXPERT_TAL
, NVL(EST_GESTIONNAIRE_ATTESTATION, 0) as EST_GESTIONNAIRE_ATTESTATION
, NVL(EST_GESTIONNAIRE_ENTR, 0) as EST_GESTIONNAIRE_ENTR
, NVL(EST_GESTIONNAIRE_FORM, 0) as EST_GESTIONNAIRE_FORM
, NVL(EST_GESTIONNAIRE_GTAWEB, 0) as EST_GESTIONNAIRE_GTAWEB
, NVL(EST_GESTIONNAIRE_PAIE, 0) as EST_GESTIONNAIRE_PAIE
, NVL(EST_GESTIONNAIRE_TAL, 0) as EST_GESTIONNAIRE_TAL
, NVL(EST_RESPONSABLE, 0) as EST_RESPONSABLE
, NVL(EST_RESPONSABLE_ENTR, 0) as EST_RESPONSABLE_ENTR
, NVL(EST_RESPONSABLE_FORM, 0) as EST_RESPONSABLE_FORM
, NVL(EST_RESPONSABLE_GTAWEB, 0) as EST_RESPONSABLE_GTAWEB
, NVL(EST_RESPONSABLE_PAIE, 0) as EST_RESPONSABLE_PAIE
, NVL(EST_RESPONSABLE_RH_ENTR, 0) as EST_RESPONSABLE_RH_ENTR
, NVL(EST_RESPONSABLE_RH_FORM, 0) as EST_RESPONSABLE_RH_FORM
, NVL(EST_RESPONSABLE_RH_TAL, 0) as EST_RESPONSABLE_RH_TAL
, NVL(EST_RESPONSABLE_TAL, 0) as EST_RESPONSABLE_TAL
, NVL(EST_UTILISATEUR, 0) as EST_UTILISATEUR
, NVL(EST_UTILISATEUR_ENTR, 0) as EST_UTILISATEUR_ENTR
, NVL(EST_UTILISATEUR_FORM, 0) as EST_UTILISATEUR_FORM
, NVL(EST_UTILISATEUR_GTAWEB, 0) as EST_UTILISATEUR_GTAWEB
, NVL(EST_UTILISATEUR_PAIE, 0) as EST_UTILISATEUR_PAIE
, NVL(EST_UTILISATEUR_TAL, 0) as EST_UTILISATEUR_TAL
, HAS_CREDENTIALS_NOTIF
, ID_IDENTITE_FORMAT_INLINE
, ID_IDENTITE_FORMAT_TABLE
, MSG_DELAI_RETENTION_EMAIL
, MSG_DELAI_SUPPR_EMAIL
, NB_LIGNES_PAR_PAGE
, OPT_EMAIL_HTML
, OPT_MODE_MENU
, OPT_MODIF_EMAIL_COLL
, OPT_MVT_MENU
, OPT_RETENTION_EMAIL
, RECALCUL
, RETENTION_FILTRES
, SELECT_ROLE_OPTION
, STATUT_ANNUAIRE
 from T_V5_KRH_PROFIL_USER p, T_V5_KRH_USER u, T_V5_KRH_SALARIE s
 where s.MATRICULE = u.MATRICULE
 and p.MATRICULE (+) = s.MATRICULE
